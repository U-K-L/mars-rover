<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>APM:Libraries: libraries/GCS_MAVLink/GCS_Common.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">APM:Libraries
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_bc0718b08fb2015b8e59c47b2805f60c.html">libraries</a></li><li class="navelem"><a class="el" href="dir_be870cb78c6e1bc08f9e4388e1828b4d.html">GCS_MAVLink</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">GCS_Common.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="GCS__Common_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">  Common GCS MAVLink functions for all vehicle types</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">   This program is free software: you can redistribute it and/or modify</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">   it under the terms of the GNU General Public License as published by</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">   the Free Software Foundation, either version 3 of the License, or</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">   (at your option) any later version.</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">   This program is distributed in the hope that it will be useful,</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">   GNU General Public License for more details.</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">   You should have received a copy of the GNU General Public License</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">   along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="AP__AHRS_8h.html">AP_AHRS/AP_AHRS.h</a>&gt;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="AP__HAL_8h.html">AP_HAL/AP_HAL.h</a>&gt;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="AP__Arming_8h.html">AP_Arming/AP_Arming.h</a>&gt;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="AP__InternalError_8h.html">AP_InternalError/AP_InternalError.h</a>&gt;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="AP__Logger_8h.html">AP_Logger/AP_Logger.h</a>&gt;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="AP__OpticalFlow_8h.html">AP_OpticalFlow/AP_OpticalFlow.h</a>&gt;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="AP__Vehicle_8h.html">AP_Vehicle/AP_Vehicle.h</a>&gt;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="RangeFinder__Backend_8h.html">AP_RangeFinder/RangeFinder_Backend.h</a>&gt;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="AP__Airspeed_8h.html">AP_Airspeed/AP_Airspeed.h</a>&gt;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="AP__Camera_8h.html">AP_Camera/AP_Camera.h</a>&gt;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="AP__Gripper_8h.html">AP_Gripper/AP_Gripper.h</a>&gt;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="AP__BLHeli_8h.html">AP_BLHeli/AP_BLHeli.h</a>&gt;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="AP__RSSI_8h.html">AP_RSSI/AP_RSSI.h</a>&gt;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="AP__RTC_8h.html">AP_RTC/AP_RTC.h</a>&gt;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="AP__Scheduler_8h.html">AP_Scheduler/AP_Scheduler.h</a>&gt;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="AP__SerialManager_8h.html">AP_SerialManager/AP_SerialManager.h</a>&gt;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="AP__Mount_8h.html">AP_Mount/AP_Mount.h</a>&gt;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="AP__FWVersion_8h.html">AP_Common/AP_FWVersion.h</a>&gt;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="AP__VisualOdom_8h.html">AP_VisualOdom/AP_VisualOdom.h</a>&gt;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="AP__OpticalFlow_2OpticalFlow_8h.html">AP_OpticalFlow/OpticalFlow.h</a>&gt;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="AP__Baro_8h.html">AP_Baro/AP_Baro.h</a>&gt;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="GCS_8h.html">GCS.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="stdio_8h.html">stdio.h</a>&gt;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#if HAL_RCINPUT_WITH_AP_RADIO</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="AP__Radio_8h.html">AP_Radio/AP_Radio.h</a>&gt;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="AP__BoardConfig_8h.html">AP_BoardConfig/AP_BoardConfig.h</a>&gt;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#if CONFIG_HAL_BOARD == HAL_BOARD_SITL</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="SITL_8h.html">SITL/SITL.h</a>&gt;</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#if HAL_WITH_UAVCAN</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">  #include &lt;<a class="code" href="AP__BoardConfig__CAN_8h.html">AP_BoardConfig/AP_BoardConfig_CAN.h</a>&gt;</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">  #include &lt;<a class="code" href="AP__Common_8h.html">AP_Common/AP_Common.h</a>&gt;</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="comment">// To be replaced with macro saying if KDECAN library is included</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">  #if APM_BUILD_TYPE(APM_BUILD_ArduCopter) || APM_BUILD_TYPE(APM_BUILD_ArduPlane) || APM_BUILD_TYPE(APM_BUILD_ArduSub)</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">    #include &lt;<a class="code" href="AP__KDECAN_8h.html">AP_KDECAN/AP_KDECAN.h</a>&gt;</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">  #endif</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">  #include &lt;<a class="code" href="AP__ToshibaCAN_8h.html">AP_ToshibaCAN/AP_ToshibaCAN.h</a>&gt;</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="AP__BattMonitor_8h.html">AP_BattMonitor/AP_BattMonitor.h</a>&gt;</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="AP__GPS_8h.html">AP_GPS/AP_GPS.h</a>&gt;</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> <a class="code" href="classAP__HAL_1_1HAL.html">AP_HAL::HAL</a>&amp; <a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;uint32_t <a class="code" href="structGCS__MAVLINK.html#a0f58691781024f0cf939e7538d99bff0">GCS_MAVLINK::last_radio_status_remrssi_ms</a>;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;uint8_t <a class="code" href="structGCS__MAVLINK.html#a9d41c619b9282f98439533324050c99c">GCS_MAVLINK::mavlink_active</a> = 0;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;uint8_t <a class="code" href="structGCS__MAVLINK.html#a615db40b8b5652946110bd9a8f757f9c">GCS_MAVLINK::chan_is_streaming</a> = 0;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;uint32_t <a class="code" href="structGCS__MAVLINK.html#ac0504e2a8cc5e3c69c531c20557815b3">GCS_MAVLINK::reserve_param_space_start_ms</a>;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">// private channels are ones used for point-to-point protocols, and</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">// don&#39;t get broadcasts or fwded packets</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;uint8_t <a class="code" href="structGCS__MAVLINK.html#affbf86ced2958539d0ccc372f9fba3d6">GCS_MAVLINK::mavlink_private</a> = 0;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<a class="code" href="classGCS.html">GCS</a> *<a class="code" href="classGCS.html#aa7c87cc985a830a5c5ac16d5a84d1a31">GCS::_singleton</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a88dabe4da3b32dca5e34beb438f8be65">   79</a></span>&#160;<a class="code" href="structGCS__MAVLINK.html#a88dabe4da3b32dca5e34beb438f8be65">GCS_MAVLINK::GCS_MAVLINK</a>()</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;{</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <a class="code" href="classAP__Param.html#a5f6dcfce1c0a79cf5bd81283e22f3201">AP_Param::setup_object_defaults</a>(<span class="keyword">this</span>, <a class="code" href="structGCS__MAVLINK.html#a71817cd4dcabb501c2198d6d481a9691">var_info</a>);</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;}</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#afaf4b53bc2f64b4fb6bd1fe729b2cef3">   85</a></span>&#160;<a class="code" href="structGCS__MAVLINK.html#afaf4b53bc2f64b4fb6bd1fe729b2cef3">GCS_MAVLINK::init</a>(<a class="code" href="classAP__HAL_1_1UARTDriver.html">AP_HAL::UARTDriver</a> *port, mavlink_channel_t mav_chan)</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;{</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="GCS__MAVLink_8h.html#a17ee8d1ce05b7d160ccc6a78b92b774f">valid_channel</a>(mav_chan)) {</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    }</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <a class="code" href="structGCS__MAVLINK.html#a534b55e4a0350601fbdc54818a6dedbe">_port</a> = port;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a> = mav_chan;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <a class="code" href="GCS__MAVLink_8cpp.html#a720a8c1ac96dc598d2715e7f567c9376">mavlink_comm_port</a>[<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>] = <a class="code" href="structGCS__MAVLINK.html#a534b55e4a0350601fbdc54818a6dedbe">_port</a>;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <a class="code" href="structGCS__MAVLINK.html#ac8eaa55df74e0b8196a0ab7bd7b853c1">_queued_parameter</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <a class="code" href="stdio_8h.html#a37c1e8ce8a2b411fa666dc33972a2cec">snprintf</a>(<a class="code" href="structGCS__MAVLINK.html#a27ba0086b1a7777605c001ec7e450427">_perf_packet_name</a>, <span class="keyword">sizeof</span>(<a class="code" href="structGCS__MAVLINK.html#a27ba0086b1a7777605c001ec7e450427">_perf_packet_name</a>), <span class="stringliteral">&quot;GCS_Packet_%u&quot;</span>, <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>);</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <a class="code" href="structGCS__MAVLINK.html#aa33bf3ed989c78eba9e4d85366ef1d2e">_perf_packet</a> = <a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#a9337a60383f4264fa96a20dbe43a4e2e">util</a>-&gt;<a class="code" href="classAP__HAL_1_1Util.html#a6b7f7ba5272a4a2f7ae352fe35af90e1">perf_alloc</a>(<a class="code" href="classAP__HAL_1_1Util.html#a728035ef0889404b89a7bc05ab53818ea61efbe28519285a31c90582c6a36c6b1">AP_HAL::Util::PC_ELAPSED</a>, <a class="code" href="structGCS__MAVLINK.html#a27ba0086b1a7777605c001ec7e450427">_perf_packet_name</a>);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <a class="code" href="stdio_8h.html#a37c1e8ce8a2b411fa666dc33972a2cec">snprintf</a>(<a class="code" href="structGCS__MAVLINK.html#af6329e3fc9d20ee11c8a160bb8359e7f">_perf_update_name</a>, <span class="keyword">sizeof</span>(<a class="code" href="structGCS__MAVLINK.html#af6329e3fc9d20ee11c8a160bb8359e7f">_perf_update_name</a>), <span class="stringliteral">&quot;GCS_Update_%u&quot;</span>, <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <a class="code" href="structGCS__MAVLINK.html#acf70ad80c7031570ae4a4cc1bd4f3c31">_perf_update</a> = <a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#a9337a60383f4264fa96a20dbe43a4e2e">util</a>-&gt;<a class="code" href="classAP__HAL_1_1Util.html#a6b7f7ba5272a4a2f7ae352fe35af90e1">perf_alloc</a>(<a class="code" href="classAP__HAL_1_1Util.html#a728035ef0889404b89a7bc05ab53818ea61efbe28519285a31c90582c6a36c6b1">AP_HAL::Util::PC_ELAPSED</a>, <a class="code" href="structGCS__MAVLINK.html#af6329e3fc9d20ee11c8a160bb8359e7f">_perf_update_name</a>);</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <a class="code" href="structGCS__MAVLINK.html#ad9986225f7a93470e169576a38f3dd71">initialised</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;}</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">  setup a UART, handling begin() and init()</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a76ff239c882575a8255ace879a88980b">  111</a></span>&#160;<a class="code" href="structGCS__MAVLINK.html#a76ff239c882575a8255ace879a88980b">GCS_MAVLINK::setup_uart</a>(uint8_t <a class="code" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a>)</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;{</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="comment">// search for serial port</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keyword">const</span> <a class="code" href="classAP__SerialManager.html">AP_SerialManager</a>&amp; <a class="code" href="AHRS__Test_8cpp.html#a90ddf96040cbf0429052dafd4fa64c12">serial_manager</a> = <a class="code" href="namespaceAP.html#aa01135941499a6cbb5fc30403fc24c65">AP::serialmanager</a>();</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keyword">const</span> <a class="code" href="classAP__SerialManager.html#af95280ba50704a8adece62755cb348e7">AP_SerialManager::SerialProtocol</a> protocol = <a class="code" href="classAP__SerialManager.html#af95280ba50704a8adece62755cb348e7af12f66ae050fdddeb7344770948b871e">AP_SerialManager::SerialProtocol_MAVLink</a>;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <a class="code" href="classAP__HAL_1_1UARTDriver.html">AP_HAL::UARTDriver</a> *uart = <a class="code" href="AHRS__Test_8cpp.html#a90ddf96040cbf0429052dafd4fa64c12">serial_manager</a>.<a class="code" href="classAP__SerialManager.html#a58cb32ebb77d9fc18e4756d0270d1970">find_serial</a>(protocol, <a class="code" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a>);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordflow">if</span> (uart == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <span class="comment">// return immediately if not found</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    }</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="comment">// get associated mavlink channel</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    mavlink_channel_t mav_chan;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="AHRS__Test_8cpp.html#a90ddf96040cbf0429052dafd4fa64c12">serial_manager</a>.<a class="code" href="classAP__SerialManager.html#ac7f526a7c129f9d922e34b0bf3a2c457">get_mavlink_channel</a>(protocol, <a class="code" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a>, mav_chan)) {</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <span class="comment">// return immediately in unlikely case mavlink channel cannot be found</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    }</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">      Now try to cope with SiK radios that may be stuck in bootloader</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">      mode because CTS was held while powering on. This tells the</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">      bootloader to wait for a firmware. It affects any SiK radio with</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">      CTS connected that is externally powered. To cope we send 0x30</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">      0x20 at 115200 on startup, which tells the bootloader to reset</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">      and boot normally</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    uart-&gt;<a class="code" href="classAP__HAL_1_1UARTDriver.html#a2a83124757f6f8f6eb4d25b11c9cb97e">begin</a>(115200);</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <a class="code" href="classAP__HAL_1_1UARTDriver.html#acd5e319d580fe14755931d37b5d4deaf">AP_HAL::UARTDriver::flow_control</a> old_flow_control = uart-&gt;<a class="code" href="classAP__HAL_1_1UARTDriver.html#acb3d1e747568bdfdd996f06974b53aeb">get_flow_control</a>();</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    uart-&gt;<a class="code" href="classAP__HAL_1_1UARTDriver.html#ae831a0d75f4760267d444c522e1271a1">set_flow_control</a>(<a class="code" href="classAP__HAL_1_1UARTDriver.html#acd5e319d580fe14755931d37b5d4deafa67a3cf106c9c7c7d6e454a7a9610a7d8">AP_HAL::UARTDriver::FLOW_CONTROL_DISABLE</a>);</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">for</span> (uint8_t i=0; i&lt;3; i++) {</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#a94ab41309b1ff10b8b862b826e59c882">scheduler</a>-&gt;<a class="code" href="classAP__HAL_1_1Scheduler.html#ab3175e2e6223ccfe82f957e41cc12b26">delay</a>(1);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        uart-&gt;<a class="code" href="classAP__HAL_1_1BetterStream.html#a915cc01273d4b418c2fb2989fb31a508">write</a>(0x30);</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        uart-&gt;<a class="code" href="classAP__HAL_1_1BetterStream.html#a915cc01273d4b418c2fb2989fb31a508">write</a>(0x20);</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    }</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="comment">// since tcdrain() and TCSADRAIN may not be implemented...</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#a94ab41309b1ff10b8b862b826e59c882">scheduler</a>-&gt;<a class="code" href="classAP__HAL_1_1Scheduler.html#ab3175e2e6223ccfe82f957e41cc12b26">delay</a>(1);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    </div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    uart-&gt;<a class="code" href="classAP__HAL_1_1UARTDriver.html#ae831a0d75f4760267d444c522e1271a1">set_flow_control</a>(old_flow_control);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="comment">// now change back to desired baudrate</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    uart-&gt;<a class="code" href="classAP__HAL_1_1UARTDriver.html#a2a83124757f6f8f6eb4d25b11c9cb97e">begin</a>(<a class="code" href="AHRS__Test_8cpp.html#a90ddf96040cbf0429052dafd4fa64c12">serial_manager</a>.<a class="code" href="classAP__SerialManager.html#a5e363f0274897cdcf5a427d5bbe3eb51">find_baudrate</a>(protocol, <a class="code" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a>));</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="comment">// and init the gcs instance</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <a class="code" href="structGCS__MAVLINK.html#afaf4b53bc2f64b4fb6bd1fe729b2cef3">init</a>(uart, mav_chan);</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="classAP__SerialManager.html#af95280ba50704a8adece62755cb348e7">AP_SerialManager::SerialProtocol</a> mavlink_protocol = <a class="code" href="namespaceAP.html#aa01135941499a6cbb5fc30403fc24c65">AP::serialmanager</a>().<a class="code" href="classAP__SerialManager.html#aeec52d0317706a561feba321569f09a9">get_mavlink_protocol</a>(mav_chan);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    mavlink_status_t *status = mavlink_get_channel_status(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordflow">if</span> (status == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    }</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    </div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordflow">if</span> (mavlink_protocol == <a class="code" href="classAP__SerialManager.html#af95280ba50704a8adece62755cb348e7a0e4f0e3620bdb2bf2f9e79058a3c095b">AP_SerialManager::SerialProtocol_MAVLink2</a>) {</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <span class="comment">// load signing key</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#aa9db7093c9f7f44f6f2e8d4443d7778d">load_signing_key</a>();</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <span class="keywordflow">if</span> (status-&gt;signing == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            <span class="comment">// if signing is off start by sending MAVLink1.</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            status-&gt;flags |= MAVLINK_STATUS_FLAG_OUT_MAVLINK1;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        }</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (status) {</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="comment">// user has asked to only send MAVLink1</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        status-&gt;flags |= MAVLINK_STATUS_FLAG_OUT_MAVLINK1;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    }</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a> == MAVLINK_COMM_0) {</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="comment">// Always start with MAVLink1 on first port for now, to allow for recovery</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="comment">// after experiments with MAVLink2</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        status-&gt;flags |= MAVLINK_STATUS_FLAG_OUT_MAVLINK1;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    }</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;}</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="classMissionItemProtocol.html#af7af44856eb9316f160b1a6fbe22f263">  188</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMissionItemProtocol.html#af7af44856eb9316f160b1a6fbe22f263">MissionItemProtocol::queued_request_send</a>()</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;{</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classMissionItemProtocol.html#a80ae9862a352375154b98922c8c64bd5">receiving</a>) {</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    }</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classMissionItemProtocol.html#a6c42049687ff033895c71c94fd9b5e74">request_i</a> &gt; <a class="code" href="classMissionItemProtocol.html#af312b1e6bbfbb7569d4911794987a2b3">request_last</a>) {</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    }</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classMissionItemProtocol.html#ad5e2f0616260b53ffe638c67a33b6cb6">link</a> == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <a class="code" href="namespaceAP.html#afceb236ff617aaaa2b08afacd72532b0">AP::internalerror</a>().<a class="code" href="classAP__InternalError.html#ab34174ba770b976b39a18c2b23e854f2">error</a>(<a class="code" href="classAP__InternalError.html#a72019dd8c7db64b58a862f01ee8cbcf9a2eadaff2ad87b51c04f7af77a5fbb7e2">AP_InternalError::error_t::gcs_bad_missionprotocol_link</a>);</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    }</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    mavlink_msg_mission_request_send(</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <a class="code" href="classMissionItemProtocol.html#ad5e2f0616260b53ffe638c67a33b6cb6">link</a>-&gt;<a class="code" href="structGCS__MAVLINK.html#a38bdeec979d6dbc84c7ca09bafb5bc04">get_chan</a>(),</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <a class="code" href="classMissionItemProtocol.html#a4985b68aa93fa710429ad8ec9dde1984">dest_sysid</a>,</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <a class="code" href="classMissionItemProtocol.html#af1281432f3f97242df8821a79548b211">dest_compid</a>,</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <a class="code" href="classMissionItemProtocol.html#a6c42049687ff033895c71c94fd9b5e74">request_i</a>,</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <a class="code" href="classMissionItemProtocol.html#a6fbc4c50f6d6dc42d4ca7bae23a39bf4">mission_type</a>());</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <a class="code" href="classMissionItemProtocol.html#a16c007f154400b86f892c56eed21f4cc">timelast_request_ms</a> = <a class="code" href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a>();</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;}</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno"><a class="line" href="classMissionItemProtocol.html#a67284962b370e99cdde2e8b3a141f9d4">  209</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMissionItemProtocol.html#a67284962b370e99cdde2e8b3a141f9d4">MissionItemProtocol::update</a>()</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;{</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classMissionItemProtocol.html#a80ae9862a352375154b98922c8c64bd5">receiving</a>) {</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <span class="comment">// we don&#39;t need to do anything unless we&#39;re sending requests</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    }</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classMissionItemProtocol.html#ad5e2f0616260b53ffe638c67a33b6cb6">link</a> == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <a class="code" href="namespaceAP.html#afceb236ff617aaaa2b08afacd72532b0">AP::internalerror</a>().<a class="code" href="classAP__InternalError.html#ab34174ba770b976b39a18c2b23e854f2">error</a>(<a class="code" href="classAP__InternalError.html#a72019dd8c7db64b58a862f01ee8cbcf9a2eadaff2ad87b51c04f7af77a5fbb7e2">AP_InternalError::error_t::gcs_bad_missionprotocol_link</a>);</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    }</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="comment">// stop waypoint receiving if timeout</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keyword">const</span> uint32_t tnow = <a class="code" href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a>();</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordflow">if</span> (tnow - <a class="code" href="classMissionItemProtocol.html#a3c6d228d5f6dc89c95ac4916e234c5da">timelast_receive_ms</a> &gt; <a class="code" href="classMissionItemProtocol.html#a8b9f877cd987606c65875254387f892c">upload_timeout_ms</a>) {</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <a class="code" href="classMissionItemProtocol.html#a80ae9862a352375154b98922c8c64bd5">receiving</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <a class="code" href="classMissionItemProtocol.html#a57a903def01c5bcd0069f306d7656884">timeout</a>();</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <a class="code" href="classMissionItemProtocol.html#ad5e2f0616260b53ffe638c67a33b6cb6">link</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    }</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="comment">// resend request if we haven&#39;t gotten one:</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keyword">const</span> uint32_t wp_recv_timeout_ms = 1000U + (<a class="code" href="classMissionItemProtocol.html#ad5e2f0616260b53ffe638c67a33b6cb6">link</a>-&gt;<a class="code" href="structGCS__MAVLINK.html#af8df6e1b26c07af92493cb8e4761824f">get_stream_slowdown_ms</a>()*20);</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">if</span> (tnow - <a class="code" href="classMissionItemProtocol.html#a16c007f154400b86f892c56eed21f4cc">timelast_request_ms</a> &gt; wp_recv_timeout_ms) {</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <a class="code" href="classMissionItemProtocol.html#a16c007f154400b86f892c56eed21f4cc">timelast_request_ms</a> = tnow;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <a class="code" href="classMissionItemProtocol.html#ad5e2f0616260b53ffe638c67a33b6cb6">link</a>-&gt;<a class="code" href="structGCS__MAVLINK.html#a4902306dab46ff02b2296f99eb1f1c9c">send_message</a>(<a class="code" href="classMissionItemProtocol.html#a6f29a676bf0839e2e8387c8e0baf40af">next_item_ap_message_id</a>());</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    }</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;}</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno"><a class="line" href="classMissionItemProtocol.html#a0f57a2ceddc8d639f51e138c266179b8">  235</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMissionItemProtocol.html#a0f57a2ceddc8d639f51e138c266179b8">MissionItemProtocol::send_mission_ack</a>(<span class="keyword">const</span> mavlink_message_t &amp;msg,</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                                           MAV_MISSION_RESULT <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a>)<span class="keyword"> const</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classMissionItemProtocol.html#ad5e2f0616260b53ffe638c67a33b6cb6">link</a> == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <a class="code" href="namespaceAP.html#afceb236ff617aaaa2b08afacd72532b0">AP::internalerror</a>().<a class="code" href="classAP__InternalError.html#ab34174ba770b976b39a18c2b23e854f2">error</a>(<a class="code" href="classAP__InternalError.html#a72019dd8c7db64b58a862f01ee8cbcf9a2eadaff2ad87b51c04f7af77a5fbb7e2">AP_InternalError::error_t::gcs_bad_missionprotocol_link</a>);</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    }</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <a class="code" href="classMissionItemProtocol.html#a0f57a2ceddc8d639f51e138c266179b8">send_mission_ack</a>(*<a class="code" href="classMissionItemProtocol.html#ad5e2f0616260b53ffe638c67a33b6cb6">link</a>, msg, <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a>);</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;}</div><div class="line"><a name="l00244"></a><span class="lineno"><a class="line" href="classMissionItemProtocol.html#ab805d8022d3c1fde2ca1eb97d76dccd8">  244</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMissionItemProtocol.html#a0f57a2ceddc8d639f51e138c266179b8">MissionItemProtocol::send_mission_ack</a>(<span class="keyword">const</span> <a class="code" href="structGCS__MAVLINK.html">GCS_MAVLINK</a> &amp;_link,</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                                           <span class="keyword">const</span> mavlink_message_t &amp;msg,</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                                           MAV_MISSION_RESULT <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a>)<span class="keyword"> const</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    mavlink_msg_mission_ack_send(_link.<a class="code" href="structGCS__MAVLINK.html#a38bdeec979d6dbc84c7ca09bafb5bc04">get_chan</a>(),</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                                 msg.sysid,</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                                 msg.compid,</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                                 <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a>,</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                                 <a class="code" href="classMissionItemProtocol.html#a6fbc4c50f6d6dc42d4ca7bae23a39bf4">mission_type</a>());</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;}</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div><div class="line"><a name="l00255"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#af4e400a4a17773e5a8bbae3993911bf8">  255</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#af4e400a4a17773e5a8bbae3993911bf8">GCS_MAVLINK::send_meminfo</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;{</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordtype">unsigned</span> __brkval = 0;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    uint32_t memory = <a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#a9337a60383f4264fa96a20dbe43a4e2e">util</a>-&gt;<a class="code" href="classAP__HAL_1_1Util.html#a2a2e64f649d25593951054d44c0ed53b">available_memory</a>();</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    mavlink_msg_meminfo_send(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>, __brkval, <a class="code" href="AP__Math_8h.html#a321a91de43cfb2e95d40cde314d0a80f">MIN</a>(memory, 0xFFFFU), memory);</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;}</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">// report power supply status</span></div><div class="line"><a name="l00263"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a731179362dc1cb1bbd2fd77eec523d8b">  263</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a731179362dc1cb1bbd2fd77eec523d8b">GCS_MAVLINK::send_power_status</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;{</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="GCS__Common_8cpp.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a>().vehicle_initialised()) {</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="comment">// avoid unnecessary errors being reported to user</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    }</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    mavlink_msg_power_status_send(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                                  <a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#a48a758dbd587c916aa4f5ea5ae9521e4">analogin</a>-&gt;<a class="code" href="classAP__HAL_1_1AnalogIn.html#a84c87bc57f06182afc85725cafe22698">board_voltage</a>() * 1000,</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                                  <a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#a48a758dbd587c916aa4f5ea5ae9521e4">analogin</a>-&gt;<a class="code" href="classAP__HAL_1_1AnalogIn.html#aec5bbeb075072b2cc35d2301236c7f45">servorail_voltage</a>() * 1000,</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                                  <a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#a48a758dbd587c916aa4f5ea5ae9521e4">analogin</a>-&gt;<a class="code" href="classAP__HAL_1_1AnalogIn.html#ab607b3cdb6819195a05f728589ffaf29">power_status_flags</a>());</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;}</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div><div class="line"><a name="l00275"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#af61ae80fb30fc8bb0fbf7ede1e47dfb0">  275</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#acf29755bc5eab5ab6cb36b207426742f">GCS_MAVLINK::send_battery_status</a>(<span class="keyword">const</span> uint8_t <a class="code" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a>)<span class="keyword"> const</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="comment">// catch the battery backend not supporting the required number of cells</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    static_assert(<span class="keyword">sizeof</span>(<a class="code" href="structAP__BattMonitor_1_1cells.html">AP_BattMonitor::cells</a>) &gt;= (<span class="keyword">sizeof</span>(uint16_t) * MAVLINK_MSG_BATTERY_STATUS_FIELD_VOLTAGES_LEN),</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                  <span class="stringliteral">&quot;Not enough battery cells for the MAVLink message&quot;</span>);</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keyword">const</span> <a class="code" href="classAP__BattMonitor.html">AP_BattMonitor</a> &amp;<a class="code" href="namespaceAP.html#aac3bcb68bcccad29cc493b878aef055e">battery</a> = <a class="code" href="namespaceAP.html#aac3bcb68bcccad29cc493b878aef055e">AP::battery</a>();</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordtype">float</span> temp;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordtype">bool</span> got_temperature = <a class="code" href="namespaceAP.html#aac3bcb68bcccad29cc493b878aef055e">battery</a>.<a class="code" href="classAP__BattMonitor.html#ab75700ea712e5b083186925f233624bd">get_temperature</a>(temp, <a class="code" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a>);</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="comment">// ensure we always send a voltage estimate to the GCS, because not all battery monitors monitor individual cells</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="comment">// as a work around for this we create a set of fake cells to be used if the backend doesn&#39;t provide direct monitoring</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="comment">// the GCS can then recover the pack voltage by summing all non ignored cell values. Because this is looped we can</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="comment">// report a pack up to 655.34 V with this method</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <a class="code" href="structAP__BattMonitor_1_1cells.html">AP_BattMonitor::cells</a> fake_cells;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespaceAP.html#aac3bcb68bcccad29cc493b878aef055e">battery</a>.<a class="code" href="classAP__BattMonitor.html#a6f59b8616276c17074be483664923324">has_cell_voltages</a>(<a class="code" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a>)) {</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <span class="keywordtype">float</span> <a class="code" href="AP__BattMonitor__Bebop_8cpp.html#a47061fcae597f83f8a0a99d4b7b5a5c1">voltage</a> = <a class="code" href="namespaceAP.html#aac3bcb68bcccad29cc493b878aef055e">battery</a>.<a class="code" href="classAP__BattMonitor.html#a03394a700753687bbb87632743cc2bb3">voltage</a>(<a class="code" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a>) * 1e3f;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; MAVLINK_MSG_BATTERY_STATUS_FIELD_VOLTAGES_LEN; i++) {</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="AP__BattMonitor__Bebop_8cpp.html#a47061fcae597f83f8a0a99d4b7b5a5c1">voltage</a> &lt; 0.001<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>) {</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;              <span class="comment">// too small to send to the GCS, set it to the no cell value</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;              fake_cells.<a class="code" href="structAP__BattMonitor_1_1cells.html#a25780c82686237ebc5531d6a18df732f">cells</a>[i] = UINT16_MAX;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;          } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;              fake_cells.<a class="code" href="structAP__BattMonitor_1_1cells.html#a25780c82686237ebc5531d6a18df732f">cells</a>[i] = <a class="code" href="AP__Math_8h.html#a321a91de43cfb2e95d40cde314d0a80f">MIN</a>(<a class="code" href="AP__BattMonitor__Bebop_8cpp.html#a47061fcae597f83f8a0a99d4b7b5a5c1">voltage</a>, 65534.0<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>); <span class="comment">// Can&#39;t send more then UINT16_MAX - 1 in a cell</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;              <a class="code" href="AP__BattMonitor__Bebop_8cpp.html#a47061fcae597f83f8a0a99d4b7b5a5c1">voltage</a> -= 65534.0f;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;          }</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        }</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    }</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    mavlink_msg_battery_status_send(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                                    <a class="code" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a>, <span class="comment">// id</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                                    MAV_BATTERY_FUNCTION_UNKNOWN, <span class="comment">// function</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                                    MAV_BATTERY_TYPE_UNKNOWN, <span class="comment">// type</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                                    got_temperature ? ((int16_t) (temp * 100)) : INT16_MAX, <span class="comment">// temperature. INT16_MAX if unknown</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                                    <a class="code" href="namespaceAP.html#aac3bcb68bcccad29cc493b878aef055e">battery</a>.<a class="code" href="classAP__BattMonitor.html#a6f59b8616276c17074be483664923324">has_cell_voltages</a>(<a class="code" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a>) ? <a class="code" href="namespaceAP.html#aac3bcb68bcccad29cc493b878aef055e">battery</a>.<a class="code" href="classAP__BattMonitor.html#aea31203d084bf8a2e1c4e65c2598e6b7">get_cell_voltages</a>(<a class="code" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a>).<a class="code" href="structAP__BattMonitor_1_1cells.html#a25780c82686237ebc5531d6a18df732f">cells</a> : fake_cells.<a class="code" href="structAP__BattMonitor_1_1cells.html#a25780c82686237ebc5531d6a18df732f">cells</a>, <span class="comment">// cell voltages</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                                    <a class="code" href="namespaceAP.html#aac3bcb68bcccad29cc493b878aef055e">battery</a>.<a class="code" href="classAP__BattMonitor.html#a686b822215badd97a701bf3d391e95c0">has_current</a>(<a class="code" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a>) ? <a class="code" href="namespaceAP.html#aac3bcb68bcccad29cc493b878aef055e">battery</a>.<a class="code" href="classAP__BattMonitor.html#a280ff28558f03d85c6090321287bdd77">current_amps</a>(<a class="code" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a>) * 100 : -1, <span class="comment">// current in centiampere</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                                    <a class="code" href="namespaceAP.html#aac3bcb68bcccad29cc493b878aef055e">battery</a>.<a class="code" href="classAP__BattMonitor.html#a686b822215badd97a701bf3d391e95c0">has_current</a>(<a class="code" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a>) ? <a class="code" href="namespaceAP.html#aac3bcb68bcccad29cc493b878aef055e">battery</a>.<a class="code" href="classAP__BattMonitor.html#a77b0a6dab6949d6c861811bc29ed7b0b">consumed_mah</a>(<a class="code" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a>) : -1,       <span class="comment">// total consumed current in milliampere.hour</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                                    <a class="code" href="namespaceAP.html#aac3bcb68bcccad29cc493b878aef055e">battery</a>.<a class="code" href="classAP__BattMonitor.html#a09a8835686a6b936c4240e8a88a38978">has_consumed_energy</a>(<a class="code" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a>) ? <a class="code" href="namespaceAP.html#aac3bcb68bcccad29cc493b878aef055e">battery</a>.<a class="code" href="classAP__BattMonitor.html#adfb2c3beb09d00f0b2442bfe5e4f755a">consumed_wh</a>(<a class="code" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a>) * 36 : -1, <span class="comment">// consumed energy in hJ (hecto-Joules)</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                                    <a class="code" href="namespaceAP.html#aac3bcb68bcccad29cc493b878aef055e">battery</a>.<a class="code" href="classAP__BattMonitor.html#afdc523c75aff5beed8f8e34a33c8736d">capacity_remaining_pct</a>(<a class="code" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a>),</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                                    0, <span class="comment">// time remaining, seconds (not provided)</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                                    MAV_BATTERY_CHARGE_STATE_UNDEFINED);</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;}</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment">// returns true if all battery instances were reported</span></div><div class="line"><a name="l00318"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#acf29755bc5eab5ab6cb36b207426742f">  318</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="structGCS__MAVLINK.html#acf29755bc5eab5ab6cb36b207426742f">GCS_MAVLINK::send_battery_status</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keyword">const</span> <a class="code" href="classAP__BattMonitor.html">AP_BattMonitor</a> &amp;<a class="code" href="namespaceAP.html#aac3bcb68bcccad29cc493b878aef055e">battery</a> = <a class="code" href="namespaceAP.html#aac3bcb68bcccad29cc493b878aef055e">AP::battery</a>();</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keywordflow">for</span>(uint8_t i = 0; i &lt; <a class="code" href="namespaceAP.html#aac3bcb68bcccad29cc493b878aef055e">battery</a>.<a class="code" href="classAP__BattMonitor.html#a919b4b473883ce5282efa1e126b2b7ff">num_instances</a>(); i++) {</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespaceAP.html#aac3bcb68bcccad29cc493b878aef055e">battery</a>.<a class="code" href="classAP__BattMonitor.html#af7da2493a1943662a28350467d26f2f9">get_type</a>(i) != AP_BattMonitor_Params::BattMonitor_Type::BattMonitor_TYPE_NONE) {</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(BATTERY_STATUS);</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            <a class="code" href="structGCS__MAVLINK.html#acf29755bc5eab5ab6cb36b207426742f">send_battery_status</a>(i);</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        }</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    }</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;}</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div><div class="line"><a name="l00331"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#ab2fdac71e912e61b3c6130bf41352bdb">  331</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a721836da33de06f2dc29f5331dd8157a">GCS_MAVLINK::send_distance_sensor</a>(<span class="keyword">const</span> <a class="code" href="classAP__RangeFinder__Backend.html">AP_RangeFinder_Backend</a> *sensor, <span class="keyword">const</span> uint8_t <a class="code" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a>)<span class="keyword"> const</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keywordflow">if</span> (!sensor-&gt;<a class="code" href="classAP__RangeFinder__Backend.html#acb4240a40844d61d3114b9f2a260754e">has_data</a>()) {</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    }</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    mavlink_msg_distance_sensor_send(</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <a class="code" href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a>(),                        <span class="comment">// time since system boot TODO: take time of measurement</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        sensor-&gt;<a class="code" href="classAP__RangeFinder__Backend.html#a581dc555bf71bc982ba0ce21063574f8">min_distance_cm</a>(),               <span class="comment">// minimum distance the sensor can measure in centimeters</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        sensor-&gt;<a class="code" href="classAP__RangeFinder__Backend.html#ab0fd7bcbd2b19332aef770b80045fd53">max_distance_cm</a>(),               <span class="comment">// maximum distance the sensor can measure in centimeters</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        sensor-&gt;<a class="code" href="classAP__RangeFinder__Backend.html#a9ee50edf2273437704ca0bd1f133c575">distance_cm</a>(),                   <span class="comment">// current distance reading</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        sensor-&gt;<a class="code" href="classAP__RangeFinder__Backend.html#a70be857a438f361f455e925362dc3640">get_mav_distance_sensor_type</a>(),  <span class="comment">// type from MAV_DISTANCE_SENSOR enum</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <a class="code" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a>,                                <span class="comment">// onboard ID of the sensor == instance</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        sensor-&gt;<a class="code" href="classAP__RangeFinder__Backend.html#ab18f1f3fb5439ebc82721c6937ee3bc6">orientation</a>(),                   <span class="comment">// direction the sensor faces from MAV_SENSOR_ORIENTATION enum</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        0,                                       <span class="comment">// Measurement covariance in centimeters, 0 for unknown / invalid readings</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        0,                                       <span class="comment">// horizontal FOV</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        0,                                       <span class="comment">// vertical FOV</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        (<span class="keyword">const</span> <span class="keywordtype">float</span> *)<span class="keyword">nullptr</span>);                 <span class="comment">// quaternion of sensor orientation for MAV_SENSOR_ROTATION_CUSTOM</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;}</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="comment">// send any and all distance_sensor messages.  This starts by sending</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment">// any distance sensors not used by a Proximity sensor, then sends the</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment">// proximity sensor ones.</span></div><div class="line"><a name="l00354"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a721836da33de06f2dc29f5331dd8157a">  354</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a721836da33de06f2dc29f5331dd8157a">GCS_MAVLINK::send_distance_sensor</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <a class="code" href="classRangeFinder.html">RangeFinder</a> *<a class="code" href="namespaceAP.html#a78a9a503c697cb3f7cee3b353686d700">rangefinder</a> = <a class="code" href="classRangeFinder.html#a0f32fa3583c2122741c7cd4b0865a352">RangeFinder::get_singleton</a>();</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespaceAP.html#a78a9a503c697cb3f7cee3b353686d700">rangefinder</a> == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    }</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="comment">// if we have a proximity backend that utilizes rangefinders cull</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="comment">// sending them here, and allow the later proximity code to manage</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="comment">// them</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="keywordtype">bool</span> filter_possible_proximity_sensors = <span class="keyword">false</span>;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <a class="code" href="classAP__Proximity.html">AP_Proximity</a> *<a class="code" href="namespaceAP.html#a8b4b4424addfab0bbe9a7290107af2d7">proximity</a> = <a class="code" href="classAP__Proximity.html#a9a5196c465fcce6e3a0c38b77b2f4d28">AP_Proximity::get_singleton</a>();</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespaceAP.html#a8b4b4424addfab0bbe9a7290107af2d7">proximity</a> != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; <a class="code" href="namespaceAP.html#a8b4b4424addfab0bbe9a7290107af2d7">proximity</a>-&gt;<a class="code" href="classAP__Proximity.html#a9a59943103f7d5ac005096c2f0e8fc23">num_sensors</a>(); i++) {</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="namespaceAP.html#a8b4b4424addfab0bbe9a7290107af2d7">proximity</a>-&gt;<a class="code" href="classAP__Proximity.html#ab702df4ee18ddbe772209fd7ebf13060">get_type</a>(i) == <a class="code" href="classAP__Proximity.html#aac13aefbbaf2a0687f6fd6e8e2ea2df5a70b42f4cf131c4b75d13a194557eed6d">AP_Proximity::Proximity_Type_RangeFinder</a>) {</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                filter_possible_proximity_sensors = <span class="keyword">true</span>;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            }</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        }</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    }</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; <a class="code" href="RangeFinder_8h.html#afff33622f1b34ddb499173e964284402">RANGEFINDER_MAX_INSTANCES</a>; i++) {</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="GCS_8h.html#a6bcce1fe6fd8b6277f4f2dd0e738aec1">HAVE_PAYLOAD_SPACE</a>(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>, DISTANCE_SENSOR)) {</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        }</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <a class="code" href="classAP__RangeFinder__Backend.html">AP_RangeFinder_Backend</a> *sensor = <a class="code" href="namespaceAP.html#a78a9a503c697cb3f7cee3b353686d700">rangefinder</a>-&gt;<a class="code" href="classRangeFinder.html#aa7b45987158dbccaea5ea52ed4dd1954">get_backend</a>(i);</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <span class="keywordflow">if</span> (sensor == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        }</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <span class="keyword">enum</span> <a class="code" href="rotations_8h.html#a67a250c97139a5466814a54c4aa4a681">Rotation</a> orient = sensor-&gt;<a class="code" href="classAP__RangeFinder__Backend.html#ab18f1f3fb5439ebc82721c6937ee3bc6">orientation</a>();</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <span class="keywordflow">if</span> (!filter_possible_proximity_sensors ||</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            (orient &gt; <a class="code" href="rotations_8h.html#a67a250c97139a5466814a54c4aa4a681ac96f680be7fee8f6064f26555d4de00a">ROTATION_YAW_315</a> &amp;&amp; orient != <a class="code" href="rotations_8h.html#a67a250c97139a5466814a54c4aa4a681a5f54415721db8e9248e3f5ec5a89b3cf">ROTATION_PITCH_90</a>)) {</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            <a class="code" href="structGCS__MAVLINK.html#a721836da33de06f2dc29f5331dd8157a">send_distance_sensor</a>(sensor, i);</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        }</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    }</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <a class="code" href="structGCS__MAVLINK.html#a45867a6e13476ac2f00b73cdeea93fce">send_proximity</a>();</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;}</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div><div class="line"><a name="l00392"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#ac9c6e86aff8fb7affad6c3b50461c361">  392</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#ac9c6e86aff8fb7affad6c3b50461c361">GCS_MAVLINK::send_rangefinder</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <a class="code" href="classRangeFinder.html">RangeFinder</a> *<a class="code" href="namespaceAP.html#a78a9a503c697cb3f7cee3b353686d700">rangefinder</a> = <a class="code" href="classRangeFinder.html#a0f32fa3583c2122741c7cd4b0865a352">RangeFinder::get_singleton</a>();</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespaceAP.html#a78a9a503c697cb3f7cee3b353686d700">rangefinder</a> == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    }</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <a class="code" href="classAP__RangeFinder__Backend.html">AP_RangeFinder_Backend</a> *s = <a class="code" href="namespaceAP.html#a78a9a503c697cb3f7cee3b353686d700">rangefinder</a>-&gt;<a class="code" href="classRangeFinder.html#a1491b0acf5a52d28ad96980bf494fab0">find_instance</a>(<a class="code" href="rotations_8h.html#a67a250c97139a5466814a54c4aa4a681a69e35fa52d2cbc68b5f10e3541215404">ROTATION_PITCH_270</a>);</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordflow">if</span> (s == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    }</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    mavlink_msg_rangefinder_send(</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            s-&gt;<a class="code" href="classAP__RangeFinder__Backend.html#a9ee50edf2273437704ca0bd1f133c575">distance_cm</a>() * 0.01f,</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            s-&gt;<a class="code" href="classAP__RangeFinder__Backend.html#a68d8cec7904e440bc9e977edcf1db4cc">voltage_mv</a>() * 0.001f);</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;}</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div><div class="line"><a name="l00408"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a45867a6e13476ac2f00b73cdeea93fce">  408</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a45867a6e13476ac2f00b73cdeea93fce">GCS_MAVLINK::send_proximity</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <a class="code" href="classAP__Proximity.html">AP_Proximity</a> *<a class="code" href="namespaceAP.html#a8b4b4424addfab0bbe9a7290107af2d7">proximity</a> = <a class="code" href="classAP__Proximity.html#a9a5196c465fcce6e3a0c38b77b2f4d28">AP_Proximity::get_singleton</a>();</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespaceAP.html#a8b4b4424addfab0bbe9a7290107af2d7">proximity</a> == <span class="keyword">nullptr</span> || <a class="code" href="namespaceAP.html#a8b4b4424addfab0bbe9a7290107af2d7">proximity</a>-&gt;<a class="code" href="classAP__Proximity.html#a5828d33a5e6873d29c01d0ea377bad3a">get_status</a>() == <a class="code" href="classAP__Proximity.html#af6397f7a3a7799575ffc0138e10d202aaca1c08feb4111c8ce0afbaa89d3a12ba">AP_Proximity::Proximity_NotConnected</a>) {</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        <span class="keywordflow">return</span>; <span class="comment">// this is wrong, but pretend we sent data and don&#39;t requeue</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    }</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keyword">const</span> uint16_t dist_min = (uint16_t)(<a class="code" href="namespaceAP.html#a8b4b4424addfab0bbe9a7290107af2d7">proximity</a>-&gt;<a class="code" href="classAP__Proximity.html#aea4d7efc1060984c34896eeff8e82d4d">distance_min</a>() * 100.0f); <span class="comment">// minimum distance the sensor can measure in centimeters</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="keyword">const</span> uint16_t dist_max = (uint16_t)(<a class="code" href="namespaceAP.html#a8b4b4424addfab0bbe9a7290107af2d7">proximity</a>-&gt;<a class="code" href="classAP__Proximity.html#a2e5b5c46464c7b30d83d7f6adbda7775">distance_max</a>() * 100.0f); <span class="comment">// maximum distance the sensor can measure in centimeters</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="comment">// send horizontal distances</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <a class="code" href="structAP__Proximity_1_1Proximity__Distance__Array.html">AP_Proximity::Proximity_Distance_Array</a> dist_array;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespaceAP.html#a8b4b4424addfab0bbe9a7290107af2d7">proximity</a>-&gt;<a class="code" href="classAP__Proximity.html#acd6596edd8f65dea41aa89730343f9a3">get_horizontal_distances</a>(dist_array)) {</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; <a class="code" href="AP__Proximity_8h.html#a13eb412edbf03795761166ee08724c31">PROXIMITY_MAX_DIRECTION</a>; i++) {</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="GCS_8h.html#a6bcce1fe6fd8b6277f4f2dd0e738aec1">HAVE_PAYLOAD_SPACE</a>(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>, DISTANCE_SENSOR)) {</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                <span class="keywordflow">return</span>;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;            }</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            mavlink_msg_distance_sensor_send(</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                    <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                    <a class="code" href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a>(),                               <span class="comment">// time since system boot</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                    dist_min,                                       <span class="comment">// minimum distance the sensor can measure in centimeters</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                    dist_max,                                       <span class="comment">// maximum distance the sensor can measure in centimeters</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                    (uint16_t)(dist_array.<a class="code" href="structAP__Proximity_1_1Proximity__Distance__Array.html#abf7a0d187d87d3ff82265d7d10bb48cf">distance</a>[i] * 100.0f),    <span class="comment">// current distance reading</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                    MAV_DISTANCE_SENSOR_LASER,                      <span class="comment">// type from MAV_DISTANCE_SENSOR enum</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                    <a class="code" href="AP__Proximity_8h.html#a08b5ac9aaf4ef1c32a8bb8e7aff7bff9">PROXIMITY_SENSOR_ID_START</a> + i,                  <span class="comment">// onboard ID of the sensor</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                    dist_array.<a class="code" href="structAP__Proximity_1_1Proximity__Distance__Array.html#a29f5e1a33b9b07dadf963f320091ca22">orientation</a>[i],                      <span class="comment">// direction the sensor faces from MAV_SENSOR_ORIENTATION enum</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                    0,                                              <span class="comment">// Measurement covariance in centimeters, 0 for unknown / invalid readings</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                    0, 0, <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        }</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    }</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="comment">// send upward distance</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keywordtype">float</span> dist_up;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespaceAP.html#a8b4b4424addfab0bbe9a7290107af2d7">proximity</a>-&gt;<a class="code" href="classAP__Proximity.html#a9feaf5dbfcd60e26d0f7b807592414f3">get_upward_distance</a>(dist_up)) {</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="GCS_8h.html#a6bcce1fe6fd8b6277f4f2dd0e738aec1">HAVE_PAYLOAD_SPACE</a>(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>, DISTANCE_SENSOR)) {</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        }</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        mavlink_msg_distance_sensor_send(</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                <a class="code" href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a>(),                                         <span class="comment">// time since system boot</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                dist_min,                                                 <span class="comment">// minimum distance the sensor can measure in centimeters</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                dist_max,                                                 <span class="comment">// maximum distance the sensor can measure in centimeters</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                (uint16_t)(dist_up * 100.0<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>),                             <span class="comment">// current distance reading</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                MAV_DISTANCE_SENSOR_LASER,                                <span class="comment">// type from MAV_DISTANCE_SENSOR enum</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                <a class="code" href="AP__Proximity_8h.html#a08b5ac9aaf4ef1c32a8bb8e7aff7bff9">PROXIMITY_SENSOR_ID_START</a> + <a class="code" href="AP__Proximity_8h.html#a13eb412edbf03795761166ee08724c31">PROXIMITY_MAX_DIRECTION</a> + 1,  <span class="comment">// onboard ID of the sensor</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                MAV_SENSOR_ROTATION_PITCH_90,                             <span class="comment">// direction upwards</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                0,                                                        <span class="comment">// Measurement covariance in centimeters, 0 for unknown / invalid readings</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                0, 0, <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    }</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;}</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="comment">// report AHRS2 state</span></div><div class="line"><a name="l00459"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a505f72ae2d47e4be47ddd1a8dcda3c14">  459</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a505f72ae2d47e4be47ddd1a8dcda3c14">GCS_MAVLINK::send_ahrs2</a>()</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;{</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="preprocessor">#if AP_AHRS_NAVEKF_AVAILABLE</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keyword">const</span> <a class="code" href="classAP__AHRS.html">AP_AHRS</a> &amp;<a class="code" href="AHRS__Test_8cpp.html#a7da610c2722190575e0ded7e4204d743">ahrs</a> = <a class="code" href="namespaceAP.html#a99432cfdb696952c9b7146f155a815aa">AP::ahrs</a>();</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <a class="code" href="classVector3.html">Vector3f</a> euler;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keyword">struct </span><a class="code" href="classLocation.html">Location</a> loc {};</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AHRS__Test_8cpp.html#a7da610c2722190575e0ded7e4204d743">ahrs</a>.<a class="code" href="classAP__AHRS__NavEKF.html#a20b0f052bb14c6e4ee4839def8d6fa72">get_secondary_attitude</a>(euler) ||</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        <a class="code" href="AHRS__Test_8cpp.html#a7da610c2722190575e0ded7e4204d743">ahrs</a>.<a class="code" href="classAP__AHRS__NavEKF.html#a5ad2199bd989701ef041505df71072c4">get_secondary_position</a>(loc)) {</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        mavlink_msg_ahrs2_send(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                               euler.<a class="code" href="classVector3.html#a1a0f7e168c71ca798099f0ba8a444244">x</a>,</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                               euler.<a class="code" href="classVector3.html#a561df88b28e106e337a25bb86554a569">y</a>,</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                               euler.<a class="code" href="classVector3.html#ab3e7f5401dd6e951978bfa746809f74f">z</a>,</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                               loc.<a class="code" href="classLocation.html#a89e532f5bcc13db2f51ff9eed667c2b6">alt</a>*1.0e-2<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>,</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                               loc.<a class="code" href="classLocation.html#ae51548c2cf32311043ca19b94b9a9223">lat</a>,</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                               loc.<a class="code" href="classLocation.html#a5831f0aca9e51a15adb96fad465f72f8">lng</a>);</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    }</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;}</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div><div class="line"><a name="l00478"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a5ef68d042e48054de048216ca97475f8">  478</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a5ef68d042e48054de048216ca97475f8">GCS_MAVLINK::send_ahrs3</a>()</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;{</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="preprocessor">#if AP_AHRS_NAVEKF_AVAILABLE</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="keyword">const</span> <a class="code" href="classNavEKF2.html">NavEKF2</a> &amp;ekf2 = <a class="code" href="namespaceAP.html#ab742b8c41eb0a08e79d6fbec520a87a4">AP::ahrs_navekf</a>().<a class="code" href="classAP__AHRS__NavEKF.html#ab1b53c051f37cf092ecacd57a0cf3324">get_NavEKF2_const</a>();</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="keywordflow">if</span> (ekf2.<a class="code" href="classNavEKF2.html#ac20620a2c08019e941feb11120a09152">activeCores</a>() &gt; 0 &amp;&amp;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        <a class="code" href="GCS_8h.html#a6bcce1fe6fd8b6277f4f2dd0e738aec1">HAVE_PAYLOAD_SPACE</a>(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>, AHRS3)) {</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        <span class="keyword">struct </span><a class="code" href="classLocation.html">Location</a> loc {};</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        ekf2.<a class="code" href="classNavEKF2.html#aa34de594f36fe0305260e7d98a0a52d1">getLLH</a>(loc);</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <a class="code" href="classVector3.html">Vector3f</a> euler;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        ekf2.<a class="code" href="classNavEKF2.html#a866ee4a7ecc7df89eead2cc404956852">getEulerAngles</a>(-1,euler);</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        mavlink_msg_ahrs3_send(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                               euler.<a class="code" href="classVector3.html#a1a0f7e168c71ca798099f0ba8a444244">x</a>,</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                               euler.<a class="code" href="classVector3.html#a561df88b28e106e337a25bb86554a569">y</a>,</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                               euler.<a class="code" href="classVector3.html#ab3e7f5401dd6e951978bfa746809f74f">z</a>,</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                               loc.<a class="code" href="classLocation.html#a89e532f5bcc13db2f51ff9eed667c2b6">alt</a>*1.0e-2<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>,</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                               loc.<a class="code" href="classLocation.html#ae51548c2cf32311043ca19b94b9a9223">lat</a>,</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                               loc.<a class="code" href="classLocation.html#a5831f0aca9e51a15adb96fad465f72f8">lng</a>,</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                               0, 0, 0, 0);</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    }</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;}</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div><div class="line"><a name="l00500"></a><span class="lineno"><a class="line" href="classGCS.html#aed6a0f9e19a4077461d2eafee723e8b0">  500</a></span>&#160;<a class="code" href="classMissionItemProtocol.html">MissionItemProtocol</a> *<a class="code" href="classGCS.html#aed6a0f9e19a4077461d2eafee723e8b0">GCS::get_prot_for_mission_type</a>(<span class="keyword">const</span> MAV_MISSION_TYPE mission_type)<span class="keyword"> const</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="keywordflow">switch</span> (mission_type) {</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="keywordflow">case</span> MAV_MISSION_TYPE_MISSION:</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classGCS.html#af5dac82b632935cf168d6c9849c78d25">_missionitemprotocol_waypoints</a>;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="keywordflow">case</span> MAV_MISSION_TYPE_RALLY:</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classGCS.html#ab62d515a8882b21f2e7d4da2c9172f06">_missionitemprotocol_rally</a>;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    }</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;}</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment">// handle a request for the number of items we have stored for a mission type:</span></div><div class="line"><a name="l00513"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a77d0ba68a753475e530318db583575a4">  513</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a77d0ba68a753475e530318db583575a4">GCS_MAVLINK::handle_mission_request_list</a>(<span class="keyword">const</span> mavlink_message_t *msg)</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;{</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="comment">// decode</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    mavlink_mission_request_list_t packet;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    mavlink_msg_mission_request_list_decode(msg, &amp;packet);</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <a class="code" href="classMissionItemProtocol.html">MissionItemProtocol</a> *prot = <a class="code" href="GCS__Common_8cpp.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a>().<a class="code" href="classGCS.html#aed6a0f9e19a4077461d2eafee723e8b0">get_prot_for_mission_type</a>((MAV_MISSION_TYPE)packet.mission_type);</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="keywordflow">if</span> (prot == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        mavlink_msg_mission_ack_send(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                                     msg-&gt;sysid,</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                                     msg-&gt;compid,</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                                     MAV_MISSION_UNSUPPORTED,</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                                     packet.mission_type);</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    }</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    prot-&gt;<a class="code" href="classMissionItemProtocol.html#acc1492c720e16c7768373029616af2da">handle_mission_request_list</a>(*<span class="keyword">this</span>, packet, *msg);</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;}</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div><div class="line"><a name="l00532"></a><span class="lineno"><a class="line" href="classMissionItemProtocol.html#acc1492c720e16c7768373029616af2da">  532</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMissionItemProtocol.html#acc1492c720e16c7768373029616af2da">MissionItemProtocol::handle_mission_request_list</a>(</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <span class="keyword">const</span> <a class="code" href="structGCS__MAVLINK.html">GCS_MAVLINK</a> &amp;_link,</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="keyword">const</span> mavlink_mission_request_list_t &amp;packet,</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="keyword">const</span> mavlink_message_t &amp;msg)</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;{</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classMissionItemProtocol.html#a80ae9862a352375154b98922c8c64bd5">receiving</a>) {</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        <span class="comment">// someone is uploading a mission; reject fetching of points</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        <span class="comment">// until done or timeout</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        <a class="code" href="classMissionItemProtocol.html#a0f57a2ceddc8d639f51e138c266179b8">send_mission_ack</a>(_link, msg, MAV_MISSION_DENIED);</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    }</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="comment">// reply with number of commands in the mission.  The GCS will</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="comment">// then request each command separately</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    mavlink_msg_mission_count_send(_link.<a class="code" href="structGCS__MAVLINK.html#a38bdeec979d6dbc84c7ca09bafb5bc04">get_chan</a>(),</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                                   msg.sysid,</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                                   msg.compid,</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                                   <a class="code" href="classMissionItemProtocol.html#ab4042b8086fe6c2fe661ac138187d9ff">item_count</a>(),</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                                   <a class="code" href="classMissionItemProtocol.html#a6fbc4c50f6d6dc42d4ca7bae23a39bf4">mission_type</a>());</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;}</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div><div class="line"><a name="l00553"></a><span class="lineno"><a class="line" href="classMissionItemProtocol.html#a0f218f2ef1da3f5ddf4cd9c06d5e6373">  553</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMissionItemProtocol.html#a0f218f2ef1da3f5ddf4cd9c06d5e6373">MissionItemProtocol::handle_mission_request_int</a>(<span class="keyword">const</span> <a class="code" href="structGCS__MAVLINK.html">GCS_MAVLINK</a> &amp;_link,</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                                                     <span class="keyword">const</span> mavlink_mission_request_int_t &amp;packet,</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                                                     <span class="keyword">const</span> mavlink_message_t &amp;msg)</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;{</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classMissionItemProtocol.html#a80ae9862a352375154b98922c8c64bd5">receiving</a>) {</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        <span class="comment">// someone is uploading a mission; reject fetching of points</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        <span class="comment">// until done or timeout</span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        <a class="code" href="classMissionItemProtocol.html#a0f57a2ceddc8d639f51e138c266179b8">send_mission_ack</a>(_link, msg, MAV_MISSION_DENIED);</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    }</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    mavlink_mission_item_int_t ret_packet{};</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    ret_packet.target_system = msg.sysid;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    ret_packet.target_component = msg.compid;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    ret_packet.seq = packet.seq;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    ret_packet.mission_type = packet.mission_type;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="keyword">const</span> MAV_MISSION_RESULT result_code = <a class="code" href="classMissionItemProtocol.html#af587be3c475064871f1a625cf3ec3587">get_item</a>(_link, msg, packet, ret_packet);</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="keywordflow">if</span> (result_code != MAV_MISSION_ACCEPTED) {</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        <span class="comment">// send failure message</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        <a class="code" href="classMissionItemProtocol.html#a0f57a2ceddc8d639f51e138c266179b8">send_mission_ack</a>(_link, msg, result_code);</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    }</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="comment">// we already have a filled structure, use it in place of _send:</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    _mav_finalize_message_chan_send(_link.<a class="code" href="structGCS__MAVLINK.html#a38bdeec979d6dbc84c7ca09bafb5bc04">get_chan</a>(),</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                                    MAVLINK_MSG_ID_MISSION_ITEM_INT,</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                                    (<span class="keyword">const</span> <span class="keywordtype">char</span> *)&amp;ret_packet,</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                                    MAVLINK_MSG_ID_MISSION_ITEM_MIN_LEN,</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                                    MAVLINK_MSG_ID_MISSION_ITEM_INT_LEN,</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                                    MAVLINK_MSG_ID_MISSION_ITEM_INT_CRC);</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;}</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="comment">  handle a MISSION_REQUEST mavlink packet</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00591"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a2093a0591a3db60700f254ed78dce18d">  591</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a2093a0591a3db60700f254ed78dce18d">GCS_MAVLINK::handle_mission_request_int</a>(mavlink_message_t *msg)</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;{</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        <span class="comment">// decode</span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        mavlink_mission_request_int_t packet;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        mavlink_msg_mission_request_int_decode(msg, &amp;packet);</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        <a class="code" href="classMissionItemProtocol.html">MissionItemProtocol</a> *prot = <a class="code" href="GCS__Common_8cpp.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a>().<a class="code" href="classGCS.html#aed6a0f9e19a4077461d2eafee723e8b0">get_prot_for_mission_type</a>((MAV_MISSION_TYPE)packet.mission_type);</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        <span class="keywordflow">if</span> (prot == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        }</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        prot-&gt;<a class="code" href="classMissionItemProtocol.html#a0f218f2ef1da3f5ddf4cd9c06d5e6373">handle_mission_request_int</a>(*<span class="keyword">this</span>, packet, *msg);</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;}</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div><div class="line"><a name="l00604"></a><span class="lineno"><a class="line" href="classMissionItemProtocol__Waypoints.html#ab90a684c44ab37cf249d731c52da5bcc">  604</a></span>&#160;MAV_MISSION_RESULT <a class="code" href="classMissionItemProtocol__Waypoints.html#ab90a684c44ab37cf249d731c52da5bcc">MissionItemProtocol_Waypoints::get_item</a>(<span class="keyword">const</span> <a class="code" href="structGCS__MAVLINK.html">GCS_MAVLINK</a> &amp;_link,</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                                                           <span class="keyword">const</span> mavlink_message_t &amp;msg,</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                                                           <span class="keyword">const</span> mavlink_mission_request_int_t &amp;packet,</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                                                           mavlink_mission_item_int_t &amp;ret_packet)</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;{</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <span class="keywordflow">if</span> (packet.seq != 0 &amp;&amp; <span class="comment">// always allow HOME to be read</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        packet.seq &gt;= <a class="code" href="classMissionItemProtocol__Waypoints.html#aab4e30e0915079ca9e3996024af93a9a">mission</a>.<a class="code" href="classAP__Mission.html#af26b7935304c34d8c03881b02beb3f48">num_commands</a>()) {</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        <span class="comment">// try to educate the GCS on the actual size of the mission:</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        mavlink_msg_mission_count_send(_link.<a class="code" href="structGCS__MAVLINK.html#a38bdeec979d6dbc84c7ca09bafb5bc04">get_chan</a>(),</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                                       msg.sysid,</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                                       msg.compid,</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                                       <a class="code" href="classMissionItemProtocol__Waypoints.html#aab4e30e0915079ca9e3996024af93a9a">mission</a>.<a class="code" href="classAP__Mission.html#af26b7935304c34d8c03881b02beb3f48">num_commands</a>(),</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                                       MAV_MISSION_TYPE_MISSION);</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        <span class="keywordflow">return</span> MAV_MISSION_ERROR;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    }</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <a class="code" href="structAP__Mission_1_1Mission__Command.html">AP_Mission::Mission_Command</a> cmd;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        <span class="comment">// retrieve mission from eeprom</span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classMissionItemProtocol__Waypoints.html#aab4e30e0915079ca9e3996024af93a9a">mission</a>.<a class="code" href="classAP__Mission.html#aac82471fe961e31cd0fba02ba7783aba">read_cmd_from_storage</a>(packet.seq, cmd)) {</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;            <span class="keywordflow">return</span> MAV_MISSION_ERROR;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        }</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classAP__Mission.html#a4089847656c808d9a5faf123722a089a">AP_Mission::mission_cmd_to_mavlink_int</a>(cmd, ret_packet)) {</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;            <span class="keywordflow">return</span> MAV_MISSION_ERROR;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        }</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        <span class="comment">// set packet&#39;s current field to 1 if this is the command being executed</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        <span class="keywordflow">if</span> (cmd.<a class="code" href="structAP__Mission_1_1Mission__Command.html#a272ab59936fd9d78bb5898b4b53ba688">id</a> == (uint16_t)<a class="code" href="classMissionItemProtocol__Waypoints.html#aab4e30e0915079ca9e3996024af93a9a">mission</a>.<a class="code" href="classAP__Mission.html#a2e5e9369c28e90e4fe93c0d4c3ab471c">get_current_nav_cmd</a>().<a class="code" href="structAP__Mission_1_1Mission__Command.html#a5afe16b2b1a93a0cf340a4199a9c6c3a">index</a>) {</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;            ret_packet.current = 1;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;            ret_packet.current = 0;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        }</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        <span class="comment">// set auto continue to 1</span></div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        ret_packet.autocontinue = 1;     <span class="comment">// 1 (true), 0 (false)</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        ret_packet.command = cmd.<a class="code" href="structAP__Mission_1_1Mission__Command.html#a272ab59936fd9d78bb5898b4b53ba688">id</a>;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        <span class="keywordflow">return</span> MAV_MISSION_ACCEPTED;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;}</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;</div><div class="line"><a name="l00646"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#ac528f7e91bf82403fdf395a91435df2f">  646</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#ac528f7e91bf82403fdf395a91435df2f">GCS_MAVLINK::handle_mission_request</a>(mavlink_message_t *msg)</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;{</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        <span class="comment">// decode</span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        mavlink_mission_request_t packet;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        mavlink_msg_mission_request_decode(msg, &amp;packet);</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        <a class="code" href="classMissionItemProtocol.html">MissionItemProtocol</a> *prot = <a class="code" href="GCS__Common_8cpp.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a>().<a class="code" href="classGCS.html#aed6a0f9e19a4077461d2eafee723e8b0">get_prot_for_mission_type</a>((MAV_MISSION_TYPE)packet.mission_type);</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        <span class="keywordflow">if</span> (prot == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        }</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        prot-&gt;<a class="code" href="classMissionItemProtocol.html#ac2b502c2410952ecc99c53a1d15a3906">handle_mission_request</a>(*<span class="keyword">this</span>, packet, *msg);</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;}</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;</div><div class="line"><a name="l00659"></a><span class="lineno"><a class="line" href="classMissionItemProtocol.html#ae3c5ae2eab1f1bb8832379f6c9e67700">  659</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMissionItemProtocol.html#ae3c5ae2eab1f1bb8832379f6c9e67700">MissionItemProtocol::convert_MISSION_REQUEST_to_MISSION_REQUEST_INT</a>(<span class="keyword">const</span> mavlink_mission_request_t &amp;request, mavlink_mission_request_int_t &amp;request_int)</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;{</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    request_int.target_system = request.target_system;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    request_int.target_component = request.target_component;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    request_int.seq = request.seq;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    request_int.mission_type = request.mission_type;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;}</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;</div><div class="line"><a name="l00667"></a><span class="lineno"><a class="line" href="classMissionItemProtocol.html#ac2b502c2410952ecc99c53a1d15a3906">  667</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMissionItemProtocol.html#ac2b502c2410952ecc99c53a1d15a3906">MissionItemProtocol::handle_mission_request</a>(<span class="keyword">const</span> <a class="code" href="structGCS__MAVLINK.html">GCS_MAVLINK</a> &amp;_link,</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                                                 <span class="keyword">const</span> mavlink_mission_request_t &amp;packet,</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                                                 <span class="keyword">const</span> mavlink_message_t &amp;msg</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;)</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;{</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    mavlink_mission_request_int_t request_int;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <a class="code" href="classMissionItemProtocol.html#ae3c5ae2eab1f1bb8832379f6c9e67700">convert_MISSION_REQUEST_to_MISSION_REQUEST_INT</a>(packet, request_int);</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    mavlink_mission_item_int_t item_int{};</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    item_int.target_system = msg.sysid;</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    item_int.target_component = msg.compid;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    MAV_MISSION_RESULT ret = <a class="code" href="classMissionItemProtocol.html#af587be3c475064871f1a625cf3ec3587">get_item</a>(_link, msg, request_int, item_int);</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <span class="keywordflow">if</span> (ret != MAV_MISSION_ACCEPTED) {</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    }</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    mavlink_mission_item_t ret_packet{};</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    ret = <a class="code" href="classAP__Mission.html#a98d8e4c2901421b06794b6afae94770d">AP_Mission::convert_MISSION_ITEM_INT_to_MISSION_ITEM</a>(item_int, ret_packet);</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="keywordflow">if</span> (ret != MAV_MISSION_ACCEPTED) {</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    }</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <span class="comment">// we already have a filled structure, use it in place of _send:</span></div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    _mav_finalize_message_chan_send(_link.<a class="code" href="structGCS__MAVLINK.html#a38bdeec979d6dbc84c7ca09bafb5bc04">get_chan</a>(),</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                                    MAVLINK_MSG_ID_MISSION_ITEM,</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                                    (<span class="keyword">const</span> <span class="keywordtype">char</span> *)&amp;ret_packet,</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                                    MAVLINK_MSG_ID_MISSION_ITEM_MIN_LEN,</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                                    MAVLINK_MSG_ID_MISSION_ITEM_LEN,</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                                    MAVLINK_MSG_ID_MISSION_ITEM_CRC);</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;}</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="comment">  handle a MISSION_SET_CURRENT mavlink packet</span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00702"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#ad4e76e7f27bc999e806416e24aa10f26">  702</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#ad4e76e7f27bc999e806416e24aa10f26">GCS_MAVLINK::handle_mission_set_current</a>(<a class="code" href="classAP__Mission.html">AP_Mission</a> &amp;<a class="code" href="namespaceAP.html#a67bce6e94b1af5e88d027330df5d8eca">mission</a>, mavlink_message_t *msg)</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;{</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="comment">// decode</span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    mavlink_mission_set_current_t packet;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    mavlink_msg_mission_set_current_decode(msg, &amp;packet);</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <span class="comment">// set current command</span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespaceAP.html#a67bce6e94b1af5e88d027330df5d8eca">mission</a>.<a class="code" href="classAP__Mission.html#ac79a188f81816b3ddfe045b6a0feb6d1">set_current_cmd</a>(packet.seq)) {</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        mavlink_msg_mission_current_send(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>, packet.seq);</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    }</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;}</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="comment">  handle a MISSION_COUNT mavlink packet</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00717"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#af48072aa21948d3d13cf660a744ce454">  717</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#af48072aa21948d3d13cf660a744ce454">GCS_MAVLINK::handle_mission_count</a>(<span class="keyword">const</span> mavlink_message_t *msg)</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;{</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="comment">// decode</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    mavlink_mission_count_t packet;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    mavlink_msg_mission_count_decode(msg, &amp;packet);</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <a class="code" href="classMissionItemProtocol.html">MissionItemProtocol</a> *prot = <a class="code" href="GCS__Common_8cpp.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a>().<a class="code" href="classGCS.html#aed6a0f9e19a4077461d2eafee723e8b0">get_prot_for_mission_type</a>((MAV_MISSION_TYPE)packet.mission_type);</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="keywordflow">if</span> (prot == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        mavlink_msg_mission_ack_send(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;                                     msg-&gt;sysid,</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;                                     msg-&gt;compid,</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                                     MAV_MISSION_UNSUPPORTED,</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;                                     packet.mission_type);</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    }</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    prot-&gt;<a class="code" href="classMissionItemProtocol.html#a9f034118a8749c649fcf3c9aec0c75a9">handle_mission_count</a>(*<span class="keyword">this</span>, packet, *msg);</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;}</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;</div><div class="line"><a name="l00736"></a><span class="lineno"><a class="line" href="classMissionItemProtocol.html#ae6305563c701e1d649ff432b1fb75245">  736</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMissionItemProtocol.html#ae6305563c701e1d649ff432b1fb75245">MissionItemProtocol::init_send_requests</a>(<a class="code" href="structGCS__MAVLINK.html">GCS_MAVLINK</a> &amp;_link,</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                                             <span class="keyword">const</span> mavlink_message_t &amp;msg,</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;                                             <span class="keyword">const</span> int16_t _request_first,</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;                                             <span class="keyword">const</span> int16_t _request_last)</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;{</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="comment">// set variables to help handle the expected receiving of commands from the GCS</span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <a class="code" href="classMissionItemProtocol.html#a3c6d228d5f6dc89c95ac4916e234c5da">timelast_receive_ms</a> = <a class="code" href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a>();    <span class="comment">// set time we last received commands to now</span></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <a class="code" href="classMissionItemProtocol.html#a80ae9862a352375154b98922c8c64bd5">receiving</a> = <span class="keyword">true</span>;              <span class="comment">// record that we expect to receive commands</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <a class="code" href="classMissionItemProtocol.html#a6c42049687ff033895c71c94fd9b5e74">request_i</a> = _request_first;                 <span class="comment">// reset the next expected command number to zero</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <a class="code" href="classMissionItemProtocol.html#af312b1e6bbfbb7569d4911794987a2b3">request_last</a> = _request_last;         <span class="comment">// record how many commands we expect to receive</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <a class="code" href="classMissionItemProtocol.html#a4985b68aa93fa710429ad8ec9dde1984">dest_sysid</a> = msg.sysid;       <span class="comment">// record system id of GCS who wants to upload the mission</span></div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <a class="code" href="classMissionItemProtocol.html#af1281432f3f97242df8821a79548b211">dest_compid</a> = msg.compid;     <span class="comment">// record component id of GCS who wants to upload the mission</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <a class="code" href="classMissionItemProtocol.html#ad5e2f0616260b53ffe638c67a33b6cb6">link</a> = &amp;_link;</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <a class="code" href="classMissionItemProtocol.html#a16c007f154400b86f892c56eed21f4cc">timelast_request_ms</a> = <a class="code" href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a>();</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <a class="code" href="classMissionItemProtocol.html#ad5e2f0616260b53ffe638c67a33b6cb6">link</a>-&gt;<a class="code" href="structGCS__MAVLINK.html#a4902306dab46ff02b2296f99eb1f1c9c">send_message</a>(<a class="code" href="classMissionItemProtocol.html#a6f29a676bf0839e2e8387c8e0baf40af">next_item_ap_message_id</a>());</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;}</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;</div><div class="line"><a name="l00756"></a><span class="lineno"><a class="line" href="classMissionItemProtocol.html#a9f034118a8749c649fcf3c9aec0c75a9">  756</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMissionItemProtocol.html#a9f034118a8749c649fcf3c9aec0c75a9">MissionItemProtocol::handle_mission_count</a>(</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <a class="code" href="structGCS__MAVLINK.html">GCS_MAVLINK</a> &amp;_link,</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <span class="keyword">const</span> mavlink_mission_count_t &amp;packet,</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <span class="keyword">const</span> mavlink_message_t &amp;msg)</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;{</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classMissionItemProtocol.html#a80ae9862a352375154b98922c8c64bd5">receiving</a>) {</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        <span class="comment">// someone is already uploading a mission.  If we are</span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        <span class="comment">// receiving from someone then we will allow them to restart -</span></div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        <span class="comment">// otherwise we deny.</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        <span class="keywordflow">if</span> (msg.sysid != <a class="code" href="classMissionItemProtocol.html#a4985b68aa93fa710429ad8ec9dde1984">dest_sysid</a> || msg.compid != <a class="code" href="classMissionItemProtocol.html#af1281432f3f97242df8821a79548b211">dest_compid</a>) {</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;            <span class="comment">// reject another upload until</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;            <a class="code" href="classMissionItemProtocol.html#a0f57a2ceddc8d639f51e138c266179b8">send_mission_ack</a>(_link, msg, MAV_MISSION_DENIED);</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        }</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    }</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <span class="keywordflow">if</span> (packet.count &gt; <a class="code" href="classMissionItemProtocol.html#a9122e2c065e836cac2ca356ef9897590">max_items</a>()) {</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        <a class="code" href="classMissionItemProtocol.html#a0f57a2ceddc8d639f51e138c266179b8">send_mission_ack</a>(_link, msg, MAV_MISSION_NO_SPACE);</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    }</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <a class="code" href="classMissionItemProtocol.html#af677687f0f9d6099f54f547e9f627c98">truncate</a>(packet);</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <span class="keywordflow">if</span> (packet.count == 0) {</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;        <span class="comment">// no requests to send...</span></div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        <a class="code" href="classMissionItemProtocol.html#a0f57a2ceddc8d639f51e138c266179b8">send_mission_ack</a>(_link, msg, MAV_MISSION_ACCEPTED);</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        <a class="code" href="classMissionItemProtocol.html#a632d88c290e33ebb14d4f0bed33ae638">complete</a>(_link);</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    }</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <span class="comment">// start waypoint receiving</span></div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <a class="code" href="classMissionItemProtocol.html#ae6305563c701e1d649ff432b1fb75245">init_send_requests</a>(_link, msg, 0, packet.count-1);</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;}</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;</div><div class="line"><a name="l00790"></a><span class="lineno"><a class="line" href="classMissionItemProtocol__Waypoints.html#ab76f98403886621360a5bb32a108e6bb">  790</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMissionItemProtocol__Waypoints.html#ab76f98403886621360a5bb32a108e6bb">MissionItemProtocol_Waypoints::truncate</a>(<span class="keyword">const</span> mavlink_mission_count_t &amp;packet)</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;{</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <span class="comment">// new mission arriving, truncate mission to be the same length</span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <a class="code" href="classMissionItemProtocol__Waypoints.html#aab4e30e0915079ca9e3996024af93a9a">mission</a>.<a class="code" href="classAP__Mission.html#afaab7a93d7a18a068d1ff267b987bb64">truncate</a>(packet.count);</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;}</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;<span class="comment">  handle a MISSION_CLEAR_ALL mavlink packet</span></div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00799"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a7868048c0aaca4e2374082d15fcc85a9">  799</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a7868048c0aaca4e2374082d15fcc85a9">GCS_MAVLINK::handle_mission_clear_all</a>(<span class="keyword">const</span> mavlink_message_t *msg)</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;{</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    <span class="comment">// decode</span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    mavlink_mission_clear_all_t packet;</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    mavlink_msg_mission_clear_all_decode(msg, &amp;packet);</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    <span class="keyword">const</span> MAV_MISSION_TYPE mission_type = (MAV_MISSION_TYPE)packet.mission_type;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    <a class="code" href="classMissionItemProtocol.html">MissionItemProtocol</a> *prot = <a class="code" href="GCS__Common_8cpp.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a>().<a class="code" href="classGCS.html#aed6a0f9e19a4077461d2eafee723e8b0">get_prot_for_mission_type</a>(mission_type);</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    <span class="keywordflow">if</span> (prot == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a7c0c74e4cc6b27ce2dd6caa0f7cd8a3e">send_mission_ack</a>(*msg, mission_type, MAV_MISSION_UNSUPPORTED);</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    }</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    prot-&gt;handle_mission_clear_all(*<span class="keyword">this</span>, *msg);</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;}</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;</div><div class="line"><a name="l00815"></a><span class="lineno"><a class="line" href="classMissionItemProtocol__Waypoints.html#ac55fa04b8a2cbcd80c0a67c90033f9f9">  815</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classMissionItemProtocol__Waypoints.html#ac55fa04b8a2cbcd80c0a67c90033f9f9">MissionItemProtocol_Waypoints::clear_all_items</a>()</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;{</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classMissionItemProtocol__Waypoints.html#aab4e30e0915079ca9e3996024af93a9a">mission</a>.<a class="code" href="classAP__Mission.html#acfd61ebf8361f71fa75c9088dd8b7e3b">clear</a>();</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;}</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;</div><div class="line"><a name="l00820"></a><span class="lineno"><a class="line" href="classMissionItemProtocol__Rally.html#a7462663682e07c367d8c00aa16ff75aa">  820</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classMissionItemProtocol__Rally.html#a7462663682e07c367d8c00aa16ff75aa">MissionItemProtocol_Rally::clear_all_items</a>()</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;{</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <a class="code" href="classMissionItemProtocol__Rally.html#a8cb3419075833799c439f18eac23c5d6">rally</a>.<a class="code" href="classAP__Rally.html#af9320c7dfb7d74a430cc6b00962981ed">truncate</a>(0);</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;}</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;</div><div class="line"><a name="l00826"></a><span class="lineno"><a class="line" href="classMissionItemProtocol.html#a5610350178de3d189f4fa7cda9d61b1d">  826</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMissionItemProtocol.html#a5610350178de3d189f4fa7cda9d61b1d">MissionItemProtocol::handle_mission_clear_all</a>(<span class="keyword">const</span> <a class="code" href="structGCS__MAVLINK.html">GCS_MAVLINK</a> &amp;_link,</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;                                                   <span class="keyword">const</span> mavlink_message_t &amp;msg)</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;{</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="keywordtype">bool</span> success = <span class="keyword">true</span>;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    success = success &amp;&amp; !<a class="code" href="classMissionItemProtocol.html#a80ae9862a352375154b98922c8c64bd5">receiving</a>;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    success = success &amp;&amp; <a class="code" href="classMissionItemProtocol.html#a6d0d1f12eb58204423ff0d80e4ceb21e">clear_all_items</a>();</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <a class="code" href="classMissionItemProtocol.html#a0f57a2ceddc8d639f51e138c266179b8">send_mission_ack</a>(_link, msg, success ? MAV_MISSION_ACCEPTED : MAV_MISSION_ERROR);</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;}</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div><div class="line"><a name="l00835"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a6051010b7ea7bbaaeb2b13c70456f1cf">  835</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="structGCS__MAVLINK.html#a6051010b7ea7bbaaeb2b13c70456f1cf">GCS_MAVLINK::requesting_mission_items</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code" href="AP__Common_8h.html#a121caf32c5b5d704ef3453f0885a9ea5">ARRAY_SIZE</a>(<a class="code" href="structGCS__MAVLINK.html#a340da8d68074e768a3cb0c1517544d7f">supported_mission_types</a>); i++) {</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;        <a class="code" href="classMissionItemProtocol.html">MissionItemProtocol</a> *prot = <a class="code" href="GCS__Common_8cpp.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a>().<a class="code" href="classGCS.html#aed6a0f9e19a4077461d2eafee723e8b0">get_prot_for_mission_type</a>(<a class="code" href="structGCS__MAVLINK.html#a340da8d68074e768a3cb0c1517544d7f">supported_mission_types</a>[i]);</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        <span class="keywordflow">if</span> (prot &amp;&amp; prot-&gt;<a class="code" href="classMissionItemProtocol.html#a80ae9862a352375154b98922c8c64bd5">receiving</a> &amp;&amp; prot-&gt;<a class="code" href="classMissionItemProtocol.html#adb22fed2472be40ae618335d8c2c9afe">active_link_is</a>(<span class="keyword">this</span>)) {</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        }</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    }</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;}</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;</div><div class="line"><a name="l00846"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a9592cb2ff598cfd3b0d7352e3e3df841">  846</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a9592cb2ff598cfd3b0d7352e3e3df841">GCS_MAVLINK::handle_mission_write_partial_list</a>(<span class="keyword">const</span> mavlink_message_t *msg)</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;{</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    <span class="comment">// decode</span></div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    mavlink_mission_write_partial_list_t packet;</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    mavlink_msg_mission_write_partial_list_decode(msg, &amp;packet);</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <a class="code" href="classMissionItemProtocol.html">MissionItemProtocol</a> *use_prot = <a class="code" href="GCS__Common_8cpp.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a>().<a class="code" href="classGCS.html#aed6a0f9e19a4077461d2eafee723e8b0">get_prot_for_mission_type</a>((MAV_MISSION_TYPE)packet.mission_type);</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    <span class="keywordflow">if</span> (use_prot == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a7c0c74e4cc6b27ce2dd6caa0f7cd8a3e">send_mission_ack</a>(*msg, (MAV_MISSION_TYPE)packet.mission_type, MAV_MISSION_UNSUPPORTED);</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    }</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    use_prot-&gt;<a class="code" href="classMissionItemProtocol.html#a5755d38a2d4438d7b3f108dc4aea3aeb">handle_mission_write_partial_list</a>(*<span class="keyword">this</span>, *msg, packet);</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;}</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;</div><div class="line"><a name="l00860"></a><span class="lineno"><a class="line" href="classMissionItemProtocol.html#a5755d38a2d4438d7b3f108dc4aea3aeb">  860</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMissionItemProtocol.html#a5755d38a2d4438d7b3f108dc4aea3aeb">MissionItemProtocol::handle_mission_write_partial_list</a>(<a class="code" href="structGCS__MAVLINK.html">GCS_MAVLINK</a> &amp;_link,</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;                                                            <span class="keyword">const</span> mavlink_message_t &amp;msg,</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;                                                            <span class="keyword">const</span> mavlink_mission_write_partial_list_t &amp;packet)</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;{</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    <span class="comment">// start waypoint receiving</span></div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    <span class="keywordflow">if</span> ((<span class="keywordtype">unsigned</span>)packet.start_index &gt; <a class="code" href="classMissionItemProtocol.html#ab4042b8086fe6c2fe661ac138187d9ff">item_count</a>() ||</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;        (<span class="keywordtype">unsigned</span>)packet.end_index &gt; <a class="code" href="classMissionItemProtocol.html#ab4042b8086fe6c2fe661ac138187d9ff">item_count</a>() ||</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;        packet.end_index &lt; packet.start_index) {</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;        <a class="code" href="GCS__Common_8cpp.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a>().<a class="code" href="classGCS.html#a9866f3484283db744409e40719cef765">send_text</a>(MAV_SEVERITY_WARNING,<span class="stringliteral">&quot;Flight plan update rejected&quot;</span>); <span class="comment">// FIXME: Remove this anytime after 2020-01-22</span></div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;        <a class="code" href="classMissionItemProtocol.html#a0f57a2ceddc8d639f51e138c266179b8">send_mission_ack</a>(_link, msg, MAV_MISSION_ERROR);</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    }</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    <a class="code" href="classMissionItemProtocol.html#ae6305563c701e1d649ff432b1fb75245">init_send_requests</a>(_link, msg, packet.start_index, packet.end_index);</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;}</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;<span class="comment">  pass mavlink messages to the AP_Mount singleton</span></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00881"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a37e07887edf8f4f5c8ee0cd38ddc9a11">  881</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a37e07887edf8f4f5c8ee0cd38ddc9a11">GCS_MAVLINK::handle_mount_message</a>(<span class="keyword">const</span> mavlink_message_t *msg)</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;{</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    <a class="code" href="classAP__Mount.html">AP_Mount</a> *<a class="code" href="namespaceAP.html#aa6f0d760efc796d0ad5345d3acc377b8">mount</a> = <a class="code" href="namespaceAP.html#aa6f0d760efc796d0ad5345d3acc377b8">AP::mount</a>();</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespaceAP.html#aa6f0d760efc796d0ad5345d3acc377b8">mount</a> == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    }</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <a class="code" href="namespaceAP.html#aa6f0d760efc796d0ad5345d3acc377b8">mount</a>-&gt;<a class="code" href="classAP__Mount.html#ad8e2f48359bbe22f2e513b1845139366">handle_message</a>(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>, msg);</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;}</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;<span class="comment">  pass parameter value messages through to mount library</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00893"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a61256f7905c3e8edd5adfd2b3e392025">  893</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a61256f7905c3e8edd5adfd2b3e392025">GCS_MAVLINK::handle_param_value</a>(mavlink_message_t *msg)</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;{</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    <a class="code" href="classAP__Mount.html">AP_Mount</a> *<a class="code" href="namespaceAP.html#aa6f0d760efc796d0ad5345d3acc377b8">mount</a> = <a class="code" href="namespaceAP.html#aa6f0d760efc796d0ad5345d3acc377b8">AP::mount</a>();</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespaceAP.html#aa6f0d760efc796d0ad5345d3acc377b8">mount</a> == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    }</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    <a class="code" href="namespaceAP.html#aa6f0d760efc796d0ad5345d3acc377b8">mount</a>-&gt;<a class="code" href="classAP__Mount.html#a7aca3ae2c2c2bca127366adeb0825ea5">handle_param_value</a>(msg);</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;}</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;</div><div class="line"><a name="l00902"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a9f865aa584f4a3bae9946a80367d658e">  902</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a9f865aa584f4a3bae9946a80367d658e">GCS_MAVLINK::send_textv</a>(MAV_SEVERITY severity, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="Printf_8cpp.html#a381d684d94e6e91dee650357e8f02fa8">fmt</a>, va_list arg_list)<span class="keyword"> const</span></div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <span class="keywordtype">char</span> text[MAVLINK_MSG_STATUSTEXT_FIELD_TEXT_LEN+1];</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    <a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#a9337a60383f4264fa96a20dbe43a4e2e">util</a>-&gt;<a class="code" href="classAP__HAL_1_1Util.html#ac57ef0a9815cd597ad5cab5d6c31c6c8">vsnprintf</a>(text, <span class="keyword">sizeof</span>(text), <a class="code" href="Printf_8cpp.html#a381d684d94e6e91dee650357e8f02fa8">fmt</a>, arg_list);</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <a class="code" href="GCS__Common_8cpp.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a>().<a class="code" href="classGCS.html#a313e604179053ea42415b1c9289f13cd">send_statustext</a>(severity, (1&lt;&lt;<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>), text);</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;}</div><div class="line"><a name="l00908"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a8712f50cee60529cc3c31aec2633391b">  908</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a8712f50cee60529cc3c31aec2633391b">GCS_MAVLINK::send_text</a>(MAV_SEVERITY severity, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="Printf_8cpp.html#a381d684d94e6e91dee650357e8f02fa8">fmt</a>, ...)<span class="keyword"> const</span></div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    va_list arg_list;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    va_start(arg_list, <a class="code" href="Printf_8cpp.html#a381d684d94e6e91dee650357e8f02fa8">fmt</a>);</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    <a class="code" href="structGCS__MAVLINK.html#a9f865aa584f4a3bae9946a80367d658e">send_textv</a>(severity, <a class="code" href="Printf_8cpp.html#a381d684d94e6e91dee650357e8f02fa8">fmt</a>, arg_list);</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    va_end(arg_list);</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;}</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;</div><div class="line"><a name="l00916"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a5c806eb8dfd27f4d0038bdeb755d53c5">  916</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a5c806eb8dfd27f4d0038bdeb755d53c5">GCS_MAVLINK::handle_radio_status</a>(mavlink_message_t *msg, <span class="keywordtype">bool</span> log_radio)</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;{</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    mavlink_radio_t packet;</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    mavlink_msg_radio_decode(msg, &amp;packet);</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    <span class="comment">// record if the GCS has been receiving radio messages from</span></div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    <span class="comment">// the aircraft</span></div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <span class="keywordflow">if</span> (packet.remrssi != 0) {</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a0f58691781024f0cf939e7538d99bff0">last_radio_status_remrssi_ms</a> = <a class="code" href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a>();</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    }</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    <span class="comment">// use the state of the transmit buffer in the radio to</span></div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    <span class="comment">// control the stream rate, giving us adaptive software</span></div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    <span class="comment">// flow control</span></div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    <span class="keywordflow">if</span> (packet.txbuf &lt; 20 &amp;&amp; <a class="code" href="structGCS__MAVLINK.html#abce184e0c95af7aa285ce28d050fe792">stream_slowdown_ms</a> &lt; 2000) {</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;        <span class="comment">// we are very low on space - slow down a lot</span></div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#abce184e0c95af7aa285ce28d050fe792">stream_slowdown_ms</a> += 60;</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (packet.txbuf &lt; 50 &amp;&amp; <a class="code" href="structGCS__MAVLINK.html#abce184e0c95af7aa285ce28d050fe792">stream_slowdown_ms</a> &lt; 2000) {</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;        <span class="comment">// we are a bit low on space, slow down slightly</span></div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#abce184e0c95af7aa285ce28d050fe792">stream_slowdown_ms</a> += 20;</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (packet.txbuf &gt; 95 &amp;&amp; <a class="code" href="structGCS__MAVLINK.html#abce184e0c95af7aa285ce28d050fe792">stream_slowdown_ms</a> &gt; 200) {</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;        <span class="comment">// the buffer has plenty of space, speed up a lot</span></div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#abce184e0c95af7aa285ce28d050fe792">stream_slowdown_ms</a> -= 40;</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (packet.txbuf &gt; 90 &amp;&amp; <a class="code" href="structGCS__MAVLINK.html#abce184e0c95af7aa285ce28d050fe792">stream_slowdown_ms</a> != 0) {</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        <span class="comment">// the buffer has enough space, speed up a bit</span></div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#abce184e0c95af7aa285ce28d050fe792">stream_slowdown_ms</a> -= 20;</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    }</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;<span class="preprocessor">#if GCS_DEBUG_SEND_MESSAGE_TIMINGS</span></div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structGCS__MAVLINK.html#abce184e0c95af7aa285ce28d050fe792">stream_slowdown_ms</a> &gt; max_slowdown_ms) {</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;        max_slowdown_ms = <a class="code" href="structGCS__MAVLINK.html#abce184e0c95af7aa285ce28d050fe792">stream_slowdown_ms</a>;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    }</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <span class="comment">//log rssi, noise, etc if logging Performance monitoring data</span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    <span class="keywordflow">if</span> (log_radio) {</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;        <a class="code" href="namespaceAP.html#aa35bfac1ea2da16f110e8e72db7b3b20">AP::logger</a>().<a class="code" href="classAP__Logger.html#a927c103f1880fd610bd4d0205e91ab64">Write_Radio</a>(packet);</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    }</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;}</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;<span class="comment">  handle an incoming mission item</span></div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="comment">  return true if this is the last mission item, otherwise false</span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00960"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a67d79fd73d6a53e265fa102d508eab98">  960</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a67d79fd73d6a53e265fa102d508eab98">GCS_MAVLINK::handle_mission_item</a>(<span class="keyword">const</span> mavlink_message_t *msg)</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;{</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    <span class="comment">// TODO: rename packet to mission_item_int</span></div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    mavlink_mission_item_int_t packet;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    <span class="keywordflow">if</span> (msg-&gt;msgid == MAVLINK_MSG_ID_MISSION_ITEM) {      </div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        mavlink_mission_item_t mission_item;</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        mavlink_msg_mission_item_decode(msg, &amp;mission_item);</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;        MAV_MISSION_RESULT ret = <a class="code" href="classAP__Mission.html#a08f68797218b7203251b35bb0da645b9">AP_Mission::convert_MISSION_ITEM_to_MISSION_ITEM_INT</a>(mission_item, packet);</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;        <span class="keywordflow">if</span> (ret != MAV_MISSION_ACCEPTED) {</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;            <span class="keyword">const</span> MAV_MISSION_TYPE <a class="code" href="structtype.html">type</a> = (MAV_MISSION_TYPE)packet.mission_type;</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;            <a class="code" href="structGCS__MAVLINK.html#a7c0c74e4cc6b27ce2dd6caa0f7cd8a3e">send_mission_ack</a>(*msg, <a class="code" href="structtype.html">type</a>, ret);</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        }</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        mavlink_msg_mission_item_int_decode(msg, &amp;packet);</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    }</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    <span class="keyword">const</span> uint8_t current = packet.current;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <span class="keyword">const</span> MAV_MISSION_TYPE <a class="code" href="structtype.html">type</a> = (MAV_MISSION_TYPE)packet.mission_type;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    if (<a class="code" href="structtype.html">type</a> == MAV_MISSION_TYPE_MISSION &amp;&amp; (current == 2 || current == 3)) {</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;        <span class="keyword">struct </span><a class="code" href="structAP__Mission_1_1Mission__Command.html">AP_Mission::Mission_Command</a> cmd = {};</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;        MAV_MISSION_RESULT <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = <a class="code" href="classAP__Mission.html#a80b09bc9fa20ca29268f08f51de9050e">AP_Mission::mavlink_int_to_mission_cmd</a>(packet, cmd);</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> != MAV_MISSION_ACCEPTED) {</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;            <span class="comment">//decode failed</span></div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;            <a class="code" href="structGCS__MAVLINK.html#a7c0c74e4cc6b27ce2dd6caa0f7cd8a3e">send_mission_ack</a>(*msg, MAV_MISSION_TYPE_MISSION, <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a>);</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;        }</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;        <span class="comment">// guided or change-alt</span></div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;        <span class="keywordflow">if</span> (current == 2) {</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;            <span class="comment">// current = 2 is a flag to tell us this is a &quot;guided mode&quot;</span></div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;            <span class="comment">// waypoint and not for the mission</span></div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;            <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = (<a class="code" href="structGCS__MAVLINK.html#ada8b0ba8cbfa324537c1749f3e878ede">handle_guided_request</a>(cmd) ? MAV_MISSION_ACCEPTED</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;                      : MAV_MISSION_ERROR) ;</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (current == 3) {</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;            <span class="comment">//current = 3 is a flag to tell us this is a alt change only</span></div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;            <span class="comment">// add home alt if needed</span></div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;            <a class="code" href="structGCS__MAVLINK.html#a395e78088a50a0d11bb2890416033f94">handle_change_alt_request</a>(cmd);</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;            <span class="comment">// verify we recevied the command</span></div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;            <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = MAV_MISSION_ACCEPTED;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;        }</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a7c0c74e4cc6b27ce2dd6caa0f7cd8a3e">send_mission_ack</a>(*msg, MAV_MISSION_TYPE_MISSION, <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a>);</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    }</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    <span class="comment">// not a guided-mode reqest</span></div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    <a class="code" href="classMissionItemProtocol.html">MissionItemProtocol</a> *prot = <a class="code" href="GCS__Common_8cpp.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a>().<a class="code" href="classGCS.html#aed6a0f9e19a4077461d2eafee723e8b0">get_prot_for_mission_type</a>(<a class="code" href="structtype.html">type</a>);</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    <span class="keywordflow">if</span> (prot == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a7c0c74e4cc6b27ce2dd6caa0f7cd8a3e">send_mission_ack</a>(*msg, <a class="code" href="structtype.html">type</a>, MAV_MISSION_UNSUPPORTED);</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    }</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    <span class="keywordflow">if</span> (!prot-&gt;<a class="code" href="classMissionItemProtocol.html#a80ae9862a352375154b98922c8c64bd5">receiving</a>) {</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a7c0c74e4cc6b27ce2dd6caa0f7cd8a3e">send_mission_ack</a>(*msg, <a class="code" href="structtype.html">type</a>, MAV_MISSION_ERROR);</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    }</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    prot-&gt;<a class="code" href="classMissionItemProtocol.html#a36a327a6e9d0bb9ea09e77e123ead57d">handle_mission_item</a>(*msg, packet);</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;}</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;</div><div class="line"><a name="l01020"></a><span class="lineno"><a class="line" href="classMissionItemProtocol__Waypoints.html#ab8e3067c9746ee9ebf15b19f56ea95e4"> 1020</a></span>&#160;MAV_MISSION_RESULT <a class="code" href="classMissionItemProtocol__Waypoints.html#ab8e3067c9746ee9ebf15b19f56ea95e4">MissionItemProtocol_Waypoints::replace_item</a>(<span class="keyword">const</span> mavlink_mission_item_int_t &amp;mission_item_int)</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;{</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <a class="code" href="structAP__Mission_1_1Mission__Command.html">AP_Mission::Mission_Command</a> cmd;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    <span class="keyword">const</span> MAV_MISSION_RESULT res = <a class="code" href="classAP__Mission.html#a80b09bc9fa20ca29268f08f51de9050e">AP_Mission::mavlink_int_to_mission_cmd</a>(mission_item_int, cmd);</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    <span class="keywordflow">if</span> (res != MAV_MISSION_ACCEPTED) {</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;        <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    }</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <span class="comment">// sanity check for DO_JUMP command</span></div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    <span class="keywordflow">if</span> (cmd.<a class="code" href="structAP__Mission_1_1Mission__Command.html#a272ab59936fd9d78bb5898b4b53ba688">id</a> == MAV_CMD_DO_JUMP) {</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;        <span class="keywordflow">if</span> ((cmd.<a class="code" href="structAP__Mission_1_1Mission__Command.html#a41a7d992648b468243195e1e0af22f10">content</a>.<a class="code" href="unionAP__Mission_1_1Content.html#a504fcc7e9ab1d880aa002d87f9f53c72">jump</a>.<a class="code" href="structAP__Mission_1_1Jump__Command.html#a76ee1d372eb1fc2bf12b1f6daf661bd7">target</a> &gt;= <a class="code" href="classMissionItemProtocol__Waypoints.html#a771ecb1605f6048514b306aa5e533046">item_count</a>() &amp;&amp; cmd.<a class="code" href="structAP__Mission_1_1Mission__Command.html#a41a7d992648b468243195e1e0af22f10">content</a>.<a class="code" href="unionAP__Mission_1_1Content.html#a504fcc7e9ab1d880aa002d87f9f53c72">jump</a>.<a class="code" href="structAP__Mission_1_1Jump__Command.html#a76ee1d372eb1fc2bf12b1f6daf661bd7">target</a> &gt; <a class="code" href="classMissionItemProtocol.html#af312b1e6bbfbb7569d4911794987a2b3">request_last</a>) || cmd.<a class="code" href="structAP__Mission_1_1Mission__Command.html#a41a7d992648b468243195e1e0af22f10">content</a>.<a class="code" href="unionAP__Mission_1_1Content.html#a504fcc7e9ab1d880aa002d87f9f53c72">jump</a>.<a class="code" href="structAP__Mission_1_1Jump__Command.html#a76ee1d372eb1fc2bf12b1f6daf661bd7">target</a> == 0) {</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;            <span class="keywordflow">return</span> MAV_MISSION_ERROR;</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;        }</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    }</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classMissionItemProtocol__Waypoints.html#aab4e30e0915079ca9e3996024af93a9a">mission</a>.<a class="code" href="classAP__Mission.html#a74f49ceedab01ca1503d6532370298fa">replace_cmd</a>(cmd.<a class="code" href="structAP__Mission_1_1Mission__Command.html#a5afe16b2b1a93a0cf340a4199a9c6c3a">index</a>, cmd)) {</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;        <span class="keywordflow">return</span> MAV_MISSION_ERROR;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    }</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <span class="keywordflow">return</span> MAV_MISSION_ACCEPTED;</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;}</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;</div><div class="line"><a name="l01041"></a><span class="lineno"><a class="line" href="classMissionItemProtocol__Waypoints.html#a52f39d336a1735dd0be1fef51b822aca"> 1041</a></span>&#160;MAV_MISSION_RESULT <a class="code" href="classMissionItemProtocol__Waypoints.html#a52f39d336a1735dd0be1fef51b822aca">MissionItemProtocol_Waypoints::append_item</a>(<span class="keyword">const</span> mavlink_mission_item_int_t &amp;mission_item_int)</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;{</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <span class="comment">// sanity check for DO_JUMP command</span></div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <a class="code" href="structAP__Mission_1_1Mission__Command.html">AP_Mission::Mission_Command</a> cmd;</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    <span class="keyword">const</span> MAV_MISSION_RESULT res = <a class="code" href="classAP__Mission.html#a80b09bc9fa20ca29268f08f51de9050e">AP_Mission::mavlink_int_to_mission_cmd</a>(mission_item_int, cmd);</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <span class="keywordflow">if</span> (res != MAV_MISSION_ACCEPTED) {</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;        <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    }</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    <span class="keywordflow">if</span> (cmd.<a class="code" href="structAP__Mission_1_1Mission__Command.html#a272ab59936fd9d78bb5898b4b53ba688">id</a> == MAV_CMD_DO_JUMP) {</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;        <span class="keywordflow">if</span> ((cmd.<a class="code" href="structAP__Mission_1_1Mission__Command.html#a41a7d992648b468243195e1e0af22f10">content</a>.<a class="code" href="unionAP__Mission_1_1Content.html#a504fcc7e9ab1d880aa002d87f9f53c72">jump</a>.<a class="code" href="structAP__Mission_1_1Jump__Command.html#a76ee1d372eb1fc2bf12b1f6daf661bd7">target</a> &gt;= <a class="code" href="classMissionItemProtocol__Waypoints.html#a771ecb1605f6048514b306aa5e533046">item_count</a>() &amp;&amp; cmd.<a class="code" href="structAP__Mission_1_1Mission__Command.html#a41a7d992648b468243195e1e0af22f10">content</a>.<a class="code" href="unionAP__Mission_1_1Content.html#a504fcc7e9ab1d880aa002d87f9f53c72">jump</a>.<a class="code" href="structAP__Mission_1_1Jump__Command.html#a76ee1d372eb1fc2bf12b1f6daf661bd7">target</a> &gt; <a class="code" href="classMissionItemProtocol.html#af312b1e6bbfbb7569d4911794987a2b3">request_last</a>) || cmd.<a class="code" href="structAP__Mission_1_1Mission__Command.html#a41a7d992648b468243195e1e0af22f10">content</a>.<a class="code" href="unionAP__Mission_1_1Content.html#a504fcc7e9ab1d880aa002d87f9f53c72">jump</a>.<a class="code" href="structAP__Mission_1_1Jump__Command.html#a76ee1d372eb1fc2bf12b1f6daf661bd7">target</a> == 0) {</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;            <span class="keywordflow">return</span> MAV_MISSION_ERROR;</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;        }</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    }</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classMissionItemProtocol__Waypoints.html#aab4e30e0915079ca9e3996024af93a9a">mission</a>.<a class="code" href="classAP__Mission.html#ac4c73bdc284bb26ca56cd8253d6c3cdd">add_cmd</a>(cmd)) {</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;        <span class="keywordflow">return</span> MAV_MISSION_ERROR;</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    }</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    <span class="keywordflow">return</span> MAV_MISSION_ACCEPTED;</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;}</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;</div><div class="line"><a name="l01063"></a><span class="lineno"><a class="line" href="classMissionItemProtocol__Waypoints.html#aba26f751829c91dd7c6f0eeaa67ee437"> 1063</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMissionItemProtocol__Waypoints.html#aba26f751829c91dd7c6f0eeaa67ee437">MissionItemProtocol_Waypoints::complete</a>(<span class="keyword">const</span> <a class="code" href="structGCS__MAVLINK.html">GCS_MAVLINK</a> &amp;_link)</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;{</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    _link.<a class="code" href="structGCS__MAVLINK.html#a8712f50cee60529cc3c31aec2633391b">send_text</a>(MAV_SEVERITY_INFO, <span class="stringliteral">&quot;Flight plan received&quot;</span>);</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    <a class="code" href="namespaceAP.html#aa35bfac1ea2da16f110e8e72db7b3b20">AP::logger</a>().<a class="code" href="classAP__Logger.html#a31ce2427fbda32a2f7373efa27576117">Write_EntireMission</a>();</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;}</div><div class="line"><a name="l01068"></a><span class="lineno"><a class="line" href="classMissionItemProtocol__Waypoints.html#ad4dbe9ab0d79e7c7282cfa13b83b7ade"> 1068</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMissionItemProtocol__Waypoints.html#ad4dbe9ab0d79e7c7282cfa13b83b7ade">MissionItemProtocol_Waypoints::timeout</a>()</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;{</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    <a class="code" href="classMissionItemProtocol.html#ad5e2f0616260b53ffe638c67a33b6cb6">link</a>-&gt;<a class="code" href="structGCS__MAVLINK.html#a8712f50cee60529cc3c31aec2633391b">send_text</a>(MAV_SEVERITY_WARNING, <span class="stringliteral">&quot;Mission upload timeout&quot;</span>);</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;}</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;</div><div class="line"><a name="l01073"></a><span class="lineno"><a class="line" href="classMissionItemProtocol.html#a36a327a6e9d0bb9ea09e77e123ead57d"> 1073</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classMissionItemProtocol.html#a36a327a6e9d0bb9ea09e77e123ead57d">MissionItemProtocol::handle_mission_item</a>(<span class="keyword">const</span> mavlink_message_t &amp;msg, <span class="keyword">const</span> mavlink_mission_item_int_t &amp;cmd)</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;{</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classMissionItemProtocol.html#ad5e2f0616260b53ffe638c67a33b6cb6">link</a> == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        <a class="code" href="namespaceAP.html#afceb236ff617aaaa2b08afacd72532b0">AP::internalerror</a>().<a class="code" href="classAP__InternalError.html#ab34174ba770b976b39a18c2b23e854f2">error</a>(<a class="code" href="classAP__InternalError.html#a72019dd8c7db64b58a862f01ee8cbcf9a2eadaff2ad87b51c04f7af77a5fbb7e2">AP_InternalError::error_t::gcs_bad_missionprotocol_link</a>);</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    }</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    <span class="comment">// check if this is the requested waypoint</span></div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    <span class="keywordflow">if</span> (cmd.seq != <a class="code" href="classMissionItemProtocol.html#a6c42049687ff033895c71c94fd9b5e74">request_i</a>) {</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;        <a class="code" href="classMissionItemProtocol.html#a0f57a2ceddc8d639f51e138c266179b8">send_mission_ack</a>(msg, MAV_MISSION_INVALID_SEQUENCE);</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    }</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    <span class="comment">// make sure the item is coming from the system that initiated the upload</span></div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    <span class="keywordflow">if</span> (msg.sysid != <a class="code" href="classMissionItemProtocol.html#a4985b68aa93fa710429ad8ec9dde1984">dest_sysid</a>) {</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;        <a class="code" href="classMissionItemProtocol.html#a0f57a2ceddc8d639f51e138c266179b8">send_mission_ack</a>(msg, MAV_MISSION_DENIED);</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    }</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <span class="keywordflow">if</span> (msg.compid != <a class="code" href="classMissionItemProtocol.html#af1281432f3f97242df8821a79548b211">dest_compid</a>) {</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;        <a class="code" href="classMissionItemProtocol.html#a0f57a2ceddc8d639f51e138c266179b8">send_mission_ack</a>(msg, MAV_MISSION_DENIED);</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    }</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    <span class="keyword">const</span> uint16_t _item_count = <a class="code" href="classMissionItemProtocol.html#ab4042b8086fe6c2fe661ac138187d9ff">item_count</a>();</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    MAV_MISSION_RESULT <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a>;</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    <span class="keywordflow">if</span> (cmd.seq &lt; _item_count) {</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;        <span class="comment">// command index is within the existing list, replace the command</span></div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = <a class="code" href="classMissionItemProtocol.html#aec96576835fe03f45e09e07f1915f31b">replace_item</a>(cmd);</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd.seq == _item_count) {</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;        <span class="comment">// command is at the end of command list, add the command</span></div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;        <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = <a class="code" href="classMissionItemProtocol.html#abfe7fcef112784317a64ffec9904d150">append_item</a>(cmd);</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;        <span class="comment">// beyond the end of the command list, return an error</span></div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;        <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = MAV_MISSION_ERROR;</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    }</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> != MAV_MISSION_ACCEPTED) {</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;        <a class="code" href="classMissionItemProtocol.html#a0f57a2ceddc8d639f51e138c266179b8">send_mission_ack</a>(msg, <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a>);</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    }</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    <span class="comment">// update waypoint receiving state machine</span></div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <a class="code" href="classMissionItemProtocol.html#a3c6d228d5f6dc89c95ac4916e234c5da">timelast_receive_ms</a> = <a class="code" href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a>();</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    <a class="code" href="classMissionItemProtocol.html#a6c42049687ff033895c71c94fd9b5e74">request_i</a>++;</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classMissionItemProtocol.html#a6c42049687ff033895c71c94fd9b5e74">request_i</a> &gt; <a class="code" href="classMissionItemProtocol.html#af312b1e6bbfbb7569d4911794987a2b3">request_last</a>) {</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;        <a class="code" href="classMissionItemProtocol.html#a0f57a2ceddc8d639f51e138c266179b8">send_mission_ack</a>(msg, MAV_MISSION_ACCEPTED);</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;        <a class="code" href="classMissionItemProtocol.html#a632d88c290e33ebb14d4f0bed33ae638">complete</a>(*<a class="code" href="classMissionItemProtocol.html#ad5e2f0616260b53ffe638c67a33b6cb6">link</a>);</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;        <a class="code" href="classMissionItemProtocol.html#a80ae9862a352375154b98922c8c64bd5">receiving</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;        <a class="code" href="classMissionItemProtocol.html#ad5e2f0616260b53ffe638c67a33b6cb6">link</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    }</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <span class="comment">// if we have enough space, then send the next WP request immediately</span></div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="GCS_8h.html#a6bcce1fe6fd8b6277f4f2dd0e738aec1">HAVE_PAYLOAD_SPACE</a>(<a class="code" href="classMissionItemProtocol.html#ad5e2f0616260b53ffe638c67a33b6cb6">link</a>-&gt;<a class="code" href="structGCS__MAVLINK.html#a38bdeec979d6dbc84c7ca09bafb5bc04">get_chan</a>(), MISSION_REQUEST)) {</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;        <a class="code" href="classMissionItemProtocol.html#af7af44856eb9316f160b1a6fbe22f263">queued_request_send</a>();</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;        <a class="code" href="classMissionItemProtocol.html#ad5e2f0616260b53ffe638c67a33b6cb6">link</a>-&gt;<a class="code" href="structGCS__MAVLINK.html#a4902306dab46ff02b2296f99eb1f1c9c">send_message</a>(<a class="code" href="classMissionItemProtocol.html#a6f29a676bf0839e2e8387c8e0baf40af">next_item_ap_message_id</a>());</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    }</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;}</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;</div><div class="line"><a name="l01132"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a8b947efd39ef128020f20544da6cfc25"> 1132</a></span>&#160;<a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991">ap_message</a> <a class="code" href="structGCS__MAVLINK.html#a8b947efd39ef128020f20544da6cfc25">GCS_MAVLINK::mavlink_id_to_ap_message_id</a>(<span class="keyword">const</span> uint32_t mavlink_id)<span class="keyword"> const</span></div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    <span class="comment">// MSG_NEXT_MISSION_REQUEST doesn&#39;t correspond to a mavlink message directly.</span></div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    <span class="comment">// It is used to request the next waypoint after receiving one.</span></div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <span class="comment">// MSG_NEXT_PARAM doesn&#39;t correspond to a mavlink message directly.</span></div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    <span class="comment">// It is used to send the next parameter in a stream after sending one</span></div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    <span class="comment">// MSG_NAMED_FLOAT messages can&#39;t really be &quot;streamed&quot;...</span></div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;        uint32_t mavlink_id;</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;        <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991">ap_message</a> msg_id;</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    } map[] {</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;        { MAVLINK_MSG_ID_HEARTBEAT,             <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991aaf685040f895290768639de8386f0f75">MSG_HEARTBEAT</a>},</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;        { MAVLINK_MSG_ID_ATTITUDE,              <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991ad4eedc6e33f030259108cd91c0f33f0a">MSG_ATTITUDE</a>},</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;        { MAVLINK_MSG_ID_GLOBAL_POSITION_INT,   <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a7a1eccc78139fabd82ca8496ae66f072">MSG_LOCATION</a>},</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;        { MAVLINK_MSG_ID_HOME_POSITION,         <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991ae245f098f5ee0ec75b4dc6331f769f8f">MSG_HOME</a>},</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;        { MAVLINK_MSG_ID_GPS_GLOBAL_ORIGIN,     <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991af5b97ab8c9c725ebc1a437d5145a96d9">MSG_ORIGIN</a>},</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;        { MAVLINK_MSG_ID_SYS_STATUS,            <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991ad6d3d1976c7c297320d0a22fb827017a">MSG_SYS_STATUS</a>},</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        { MAVLINK_MSG_ID_POWER_STATUS,          <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a4759d8aac0540ff1bb3bff473f9a91f2">MSG_POWER_STATUS</a>},</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;        { MAVLINK_MSG_ID_MEMINFO,               <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a272f1bc1b83c115d1447c95d965a8184">MSG_MEMINFO</a>},</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;        { MAVLINK_MSG_ID_NAV_CONTROLLER_OUTPUT, <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a95af9461c6a4e8216750a1ceefa4ed27">MSG_NAV_CONTROLLER_OUTPUT</a>},</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;        { MAVLINK_MSG_ID_MISSION_CURRENT,       <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a6a14481a31e91d7aa41f6da668fbd792">MSG_CURRENT_WAYPOINT</a>},</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;        { MAVLINK_MSG_ID_VFR_HUD,               <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991ac9d2569c7978f2114127f70ca50c2e9d">MSG_VFR_HUD</a>},</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;        { MAVLINK_MSG_ID_SERVO_OUTPUT_RAW,      <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a817773171d33c6e3c664d8f408d3e2fa">MSG_SERVO_OUTPUT_RAW</a>},</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;        { MAVLINK_MSG_ID_RC_CHANNELS,           <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a6f54574c93c3fac75f233979803d8a6a">MSG_RC_CHANNELS</a>},</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;        { MAVLINK_MSG_ID_RC_CHANNELS_RAW,       <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a54a9bfe37e3928d9145e37cb0a4eb86b">MSG_RC_CHANNELS_RAW</a>},</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;        { MAVLINK_MSG_ID_RAW_IMU,               <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991ac4581ddf59eacccb739fe968d8ccdeb1">MSG_RAW_IMU</a>},</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;        { MAVLINK_MSG_ID_SCALED_IMU,            <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a7fca0791c3a7bcd42e0185784d67c0f3">MSG_SCALED_IMU</a>},</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;        { MAVLINK_MSG_ID_SCALED_IMU2,           <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a670942393e2610f590949912ed3d1df8">MSG_SCALED_IMU2</a>},</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;        { MAVLINK_MSG_ID_SCALED_IMU3,           <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991ad022ac06a04612e3ccac40b3b1f6f15a">MSG_SCALED_IMU3</a>},</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;        { MAVLINK_MSG_ID_SCALED_PRESSURE,       <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a620e330b9e238577b3c088dce5d5337d">MSG_SCALED_PRESSURE</a>},</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;        { MAVLINK_MSG_ID_SCALED_PRESSURE2,      <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a01fbfb12e47029f9621c94ff2c64e614">MSG_SCALED_PRESSURE2</a>},</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;        { MAVLINK_MSG_ID_SCALED_PRESSURE3,      <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a1e77ebaf5b0b961a589efe3fc0fef2fd">MSG_SCALED_PRESSURE3</a>},</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;        { MAVLINK_MSG_ID_SENSOR_OFFSETS,        <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a9df9a1d5d38a8a2049888714c1abbab7">MSG_SENSOR_OFFSETS</a>},</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;        { MAVLINK_MSG_ID_GPS_RAW_INT,           <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a4c7517102745667e743de0b380d2989f">MSG_GPS_RAW</a>},</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;        { MAVLINK_MSG_ID_GPS_RTK,               <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a6dfd24fe06164421c8f0f936bc88f062">MSG_GPS_RTK</a>},</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;        { MAVLINK_MSG_ID_GPS2_RAW,              <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a3ff54982e66b2ab26ae02153da744788">MSG_GPS2_RAW</a>},</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;        { MAVLINK_MSG_ID_GPS2_RTK,              <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991ae759c992f698fa86600e959b3358ae9b">MSG_GPS2_RTK</a>},</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;        { MAVLINK_MSG_ID_SYSTEM_TIME,           <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991af867b3847c7b81984f0479271acc306e">MSG_SYSTEM_TIME</a>},</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;        { MAVLINK_MSG_ID_RC_CHANNELS_SCALED,    <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991af1b76145d215ccb122a2df732e232d26">MSG_SERVO_OUT</a>},</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;        { MAVLINK_MSG_ID_PARAM_VALUE,           <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a1d5ca2d41c5912a2b2d745603598e06b">MSG_NEXT_PARAM</a>},</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;        { MAVLINK_MSG_ID_FENCE_STATUS,          <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991ae9a7c633e107e9cea381665f0c0a93d5">MSG_FENCE_STATUS</a>},</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;        { MAVLINK_MSG_ID_AHRS,                  <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a60210ad07652c7b66db5f1a5e8220663">MSG_AHRS</a>},</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;        { MAVLINK_MSG_ID_SIMSTATE,              <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991aadb1c1b31dc09b85abc9355c8a06a5a4">MSG_SIMSTATE</a>},</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;        { MAVLINK_MSG_ID_AHRS2,                 <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a0a2d68b0712655adc9d43369639949a1">MSG_AHRS2</a>},</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;        { MAVLINK_MSG_ID_AHRS3,                 <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a42faf948a4e2db64769dbbbbd9989d2f">MSG_AHRS3</a>},</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;        { MAVLINK_MSG_ID_HWSTATUS,              <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a1e7a2c19e16925a80c620505bd2a52f6">MSG_HWSTATUS</a>},</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;        { MAVLINK_MSG_ID_WIND,                  <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a4fa1059971a3676668c5854556cea8c0">MSG_WIND</a>},</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;        { MAVLINK_MSG_ID_RANGEFINDER,           <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991ad83f0ebefe148e4568fe0630c52fa5a4">MSG_RANGEFINDER</a>},</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;        { MAVLINK_MSG_ID_DISTANCE_SENSOR,       <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991ae4beecf8a2a68dbee2cb06e3cb96a8a3">MSG_DISTANCE_SENSOR</a>},</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;            <span class="comment">// request also does report:</span></div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;        { MAVLINK_MSG_ID_TERRAIN_REQUEST,       <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a0c4a10cdb6c785e8466a81afe1f32cdd">MSG_TERRAIN</a>},</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;        { MAVLINK_MSG_ID_BATTERY2,              <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a053f8e893a061490a9c1fe6c2ae10157">MSG_BATTERY2</a>},</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;        { MAVLINK_MSG_ID_CAMERA_FEEDBACK,       <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991aafd3d6c9917b97e76f2dcebabe9cfd1d">MSG_CAMERA_FEEDBACK</a>},</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;        { MAVLINK_MSG_ID_MOUNT_STATUS,          <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a5a44740c768dc9dc7a6937e75fa645b7">MSG_MOUNT_STATUS</a>},</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;        { MAVLINK_MSG_ID_OPTICAL_FLOW,          <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991aec6be05f52859e4bbaf957e598699333">MSG_OPTICAL_FLOW</a>},</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;        { MAVLINK_MSG_ID_GIMBAL_REPORT,         <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991aea3f04b4eb41ef0bab298c196c69e5c6">MSG_GIMBAL_REPORT</a>},</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;        { MAVLINK_MSG_ID_MAG_CAL_PROGRESS,      <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a3c88ebe543de65cbff2cda10622c016f">MSG_MAG_CAL_PROGRESS</a>},</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;        { MAVLINK_MSG_ID_MAG_CAL_REPORT,        <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a0e50f472a0810b781212091a1ec7757c">MSG_MAG_CAL_REPORT</a>},</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;        { MAVLINK_MSG_ID_EKF_STATUS_REPORT,     <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991aca4b6be3d7289e59f079ff0a82963fe0">MSG_EKF_STATUS_REPORT</a>},</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;        { MAVLINK_MSG_ID_LOCAL_POSITION_NED,    <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a272283e2882b1fe0dd3672e9d28853c3">MSG_LOCAL_POSITION</a>},</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;        { MAVLINK_MSG_ID_PID_TUNING,            <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991ac135e7becb863f5bf647e16fd8bc3aa2">MSG_PID_TUNING</a>},</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;        { MAVLINK_MSG_ID_VIBRATION,             <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a465cc8bb7530784d28105720cdd90786">MSG_VIBRATION</a>},</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;        { MAVLINK_MSG_ID_RPM,                   <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991abb84d7bdc2da17d4cf7b7c9de283a579">MSG_RPM</a>},</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;        { MAVLINK_MSG_ID_MISSION_ITEM_REACHED,  <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a582437196b32d4486ddd95fa10e31bcd">MSG_MISSION_ITEM_REACHED</a>},</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;        { MAVLINK_MSG_ID_POSITION_TARGET_GLOBAL_INT,  <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a692bcb4ac40fb82572a744f263fb17e1">MSG_POSITION_TARGET_GLOBAL_INT</a>},</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;        { MAVLINK_MSG_ID_POSITION_TARGET_LOCAL_NED,  <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a2ecc69fc8fb933e2fb079da4bc06fec6">MSG_POSITION_TARGET_LOCAL_NED</a>},</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;        { MAVLINK_MSG_ID_ADSB_VEHICLE,          <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a9ed648daa77cef3377e0d2591ce92859">MSG_ADSB_VEHICLE</a>},</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;        { MAVLINK_MSG_ID_BATTERY_STATUS,        <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a953b154df3b239607deff1c1461c88ed">MSG_BATTERY_STATUS</a>},</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;        { MAVLINK_MSG_ID_AOA_SSA,               <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a6a0c1385a70ee68415e770306d6e19db">MSG_AOA_SSA</a>},</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;        { MAVLINK_MSG_ID_DEEPSTALL,             <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991aed7bdc26192f9a7239a1d205bc77d07d">MSG_LANDING</a>},</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;        { MAVLINK_MSG_ID_EXTENDED_SYS_STATE,    <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a276c699b197f97ea3abe7e92c920cd2b">MSG_EXTENDED_SYS_STATE</a>},</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;            };</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code" href="AP__Common_8h.html#a121caf32c5b5d704ef3453f0885a9ea5">ARRAY_SIZE</a>(map); i++) {</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;        <span class="keywordflow">if</span> (map[i].mavlink_id == mavlink_id) {</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;            <span class="keywordflow">return</span> map[i].msg_id;</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;        }</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    }</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a67d8257d6aa089cfd08b5c6f35b7718e">MSG_LAST</a>;</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;}</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;</div><div class="line"><a name="l01216"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#ac2c3d2352c4047cecbce1cf9437631f6"> 1216</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="structGCS__MAVLINK.html#ac2c3d2352c4047cecbce1cf9437631f6">GCS_MAVLINK::set_mavlink_message_id_interval</a>(<span class="keyword">const</span> uint32_t mavlink_id,</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;                                                  <span class="keyword">const</span> uint16_t interval_ms)</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;{</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <span class="keyword">const</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991">ap_message</a> <span class="keywordtype">id</span> = <a class="code" href="structGCS__MAVLINK.html#a8b947efd39ef128020f20544da6cfc25">mavlink_id_to_ap_message_id</a>(mavlink_id);</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a67d8257d6aa089cfd08b5c6f35b7718e">MSG_LAST</a>) {</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;        <a class="code" href="GCS__Common_8cpp.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a>().<a class="code" href="classGCS.html#a9866f3484283db744409e40719cef765">send_text</a>(MAV_SEVERITY_INFO, <span class="stringliteral">&quot;No ap_message for mavlink id (%u)&quot;</span>, mavlink_id);</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    }</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structGCS__MAVLINK.html#a4d854fdc822e438da966a41782e8bb82">set_ap_message_interval</a>(<span class="keywordtype">id</span>, <a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a>);</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;}</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;</div><div class="line"><a name="l01227"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a35662822061cee24dea1b6db5d507604"> 1227</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="structGCS__MAVLINK.html#a35662822061cee24dea1b6db5d507604">GCS_MAVLINK::should_send_message_in_delay_callback</a>(<span class="keyword">const</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991">ap_message</a> <span class="keywordtype">id</span>)<span class="keyword"> const</span></div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    <span class="comment">// No ID we return true for may take more than a few hundred</span></div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    <span class="comment">// microseconds to return!</span></div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991aaf685040f895290768639de8386f0f75">MSG_HEARTBEAT</a> || <span class="keywordtype">id</span> == <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a1d5ca2d41c5912a2b2d745603598e06b">MSG_NEXT_PARAM</a>) {</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    }</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structGCS__MAVLINK.html#a9b46604132c167947d25d2df08e048fe">in_hil_mode</a>()) {</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;        <span class="comment">// in HIL we need to keep sending servo values to ensure</span></div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;        <span class="comment">// the simulator doesn&#39;t pause, otherwise our sensor</span></div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;        <span class="comment">// calibration could stall</span></div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;        <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991af1b76145d215ccb122a2df732e232d26">MSG_SERVO_OUT</a> ||</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;            <span class="keywordtype">id</span> == <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a817773171d33c6e3c664d8f408d3e2fa">MSG_SERVO_OUTPUT_RAW</a>) {</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;        }</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    }</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;}</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;</div><div class="line"><a name="l01249"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#aa966f3ef11eb46a123a7a899053bfa73"> 1249</a></span>&#160;uint16_t <a class="code" href="structGCS__MAVLINK.html#aa966f3ef11eb46a123a7a899053bfa73">GCS_MAVLINK::get_reschedule_interval_ms</a>(<span class="keyword">const</span> <a class="code" href="structGCS__MAVLINK_1_1deferred__message__bucket__t.html">deferred_message_bucket_t</a> &amp;deferred)<span class="keyword"> const</span></div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    uint32_t <a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a> = deferred.<a class="code" href="structGCS__MAVLINK_1_1deferred__message__bucket__t.html#ab9e7ae8495102a2d21a67ada970d0b0d">interval_ms</a>;</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    <a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a> += <a class="code" href="structGCS__MAVLINK.html#abce184e0c95af7aa285ce28d050fe792">stream_slowdown_ms</a>;</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    <span class="comment">// slow most messages down if we&#39;re transfering parameters or</span></div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    <span class="comment">// waypoints:</span></div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structGCS__MAVLINK.html#ac8eaa55df74e0b8196a0ab7bd7b853c1">_queued_parameter</a>) {</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;        <span class="comment">// we are sending parameters, penalize streams:</span></div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a> *= 4;</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;    }</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structGCS__MAVLINK.html#a6051010b7ea7bbaaeb2b13c70456f1cf">requesting_mission_items</a>()) {</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;        <span class="comment">// we are sending requests for waypoints, penalize streams:</span></div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a> *= 4;</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    }</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a> &gt; 60000) {</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;        <span class="keywordflow">return</span> 60000;</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    }</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a>;</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;}</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;<span class="comment">// typical runtime on fmuv3: 5 microseconds for 3 buckets</span></div><div class="line"><a name="l01274"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#ac884c17f3ec097c8dba8d8b960ce007b"> 1274</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#ac884c17f3ec097c8dba8d8b960ce007b">GCS_MAVLINK::find_next_bucket_to_send</a>()</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;{</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;<span class="preprocessor">#if GCS_DEBUG_SEND_MESSAGE_TIMINGS</span></div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    <span class="keywordtype">void</span> *data = <a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#a94ab41309b1ff10b8b862b826e59c882">scheduler</a>-&gt;<a class="code" href="classAP__HAL_1_1Scheduler.html#a12be479c359367d294348e70efd43e6b">disable_interrupts_save</a>();</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    uint32_t start_us = <a class="code" href="namespaceAP__HAL.html#a8293355e35887733b1fd151aef08a787">AP_HAL::micros</a>();</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;    <span class="keyword">const</span> uint16_t now16_ms{<a class="code" href="namespaceAP__HAL.html#a5a6ba28f61401b4abc39756468e9e2c9">AP_HAL::millis16</a>()};</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    <span class="comment">// all done sending this bucket... find another bucket...</span></div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    <a class="code" href="structGCS__MAVLINK.html#a76abb6bc896aa981fc4cefb99251f131">sending_bucket_id</a> = <a class="code" href="structGCS__MAVLINK.html#a709ce1a4676bcc73b7668ebe3ce1266b">no_bucket_to_send</a>;</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    uint16_t ms_before_send_next_bucket_to_send = UINT16_MAX;</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code" href="AP__Common_8h.html#a121caf32c5b5d704ef3453f0885a9ea5">ARRAY_SIZE</a>(<a class="code" href="structGCS__MAVLINK.html#ade499c2dfc150405083857afe83bf5bc">deferred_message_bucket</a>); i++) {</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="structGCS__MAVLINK.html#ade499c2dfc150405083857afe83bf5bc">deferred_message_bucket</a>[i].ap_message_ids.count() == 0) {</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;            <span class="comment">// no entries</span></div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;        }</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;        <span class="keyword">const</span> uint16_t interval = <a class="code" href="structGCS__MAVLINK.html#aa966f3ef11eb46a123a7a899053bfa73">get_reschedule_interval_ms</a>(<a class="code" href="structGCS__MAVLINK.html#ade499c2dfc150405083857afe83bf5bc">deferred_message_bucket</a>[i]);</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;        <span class="keyword">const</span> uint16_t ms_since_last_sent = now16_ms - <a class="code" href="structGCS__MAVLINK.html#ade499c2dfc150405083857afe83bf5bc">deferred_message_bucket</a>[i].<a class="code" href="structGCS__MAVLINK_1_1deferred__message__bucket__t.html#a4cd3b2c48f99cf4cc912e2fee8110ab2">last_sent_ms</a>;</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;        uint16_t ms_before_send_this_bucket;</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;        <span class="keywordflow">if</span> (ms_since_last_sent &gt; interval) {</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;            <span class="comment">// should already have sent this bucket!</span></div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;            ms_before_send_this_bucket = 0;</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;            ms_before_send_this_bucket = interval - ms_since_last_sent;</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;        }</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;        <span class="keywordflow">if</span> (ms_before_send_this_bucket &lt; ms_before_send_next_bucket_to_send) {</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;            <a class="code" href="structGCS__MAVLINK.html#a76abb6bc896aa981fc4cefb99251f131">sending_bucket_id</a> = i;</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;            ms_before_send_next_bucket_to_send = ms_before_send_this_bucket;</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;        }</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    }</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structGCS__MAVLINK.html#a76abb6bc896aa981fc4cefb99251f131">sending_bucket_id</a> != <a class="code" href="structGCS__MAVLINK.html#a709ce1a4676bcc73b7668ebe3ce1266b">no_bucket_to_send</a>) {</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a5599317d7992963a65d1658e6858c73d">bucket_message_ids_to_send</a> = <a class="code" href="structGCS__MAVLINK.html#ade499c2dfc150405083857afe83bf5bc">deferred_message_bucket</a>[<a class="code" href="structGCS__MAVLINK.html#a76abb6bc896aa981fc4cefb99251f131">sending_bucket_id</a>].<a class="code" href="structGCS__MAVLINK_1_1deferred__message__bucket__t.html#a8f4bf56ecfdeceba3cb32d6abdb53951">ap_message_ids</a>;</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a5599317d7992963a65d1658e6858c73d">bucket_message_ids_to_send</a>.<a class="code" href="classBitmask.html#ab753bfb6058f8a60e523c949802f3823">clearall</a>();</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;    }</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;<span class="preprocessor">#if GCS_DEBUG_SEND_MESSAGE_TIMINGS</span></div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;    uint32_t delta_us = <a class="code" href="namespaceAP__HAL.html#a8293355e35887733b1fd151aef08a787">AP_HAL::micros</a>() - start_us;</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;    <a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#a94ab41309b1ff10b8b862b826e59c882">scheduler</a>-&gt;<a class="code" href="classAP__HAL_1_1Scheduler.html#a48df2daefcd2301361d1637ba61cc211">restore_interrupts</a>(data);</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;    <span class="keywordflow">if</span> (delta_us &gt; try_send_message_stats.fnbts_maxtime) {</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;        try_send_message_stats.fnbts_maxtime = delta_us;</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    }</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;}</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;</div><div class="line"><a name="l01320"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#af2d72850e10bc8cdf005fbe901b3e704"> 1320</a></span>&#160;<a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991">ap_message</a> <a class="code" href="structGCS__MAVLINK.html#af2d72850e10bc8cdf005fbe901b3e704">GCS_MAVLINK::next_deferred_bucket_message_to_send</a>()</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;{</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structGCS__MAVLINK.html#a76abb6bc896aa981fc4cefb99251f131">sending_bucket_id</a> == <a class="code" href="structGCS__MAVLINK.html#a709ce1a4676bcc73b7668ebe3ce1266b">no_bucket_to_send</a>) {</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;        <span class="comment">// could happen if all streamrates are zero?</span></div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="structGCS__MAVLINK.html#a67db83a562c4e59da239aadbe2591209">no_message_to_send</a>;</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    }</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    <span class="keyword">const</span> uint16_t now16_ms = <a class="code" href="namespaceAP__HAL.html#a5a6ba28f61401b4abc39756468e9e2c9">AP_HAL::millis16</a>();</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    <span class="keyword">const</span> uint16_t ms_since_last_sent = now16_ms - <a class="code" href="structGCS__MAVLINK.html#ade499c2dfc150405083857afe83bf5bc">deferred_message_bucket</a>[<a class="code" href="structGCS__MAVLINK.html#a76abb6bc896aa981fc4cefb99251f131">sending_bucket_id</a>].<a class="code" href="structGCS__MAVLINK_1_1deferred__message__bucket__t.html#a4cd3b2c48f99cf4cc912e2fee8110ab2">last_sent_ms</a>;</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    <span class="keywordflow">if</span> (ms_since_last_sent &lt; <a class="code" href="structGCS__MAVLINK.html#aa966f3ef11eb46a123a7a899053bfa73">get_reschedule_interval_ms</a>(<a class="code" href="structGCS__MAVLINK.html#ade499c2dfc150405083857afe83bf5bc">deferred_message_bucket</a>[<a class="code" href="structGCS__MAVLINK.html#a76abb6bc896aa981fc4cefb99251f131">sending_bucket_id</a>])) {</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;        <span class="comment">// not time to send this bucket</span></div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="structGCS__MAVLINK.html#a67db83a562c4e59da239aadbe2591209">no_message_to_send</a>;</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    }</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    <span class="keyword">const</span> int16_t <a class="code" href="llex_8c.html#a8ab976102fb046f9974c53caaf5a1995">next</a> = <a class="code" href="structGCS__MAVLINK.html#a5599317d7992963a65d1658e6858c73d">bucket_message_ids_to_send</a>.<a class="code" href="classBitmask.html#abc5a24c44cdda315d2f22809f5299f5f">first_set</a>();</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="llex_8c.html#a8ab976102fb046f9974c53caaf5a1995">next</a> == -1) {</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;        <span class="comment">// should not happen</span></div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;<span class="preprocessor">#if CONFIG_HAL_BOARD == HAL_BOARD_SITL</span></div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;        <a class="code" href="namespaceAP__HAL.html#a71832f03d849a0c088f04fc98d3c8143">AP_HAL::panic</a>(<span class="stringliteral">&quot;next_deferred_bucket_message_to_send called on empty bucket&quot;</span>);</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#ac884c17f3ec097c8dba8d8b960ce007b">find_next_bucket_to_send</a>();</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="structGCS__MAVLINK.html#a67db83a562c4e59da239aadbe2591209">no_message_to_send</a>;</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;    }</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991">ap_message</a>)<a class="code" href="llex_8c.html#a8ab976102fb046f9974c53caaf5a1995">next</a>;</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;}</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;<span class="comment">// call try_send_message if appropriate.  Incorporates debug code to</span></div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;<span class="comment">// record how long it takes to send a message.  try_send_message is</span></div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;<span class="comment">// expected to be overridden, not this function.</span></div><div class="line"><a name="l01349"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#ae94077536892270b4a40e5bcddb1c2f9"> 1349</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="structGCS__MAVLINK.html#ae94077536892270b4a40e5bcddb1c2f9">GCS_MAVLINK::do_try_send_message</a>(<span class="keyword">const</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991">ap_message</a> <span class="keywordtype">id</span>)</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;{</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> in_delay_callback = <a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#a94ab41309b1ff10b8b862b826e59c882">scheduler</a>-&gt;<a class="code" href="classAP__HAL_1_1Scheduler.html#a19f18a35fab1e36be78b20c6f7bf77d5">in_delay_callback</a>();</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;    <span class="keywordflow">if</span> (in_delay_callback &amp;&amp; !<a class="code" href="structGCS__MAVLINK.html#a35662822061cee24dea1b6db5d507604">should_send_message_in_delay_callback</a>(<span class="keywordtype">id</span>)) {</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    }</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structGCS__MAVLINK.html#abcd38f5b7a9c3895b139a7aeaa6e65da">telemetry_delayed</a>()) {</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    }</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;<span class="preprocessor">#if GCS_DEBUG_SEND_MESSAGE_TIMINGS</span></div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;    <span class="keywordtype">void</span> *data = <a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#a94ab41309b1ff10b8b862b826e59c882">scheduler</a>-&gt;<a class="code" href="classAP__HAL_1_1Scheduler.html#a12be479c359367d294348e70efd43e6b">disable_interrupts_save</a>();</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    uint32_t start_send_message_us = <a class="code" href="namespaceAP__HAL.html#a8293355e35887733b1fd151aef08a787">AP_HAL::micros</a>();</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="structGCS__MAVLINK.html#a30034cdbd89bcfb86392411f9b5935db">try_send_message</a>(<span class="keywordtype">id</span>)) {</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;        <span class="comment">// didn&#39;t fit in buffer...</span></div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;<span class="preprocessor">#if GCS_DEBUG_SEND_MESSAGE_TIMINGS</span></div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;        try_send_message_stats.no_space_for_message++;</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;        <a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#a94ab41309b1ff10b8b862b826e59c882">scheduler</a>-&gt;<a class="code" href="classAP__HAL_1_1Scheduler.html#a48df2daefcd2301361d1637ba61cc211">restore_interrupts</a>(data);</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    }</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;<span class="preprocessor">#if GCS_DEBUG_SEND_MESSAGE_TIMINGS</span></div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    <span class="keyword">const</span> uint32_t delta_us = <a class="code" href="namespaceAP__HAL.html#a8293355e35887733b1fd151aef08a787">AP_HAL::micros</a>() - start_send_message_us;</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    <a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#a94ab41309b1ff10b8b862b826e59c882">scheduler</a>-&gt;<a class="code" href="classAP__HAL_1_1Scheduler.html#a48df2daefcd2301361d1637ba61cc211">restore_interrupts</a>(data);</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;    <span class="keywordflow">if</span> (delta_us &gt; try_send_message_stats.longest_time_us) {</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;        try_send_message_stats.longest_time_us = delta_us;</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;        try_send_message_stats.longest_id = id;</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    }</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;}</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;</div><div class="line"><a name="l01381"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#ac5b5b95814e90243cc47e05742146372"> 1381</a></span>&#160;int8_t <a class="code" href="structGCS__MAVLINK.html#ac5b5b95814e90243cc47e05742146372">GCS_MAVLINK::get_deferred_message_index</a>(<span class="keyword">const</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991">ap_message</a> <span class="keywordtype">id</span>)<span class="keyword"> const</span></div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code" href="AP__Common_8h.html#a121caf32c5b5d704ef3453f0885a9ea5">ARRAY_SIZE</a>(<a class="code" href="structGCS__MAVLINK.html#a7677b38b86b12d2966994a54ea5edbd4">deferred_message</a>); i++) {</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="structGCS__MAVLINK.html#a7677b38b86b12d2966994a54ea5edbd4">deferred_message</a>[i].<span class="keywordtype">id</span> == <span class="keywordtype">id</span>) {</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;            <span class="keywordflow">return</span> i;</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;        }</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    }</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;}</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;</div><div class="line"><a name="l01391"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#acfa9b0c31f0d23a79278696056b106e4"> 1391</a></span>&#160;int8_t <a class="code" href="structGCS__MAVLINK.html#acfa9b0c31f0d23a79278696056b106e4">GCS_MAVLINK::deferred_message_to_send_index</a>()</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;{</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    <span class="keyword">const</span> uint16_t now16_ms = <a class="code" href="namespaceAP__HAL.html#a5a6ba28f61401b4abc39756468e9e2c9">AP_HAL::millis16</a>();</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structGCS__MAVLINK.html#ad3c8c95f626ce715264e4d5fd3e18ab0">next_deferred_message_to_send_cache</a> == -1) {</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;        uint16_t ms_before_next_message_to_send = UINT16_MAX;</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;        <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code" href="AP__Common_8h.html#a121caf32c5b5d704ef3453f0885a9ea5">ARRAY_SIZE</a>(<a class="code" href="structGCS__MAVLINK.html#a7677b38b86b12d2966994a54ea5edbd4">deferred_message</a>); i++) {</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;            <span class="keyword">const</span> uint16_t <a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a> = <a class="code" href="structGCS__MAVLINK.html#a7677b38b86b12d2966994a54ea5edbd4">deferred_message</a>[i].<a class="code" href="structGCS__MAVLINK_1_1deferred__message__t.html#a1aed6ec6ca91364e195c5a7c1c219ace">interval_ms</a>;</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a> == 0) {</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;            }</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;            <span class="keyword">const</span> uint16_t ms_since_last_sent = now16_ms - <a class="code" href="structGCS__MAVLINK.html#a7677b38b86b12d2966994a54ea5edbd4">deferred_message</a>[i].<a class="code" href="structGCS__MAVLINK_1_1deferred__message__t.html#a2ff0cd2e84d12ace0f8229d0044c8e8f">last_sent_ms</a>;</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;            uint16_t ms_before_send_this_message;</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;            <span class="keywordflow">if</span> (ms_since_last_sent &gt; <a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a>) {</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;                <span class="comment">// should already have sent this one!</span></div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;                ms_before_send_this_message = 0;</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;                ms_before_send_this_message = <a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a> - ms_since_last_sent;</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;            }</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;            <span class="keywordflow">if</span> (ms_before_send_this_message &lt; ms_before_next_message_to_send) {</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;                <a class="code" href="structGCS__MAVLINK.html#ad3c8c95f626ce715264e4d5fd3e18ab0">next_deferred_message_to_send_cache</a> = i;</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;                ms_before_next_message_to_send = ms_before_send_this_message;</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;            }</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;        }</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    }</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structGCS__MAVLINK.html#ad3c8c95f626ce715264e4d5fd3e18ab0">next_deferred_message_to_send_cache</a> == -1) {</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;        <span class="comment">// this really shouldn&#39;t happen; we force parameter rates, for example.</span></div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;    }</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;    <span class="keyword">const</span> uint16_t ms_since_last_sent = now16_ms - <a class="code" href="structGCS__MAVLINK.html#a7677b38b86b12d2966994a54ea5edbd4">deferred_message</a>[<a class="code" href="structGCS__MAVLINK.html#ad3c8c95f626ce715264e4d5fd3e18ab0">next_deferred_message_to_send_cache</a>].<a class="code" href="structGCS__MAVLINK_1_1deferred__message__t.html#a2ff0cd2e84d12ace0f8229d0044c8e8f">last_sent_ms</a>;</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;    <span class="keywordflow">if</span> (ms_since_last_sent &lt; <a class="code" href="structGCS__MAVLINK.html#a7677b38b86b12d2966994a54ea5edbd4">deferred_message</a>[<a class="code" href="structGCS__MAVLINK.html#ad3c8c95f626ce715264e4d5fd3e18ab0">next_deferred_message_to_send_cache</a>].<a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a>) {</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;    }</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structGCS__MAVLINK.html#ad3c8c95f626ce715264e4d5fd3e18ab0">next_deferred_message_to_send_cache</a>;</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;}</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;</div><div class="line"><a name="l01430"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a97b3a94ebc165ee34ee93b26e2dee23d"> 1430</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a97b3a94ebc165ee34ee93b26e2dee23d">GCS_MAVLINK::update_send</a>()</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;{</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#a94ab41309b1ff10b8b862b826e59c882">scheduler</a>-&gt;<a class="code" href="classAP__HAL_1_1Scheduler.html#a19f18a35fab1e36be78b20c6f7bf77d5">in_delay_callback</a>()) {</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;        <span class="comment">// AP_Logger will not send log data if we are armed.</span></div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;        <a class="code" href="namespaceAP.html#aa35bfac1ea2da16f110e8e72db7b3b20">AP::logger</a>().<a class="code" href="classAP__Logger.html#afa00768a36d54330f6613b477b3c4e05">handle_log_send</a>();</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    }</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="structGCS__MAVLINK.html#af11dfe83778a867387d79356d417a6a7">deferred_messages_initialised</a>) {</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a2377a4ec647d1a9052f654e0e899a696">initialise_message_intervals_from_streamrates</a>();</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#af11dfe83778a867387d79356d417a6a7">deferred_messages_initialised</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    }</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;<span class="preprocessor">#if GCS_DEBUG_SEND_MESSAGE_TIMINGS</span></div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    uint32_t retry_deferred_body_start = <a class="code" href="namespaceAP__HAL.html#a8293355e35887733b1fd151aef08a787">AP_HAL::micros</a>();</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;    <span class="keyword">const</span> uint32_t start = <a class="code" href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a>();</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a>() - start &lt; 5) { <span class="comment">// spend a max of 5ms sending messages.  This should never trigger - out_of_time() should become true</span></div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="GCS__Common_8cpp.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a>().out_of_time()) {</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;        }</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;<span class="preprocessor">#if GCS_DEBUG_SEND_MESSAGE_TIMINGS</span></div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;        retry_deferred_body_start = <a class="code" href="namespaceAP__HAL.html#a8293355e35887733b1fd151aef08a787">AP_HAL::micros</a>();</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;        <span class="comment">// check if any &quot;specially handled&quot; messages should be sent out</span></div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;        {</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;            <span class="keyword">const</span> int8_t <a class="code" href="llex_8c.html#a8ab976102fb046f9974c53caaf5a1995">next</a> = <a class="code" href="structGCS__MAVLINK.html#acfa9b0c31f0d23a79278696056b106e4">deferred_message_to_send_index</a>();</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="llex_8c.html#a8ab976102fb046f9974c53caaf5a1995">next</a> != -1) {</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="structGCS__MAVLINK.html#ae94077536892270b4a40e5bcddb1c2f9">do_try_send_message</a>(<a class="code" href="structGCS__MAVLINK.html#a7677b38b86b12d2966994a54ea5edbd4">deferred_message</a>[<a class="code" href="llex_8c.html#a8ab976102fb046f9974c53caaf5a1995">next</a>].<span class="keywordtype">id</span>)) {</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;                }</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;                <a class="code" href="structGCS__MAVLINK.html#a7677b38b86b12d2966994a54ea5edbd4">deferred_message</a>[<a class="code" href="llex_8c.html#a8ab976102fb046f9974c53caaf5a1995">next</a>].<a class="code" href="structGCS__MAVLINK_1_1deferred__message__t.html#a2ff0cd2e84d12ace0f8229d0044c8e8f">last_sent_ms</a> += <a class="code" href="structGCS__MAVLINK.html#a7677b38b86b12d2966994a54ea5edbd4">deferred_message</a>[<a class="code" href="llex_8c.html#a8ab976102fb046f9974c53caaf5a1995">next</a>].<a class="code" href="structGCS__MAVLINK_1_1deferred__message__t.html#a1aed6ec6ca91364e195c5a7c1c219ace">interval_ms</a>;</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;                <a class="code" href="structGCS__MAVLINK.html#ad3c8c95f626ce715264e4d5fd3e18ab0">next_deferred_message_to_send_cache</a> = -1; <span class="comment">// deferred_message_to_send will recalculate</span></div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;<span class="preprocessor">#if GCS_DEBUG_SEND_MESSAGE_TIMINGS</span></div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;                <span class="keyword">const</span> uint32_t stop = <a class="code" href="namespaceAP__HAL.html#a8293355e35887733b1fd151aef08a787">AP_HAL::micros</a>();</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;                <span class="keyword">const</span> uint32_t <a class="code" href="examples_2RCOutput_2RCOutput_8cpp.html#a69a2e4606b99ee565937e4ae119bfa77">delta</a> = stop - retry_deferred_body_start;</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="examples_2RCOutput_2RCOutput_8cpp.html#a69a2e4606b99ee565937e4ae119bfa77">delta</a> &gt; try_send_message_stats.max_retry_deferred_body_us) {</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;                    try_send_message_stats.max_retry_deferred_body_us = <a class="code" href="examples_2RCOutput_2RCOutput_8cpp.html#a69a2e4606b99ee565937e4ae119bfa77">delta</a>;</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;                    try_send_message_stats.max_retry_deferred_body_type = 1;</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;                }</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;            }</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;        }</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;        <span class="comment">// check for any messages that the code has explicitly sent</span></div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;        <span class="keyword">const</span> int16_t fs = <a class="code" href="structGCS__MAVLINK.html#acbeb815a99ca58c50c79d0e460649a5c">pushed_ap_message_ids</a>.<a class="code" href="classBitmask.html#abc5a24c44cdda315d2f22809f5299f5f">first_set</a>();</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;        <span class="keywordflow">if</span> (fs != -1) {</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;            <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991">ap_message</a> <a class="code" href="llex_8c.html#a8ab976102fb046f9974c53caaf5a1995">next</a> = (<a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991">ap_message</a>)fs;</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="structGCS__MAVLINK.html#ae94077536892270b4a40e5bcddb1c2f9">do_try_send_message</a>(<a class="code" href="llex_8c.html#a8ab976102fb046f9974c53caaf5a1995">next</a>)) {</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;            }</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;            <a class="code" href="structGCS__MAVLINK.html#acbeb815a99ca58c50c79d0e460649a5c">pushed_ap_message_ids</a>.<a class="code" href="classBitmask.html#a55ccc426e20a9bf4d5e9fc7a593985e8">clear</a>(<a class="code" href="llex_8c.html#a8ab976102fb046f9974c53caaf5a1995">next</a>);</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;<span class="preprocessor">#if GCS_DEBUG_SEND_MESSAGE_TIMINGS</span></div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;            <span class="keyword">const</span> uint32_t stop = <a class="code" href="namespaceAP__HAL.html#a8293355e35887733b1fd151aef08a787">AP_HAL::micros</a>();</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;            <span class="keyword">const</span> uint32_t <a class="code" href="examples_2RCOutput_2RCOutput_8cpp.html#a69a2e4606b99ee565937e4ae119bfa77">delta</a> = stop - retry_deferred_body_start;</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="examples_2RCOutput_2RCOutput_8cpp.html#a69a2e4606b99ee565937e4ae119bfa77">delta</a> &gt; try_send_message_stats.max_retry_deferred_body_us) {</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;                try_send_message_stats.max_retry_deferred_body_us = <a class="code" href="examples_2RCOutput_2RCOutput_8cpp.html#a69a2e4606b99ee565937e4ae119bfa77">delta</a>;</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;                try_send_message_stats.max_retry_deferred_body_type = 2;</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;            }</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;        }</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;        <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991">ap_message</a> <a class="code" href="llex_8c.html#a8ab976102fb046f9974c53caaf5a1995">next</a> = <a class="code" href="structGCS__MAVLINK.html#af2d72850e10bc8cdf005fbe901b3e704">next_deferred_bucket_message_to_send</a>();</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="llex_8c.html#a8ab976102fb046f9974c53caaf5a1995">next</a> != <a class="code" href="structGCS__MAVLINK.html#a67db83a562c4e59da239aadbe2591209">no_message_to_send</a>) {</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="structGCS__MAVLINK.html#ae94077536892270b4a40e5bcddb1c2f9">do_try_send_message</a>(<a class="code" href="llex_8c.html#a8ab976102fb046f9974c53caaf5a1995">next</a>)) {</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;            }</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;            <a class="code" href="structGCS__MAVLINK.html#a5599317d7992963a65d1658e6858c73d">bucket_message_ids_to_send</a>.<a class="code" href="classBitmask.html#a55ccc426e20a9bf4d5e9fc7a593985e8">clear</a>(<a class="code" href="llex_8c.html#a8ab976102fb046f9974c53caaf5a1995">next</a>);</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="structGCS__MAVLINK.html#a5599317d7992963a65d1658e6858c73d">bucket_message_ids_to_send</a>.<a class="code" href="classBitmask.html#a66fc0bea945004ad5a928d3eb31fc628">count</a>() == 0) {</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;                <span class="comment">// we sent everything in the bucket.  Reschedule it.</span></div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;                <a class="code" href="structGCS__MAVLINK.html#ade499c2dfc150405083857afe83bf5bc">deferred_message_bucket</a>[<a class="code" href="structGCS__MAVLINK.html#a76abb6bc896aa981fc4cefb99251f131">sending_bucket_id</a>].<a class="code" href="structGCS__MAVLINK_1_1deferred__message__bucket__t.html#a4cd3b2c48f99cf4cc912e2fee8110ab2">last_sent_ms</a> +=</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;                    <a class="code" href="structGCS__MAVLINK.html#aa966f3ef11eb46a123a7a899053bfa73">get_reschedule_interval_ms</a>(<a class="code" href="structGCS__MAVLINK.html#ade499c2dfc150405083857afe83bf5bc">deferred_message_bucket</a>[<a class="code" href="structGCS__MAVLINK.html#a76abb6bc896aa981fc4cefb99251f131">sending_bucket_id</a>]);</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;                <a class="code" href="structGCS__MAVLINK.html#ac884c17f3ec097c8dba8d8b960ce007b">find_next_bucket_to_send</a>();</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;            }</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;<span class="preprocessor">#if GCS_DEBUG_SEND_MESSAGE_TIMINGS</span></div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;                <span class="keyword">const</span> uint32_t stop = <a class="code" href="namespaceAP__HAL.html#a8293355e35887733b1fd151aef08a787">AP_HAL::micros</a>();</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;                <span class="keyword">const</span> uint32_t <a class="code" href="examples_2RCOutput_2RCOutput_8cpp.html#a69a2e4606b99ee565937e4ae119bfa77">delta</a> = stop - retry_deferred_body_start;</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="examples_2RCOutput_2RCOutput_8cpp.html#a69a2e4606b99ee565937e4ae119bfa77">delta</a> &gt; try_send_message_stats.max_retry_deferred_body_us) {</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;                    try_send_message_stats.max_retry_deferred_body_us = <a class="code" href="examples_2RCOutput_2RCOutput_8cpp.html#a69a2e4606b99ee565937e4ae119bfa77">delta</a>;</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;                    try_send_message_stats.max_retry_deferred_body_type = 3;</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;                }</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;        }</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    }</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;<span class="preprocessor">#if GCS_DEBUG_SEND_MESSAGE_TIMINGS</span></div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    <span class="keyword">const</span> uint32_t stop = <a class="code" href="namespaceAP__HAL.html#a8293355e35887733b1fd151aef08a787">AP_HAL::micros</a>();</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;    <span class="keyword">const</span> uint32_t <a class="code" href="examples_2RCOutput_2RCOutput_8cpp.html#a69a2e4606b99ee565937e4ae119bfa77">delta</a> = stop - retry_deferred_body_start;</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="examples_2RCOutput_2RCOutput_8cpp.html#a69a2e4606b99ee565937e4ae119bfa77">delta</a> &gt; try_send_message_stats.max_retry_deferred_body_us) {</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;        try_send_message_stats.max_retry_deferred_body_us = <a class="code" href="examples_2RCOutput_2RCOutput_8cpp.html#a69a2e4606b99ee565937e4ae119bfa77">delta</a>;</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;        try_send_message_stats.max_retry_deferred_body_type = 4;</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    }</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;    <span class="comment">// update the number of packets transmitted base on seqno, making</span></div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    <span class="comment">// the assumption that we don&#39;t send more than 256 messages</span></div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;    <span class="comment">// between the last pass through here</span></div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;    mavlink_status_t *status = mavlink_get_channel_status(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>);</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;    <span class="keywordflow">if</span> (status != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a1abbf4a96b6bddc103570b154fb59269">send_packet_count</a> += uint8_t(status-&gt;current_tx_seq - <a class="code" href="structGCS__MAVLINK.html#a5a0b046381d63cc005988cf75d7c5b1e">last_tx_seq</a>);</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a5a0b046381d63cc005988cf75d7c5b1e">last_tx_seq</a> = status-&gt;current_tx_seq;</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;    }</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;}</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;</div><div class="line"><a name="l01539"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#aa12f134b20fffe73a1d17a2eef834836"> 1539</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#aa12f134b20fffe73a1d17a2eef834836">GCS_MAVLINK::remove_message_from_bucket</a>(int8_t bucket, <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991">ap_message</a> <span class="keywordtype">id</span>)</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;{</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;    <a class="code" href="structGCS__MAVLINK.html#ade499c2dfc150405083857afe83bf5bc">deferred_message_bucket</a>[bucket].<a class="code" href="structGCS__MAVLINK_1_1deferred__message__bucket__t.html#a8f4bf56ecfdeceba3cb32d6abdb53951">ap_message_ids</a>.<a class="code" href="classBitmask.html#a55ccc426e20a9bf4d5e9fc7a593985e8">clear</a>(<span class="keywordtype">id</span>);</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;    <span class="keywordflow">if</span> (bucket == <a class="code" href="structGCS__MAVLINK.html#a76abb6bc896aa981fc4cefb99251f131">sending_bucket_id</a>) {</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a5599317d7992963a65d1658e6858c73d">bucket_message_ids_to_send</a>.<a class="code" href="classBitmask.html#a55ccc426e20a9bf4d5e9fc7a593985e8">clear</a>(<span class="keywordtype">id</span>);</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    }</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structGCS__MAVLINK.html#ade499c2dfc150405083857afe83bf5bc">deferred_message_bucket</a>[bucket].ap_message_ids.count() == 0) {</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;        <span class="comment">// bucket empty.  Free it:</span></div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#ade499c2dfc150405083857afe83bf5bc">deferred_message_bucket</a>[bucket].<a class="code" href="structGCS__MAVLINK_1_1deferred__message__bucket__t.html#ab9e7ae8495102a2d21a67ada970d0b0d">interval_ms</a> = 0;</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#ade499c2dfc150405083857afe83bf5bc">deferred_message_bucket</a>[bucket].<a class="code" href="structGCS__MAVLINK_1_1deferred__message__bucket__t.html#a4cd3b2c48f99cf4cc912e2fee8110ab2">last_sent_ms</a> = 0;</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="structGCS__MAVLINK.html#a76abb6bc896aa981fc4cefb99251f131">sending_bucket_id</a> == bucket) {</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;            <a class="code" href="structGCS__MAVLINK.html#ac884c17f3ec097c8dba8d8b960ce007b">find_next_bucket_to_send</a>();</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;        }</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    }</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;}</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;</div><div class="line"><a name="l01557"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a4d854fdc822e438da966a41782e8bb82"> 1557</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="structGCS__MAVLINK.html#a4d854fdc822e438da966a41782e8bb82">GCS_MAVLINK::set_ap_message_interval</a>(<span class="keyword">enum</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991">ap_message</a> <span class="keywordtype">id</span>, uint16_t interval_ms)</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;{</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;    <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a1d5ca2d41c5912a2b2d745603598e06b">MSG_NEXT_PARAM</a>) {</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;        <span class="comment">// force parameters to *always* get streamed so a vehicle is</span></div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;        <span class="comment">// recoverable from bad configuration:</span></div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a> == 0) {</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;            <a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a> = 100;</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a> &gt; 1000) {</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;            <a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a> = 1000;</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;        }</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;    }</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;    <span class="comment">// send messages out at most 80% of main loop rate</span></div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a> != 0 &amp;&amp;</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a>*800 &lt; <a class="code" href="namespaceAP.html#acdeafe5406efd2650ba54d24d3aecb7c">AP::scheduler</a>().get_loop_period_us()) {</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a> = <a class="code" href="namespaceAP.html#acdeafe5406efd2650ba54d24d3aecb7c">AP::scheduler</a>().<a class="code" href="classAP__Scheduler.html#a6ea2df59d699e91c31e1688ded595f1c">get_loop_period_us</a>()/800.0f;</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;    }</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    <span class="comment">// check if it&#39;s a specially-handled message:</span></div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    <span class="keyword">const</span> int8_t deferred_offset = <a class="code" href="structGCS__MAVLINK.html#ac5b5b95814e90243cc47e05742146372">get_deferred_message_index</a>(<span class="keywordtype">id</span>);</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;    <span class="keywordflow">if</span> (deferred_offset != -1) {</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a7677b38b86b12d2966994a54ea5edbd4">deferred_message</a>[deferred_offset].<a class="code" href="structGCS__MAVLINK_1_1deferred__message__t.html#a1aed6ec6ca91364e195c5a7c1c219ace">interval_ms</a> = <a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a>;</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a7677b38b86b12d2966994a54ea5edbd4">deferred_message</a>[deferred_offset].<a class="code" href="structGCS__MAVLINK_1_1deferred__message__t.html#a2ff0cd2e84d12ace0f8229d0044c8e8f">last_sent_ms</a> = <a class="code" href="namespaceAP__HAL.html#a5a6ba28f61401b4abc39756468e9e2c9">AP_HAL::millis16</a>();</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;    }</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;    <span class="comment">// see which bucket has the closest interval:</span></div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;    int8_t closest_bucket = -1;</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;    uint16_t closest_bucket_interval_delta = UINT16_MAX;</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;    int8_t in_bucket = -1;</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;    int8_t empty_bucket_id = -1;</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;    <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code" href="AP__Common_8h.html#a121caf32c5b5d704ef3453f0885a9ea5">ARRAY_SIZE</a>(<a class="code" href="structGCS__MAVLINK.html#ade499c2dfc150405083857afe83bf5bc">deferred_message_bucket</a>); i++) {</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;        <span class="keyword">const</span> <a class="code" href="structGCS__MAVLINK_1_1deferred__message__bucket__t.html">deferred_message_bucket_t</a> &amp;bucket = <a class="code" href="structGCS__MAVLINK.html#ade499c2dfc150405083857afe83bf5bc">deferred_message_bucket</a>[i];</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;        <span class="keywordflow">if</span> (bucket.<a class="code" href="structGCS__MAVLINK_1_1deferred__message__bucket__t.html#ab9e7ae8495102a2d21a67ada970d0b0d">interval_ms</a> == 0) {</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;            <span class="comment">// unused bucket</span></div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;            <span class="keywordflow">if</span> (empty_bucket_id == -1) {</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;                empty_bucket_id = i;</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;            }</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;<span class="preprocessor">#if CONFIG_HAL_BOARD == HAL_BOARD_SITL</span></div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;            <span class="keywordflow">if</span> (bucket.<a class="code" href="structGCS__MAVLINK_1_1deferred__message__bucket__t.html#a8f4bf56ecfdeceba3cb32d6abdb53951">ap_message_ids</a>.<a class="code" href="classBitmask.html#a66fc0bea945004ad5a928d3eb31fc628">count</a>() != 0) {</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;                <a class="code" href="namespaceAP__HAL.html#a71832f03d849a0c088f04fc98d3c8143">AP_HAL::panic</a>(<span class="stringliteral">&quot;Bucket %u has zero interval but with ids set&quot;</span>, i);</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;            }</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;        }</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;        <span class="keywordflow">if</span> (bucket.<a class="code" href="structGCS__MAVLINK_1_1deferred__message__bucket__t.html#a8f4bf56ecfdeceba3cb32d6abdb53951">ap_message_ids</a>.<a class="code" href="classBitmask.html#a0be34bb49dbf06972c4a16c0b12cd846">get</a>(<span class="keywordtype">id</span>)) {</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;            in_bucket = i;</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;        }</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;        <span class="keyword">const</span> uint16_t interval_delta = abs(bucket.<a class="code" href="structGCS__MAVLINK_1_1deferred__message__bucket__t.html#ab9e7ae8495102a2d21a67ada970d0b0d">interval_ms</a> - <a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a>);</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;        <span class="keywordflow">if</span> (interval_delta &lt; closest_bucket_interval_delta) {</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;            closest_bucket = i;</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;            closest_bucket_interval_delta = interval_delta;</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;        }</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;    }</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;    <span class="keywordflow">if</span> (in_bucket == -1 &amp;&amp; <a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a> == 0) {</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;        <span class="comment">// not in a bucket and told to remove from scheduling</span></div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;    }</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    <span class="keywordflow">if</span> (in_bucket != -1) {</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a> == 0) {</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;            <span class="comment">// remove it</span></div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;            <a class="code" href="structGCS__MAVLINK.html#aa12f134b20fffe73a1d17a2eef834836">remove_message_from_bucket</a>(in_bucket, <span class="keywordtype">id</span>);</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;        }</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;        <span class="keywordflow">if</span> (closest_bucket_interval_delta == 0 &amp;&amp;</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;            in_bucket == closest_bucket) {</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;            <span class="comment">// don&#39;t need to move it</span></div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;        }</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;        <span class="comment">// remove from existing bucket</span></div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#aa12f134b20fffe73a1d17a2eef834836">remove_message_from_bucket</a>(in_bucket, <span class="keywordtype">id</span>);</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;        <span class="keywordflow">if</span> (empty_bucket_id == -1 &amp;&amp;</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;            <a class="code" href="structGCS__MAVLINK.html#ade499c2dfc150405083857afe83bf5bc">deferred_message_bucket</a>[in_bucket].ap_message_ids.count() == 0) {</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;            empty_bucket_id = in_bucket;</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;        }</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    }</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    <span class="keywordflow">if</span> (closest_bucket == -1 &amp;&amp; empty_bucket_id == -1) {</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;        <span class="comment">// gah?!</span></div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;<span class="preprocessor">#if CONFIG_HAL_BOARD == HAL_BOARD_SITL</span></div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;        ::fprintf(stderr, <span class="stringliteral">&quot;no buckets?!\n&quot;</span>);</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;        abort();</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    }</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;    <span class="keywordflow">if</span> (closest_bucket_interval_delta != 0 &amp;&amp;</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;        empty_bucket_id != -1) {</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;        <span class="comment">// allocate a bucket for this interval</span></div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#ade499c2dfc150405083857afe83bf5bc">deferred_message_bucket</a>[empty_bucket_id].<a class="code" href="structGCS__MAVLINK_1_1deferred__message__bucket__t.html#ab9e7ae8495102a2d21a67ada970d0b0d">interval_ms</a> = <a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a>;</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#ade499c2dfc150405083857afe83bf5bc">deferred_message_bucket</a>[empty_bucket_id].<a class="code" href="structGCS__MAVLINK_1_1deferred__message__bucket__t.html#a4cd3b2c48f99cf4cc912e2fee8110ab2">last_sent_ms</a> = <a class="code" href="namespaceAP__HAL.html#a5a6ba28f61401b4abc39756468e9e2c9">AP_HAL::millis16</a>();</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;        closest_bucket = empty_bucket_id;</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;        closest_bucket_interval_delta = 0;</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    }</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    <a class="code" href="structGCS__MAVLINK.html#ade499c2dfc150405083857afe83bf5bc">deferred_message_bucket</a>[closest_bucket].<a class="code" href="structGCS__MAVLINK_1_1deferred__message__bucket__t.html#a8f4bf56ecfdeceba3cb32d6abdb53951">ap_message_ids</a>.<a class="code" href="classBitmask.html#a6d942e61abc55c452b001b11dadf8a18">set</a>(<span class="keywordtype">id</span>);</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structGCS__MAVLINK.html#a76abb6bc896aa981fc4cefb99251f131">sending_bucket_id</a> == <a class="code" href="structGCS__MAVLINK.html#a709ce1a4676bcc73b7668ebe3ce1266b">no_bucket_to_send</a>) {</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a76abb6bc896aa981fc4cefb99251f131">sending_bucket_id</a> = closest_bucket;</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a5599317d7992963a65d1658e6858c73d">bucket_message_ids_to_send</a> = <a class="code" href="structGCS__MAVLINK.html#ade499c2dfc150405083857afe83bf5bc">deferred_message_bucket</a>[closest_bucket].<a class="code" href="structGCS__MAVLINK_1_1deferred__message__bucket__t.html#a8f4bf56ecfdeceba3cb32d6abdb53951">ap_message_ids</a>;</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;    }</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;}</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;<span class="comment">// queue a message to be sent (try_send_message does the *actual*</span></div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;<span class="comment">// mavlink work!)</span></div><div class="line"><a name="l01666"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a4902306dab46ff02b2296f99eb1f1c9c"> 1666</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a4902306dab46ff02b2296f99eb1f1c9c">GCS_MAVLINK::send_message</a>(<span class="keyword">enum</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991">ap_message</a> <span class="keywordtype">id</span>)</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;{</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991aaf685040f895290768639de8386f0f75">MSG_HEARTBEAT</a>) {</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a557b471724d4f126458757e0c4f54e78">save_signing_timestamp</a>(<span class="keyword">false</span>);</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;        <span class="comment">// update the mask of all streaming channels</span></div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="structGCS__MAVLINK.html#a829fb3ed239c473047e2fa3cd58306c5">is_streaming</a>()) {</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;            <a class="code" href="structGCS__MAVLINK.html#a615db40b8b5652946110bd9a8f757f9c">GCS_MAVLINK::chan_is_streaming</a> |= (1U&lt;&lt;(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>-MAVLINK_COMM_0));</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;            <a class="code" href="structGCS__MAVLINK.html#a615db40b8b5652946110bd9a8f757f9c">GCS_MAVLINK::chan_is_streaming</a> &amp;= ~(1U&lt;&lt;(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>-MAVLINK_COMM_0));</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;        }</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;    }</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;    <a class="code" href="structGCS__MAVLINK.html#acbeb815a99ca58c50c79d0e460649a5c">pushed_ap_message_ids</a>.<a class="code" href="classBitmask.html#a6d942e61abc55c452b001b11dadf8a18">set</a>(<span class="keywordtype">id</span>);</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;}</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;</div><div class="line"><a name="l01681"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#aabf8eb6ddc5987a67d80ba3100531b25"> 1681</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#aabf8eb6ddc5987a67d80ba3100531b25">GCS_MAVLINK::packetReceived</a>(<span class="keyword">const</span> mavlink_status_t &amp;status,</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;                                 mavlink_message_t &amp;msg)</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;{</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;    <span class="comment">// we exclude radio packets because we historically used this to</span></div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    <span class="comment">// make it possible to use the CLI over the radio</span></div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;    <span class="keywordflow">if</span> (msg.msgid != MAVLINK_MSG_ID_RADIO &amp;&amp; msg.msgid != MAVLINK_MSG_ID_RADIO_STATUS) {</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;        <span class="keyword">const</span> uint8_t mask = (1U&lt;&lt;(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>-MAVLINK_COMM_0));</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;        <span class="keywordflow">if</span> (!(mask &amp; <a class="code" href="structGCS__MAVLINK.html#affbf86ced2958539d0ccc372f9fba3d6">mavlink_private</a>)) {</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;            <a class="code" href="structGCS__MAVLINK.html#a9d41c619b9282f98439533324050c99c">mavlink_active</a> |= mask;</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;        }</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    }</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;    <span class="keywordflow">if</span> (!(status.flags &amp; MAVLINK_STATUS_FLAG_IN_MAVLINK1) &amp;&amp;</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;        (status.flags &amp; MAVLINK_STATUS_FLAG_OUT_MAVLINK1) &amp;&amp;</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;        <a class="code" href="namespaceAP.html#aa01135941499a6cbb5fc30403fc24c65">AP::serialmanager</a>().<a class="code" href="classAP__SerialManager.html#aeec52d0317706a561feba321569f09a9">get_mavlink_protocol</a>(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>) == <a class="code" href="classAP__SerialManager.html#af95280ba50704a8adece62755cb348e7a0e4f0e3620bdb2bf2f9e79058a3c095b">AP_SerialManager::SerialProtocol_MAVLink2</a>) {</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;        <span class="comment">// if we receive any MAVLink2 packets on a connection</span></div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;        <span class="comment">// currently sending MAVLink1 then switch to sending</span></div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;        <span class="comment">// MAVLink2</span></div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;        mavlink_status_t *cstatus = mavlink_get_channel_status(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>);</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;        <span class="keywordflow">if</span> (cstatus != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;            cstatus-&gt;flags &amp;= ~MAVLINK_STATUS_FLAG_OUT_MAVLINK1;</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;        }</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;    }</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="structGCS__MAVLINK.html#a51db13159f5a86687384c9e6739607a1">routing</a>.<a class="code" href="classMAVLink__routing.html#a474038c8ab695c57e23fb6fec4664947">check_and_forward</a>(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>, &amp;msg)) {</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;        <span class="comment">// the routing code has indicated we should not handle this packet locally</span></div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;    }</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="structGCS__MAVLINK.html#a29f1b5bdb21d1e135278aa29d8c55e65">accept_packet</a>(status, msg)) {</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;        <span class="comment">// e.g. enforce-sysid says we shouldn&#39;t look at this packet</span></div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;    }</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;    <a class="code" href="structGCS__MAVLINK.html#a870f84d9aa1c445b2b0d4d7101b836e1">handleMessage</a>(&amp;msg);</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;}</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l01715"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#ac22097067827164c0c26e7ead36b21e7"> 1715</a></span>&#160;<a class="code" href="structGCS__MAVLINK.html#ac22097067827164c0c26e7ead36b21e7">GCS_MAVLINK::update_receive</a>(uint32_t max_time_us)</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;{</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    <span class="comment">// receive new packets</span></div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    mavlink_message_t msg;</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    mavlink_status_t status;</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;    uint32_t tstart_us = <a class="code" href="namespaceAP__HAL.html#a8293355e35887733b1fd151aef08a787">AP_HAL::micros</a>();</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;    uint32_t now_ms = <a class="code" href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a>();</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;    <a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#a9337a60383f4264fa96a20dbe43a4e2e">util</a>-&gt;<a class="code" href="classAP__HAL_1_1Util.html#a8ee016bee7e471240be5a2c648015a1d">perf_begin</a>(<a class="code" href="structGCS__MAVLINK.html#acf70ad80c7031570ae4a4cc1bd4f3c31">_perf_update</a>);</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;    status.packet_rx_drop_count = 0;</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;    <span class="comment">// process received bytes</span></div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;    uint16_t nbytes = <a class="code" href="GCS__MAVLink_8cpp.html#a2817de906dc695cf406a4a43be1bc724">comm_get_available</a>(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>);</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;    <span class="keywordflow">for</span> (uint16_t i=0; i&lt;nbytes; i++)</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;    {</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;        <span class="keyword">const</span> uint8_t c = (uint8_t)<a class="code" href="structGCS__MAVLINK.html#a534b55e4a0350601fbdc54818a6dedbe">_port</a>-&gt;<a class="code" href="classAP__HAL_1_1BetterStream.html#a65082ecb994170fc6d2a7ff2bcc301a7">read</a>();</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;        <span class="keyword">const</span> uint32_t protocol_timeout = 4000;</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;        </div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="structGCS__MAVLINK.html#a7621083aa8145d12a9f685e0c49a1ca3">alternative</a>.handler &amp;&amp;</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;            now_ms - <a class="code" href="structGCS__MAVLINK.html#a7621083aa8145d12a9f685e0c49a1ca3">alternative</a>.last_mavlink_ms &gt; protocol_timeout) {</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;<span class="comment">              we have an alternative protocol handler installed and we</span></div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;<span class="comment">              haven&#39;t parsed a MAVLink packet for 4 seconds. Try</span></div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;<span class="comment">              parsing using alternative handler</span></div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="structGCS__MAVLINK.html#a7621083aa8145d12a9f685e0c49a1ca3">alternative</a>.handler(c, <a class="code" href="GCS__MAVLink_8cpp.html#a720a8c1ac96dc598d2715e7f567c9376">mavlink_comm_port</a>[<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>])) {</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;                <a class="code" href="structGCS__MAVLINK.html#a7621083aa8145d12a9f685e0c49a1ca3">alternative</a>.last_alternate_ms = now_ms;</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;                <a class="code" href="GCS__MAVLink_8cpp.html#a0757a9df823da0368303c5e9ea47969d">gcs_alternative_active</a>[<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>] = <span class="keyword">true</span>;</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;            }</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;            </div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;<span class="comment">              we may also try parsing as MAVLink if we haven&#39;t had a</span></div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;<span class="comment">              successful parse on the alternative protocol for 4s</span></div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;            <span class="keywordflow">if</span> (now_ms - <a class="code" href="structGCS__MAVLINK.html#a7621083aa8145d12a9f685e0c49a1ca3">alternative</a>.last_alternate_ms &lt;= protocol_timeout) {</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;            }</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;        }</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;        <span class="keywordtype">bool</span> parsed_packet = <span class="keyword">false</span>;</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;        <span class="comment">// Try to get a new message</span></div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;        <span class="keywordflow">if</span> (mavlink_parse_char(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>, c, &amp;msg, &amp;status)) {</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;            <a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#a9337a60383f4264fa96a20dbe43a4e2e">util</a>-&gt;<a class="code" href="classAP__HAL_1_1Util.html#a64273fdab59825cea305a403054c25bf">persistent_data</a>.<a class="code" href="structAP__HAL_1_1Util_1_1PersistentData.html#a5affb7c7e7783e0f6aa2fac03231bfc9">last_mavlink_msgid</a> = msg.msgid;</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;            <a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#a9337a60383f4264fa96a20dbe43a4e2e">util</a>-&gt;<a class="code" href="classAP__HAL_1_1Util.html#a8ee016bee7e471240be5a2c648015a1d">perf_begin</a>(<a class="code" href="structGCS__MAVLINK.html#aa33bf3ed989c78eba9e4d85366ef1d2e">_perf_packet</a>);</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;            <a class="code" href="structGCS__MAVLINK.html#aabf8eb6ddc5987a67d80ba3100531b25">packetReceived</a>(status, msg);</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;            <a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#a9337a60383f4264fa96a20dbe43a4e2e">util</a>-&gt;<a class="code" href="classAP__HAL_1_1Util.html#a831bf144a4d14d413bd1c98b96dc35cb">perf_end</a>(<a class="code" href="structGCS__MAVLINK.html#aa33bf3ed989c78eba9e4d85366ef1d2e">_perf_packet</a>);</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;            parsed_packet = <span class="keyword">true</span>;</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;            <a class="code" href="GCS__MAVLink_8cpp.html#a0757a9df823da0368303c5e9ea47969d">gcs_alternative_active</a>[<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>] = <span class="keyword">false</span>;</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;            <a class="code" href="structGCS__MAVLINK.html#a7621083aa8145d12a9f685e0c49a1ca3">alternative</a>.last_mavlink_ms = now_ms;</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;            <a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#a9337a60383f4264fa96a20dbe43a4e2e">util</a>-&gt;<a class="code" href="classAP__HAL_1_1Util.html#a64273fdab59825cea305a403054c25bf">persistent_data</a>.<a class="code" href="structAP__HAL_1_1Util_1_1PersistentData.html#a5affb7c7e7783e0f6aa2fac03231bfc9">last_mavlink_msgid</a> = 0;</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;        }</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;        <span class="keywordflow">if</span> (parsed_packet || i % 100 == 0) {</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;            <span class="comment">// make sure we don&#39;t spend too much time parsing mavlink messages</span></div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="namespaceAP__HAL.html#a8293355e35887733b1fd151aef08a787">AP_HAL::micros</a>() - tstart_us &gt; max_time_us) {</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;            }</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;        }</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;    }</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;    <span class="keyword">const</span> uint32_t tnow = <a class="code" href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a>();</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;    <span class="comment">// send a timesync message every 10 seconds; this is for data</span></div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;    <span class="comment">// collection purposes</span></div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;    <span class="keywordflow">if</span> (tnow - <a class="code" href="structGCS__MAVLINK.html#a40b0b7a81909c4ae2e14216de7c68abb">_timesync_request</a>.last_sent_ms &gt; <a class="code" href="structGCS__MAVLINK.html#a40b0b7a81909c4ae2e14216de7c68abb">_timesync_request</a>.interval_ms &amp;&amp; !<a class="code" href="structGCS__MAVLINK.html#a2fe9f2a656864441f72ad43382ec28e7">is_private</a>()) {</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="GCS_8h.html#a6bcce1fe6fd8b6277f4f2dd0e738aec1">HAVE_PAYLOAD_SPACE</a>(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>, TIMESYNC)) {</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;            <a class="code" href="structGCS__MAVLINK.html#a9706d56a7f8516b03b88ba7f671682cc">send_timesync</a>();</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;            <a class="code" href="structGCS__MAVLINK.html#a40b0b7a81909c4ae2e14216de7c68abb">_timesync_request</a>.last_sent_ms = tnow;</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;        }</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;    }</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;    <span class="comment">// consider logging mavlink stats:</span></div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structGCS__MAVLINK.html#ac5e3bfc099bc405763c01f06089f1fcc">is_active</a>() || <a class="code" href="structGCS__MAVLINK.html#a829fb3ed239c473047e2fa3cd58306c5">is_streaming</a>()) {</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;        <span class="keywordflow">if</span> (tnow - <a class="code" href="structGCS__MAVLINK.html#a8b912ea526309ec8db54265d320b3d2a">last_mavlink_stats_logged</a> &gt; 1000) {</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;            <a class="code" href="structGCS__MAVLINK.html#aea7f47c108dd428ecfee60334a24607d">log_mavlink_stats</a>();</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;            <a class="code" href="structGCS__MAVLINK.html#a8b912ea526309ec8db54265d320b3d2a">last_mavlink_stats_logged</a> = tnow;</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;        }</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;    }</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;<span class="preprocessor">#if GCS_DEBUG_SEND_MESSAGE_TIMINGS</span></div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;    <span class="keyword">const</span> uint16_t now16_ms{<a class="code" href="namespaceAP__HAL.html#a5a6ba28f61401b4abc39756468e9e2c9">AP_HAL::millis16</a>()};</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;    <span class="keywordflow">if</span> (uint16_t(now16_ms - try_send_message_stats.statustext_last_sent_ms) &gt; 10000U) {</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;        <span class="keywordflow">if</span> (try_send_message_stats.longest_time_us) {</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;            <a class="code" href="GCS__Common_8cpp.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a>().<a class="code" href="classGCS.html#a9866f3484283db744409e40719cef765">send_text</a>(MAV_SEVERITY_INFO,</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;                            <span class="stringliteral">&quot;GCS.chan(%u): ap_msg=%u took %uus to send&quot;</span>,</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;                            <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;                            try_send_message_stats.longest_id,</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;                            try_send_message_stats.longest_time_us);</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;            try_send_message_stats.longest_time_us = 0;</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;        }</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;        <span class="keywordflow">if</span> (try_send_message_stats.no_space_for_message &amp;&amp;</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;            (<a class="code" href="structGCS__MAVLINK.html#ac5e3bfc099bc405763c01f06089f1fcc">is_active</a>() || <a class="code" href="structGCS__MAVLINK.html#a829fb3ed239c473047e2fa3cd58306c5">is_streaming</a>())) {</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;            <a class="code" href="GCS__Common_8cpp.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a>().<a class="code" href="classGCS.html#a9866f3484283db744409e40719cef765">send_text</a>(MAV_SEVERITY_INFO,</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;                            <span class="stringliteral">&quot;GCS.chan(%u): out-of-space: %u&quot;</span>,</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;                            <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;                            try_send_message_stats.no_space_for_message);</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;            try_send_message_stats.no_space_for_message = 0;</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;        }</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;        <span class="keywordflow">if</span> (max_slowdown_ms) {</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;            <a class="code" href="GCS__Common_8cpp.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a>().<a class="code" href="classGCS.html#a9866f3484283db744409e40719cef765">send_text</a>(MAV_SEVERITY_INFO,</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;                            <span class="stringliteral">&quot;GCS.chan(%u): max slowdown=%u&quot;</span>,</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;                            <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;                            max_slowdown_ms);</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;            max_slowdown_ms = 0;</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;        }</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;        <span class="keywordflow">if</span> (try_send_message_stats.behind) {</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;            <a class="code" href="GCS__Common_8cpp.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a>().<a class="code" href="classGCS.html#a9866f3484283db744409e40719cef765">send_text</a>(MAV_SEVERITY_INFO,</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;                            <span class="stringliteral">&quot;GCS.chan(%u): behind=%u&quot;</span>,</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;                            <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;                            try_send_message_stats.behind);</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;            try_send_message_stats.behind = 0;</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;        }</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;        <span class="keywordflow">if</span> (try_send_message_stats.fnbts_maxtime) {</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;            <a class="code" href="GCS__Common_8cpp.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a>().<a class="code" href="classGCS.html#a9866f3484283db744409e40719cef765">send_text</a>(MAV_SEVERITY_INFO,</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;                            <span class="stringliteral">&quot;GCS.chan(%u): fnbts_maxtime=%uus&quot;</span>,</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;                            <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;                            try_send_message_stats.fnbts_maxtime);</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;            try_send_message_stats.fnbts_maxtime = 0;</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;        }</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;        <span class="keywordflow">if</span> (try_send_message_stats.max_retry_deferred_body_us) {</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;            <a class="code" href="GCS__Common_8cpp.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a>().<a class="code" href="classGCS.html#a9866f3484283db744409e40719cef765">send_text</a>(MAV_SEVERITY_INFO,</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;                            <span class="stringliteral">&quot;GCS.chan(%u): retry_body_maxtime=%uus (%u)&quot;</span>,</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;                            <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;                            try_send_message_stats.max_retry_deferred_body_us,</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;                            try_send_message_stats.max_retry_deferred_body_type</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;                );</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;            try_send_message_stats.max_retry_deferred_body_us = 0;</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;        }</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;        <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code" href="AP__Common_8h.html#a121caf32c5b5d704ef3453f0885a9ea5">ARRAY_SIZE</a>(<a class="code" href="structGCS__MAVLINK.html#ade499c2dfc150405083857afe83bf5bc">deferred_message_bucket</a>); i++) {</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;            <a class="code" href="GCS__Common_8cpp.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a>().<a class="code" href="classGCS.html#a9866f3484283db744409e40719cef765">send_text</a>(MAV_SEVERITY_INFO,</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;                            <span class="stringliteral">&quot;B. intvl. (%u): %u %u %u %u %u&quot;</span>,</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;                            <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;                            <a class="code" href="structGCS__MAVLINK.html#ade499c2dfc150405083857afe83bf5bc">deferred_message_bucket</a>[0].<a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a>,</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;                            <a class="code" href="structGCS__MAVLINK.html#ade499c2dfc150405083857afe83bf5bc">deferred_message_bucket</a>[1].<a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a>,</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;                            <a class="code" href="structGCS__MAVLINK.html#ade499c2dfc150405083857afe83bf5bc">deferred_message_bucket</a>[2].<a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a>,</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;                            <a class="code" href="structGCS__MAVLINK.html#ade499c2dfc150405083857afe83bf5bc">deferred_message_bucket</a>[3].<a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a>,</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;                            <a class="code" href="structGCS__MAVLINK.html#ade499c2dfc150405083857afe83bf5bc">deferred_message_bucket</a>[4].<a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a>);</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;        }</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;        try_send_message_stats.statustext_last_sent_ms = now16_ms;</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;    }</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;    <a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#a9337a60383f4264fa96a20dbe43a4e2e">util</a>-&gt;<a class="code" href="classAP__HAL_1_1Util.html#a831bf144a4d14d413bd1c98b96dc35cb">perf_end</a>(<a class="code" href="structGCS__MAVLINK.html#acf70ad80c7031570ae4a4cc1bd4f3c31">_perf_update</a>);    </div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;}</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;<span class="comment">  record stats about this link to logger</span></div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l01869"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#aea7f47c108dd428ecfee60334a24607d"> 1869</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#aea7f47c108dd428ecfee60334a24607d">GCS_MAVLINK::log_mavlink_stats</a>()</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;{</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;    mavlink_status_t *status = mavlink_get_channel_status(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>);</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;    <span class="keywordflow">if</span> (status == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;    }</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;    <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structlog__MAV.html">log_MAV</a> pkt = {</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;    <a class="code" href="LogStructure_8h.html#abca6b52da10346c72b10dd04698e4420">LOG_PACKET_HEADER_INIT</a>(<a class="code" href="LogStructure_8h.html#aec1abc8a4fd0e25bbcf703a19b991a05a6256e259b966cfbdea5e5dddfdce7dea">LOG_MAV_MSG</a>),</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;    <a class="code" href="structlog__MAV.html#a6d2d7709a16622b1064b1c72a742f713">time_us</a>                : <a class="code" href="namespaceAP__HAL.html#a7aa0ce7625c9680e30ff4a99940907a5">AP_HAL::micros64</a>(),</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;    <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>                   : (uint8_t)<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;    <a class="code" href="structlog__MAV.html#a925dfc1804792da387422d7efb875b72">packet_tx_count</a>        : <a class="code" href="structGCS__MAVLINK.html#a1abbf4a96b6bddc103570b154fb59269">send_packet_count</a>,</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;    <a class="code" href="structlog__MAV.html#a9b0a51a9d00b6831d690ddeea5e2e6ca">packet_rx_success_count</a>: status-&gt;packet_rx_success_count,</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;    <a class="code" href="structlog__MAV.html#ab7c98a381a23122c0e66cff97664f012">packet_rx_drop_count</a>   : status-&gt;packet_rx_drop_count</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;    };</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;    <a class="code" href="namespaceAP.html#aa35bfac1ea2da16f110e8e72db7b3b20">AP::logger</a>().<a class="code" href="classAP__Logger.html#ada8172473eb14aabbf121c20ef6ad76b">WriteBlock</a>(&amp;pkt, <span class="keyword">sizeof</span>(pkt));</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;}</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;<span class="comment">  send the SYSTEM_TIME message</span></div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01891"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a194d4de4298dca0fb2d7f5d4fb20a404"> 1891</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a194d4de4298dca0fb2d7f5d4fb20a404">GCS_MAVLINK::send_system_time</a>()</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;{</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;    uint64_t time_unix = 0;</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;    <a class="code" href="namespaceAP.html#ac357c38b6638140c5510e6ba566b998b">AP::rtc</a>().<a class="code" href="classAP__RTC.html#ae0d5b4d97863ac93a71ea325cd632d90">get_utc_usec</a>(time_unix); <span class="comment">// may fail, leaving time_unix at 0</span></div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;    mavlink_msg_system_time_send(</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;        time_unix,</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;        <a class="code" href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a>());</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;}</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;<span class="comment">  send RC_CHANNELS messages</span></div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01906"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#ab809e8b8607d06dc52632a31d03908b8"> 1906</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#ab809e8b8607d06dc52632a31d03908b8">GCS_MAVLINK::send_rc_channels</a>()<span class="keyword"> const</span></div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;    <a class="code" href="classAP__RSSI.html">AP_RSSI</a> *<a class="code" href="namespaceAP.html#a57749e493d2afa343a06ab7d7396f2af">rssi</a> = <a class="code" href="namespaceAP.html#a57749e493d2afa343a06ab7d7396f2af">AP::rssi</a>();</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;    uint8_t receiver_rssi = 0;</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespaceAP.html#a57749e493d2afa343a06ab7d7396f2af">rssi</a> != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;        receiver_rssi = <a class="code" href="namespaceAP.html#a57749e493d2afa343a06ab7d7396f2af">rssi</a>-&gt;<a class="code" href="classAP__RSSI.html#ad243edc62e00237673d7a9649fa05dd8">read_receiver_rssi_uint8</a>();</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;    }</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;    uint16_t values[18] = {};</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;    <a class="code" href="RC__Channel_8h.html#acb66f35c4fe350096704f48e4c651948">rc</a>().<a class="code" href="classRC__Channels.html#ac9cb57e508c9407c1e274cb4367b1ab5">get_radio_in</a>(values, <a class="code" href="AP__Common_8h.html#a121caf32c5b5d704ef3453f0885a9ea5">ARRAY_SIZE</a>(values));</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;    mavlink_msg_rc_channels_send(</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;        <a class="code" href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a>(),</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;        <a class="code" href="classRC__Channels.html#a76e1ecc576586ebe6ed46317676be2a4">RC_Channels::get_valid_channel_count</a>(),</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;        values[0],</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;        values[1],</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;        values[2],</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;        values[3],</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;        values[4],</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;        values[5],</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;        values[6],</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;        values[7],</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;        values[8],</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;        values[9],</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;        values[10],</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;        values[11],</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;        values[12],</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;        values[13],</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;        values[14],</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;        values[15],</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;        values[16],</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;        values[17],</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;        receiver_rssi);        </div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;}</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;</div><div class="line"><a name="l01942"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#ae21a87a0378400930179c5f1cec4a5b0"> 1942</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#ae21a87a0378400930179c5f1cec4a5b0">GCS_MAVLINK::send_rc_channels_raw</a>()<span class="keyword"> const</span></div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;    mavlink_status_t *status = mavlink_get_channel_status(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>);</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;    <span class="keywordflow">if</span> (status == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;        <span class="comment">// should not happen</span></div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;    }</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;    <span class="comment">// for mavlink1 send RC_CHANNELS_RAW, for compatibility with OSD</span></div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;    <span class="comment">// implementations</span></div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;    <span class="keywordflow">if</span> (!(status-&gt;flags &amp; MAVLINK_STATUS_FLAG_OUT_MAVLINK1)) {</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;    }</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;    <a class="code" href="classAP__RSSI.html">AP_RSSI</a> *<a class="code" href="namespaceAP.html#a57749e493d2afa343a06ab7d7396f2af">rssi</a> = <a class="code" href="namespaceAP.html#a57749e493d2afa343a06ab7d7396f2af">AP::rssi</a>();</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;    uint8_t receiver_rssi = 0;</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespaceAP.html#a57749e493d2afa343a06ab7d7396f2af">rssi</a> != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;        receiver_rssi = <a class="code" href="namespaceAP.html#a57749e493d2afa343a06ab7d7396f2af">rssi</a>-&gt;<a class="code" href="classAP__RSSI.html#ad243edc62e00237673d7a9649fa05dd8">read_receiver_rssi_uint8</a>();</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;    }</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;    uint16_t values[8] = {};</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;    <a class="code" href="RC__Channel_8h.html#acb66f35c4fe350096704f48e4c651948">rc</a>().<a class="code" href="classRC__Channels.html#ac9cb57e508c9407c1e274cb4367b1ab5">get_radio_in</a>(values, <a class="code" href="AP__Common_8h.html#a121caf32c5b5d704ef3453f0885a9ea5">ARRAY_SIZE</a>(values));</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;    mavlink_msg_rc_channels_raw_send(</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;        <a class="code" href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a>(),</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;        0,</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;        values[0],</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;        values[1],</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;        values[2],</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;        values[3],</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;        values[4],</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;        values[5],</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;        values[6],</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;        values[7],</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;        receiver_rssi);</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;}</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;</div><div class="line"><a name="l01977"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#aacd08f30831b2bda3f5b9d150d3ab26a"> 1977</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#aacd08f30831b2bda3f5b9d150d3ab26a">GCS_MAVLINK::send_raw_imu</a>()</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;{</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;    <span class="keyword">const</span> <a class="code" href="classAP__InertialSensor.html">AP_InertialSensor</a> &amp;<a class="code" href="AHRS__Test_8cpp.html#a4b91d1711c0d031f33f581540503bc54">ins</a> = <a class="code" href="namespaceAP.html#ac571aa5a2ef71b7f4b4b2bfa09143fb9">AP::ins</a>();</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;    <span class="keyword">const</span> <a class="code" href="classCompass.html">Compass</a> &amp;<a class="code" href="AHRS__Test_8cpp.html#a58b8e143b1d5e3b2c1048c94ffa16ee2">compass</a> = <a class="code" href="namespaceAP.html#ab9d0bcbec954b6c20abd8e13e6de7356">AP::compass</a>();</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;    <span class="keyword">const</span> <a class="code" href="classVector3.html">Vector3f</a> &amp;accel = <a class="code" href="AHRS__Test_8cpp.html#a4b91d1711c0d031f33f581540503bc54">ins</a>.<a class="code" href="classAP__InertialSensor.html#a7a848d0332acb5b39d8e47fca5a1e77f">get_accel</a>(0);</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;    <span class="keyword">const</span> <a class="code" href="classVector3.html">Vector3f</a> &amp;gyro = <a class="code" href="AHRS__Test_8cpp.html#a4b91d1711c0d031f33f581540503bc54">ins</a>.<a class="code" href="classAP__InertialSensor.html#a8ca4ae8fdc18ff0d78f8dea93759cc93">get_gyro</a>(0);</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;    <a class="code" href="classVector3.html">Vector3f</a> mag;</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AHRS__Test_8cpp.html#a58b8e143b1d5e3b2c1048c94ffa16ee2">compass</a>.<a class="code" href="classCompass.html#aab02220a8209d664f89f2be9050cf283">get_count</a>() &gt;= 1) {</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;        mag = <a class="code" href="AHRS__Test_8cpp.html#a58b8e143b1d5e3b2c1048c94ffa16ee2">compass</a>.<a class="code" href="classCompass.html#a6aa543c3bd5ef2e78cefa3ffcc390767">get_field</a>(0);</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;        mag.<a class="code" href="classVector3.html#adf1769d5ee5df2f8585df2f540fa5efe">zero</a>();</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;    }</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;    mavlink_msg_raw_imu_send(</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;        <a class="code" href="namespaceAP__HAL.html#a8293355e35887733b1fd151aef08a787">AP_HAL::micros</a>(),</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;        accel.<a class="code" href="classVector3.html#a1a0f7e168c71ca798099f0ba8a444244">x</a> * 1000.0f / <a class="code" href="definitions_8h.html#aea8758bf61b23b46507902b46060ebfd">GRAVITY_MSS</a>,</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;        accel.<a class="code" href="classVector3.html#a561df88b28e106e337a25bb86554a569">y</a> * 1000.0f / <a class="code" href="definitions_8h.html#aea8758bf61b23b46507902b46060ebfd">GRAVITY_MSS</a>,</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;        accel.<a class="code" href="classVector3.html#ab3e7f5401dd6e951978bfa746809f74f">z</a> * 1000.0f / <a class="code" href="definitions_8h.html#aea8758bf61b23b46507902b46060ebfd">GRAVITY_MSS</a>,</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;        gyro.<a class="code" href="classVector3.html#a1a0f7e168c71ca798099f0ba8a444244">x</a> * 1000.0f,</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;        gyro.<a class="code" href="classVector3.html#a561df88b28e106e337a25bb86554a569">y</a> * 1000.0f,</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;        gyro.<a class="code" href="classVector3.html#ab3e7f5401dd6e951978bfa746809f74f">z</a> * 1000.0f,</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;        mag.<a class="code" href="classVector3.html#a1a0f7e168c71ca798099f0ba8a444244">x</a>,</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;        mag.<a class="code" href="classVector3.html#a561df88b28e106e337a25bb86554a569">y</a>,</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;        mag.<a class="code" href="classVector3.html#ab3e7f5401dd6e951978bfa746809f74f">z</a>);</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;}</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;</div><div class="line"><a name="l02005"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a0f37af5b7e1f3c292add18a81b77f5c1"> 2005</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a0f37af5b7e1f3c292add18a81b77f5c1">GCS_MAVLINK::send_scaled_imu</a>(uint8_t <a class="code" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a>, <span class="keywordtype">void</span> (*send_fn)(mavlink_channel_t <a class="code" href="examples_2AnalogIn_2AnalogIn_8cpp.html#a130f3ebe4c1bb6993e1094760227ad6a">chan</a>, uint32_t time_ms, int16_t xacc, int16_t yacc, int16_t zacc, int16_t xgyro, int16_t ygyro, int16_t zgyro, int16_t xmag, int16_t ymag, int16_t zmag))</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;{</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;    <span class="keyword">const</span> <a class="code" href="classAP__InertialSensor.html">AP_InertialSensor</a> &amp;<a class="code" href="AHRS__Test_8cpp.html#a4b91d1711c0d031f33f581540503bc54">ins</a> = <a class="code" href="namespaceAP.html#ac571aa5a2ef71b7f4b4b2bfa09143fb9">AP::ins</a>();</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;    <span class="keyword">const</span> <a class="code" href="classCompass.html">Compass</a> &amp;<a class="code" href="AHRS__Test_8cpp.html#a58b8e143b1d5e3b2c1048c94ffa16ee2">compass</a> = <a class="code" href="namespaceAP.html#ab9d0bcbec954b6c20abd8e13e6de7356">AP::compass</a>();</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;    <span class="keywordtype">bool</span> have_data = <span class="keyword">false</span>;</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;    <a class="code" href="classVector3.html">Vector3f</a> accel{};</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AHRS__Test_8cpp.html#a4b91d1711c0d031f33f581540503bc54">ins</a>.<a class="code" href="classAP__InertialSensor.html#a8ca2cbf528de2276d1be01c00243db0d">get_accel_count</a>() &gt; <a class="code" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a>) {</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;        accel = <a class="code" href="AHRS__Test_8cpp.html#a4b91d1711c0d031f33f581540503bc54">ins</a>.<a class="code" href="classAP__InertialSensor.html#a7a848d0332acb5b39d8e47fca5a1e77f">get_accel</a>(<a class="code" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a>);</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;        have_data = <span class="keyword">true</span>;</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;    }</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;    <a class="code" href="classVector3.html">Vector3f</a> gyro{};</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AHRS__Test_8cpp.html#a4b91d1711c0d031f33f581540503bc54">ins</a>.<a class="code" href="classAP__InertialSensor.html#a8ca2cbf528de2276d1be01c00243db0d">get_accel_count</a>() &gt; <a class="code" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a>) {</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;        gyro = <a class="code" href="AHRS__Test_8cpp.html#a4b91d1711c0d031f33f581540503bc54">ins</a>.<a class="code" href="classAP__InertialSensor.html#a8ca4ae8fdc18ff0d78f8dea93759cc93">get_gyro</a>(<a class="code" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a>);</div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;        have_data = <span class="keyword">true</span>;</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;    }</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;    <a class="code" href="classVector3.html">Vector3f</a> mag{};</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AHRS__Test_8cpp.html#a58b8e143b1d5e3b2c1048c94ffa16ee2">compass</a>.<a class="code" href="classCompass.html#aab02220a8209d664f89f2be9050cf283">get_count</a>() &gt; <a class="code" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a>) {</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;        mag = <a class="code" href="AHRS__Test_8cpp.html#a58b8e143b1d5e3b2c1048c94ffa16ee2">compass</a>.<a class="code" href="classCompass.html#a6aa543c3bd5ef2e78cefa3ffcc390767">get_field</a>(<a class="code" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a>);</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;        have_data = <span class="keyword">true</span>;</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;    }</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;    <span class="keywordflow">if</span> (!have_data) {</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;    }</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;    send_fn(</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;        <a class="code" href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a>(),</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;        accel.x * 1000.0f / <a class="code" href="definitions_8h.html#aea8758bf61b23b46507902b46060ebfd">GRAVITY_MSS</a>,</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;        accel.y * 1000.0f / <a class="code" href="definitions_8h.html#aea8758bf61b23b46507902b46060ebfd">GRAVITY_MSS</a>,</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;        accel.z * 1000.0f / <a class="code" href="definitions_8h.html#aea8758bf61b23b46507902b46060ebfd">GRAVITY_MSS</a>,</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;        gyro.x * 1000.0f,</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;        gyro.y * 1000.0f,</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;        gyro.z * 1000.0f,</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;        mag.x,</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;        mag.y,</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;        mag.z);</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;}</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;<span class="comment">// send data for barometer and airspeed sensors instances.  In the</span></div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;<span class="comment">// case that we run out of instances of one before the other we send</span></div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;<span class="comment">// the relevant fields as 0.</span></div><div class="line"><a name="l02047"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a9ffa2d0359bf7dd8b3607617938a510f"> 2047</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a9ffa2d0359bf7dd8b3607617938a510f">GCS_MAVLINK::send_scaled_pressure_instance</a>(uint8_t <a class="code" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a>, <span class="keywordtype">void</span> (*send_fn)(mavlink_channel_t <a class="code" href="examples_2AnalogIn_2AnalogIn_8cpp.html#a130f3ebe4c1bb6993e1094760227ad6a">chan</a>, uint32_t time_boot_ms, <span class="keywordtype">float</span> press_abs, <span class="keywordtype">float</span> press_diff, int16_t <a class="code" href="Airspeed_8cpp.html#afc1d28cfbce795d6ea954ebe725241f5">temperature</a>))</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;{</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;    <span class="keyword">const</span> <a class="code" href="classAP__Baro.html">AP_Baro</a> &amp;<a class="code" href="AHRS__Test_8cpp.html#a878e6c2ca2a501e59b25efe16eda17c6">barometer</a> = <a class="code" href="namespaceAP.html#a8aec57eb0b7a79044cbc1f0ca4b75bcf">AP::baro</a>();</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;    <span class="keywordtype">bool</span> have_data = <span class="keyword">false</span>;</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;    <span class="keywordtype">float</span> press_abs = 0.0f;</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="Airspeed_8cpp.html#afc1d28cfbce795d6ea954ebe725241f5">temperature</a> = 0.0f;</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a> &lt; <a class="code" href="AHRS__Test_8cpp.html#a878e6c2ca2a501e59b25efe16eda17c6">barometer</a>.<a class="code" href="classAP__Baro.html#ad56b4323cfc37bb7510e6cf319ecd7ad">num_instances</a>()) {</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;        press_abs = <a class="code" href="AHRS__Test_8cpp.html#a878e6c2ca2a501e59b25efe16eda17c6">barometer</a>.<a class="code" href="classAP__Baro.html#a41b3c00624c78b883413b53fc5a81a32">get_pressure</a>(<a class="code" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a>) * 0.01f;</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;        <a class="code" href="Airspeed_8cpp.html#afc1d28cfbce795d6ea954ebe725241f5">temperature</a> = <a class="code" href="AHRS__Test_8cpp.html#a878e6c2ca2a501e59b25efe16eda17c6">barometer</a>.<a class="code" href="classAP__Baro.html#ae7be7aff322792daa05c01e4f326cc42">get_temperature</a>(<a class="code" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a>)*100;</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;        have_data = <span class="keyword">true</span>;</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;    }</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;    <span class="keywordtype">float</span> press_diff = 0; <span class="comment">// pascal</span></div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;    <a class="code" href="classAP__Airspeed.html">AP_Airspeed</a> *<a class="code" href="Airspeed_8cpp.html#abfed87a61c42e885ee14d5222b47583f">airspeed</a> = <a class="code" href="classAP__Airspeed.html#a6bfb2eababf55852b35bdff810ca86d1">AP_Airspeed::get_singleton</a>();</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="Airspeed_8cpp.html#abfed87a61c42e885ee14d5222b47583f">airspeed</a> != <span class="keyword">nullptr</span> &amp;&amp;</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;        <a class="code" href="Airspeed_8cpp.html#abfed87a61c42e885ee14d5222b47583f">airspeed</a>-&gt;<a class="code" href="classAP__Airspeed.html#aa17de10e34d65c132353ddc6373f0e99">enabled</a>(<a class="code" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a>)) {</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;        press_diff = <a class="code" href="Airspeed_8cpp.html#abfed87a61c42e885ee14d5222b47583f">airspeed</a>-&gt;<a class="code" href="classAP__Airspeed.html#ae49f4cf8da709c27d7a713eaa7f1eefa">get_differential_pressure</a>(<a class="code" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a>) * 0.01f;</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;        have_data = <span class="keyword">true</span>;</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;    }</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;    <span class="keywordflow">if</span> (!have_data) {</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;    }</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;    send_fn(</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;        <a class="code" href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a>(),</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;        press_abs, <span class="comment">// hectopascal</span></div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;        press_diff, <span class="comment">// hectopascal</span></div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;        <a class="code" href="Airspeed_8cpp.html#afc1d28cfbce795d6ea954ebe725241f5">temperature</a>); <span class="comment">// 0.01 degrees C</span></div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;}</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;</div><div class="line"><a name="l02081"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#af9bb82ea69a50e86660dfc8d0076153c"> 2081</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#af9bb82ea69a50e86660dfc8d0076153c">GCS_MAVLINK::send_scaled_pressure</a>()</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;{</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;    <a class="code" href="structGCS__MAVLINK.html#a9ffa2d0359bf7dd8b3607617938a510f">send_scaled_pressure_instance</a>(0, mavlink_msg_scaled_pressure_send);</div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;}</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;</div><div class="line"><a name="l02086"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a76ce47aa6ba6b03708dc5632bc9785f3"> 2086</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a76ce47aa6ba6b03708dc5632bc9785f3">GCS_MAVLINK::send_scaled_pressure2</a>()</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;{</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;    <a class="code" href="structGCS__MAVLINK.html#a9ffa2d0359bf7dd8b3607617938a510f">send_scaled_pressure_instance</a>(1, mavlink_msg_scaled_pressure2_send);</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;}</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;</div><div class="line"><a name="l02091"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#ab18dbbbce41d8a78d46a9b477ca43d07"> 2091</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#ab18dbbbce41d8a78d46a9b477ca43d07">GCS_MAVLINK::send_scaled_pressure3</a>()</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;{</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;    <a class="code" href="structGCS__MAVLINK.html#a9ffa2d0359bf7dd8b3607617938a510f">send_scaled_pressure_instance</a>(2, mavlink_msg_scaled_pressure3_send);</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;}</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;</div><div class="line"><a name="l02096"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a9ad8ab4104e517668d23b4b08129ee7a"> 2096</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a9ad8ab4104e517668d23b4b08129ee7a">GCS_MAVLINK::send_sensor_offsets</a>()</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;{</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;    <span class="keyword">const</span> <a class="code" href="classAP__InertialSensor.html">AP_InertialSensor</a> &amp;<a class="code" href="AHRS__Test_8cpp.html#a4b91d1711c0d031f33f581540503bc54">ins</a> = <a class="code" href="namespaceAP.html#ac571aa5a2ef71b7f4b4b2bfa09143fb9">AP::ins</a>();</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;    <span class="keyword">const</span> <a class="code" href="classCompass.html">Compass</a> &amp;<a class="code" href="AHRS__Test_8cpp.html#a58b8e143b1d5e3b2c1048c94ffa16ee2">compass</a> = <a class="code" href="namespaceAP.html#ab9d0bcbec954b6c20abd8e13e6de7356">AP::compass</a>();</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;    <span class="comment">// run this message at a much lower rate - otherwise it</span></div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;    <span class="comment">// pointlessly wastes quite a lot of bandwidth</span></div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;    <span class="keyword">static</span> uint8_t <a class="code" href="BARO__generic_8cpp.html#a0480b812cba9c1d9c71a5fb1071bd0fc">counter</a>;</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="BARO__generic_8cpp.html#a0480b812cba9c1d9c71a5fb1071bd0fc">counter</a>++ &lt; 10) {</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;    }</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;    <a class="code" href="BARO__generic_8cpp.html#a0480b812cba9c1d9c71a5fb1071bd0fc">counter</a> = 0;</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;    <span class="keyword">const</span> <a class="code" href="classVector3.html">Vector3f</a> &amp;mag_offsets = <a class="code" href="AHRS__Test_8cpp.html#a58b8e143b1d5e3b2c1048c94ffa16ee2">compass</a>.<a class="code" href="classCompass.html#a3bd8e59c633e5cb6d3935fcb604509fc">get_offsets</a>(0);</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;    <span class="keyword">const</span> <a class="code" href="classVector3.html">Vector3f</a> &amp;accel_offsets = <a class="code" href="AHRS__Test_8cpp.html#a4b91d1711c0d031f33f581540503bc54">ins</a>.<a class="code" href="classAP__InertialSensor.html#a7cf20c4bbe7ee0d96edff2cafb567f0d">get_accel_offsets</a>(0);</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;    <span class="keyword">const</span> <a class="code" href="classVector3.html">Vector3f</a> &amp;gyro_offsets = <a class="code" href="AHRS__Test_8cpp.html#a4b91d1711c0d031f33f581540503bc54">ins</a>.<a class="code" href="classAP__InertialSensor.html#a651c1448210f7fd30f09b9c1c4e0debc">get_gyro_offsets</a>(0);</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;    <span class="keyword">const</span> <a class="code" href="classAP__Baro.html">AP_Baro</a> &amp;<a class="code" href="AHRS__Test_8cpp.html#a878e6c2ca2a501e59b25efe16eda17c6">barometer</a> = <a class="code" href="namespaceAP.html#a8aec57eb0b7a79044cbc1f0ca4b75bcf">AP::baro</a>();</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;    mavlink_msg_sensor_offsets_send(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;                                    mag_offsets.<a class="code" href="classVector3.html#a1a0f7e168c71ca798099f0ba8a444244">x</a>,</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;                                    mag_offsets.<a class="code" href="classVector3.html#a561df88b28e106e337a25bb86554a569">y</a>,</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;                                    mag_offsets.<a class="code" href="classVector3.html#ab3e7f5401dd6e951978bfa746809f74f">z</a>,</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;                                    <a class="code" href="AHRS__Test_8cpp.html#a58b8e143b1d5e3b2c1048c94ffa16ee2">compass</a>.<a class="code" href="classCompass.html#a4519009b6dc2e68c498903eb314c2a60">get_declination</a>(),</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;                                    <a class="code" href="AHRS__Test_8cpp.html#a878e6c2ca2a501e59b25efe16eda17c6">barometer</a>.<a class="code" href="classAP__Baro.html#a41b3c00624c78b883413b53fc5a81a32">get_pressure</a>(),</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;                                    <a class="code" href="AHRS__Test_8cpp.html#a878e6c2ca2a501e59b25efe16eda17c6">barometer</a>.<a class="code" href="classAP__Baro.html#ae7be7aff322792daa05c01e4f326cc42">get_temperature</a>()*100,</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;                                    gyro_offsets.<a class="code" href="classVector3.html#a1a0f7e168c71ca798099f0ba8a444244">x</a>,</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;                                    gyro_offsets.<a class="code" href="classVector3.html#a561df88b28e106e337a25bb86554a569">y</a>,</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;                                    gyro_offsets.<a class="code" href="classVector3.html#ab3e7f5401dd6e951978bfa746809f74f">z</a>,</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;                                    accel_offsets.<a class="code" href="classVector3.html#a1a0f7e168c71ca798099f0ba8a444244">x</a>,</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;                                    accel_offsets.<a class="code" href="classVector3.html#a561df88b28e106e337a25bb86554a569">y</a>,</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;                                    accel_offsets.<a class="code" href="classVector3.html#ab3e7f5401dd6e951978bfa746809f74f">z</a>);</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;}</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;</div><div class="line"><a name="l02130"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#ab0f4f231edafcfbbb297a32923ccd3b1"> 2130</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#ab0f4f231edafcfbbb297a32923ccd3b1">GCS_MAVLINK::send_ahrs</a>()</div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;{</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;    <span class="keyword">const</span> <a class="code" href="classAP__AHRS.html">AP_AHRS</a> &amp;<a class="code" href="AHRS__Test_8cpp.html#a7da610c2722190575e0ded7e4204d743">ahrs</a> = <a class="code" href="namespaceAP.html#a99432cfdb696952c9b7146f155a815aa">AP::ahrs</a>();</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;    <span class="keyword">const</span> <a class="code" href="classVector3.html">Vector3f</a> &amp;omega_I = <a class="code" href="AHRS__Test_8cpp.html#a7da610c2722190575e0ded7e4204d743">ahrs</a>.<a class="code" href="classAP__AHRS__NavEKF.html#a355d8890ddfaadaa9d8f694f780afbe6">get_gyro_drift</a>();</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;    mavlink_msg_ahrs_send(</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;        omega_I.<a class="code" href="classVector3.html#a1a0f7e168c71ca798099f0ba8a444244">x</a>,</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;        omega_I.<a class="code" href="classVector3.html#a561df88b28e106e337a25bb86554a569">y</a>,</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;        omega_I.<a class="code" href="classVector3.html#ab3e7f5401dd6e951978bfa746809f74f">z</a>,</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;        0,</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;        0,</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;        <a class="code" href="AHRS__Test_8cpp.html#a7da610c2722190575e0ded7e4204d743">ahrs</a>.<a class="code" href="classAP__AHRS__NavEKF.html#a2eaa5292c27559525eee7894bb1dab99">get_error_rp</a>(),</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;        <a class="code" href="AHRS__Test_8cpp.html#a7da610c2722190575e0ded7e4204d743">ahrs</a>.<a class="code" href="classAP__AHRS__NavEKF.html#a9e93c8ec48c59534bb3e930d8ced51fd">get_error_yaw</a>());</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;}</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;<span class="comment">    send a statustext text string to specific MAVLink bitmask</span></div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l02148"></a><span class="lineno"><a class="line" href="classGCS.html#a313e604179053ea42415b1c9289f13cd"> 2148</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classGCS.html#a313e604179053ea42415b1c9289f13cd">GCS::send_statustext</a>(MAV_SEVERITY severity, uint8_t dest_bitmask, <span class="keyword">const</span> <span class="keywordtype">char</span> *text)</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;{</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;    <a class="code" href="classAP__Logger.html">AP_Logger</a> *<a class="code" href="AHRS__Test_8cpp.html#a9fede12aaeb5750bcb131cae0430647c">logger</a> = <a class="code" href="classAP__Logger.html#a7dfeda4dc3df2edc8531110c9d7252dc">AP_Logger::get_singleton</a>();</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AHRS__Test_8cpp.html#a9fede12aaeb5750bcb131cae0430647c">logger</a> != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;        <a class="code" href="AHRS__Test_8cpp.html#a9fede12aaeb5750bcb131cae0430647c">logger</a>-&gt;<a class="code" href="classAP__Logger.html#ab72f6a6fdb1a23d793e37725f68b98c2">Write_Message</a>(text);</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;    }</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classGCS.html#a3eab2c61cd4edff6b7a376c85796afef">frsky</a> != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;        <a class="code" href="classGCS.html#a3eab2c61cd4edff6b7a376c85796afef">frsky</a>-&gt;<a class="code" href="classAP__Frsky__Telem.html#aef21b9f33af863589feda48a23877380">queue_message</a>(severity, text);</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;    }</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;    <a class="code" href="classAP__Notify.html">AP_Notify</a> *<a class="code" href="ToshibaLED__test_8cpp.html#a1e113a9d02dfe1bd93e9190d10c45cad">notify</a> = <a class="code" href="classAP__Notify.html#a0264facb8d3b5c35a7cff0171acdabd0">AP_Notify::get_singleton</a>();</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ToshibaLED__test_8cpp.html#a1e113a9d02dfe1bd93e9190d10c45cad">notify</a>) {</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;        <a class="code" href="ToshibaLED__test_8cpp.html#a1e113a9d02dfe1bd93e9190d10c45cad">notify</a>-&gt;<a class="code" href="classAP__Notify.html#a0f38b9b4be211e200675dd048c81f500">send_text</a>(text);</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;    }</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;    <span class="comment">// filter destination ports to only allow active ports.</span></div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;    <a class="code" href="structGCS_1_1statustext__t.html">statustext_t</a> statustext{};</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;    statustext.<a class="code" href="structGCS_1_1statustext__t.html#afd8d53578385a9aae3a16cd89e3ebaed">bitmask</a> = (<a class="code" href="structGCS__MAVLINK.html#acad5b4ab40c7b7486392f07193ce4190">GCS_MAVLINK::active_channel_mask</a>()  | <a class="code" href="structGCS__MAVLINK.html#af948c4a65f98679941885e2c7cc12ac5">GCS_MAVLINK::streaming_channel_mask</a>() ) &amp; dest_bitmask;</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;    <span class="keywordflow">if</span> (!statustext.bitmask) {</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;        <span class="comment">// nowhere to send</span></div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;    }</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;    statustext.msg.severity = severity;</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;    strncpy(statustext.msg.text, text, <span class="keyword">sizeof</span>(statustext.msg.text));</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;    <a class="code" href="Semaphores_8h.html#a819dd9ac6de800cdf1014b0a922b67d4">WITH_SEMAPHORE</a>(<a class="code" href="classGCS.html#a0dac7247d56a541ab5d7c499db414821">_statustext_sem</a>);</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;    </div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;    <span class="comment">// The force push will ensure comm links do not block other comm links forever if they fail.</span></div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;    <span class="comment">// If we push to a full buffer then we overwrite the oldest entry, effectively removing the</span></div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;    <span class="comment">// block but not until the buffer fills up.</span></div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;    <a class="code" href="classGCS.html#a1befacd5cf8990e0c0525063c8ebde8b">_statustext_queue</a>.push_force(statustext);</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;    <span class="comment">// try and send immediately if possible</span></div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;    <a class="code" href="classGCS.html#a824e538eff6cbf7c9074840600fbf6ff">service_statustext</a>();</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;}</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;<span class="comment">    send a statustext message to specific MAVLink connections in a bitmask</span></div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02189"></a><span class="lineno"><a class="line" href="classGCS.html#a824e538eff6cbf7c9074840600fbf6ff"> 2189</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classGCS.html#a824e538eff6cbf7c9074840600fbf6ff">GCS::service_statustext</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;{</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;    <span class="comment">// create bitmask of what mavlink ports we should send this text to.</span></div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;    <span class="comment">// note, if sending to all ports, we only need to store the bitmask for each and the string only once.</span></div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;    <span class="comment">// once we send over a link, clear the port but other busy ports bit may stay allowing for faster links</span></div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;    <span class="comment">// to clear the bit and send quickly but slower links to still store the string. Regardless of mixed</span></div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;    <span class="comment">// bitrates of ports, a maximum of _status_capacity strings can be buffered. Downside</span></div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;    <span class="comment">// is if you have a super slow link mixed with a faster port, if there are _status_capacity</span></div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;    <span class="comment">// strings in the slow queue then the next item can not be queued for the faster link</span></div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classGCS.html#a1befacd5cf8990e0c0525063c8ebde8b">_statustext_queue</a>.empty()) {</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;        <span class="comment">// nothing to do</span></div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;    }</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;    <span class="keywordflow">for</span> (uint8_t idx=0; idx&lt;<a class="code" href="classGCS.html#a3cab10e6191aa7c29f5ae5d13e264800">_status_capacity</a>; ) {</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;        <a class="code" href="structGCS_1_1statustext__t.html">statustext_t</a> *statustext = <a class="code" href="classGCS.html#a1befacd5cf8990e0c0525063c8ebde8b">_statustext_queue</a>[idx];</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;        <span class="keywordflow">if</span> (statustext == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;        }</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;        <span class="comment">// try and send to all active mavlink ports listed in the statustext.bitmask</span></div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;        <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code" href="GCS__MAVLink_8h.html#aff625e94451bf446bdd56f5d0e081077">MAVLINK_COMM_NUM_BUFFERS</a>; i++) {</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;            uint8_t chan_bit = (1U&lt;&lt;i);</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;            <span class="comment">// logical AND (&amp;) to mask them together</span></div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;            <span class="keywordflow">if</span> (statustext-&gt;<a class="code" href="structGCS_1_1statustext__t.html#afd8d53578385a9aae3a16cd89e3ebaed">bitmask</a> &amp; chan_bit) {</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;                <span class="comment">// something is queued on a port and that&#39;s the port index we&#39;re looped at</span></div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;                mavlink_channel_t chan_index = (mavlink_channel_t)(MAVLINK_COMM_0+i);</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="GCS_8h.html#a6bcce1fe6fd8b6277f4f2dd0e738aec1">HAVE_PAYLOAD_SPACE</a>(chan_index, STATUSTEXT)) {</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;                    <span class="comment">// we have space so send then clear that channel bit on the mask</span></div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;                    mavlink_msg_statustext_send(chan_index, statustext-&gt;<a class="code" href="structGCS_1_1statustext__t.html#a8ac69081bec324ab3f2c26914aee23e5">msg</a>.severity, statustext-&gt;<a class="code" href="structGCS_1_1statustext__t.html#a8ac69081bec324ab3f2c26914aee23e5">msg</a>.text);</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;                    statustext-&gt;<a class="code" href="structGCS_1_1statustext__t.html#afd8d53578385a9aae3a16cd89e3ebaed">bitmask</a> &amp;= ~chan_bit;</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;                }</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;            }</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;        }</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;        <span class="keywordflow">if</span> (statustext-&gt;<a class="code" href="structGCS_1_1statustext__t.html#afd8d53578385a9aae3a16cd89e3ebaed">bitmask</a> == 0) {</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;            <a class="code" href="classGCS.html#a1befacd5cf8990e0c0525063c8ebde8b">_statustext_queue</a>.remove(idx);</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;            <span class="comment">// move to next index</span></div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;            idx++;</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;        }</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;    }</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;}</div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;</div><div class="line"><a name="l02234"></a><span class="lineno"><a class="line" href="classGCS.html#a49e7272eb586b48b04d970d13ef3d95f"> 2234</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classGCS.html#a49e7272eb586b48b04d970d13ef3d95f">GCS::send_message</a>(<span class="keyword">enum</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991">ap_message</a> <span class="keywordtype">id</span>)</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;{</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;    <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code" href="classGCS.html#a7b54834de92fbedc24ba0e282934db9d">num_gcs</a>(); i++) {</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classGCS.html#a9f093f75d5a95970e1f6b09adc775d69">chan</a>(i).<a class="code" href="structGCS__MAVLINK.html#ad9986225f7a93470e169576a38f3dd71">initialised</a>) {</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;            <a class="code" href="classGCS.html#a9f093f75d5a95970e1f6b09adc775d69">chan</a>(i).<a class="code" href="structGCS__MAVLINK.html#a4902306dab46ff02b2296f99eb1f1c9c">send_message</a>(<span class="keywordtype">id</span>);</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;        }</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;    }</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;}</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;</div><div class="line"><a name="l02243"></a><span class="lineno"><a class="line" href="classGCS.html#a07a8ce284513a8ce8336b085d0b8aadf"> 2243</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classGCS.html#a07a8ce284513a8ce8336b085d0b8aadf">GCS::update_send</a>()</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;{</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classGCS.html#a7bd52c23028bb9b4f350963da5adf7d3">initialised_missionitemprotocol_objects</a>) {</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;        <a class="code" href="classGCS.html#a7bd52c23028bb9b4f350963da5adf7d3">initialised_missionitemprotocol_objects</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;        <span class="comment">// once-only initialisation of MissionItemProtocol objects:</span></div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;        <a class="code" href="classAP__Mission.html">AP_Mission</a> *<a class="code" href="namespaceAP.html#a67bce6e94b1af5e88d027330df5d8eca">mission</a> = <a class="code" href="namespaceAP.html#a67bce6e94b1af5e88d027330df5d8eca">AP::mission</a>();</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespaceAP.html#a67bce6e94b1af5e88d027330df5d8eca">mission</a> != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;            <a class="code" href="classGCS.html#af5dac82b632935cf168d6c9849c78d25">_missionitemprotocol_waypoints</a> = <span class="keyword">new</span> <a class="code" href="classMissionItemProtocol__Waypoints.html">MissionItemProtocol_Waypoints</a>(*<a class="code" href="namespaceAP.html#a67bce6e94b1af5e88d027330df5d8eca">mission</a>);</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;        }</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;        <a class="code" href="classAP__Rally.html">AP_Rally</a> *<a class="code" href="namespaceAP.html#ae87744fcd7073579dee4ddbf9d32239e">rally</a> = <a class="code" href="namespaceAP.html#ae87744fcd7073579dee4ddbf9d32239e">AP::rally</a>();</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespaceAP.html#ae87744fcd7073579dee4ddbf9d32239e">rally</a> != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;            <a class="code" href="classGCS.html#ab62d515a8882b21f2e7d4da2c9172f06">_missionitemprotocol_rally</a> = <span class="keyword">new</span> <a class="code" href="classMissionItemProtocol__Rally.html">MissionItemProtocol_Rally</a>(*<a class="code" href="namespaceAP.html#ae87744fcd7073579dee4ddbf9d32239e">rally</a>);</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;        }</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;    }</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classGCS.html#af5dac82b632935cf168d6c9849c78d25">_missionitemprotocol_waypoints</a> != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;        <a class="code" href="classGCS.html#af5dac82b632935cf168d6c9849c78d25">_missionitemprotocol_waypoints</a>-&gt;<a class="code" href="classMissionItemProtocol.html#a67284962b370e99cdde2e8b3a141f9d4">update</a>();</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;    }</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classGCS.html#ab62d515a8882b21f2e7d4da2c9172f06">_missionitemprotocol_rally</a> != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;        <a class="code" href="classGCS.html#ab62d515a8882b21f2e7d4da2c9172f06">_missionitemprotocol_rally</a>-&gt;<a class="code" href="classMissionItemProtocol.html#a67284962b370e99cdde2e8b3a141f9d4">update</a>();</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;    }</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;    <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code" href="classGCS.html#a7b54834de92fbedc24ba0e282934db9d">num_gcs</a>(); i++) {</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classGCS.html#a9f093f75d5a95970e1f6b09adc775d69">chan</a>(i).<a class="code" href="structGCS__MAVLINK.html#ad9986225f7a93470e169576a38f3dd71">initialised</a>) {</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;            <a class="code" href="classGCS.html#a9f093f75d5a95970e1f6b09adc775d69">chan</a>(i).<a class="code" href="structGCS__MAVLINK.html#a97b3a94ebc165ee34ee93b26e2dee23d">update_send</a>();</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;        }</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;    }</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;    <a class="code" href="Semaphores_8h.html#a819dd9ac6de800cdf1014b0a922b67d4">WITH_SEMAPHORE</a>(<a class="code" href="classGCS.html#a0dac7247d56a541ab5d7c499db414821">_statustext_sem</a>);</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;    <a class="code" href="classGCS.html#a824e538eff6cbf7c9074840600fbf6ff">service_statustext</a>();</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;}</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;</div><div class="line"><a name="l02272"></a><span class="lineno"><a class="line" href="classGCS.html#a251ed0e59b370cc9f0c50d64b7a390ac"> 2272</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classGCS.html#a251ed0e59b370cc9f0c50d64b7a390ac">GCS::update_receive</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;{</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;    <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code" href="classGCS.html#a7b54834de92fbedc24ba0e282934db9d">num_gcs</a>(); i++) {</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classGCS.html#a9f093f75d5a95970e1f6b09adc775d69">chan</a>(i).<a class="code" href="structGCS__MAVLINK.html#ad9986225f7a93470e169576a38f3dd71">initialised</a>) {</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;            <a class="code" href="classGCS.html#a9f093f75d5a95970e1f6b09adc775d69">chan</a>(i).<a class="code" href="structGCS__MAVLINK.html#ac22097067827164c0c26e7ead36b21e7">update_receive</a>();</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;        }</div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;    }</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;    <span class="comment">// also update UART pass-thru, if enabled</span></div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;    <a class="code" href="classGCS.html#adc7c302e95484e1e69d31469263d5cc6">update_passthru</a>();</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;}</div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;</div><div class="line"><a name="l02283"></a><span class="lineno"><a class="line" href="classGCS.html#ade82ad44b8dcea3f95ab08f4f8b59924"> 2283</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classGCS.html#ade82ad44b8dcea3f95ab08f4f8b59924">GCS::send_mission_item_reached_message</a>(uint16_t mission_index)</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;{</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;    <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code" href="classGCS.html#a7b54834de92fbedc24ba0e282934db9d">num_gcs</a>(); i++) {</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classGCS.html#a9f093f75d5a95970e1f6b09adc775d69">chan</a>(i).<a class="code" href="structGCS__MAVLINK.html#ad9986225f7a93470e169576a38f3dd71">initialised</a>) {</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;            <a class="code" href="classGCS.html#a9f093f75d5a95970e1f6b09adc775d69">chan</a>(i).<a class="code" href="structGCS__MAVLINK.html#a271d9d2295f7d2eab79b8f23a7191542">mission_item_reached_index</a> = mission_index;</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;            <a class="code" href="classGCS.html#a9f093f75d5a95970e1f6b09adc775d69">chan</a>(i).<a class="code" href="structGCS__MAVLINK.html#a4902306dab46ff02b2296f99eb1f1c9c">send_message</a>(<a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a582437196b32d4486ddd95fa10e31bcd">MSG_MISSION_ITEM_REACHED</a>);</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;        }</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;    }</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;}</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;</div><div class="line"><a name="l02293"></a><span class="lineno"><a class="line" href="classGCS.html#a114e9a61009d41f517a06646afe67d18"> 2293</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classGCS.html#a114e9a61009d41f517a06646afe67d18">GCS::setup_uarts</a>()</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;{</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;    <span class="keywordflow">for</span> (uint8_t i = 1; i &lt; <a class="code" href="GCS__MAVLink_8h.html#aff625e94451bf446bdd56f5d0e081077">MAVLINK_COMM_NUM_BUFFERS</a>; i++) {</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;        <a class="code" href="classGCS.html#a9f093f75d5a95970e1f6b09adc775d69">chan</a>(i).<a class="code" href="structGCS__MAVLINK.html#a76ff239c882575a8255ace879a88980b">setup_uart</a>(i);</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;    }</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classGCS.html#a3eab2c61cd4edff6b7a376c85796afef">frsky</a> == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;        <a class="code" href="classGCS.html#a3eab2c61cd4edff6b7a376c85796afef">frsky</a> = <span class="keyword">new</span> <a class="code" href="classAP__Frsky__Telem.html">AP_Frsky_Telem</a>();</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classGCS.html#a3eab2c61cd4edff6b7a376c85796afef">frsky</a> == <span class="keyword">nullptr</span> || !<a class="code" href="classGCS.html#a3eab2c61cd4edff6b7a376c85796afef">frsky</a>-&gt;<a class="code" href="classAP__Frsky__Telem.html#adf5f82d6eff07cf44565ca062d13a75d">init</a>()) {</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;            <span class="keyword">delete</span> <a class="code" href="classGCS.html#a3eab2c61cd4edff6b7a376c85796afef">frsky</a>;</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;            <a class="code" href="classGCS.html#a3eab2c61cd4edff6b7a376c85796afef">frsky</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;        }</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;    }</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;    <a class="code" href="classGCS.html#ae29389deb4a918ef036ee5001a5f6797">devo_telemetry</a>.<a class="code" href="classAP__DEVO__Telem.html#a718089a830a3916942d5399e039ad4f1">init</a>();</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;}</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;<span class="comment">// report battery2 state</span></div><div class="line"><a name="l02311"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a814da55cf1114e1fd2ee470cc310e0e3"> 2311</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a814da55cf1114e1fd2ee470cc310e0e3">GCS_MAVLINK::send_battery2</a>()</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;{</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;    <span class="keyword">const</span> <a class="code" href="classAP__BattMonitor.html">AP_BattMonitor</a> &amp;<a class="code" href="namespaceAP.html#aac3bcb68bcccad29cc493b878aef055e">battery</a> = <a class="code" href="namespaceAP.html#aac3bcb68bcccad29cc493b878aef055e">AP::battery</a>();</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespaceAP.html#aac3bcb68bcccad29cc493b878aef055e">battery</a>.<a class="code" href="classAP__BattMonitor.html#a919b4b473883ce5282efa1e126b2b7ff">num_instances</a>() &gt; 1) {</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;        int16_t current;</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespaceAP.html#aac3bcb68bcccad29cc493b878aef055e">battery</a>.<a class="code" href="classAP__BattMonitor.html#a686b822215badd97a701bf3d391e95c0">has_current</a>(1)) {</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;            current = <a class="code" href="namespaceAP.html#aac3bcb68bcccad29cc493b878aef055e">battery</a>.<a class="code" href="classAP__BattMonitor.html#a280ff28558f03d85c6090321287bdd77">current_amps</a>(1) * 100; <span class="comment">// 10*mA</span></div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;            current = -1;</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;        }</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;        mavlink_msg_battery2_send(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>, <a class="code" href="namespaceAP.html#aac3bcb68bcccad29cc493b878aef055e">battery</a>.<a class="code" href="classAP__BattMonitor.html#a03394a700753687bbb87632743cc2bb3">voltage</a>(1)*1000, current);</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;    }</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;}</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;<span class="comment">  handle a SET_MODE MAVLink message</span></div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02329"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#ac8b61d6ff34dbae1be71540cf87b15ee"> 2329</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#ac8b61d6ff34dbae1be71540cf87b15ee">GCS_MAVLINK::handle_set_mode</a>(mavlink_message_t* msg)</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;{</div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;    mavlink_set_mode_t packet;</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;    mavlink_msg_set_mode_decode(msg, &amp;packet);</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;    <span class="keyword">const</span> MAV_MODE _base_mode = (MAV_MODE)packet.base_mode;</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;    <span class="keyword">const</span> uint32_t _custom_mode = packet.custom_mode;</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;</div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;    <span class="keyword">const</span> MAV_RESULT <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = <a class="code" href="structGCS__MAVLINK.html#a7ff42b90dc344d26bf27e7ed3f21c656">_set_mode_common</a>(_base_mode, _custom_mode);</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;    <span class="comment">// send ACK or NAK</span></div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;    mavlink_msg_command_ack_send(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>, MAVLINK_MSG_ID_SET_MODE, <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a>);</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;}</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;<span class="comment">  code common to both SET_MODE mavlink message and command long set_mode msg</span></div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l02346"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a7ff42b90dc344d26bf27e7ed3f21c656"> 2346</a></span>&#160;MAV_RESULT <a class="code" href="structGCS__MAVLINK.html#a7ff42b90dc344d26bf27e7ed3f21c656">GCS_MAVLINK::_set_mode_common</a>(<span class="keyword">const</span> MAV_MODE _base_mode, <span class="keyword">const</span> uint32_t _custom_mode)</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;{</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;    MAV_RESULT <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = MAV_RESULT_UNSUPPORTED;</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;    <span class="comment">// only accept custom modes because there is no easy mapping from Mavlink flight modes to AC flight modes</span></div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;    <span class="keywordflow">if</span> (_base_mode &amp; MAV_MODE_FLAG_CUSTOM_MODE_ENABLED) {</div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="structGCS__MAVLINK.html#ad9f23c1630121a87f7deea2bb1422045">set_mode</a>(_custom_mode)) {</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;            <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = MAV_RESULT_ACCEPTED;</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;        }</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (_base_mode == (MAV_MODE)MAV_MODE_FLAG_DECODE_POSITION_SAFETY) {</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;        <span class="comment">// set the safety switch position. Must be in a command by itself</span></div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;        <span class="keywordflow">if</span> (_custom_mode == 0) {</div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;            <span class="comment">// turn safety off (pwm outputs flow to the motors)</span></div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;            <a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#aa6daf2df3dfc0b9f0f503db64a52b0cc">rcout</a>-&gt;<a class="code" href="classAP__HAL_1_1RCOutput.html#afb075a7e5438b6f0bae228e0b6be0cc2">force_safety_off</a>();</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;            <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = MAV_RESULT_ACCEPTED;</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (_custom_mode == 1) {</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;            <span class="comment">// turn safety on (no pwm outputs to the motors)</span></div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#aa6daf2df3dfc0b9f0f503db64a52b0cc">rcout</a>-&gt;<a class="code" href="classAP__HAL_1_1RCOutput.html#a6852e3aa22747f045dc71972e97d7de6">force_safety_on</a>()) {</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;                <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = MAV_RESULT_ACCEPTED;</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;            }</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;        }</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;    }</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a>;</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;}</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;<span class="comment">  send OPTICAL_FLOW message</span></div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02374"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a7a8e21be24155bbcdd33b9f637493e0c"> 2374</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a7a8e21be24155bbcdd33b9f637493e0c">GCS_MAVLINK::send_opticalflow</a>()</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;{</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;<span class="preprocessor">#if AP_AHRS_NAVEKF_AVAILABLE</span></div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;    <span class="keyword">const</span> <a class="code" href="classOpticalFlow.html">OpticalFlow</a> *<a class="code" href="AP__OpticalFlow__test_8cpp.html#a7dca3af7ddfcb79556fe4ed5660e605c">optflow</a> = <a class="code" href="namespaceAP.html#a4f2e5c5dc038d7aceb39b73dbf92c30e">AP::opticalflow</a>();</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;    <span class="comment">// exit immediately if no optical flow sensor or not healthy</span></div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AP__OpticalFlow__test_8cpp.html#a7dca3af7ddfcb79556fe4ed5660e605c">optflow</a> == <span class="keyword">nullptr</span> ||</div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;        !<a class="code" href="AP__OpticalFlow__test_8cpp.html#a7dca3af7ddfcb79556fe4ed5660e605c">optflow</a>-&gt;<a class="code" href="classOpticalFlow.html#a77fc7eeb8ece11bee4b63d035619e02b">healthy</a>()) {</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;    }</div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;</div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;    <span class="comment">// get rates from sensor</span></div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;    <span class="keyword">const</span> <a class="code" href="structVector2.html">Vector2f</a> &amp;flowRate = <a class="code" href="AP__OpticalFlow__test_8cpp.html#a7dca3af7ddfcb79556fe4ed5660e605c">optflow</a>-&gt;<a class="code" href="classOpticalFlow.html#ade1670ce959d2e3429160385f466fe9a">flowRate</a>();</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;    <span class="keyword">const</span> <a class="code" href="structVector2.html">Vector2f</a> &amp;bodyRate = <a class="code" href="AP__OpticalFlow__test_8cpp.html#a7dca3af7ddfcb79556fe4ed5660e605c">optflow</a>-&gt;<a class="code" href="classOpticalFlow.html#ab48c5f0db4e8cadecf65c79ff07d3bd2">bodyRate</a>();</div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;</div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;    <span class="keyword">const</span> <a class="code" href="classAP__AHRS.html">AP_AHRS</a> &amp;<a class="code" href="AHRS__Test_8cpp.html#a7da610c2722190575e0ded7e4204d743">ahrs</a> = <a class="code" href="namespaceAP.html#a99432cfdb696952c9b7146f155a815aa">AP::ahrs</a>();</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;    <span class="keywordtype">float</span> hagl = 0;</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AHRS__Test_8cpp.html#a7da610c2722190575e0ded7e4204d743">ahrs</a>.<a class="code" href="classAP__AHRS__NavEKF.html#a7933552ae34a7fd8fdfc1e51a4e2fad6">have_inertial_nav</a>()) {</div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="AHRS__Test_8cpp.html#a7da610c2722190575e0ded7e4204d743">ahrs</a>.<a class="code" href="classAP__AHRS__NavEKF.html#a7fac0f961ae64a340731720a0d1a2c76">get_hagl</a>(hagl)) {</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;        }</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;    }</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;    <span class="comment">// populate and send message</span></div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;    mavlink_msg_optical_flow_send(</div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;        <a class="code" href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a>(),</div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;        0, <span class="comment">// sensor id is zero</span></div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;        flowRate.<a class="code" href="structVector2.html#a78fa1f2ed5e261c7fbeb8f3536a1ee34">x</a>,</div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;        flowRate.<a class="code" href="structVector2.html#a6cfed8355591aa269f4dba43bd806ef9">y</a>,</div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;        flowRate.<a class="code" href="structVector2.html#a78fa1f2ed5e261c7fbeb8f3536a1ee34">x</a> - bodyRate.<a class="code" href="structVector2.html#a78fa1f2ed5e261c7fbeb8f3536a1ee34">x</a>,</div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;        flowRate.<a class="code" href="structVector2.html#a6cfed8355591aa269f4dba43bd806ef9">y</a> - bodyRate.<a class="code" href="structVector2.html#a6cfed8355591aa269f4dba43bd806ef9">y</a>,</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;        <a class="code" href="AP__OpticalFlow__test_8cpp.html#a7dca3af7ddfcb79556fe4ed5660e605c">optflow</a>-&gt;<a class="code" href="classOpticalFlow.html#a84295172176946640695786e5f521319">quality</a>(),</div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;        hagl,  <span class="comment">// ground distance (in meters) set to zero</span></div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;        flowRate.<a class="code" href="structVector2.html#a78fa1f2ed5e261c7fbeb8f3536a1ee34">x</a>,</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;        flowRate.<a class="code" href="structVector2.html#a6cfed8355591aa269f4dba43bd806ef9">y</a>);</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;}</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;<span class="comment">  send AUTOPILOT_VERSION packet</span></div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02416"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a8ed79496b0f3efa28e630bddc8f59e62"> 2416</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a8ed79496b0f3efa28e630bddc8f59e62">GCS_MAVLINK::send_autopilot_version</a>()<span class="keyword"> const</span></div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;    uint32_t flight_sw_version;</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;    uint32_t middleware_sw_version = 0;</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;    uint32_t board_version = 0;</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;    <span class="keywordtype">char</span> flight_custom_version[MAVLINK_MSG_AUTOPILOT_VERSION_FIELD_FLIGHT_CUSTOM_VERSION_LEN]{};</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;    <span class="keywordtype">char</span> middleware_custom_version[MAVLINK_MSG_AUTOPILOT_VERSION_FIELD_MIDDLEWARE_CUSTOM_VERSION_LEN]{};</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;    <span class="keywordtype">char</span> os_custom_version[MAVLINK_MSG_AUTOPILOT_VERSION_FIELD_OS_CUSTOM_VERSION_LEN]{};</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;    uint16_t vendor_id = 0;</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;    uint16_t product_id = 0;</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;    uint64_t uid = 0;</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;    uint8_t  uid2[MAVLINK_MSG_AUTOPILOT_VERSION_FIELD_UID2_LEN] = {0};</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;    <span class="keyword">const</span> <a class="code" href="classAP__FWVersion.html">AP_FWVersion</a> &amp;version = <a class="code" href="namespaceAP.html#a47655f5b6fe937b02c57d7c314ca3587">AP::fwversion</a>();</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;</div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;    flight_sw_version = version.<a class="code" href="classAP__FWVersion.html#ae1441de09d1b00a17c2e684f6a04c20e">major</a> &lt;&lt; (8 * 3) | \</div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;                        version.<a class="code" href="classAP__FWVersion.html#aa6406b7e3a5807f5288a59e588b1ee3a">minor</a> &lt;&lt; (8 * 2) | \</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;                        version.patch &lt;&lt; (8 * 1) | \</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;                        (uint32_t)(version.<a class="code" href="classAP__FWVersion.html#acd2a312aaf5245d24ce72fdae803c4a4">fw_type</a>) &lt;&lt; (8 * 0);</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;    <span class="keywordflow">if</span> (version.<a class="code" href="classAP__FWVersion.html#a3c7cad0a5b22763d2df4e7dd67faad0f">fw_hash_str</a>) {</div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;        strncpy(flight_custom_version, version.<a class="code" href="classAP__FWVersion.html#a3c7cad0a5b22763d2df4e7dd67faad0f">fw_hash_str</a>, <span class="keyword">sizeof</span>(flight_custom_version) - 1);</div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;        flight_custom_version[<span class="keyword">sizeof</span>(flight_custom_version) - 1] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;    }</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;</div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;    <span class="keywordflow">if</span> (version.<a class="code" href="classAP__FWVersion.html#a087a76e42563c0b848490e6119033d1c">middleware_hash_str</a>) {</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;        strncpy(middleware_custom_version, version.<a class="code" href="classAP__FWVersion.html#a087a76e42563c0b848490e6119033d1c">middleware_hash_str</a>, <span class="keyword">sizeof</span>(middleware_custom_version) - 1);</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;        middleware_custom_version[<span class="keyword">sizeof</span>(middleware_custom_version) - 1] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;    }</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;    <span class="keywordflow">if</span> (version.<a class="code" href="classAP__FWVersion.html#af21558b1bb1ccd7c242ecae3778a043e">os_hash_str</a>) {</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;        strncpy(os_custom_version, version.<a class="code" href="classAP__FWVersion.html#af21558b1bb1ccd7c242ecae3778a043e">os_hash_str</a>, <span class="keyword">sizeof</span>(os_custom_version) - 1);</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;        os_custom_version[<span class="keyword">sizeof</span>(os_custom_version) - 1] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;    }</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;    mavlink_msg_autopilot_version_send(</div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#aabad4b34ae619e84f2f10deb9ee1caca">capabilities</a>(),</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;        flight_sw_version,</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;        middleware_sw_version,</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;        version.<a class="code" href="classAP__FWVersion.html#a174b8a0cb51d52f229d9796059c01f0b">os_sw_version</a>,</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;        board_version,</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;        (uint8_t *)flight_custom_version,</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;        (uint8_t *)middleware_custom_version,</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;        (uint8_t *)os_custom_version,</div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;        vendor_id,</div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;        product_id,</div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;        uid,</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;        uid2</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;    );</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;}</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;<span class="comment">  send LOCAL_POSITION_NED message</span></div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02471"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a02ed33d056d9bdd44fcf806c810a2127"> 2471</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a02ed33d056d9bdd44fcf806c810a2127">GCS_MAVLINK::send_local_position</a>()<span class="keyword"> const</span></div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;    <span class="keyword">const</span> <a class="code" href="classAP__AHRS.html">AP_AHRS</a> &amp;<a class="code" href="AHRS__Test_8cpp.html#a7da610c2722190575e0ded7e4204d743">ahrs</a> = <a class="code" href="namespaceAP.html#a99432cfdb696952c9b7146f155a815aa">AP::ahrs</a>();</div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;    <a class="code" href="classVector3.html">Vector3f</a> local_position, velocity;</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="AHRS__Test_8cpp.html#a7da610c2722190575e0ded7e4204d743">ahrs</a>.<a class="code" href="classAP__AHRS__NavEKF.html#a9f75e1cc7913ff2b730d6fc6b3a5fa71">get_relative_position_NED_home</a>(local_position) ||</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;        !<a class="code" href="AHRS__Test_8cpp.html#a7da610c2722190575e0ded7e4204d743">ahrs</a>.<a class="code" href="classAP__AHRS__NavEKF.html#a908ee6995ad1a06f8c9c88d8f185c1af">get_velocity_NED</a>(velocity)) {</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;        <span class="comment">// we don&#39;t know the position and velocity</span></div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;    }</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;    mavlink_msg_local_position_ned_send(</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;        <a class="code" href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a>(),</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;        local_position.<a class="code" href="classVector3.html#a1a0f7e168c71ca798099f0ba8a444244">x</a>,</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;        local_position.<a class="code" href="classVector3.html#a561df88b28e106e337a25bb86554a569">y</a>,</div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;        local_position.<a class="code" href="classVector3.html#ab3e7f5401dd6e951978bfa746809f74f">z</a>,</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;        velocity.<a class="code" href="classVector3.html#a1a0f7e168c71ca798099f0ba8a444244">x</a>,</div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;        velocity.<a class="code" href="classVector3.html#a561df88b28e106e337a25bb86554a569">y</a>,</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;        velocity.<a class="code" href="classVector3.html#ab3e7f5401dd6e951978bfa746809f74f">z</a>);</div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;}</div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;</div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;<span class="comment">  send VIBRATION message</span></div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02496"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a674f4da15be7463e4966f517d7a77e1d"> 2496</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a674f4da15be7463e4966f517d7a77e1d">GCS_MAVLINK::send_vibration</a>()<span class="keyword"> const</span></div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;    <span class="keyword">const</span> <a class="code" href="classAP__InertialSensor.html">AP_InertialSensor</a> &amp;<a class="code" href="AHRS__Test_8cpp.html#a4b91d1711c0d031f33f581540503bc54">ins</a> = <a class="code" href="namespaceAP.html#ac571aa5a2ef71b7f4b4b2bfa09143fb9">AP::ins</a>();</div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;</div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;    <a class="code" href="classVector3.html">Vector3f</a> vibration = <a class="code" href="AHRS__Test_8cpp.html#a4b91d1711c0d031f33f581540503bc54">ins</a>.<a class="code" href="classAP__InertialSensor.html#ae32fc128098640c8a2592f1e377e274b">get_vibration_levels</a>();</div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;</div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;    mavlink_msg_vibration_send(</div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;        <a class="code" href="namespaceAP__HAL.html#a7aa0ce7625c9680e30ff4a99940907a5">AP_HAL::micros64</a>(),</div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;        vibration.<a class="code" href="classVector3.html#a1a0f7e168c71ca798099f0ba8a444244">x</a>,</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;        vibration.<a class="code" href="classVector3.html#a561df88b28e106e337a25bb86554a569">y</a>,</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;        vibration.<a class="code" href="classVector3.html#ab3e7f5401dd6e951978bfa746809f74f">z</a>,</div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;        <a class="code" href="AHRS__Test_8cpp.html#a4b91d1711c0d031f33f581540503bc54">ins</a>.<a class="code" href="classAP__InertialSensor.html#a44b3909c69cbf40dc18fd383e4232cb7">get_accel_clip_count</a>(0),</div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;        <a class="code" href="AHRS__Test_8cpp.html#a4b91d1711c0d031f33f581540503bc54">ins</a>.<a class="code" href="classAP__InertialSensor.html#a44b3909c69cbf40dc18fd383e4232cb7">get_accel_clip_count</a>(1),</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;        <a class="code" href="AHRS__Test_8cpp.html#a4b91d1711c0d031f33f581540503bc54">ins</a>.<a class="code" href="classAP__InertialSensor.html#a44b3909c69cbf40dc18fd383e4232cb7">get_accel_clip_count</a>(2));</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;}</div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;</div><div class="line"><a name="l02513"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#af2b3c835201e0ceef2479f320721e1a2"> 2513</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#af2b3c835201e0ceef2479f320721e1a2">GCS_MAVLINK::send_named_float</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="BusTest_8cpp.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="keywordtype">float</span> <a class="code" href="AP__InertialSensor__BMI088_8cpp.html#a638e4503e0ae6ce655b7ad2e17e8f0ad">value</a>)<span class="keyword"> const</span></div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;    <span class="keywordtype">char</span> float_name[MAVLINK_MSG_NAMED_VALUE_FLOAT_FIELD_NAME_LEN+1] {};</div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;    strncpy(float_name, <a class="code" href="BusTest_8cpp.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, MAVLINK_MSG_NAMED_VALUE_FLOAT_FIELD_NAME_LEN);</div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;    mavlink_msg_named_value_float_send(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>, <a class="code" href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a>(), float_name, <a class="code" href="AP__InertialSensor__BMI088_8cpp.html#a638e4503e0ae6ce655b7ad2e17e8f0ad">value</a>);</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;}</div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;</div><div class="line"><a name="l02520"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a747e5080afc71eee57f6c2fc58754004"> 2520</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a747e5080afc71eee57f6c2fc58754004">GCS_MAVLINK::send_home_position</a>()<span class="keyword"> const</span></div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespaceAP.html#a99432cfdb696952c9b7146f155a815aa">AP::ahrs</a>().home_is_set()) {</div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;    }</div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;    <span class="keyword">const</span> <a class="code" href="classLocation.html">Location</a> &amp;home = <a class="code" href="namespaceAP.html#a99432cfdb696952c9b7146f155a815aa">AP::ahrs</a>().<a class="code" href="classAP__AHRS.html#a8ebd6624062d91ec1d19fc3306513e9a">get_home</a>();</div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;</div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> q[4] = {1.0f, 0.0f, 0.0f, 0.0f};</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;    mavlink_msg_home_position_send(</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;        home.<a class="code" href="classLocation.html#ae51548c2cf32311043ca19b94b9a9223">lat</a>,</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;        home.<a class="code" href="classLocation.html#a5831f0aca9e51a15adb96fad465f72f8">lng</a>,</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;        home.<a class="code" href="classLocation.html#a89e532f5bcc13db2f51ff9eed667c2b6">alt</a> * 10,</div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;        0.0f, 0.0f, 0.0f,</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;        q,</div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;        0.0f, 0.0f, 0.0f,</div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;        <a class="code" href="namespaceAP__HAL.html#a7aa0ce7625c9680e30ff4a99940907a5">AP_HAL::micros64</a>());</div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;}</div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;</div><div class="line"><a name="l02540"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#af4a0693c948bab93b5337be3c651e499"> 2540</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#af4a0693c948bab93b5337be3c651e499">GCS_MAVLINK::send_gps_global_origin</a>()<span class="keyword"> const</span></div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;    <a class="code" href="classLocation.html">Location</a> <a class="code" href="LogStructure_8h.html#ab36c838093e3699b68977ecfff272bc8a5f73dc8b4696c3114bbc7015b24103fd">ekf_origin</a>;</div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespaceAP.html#a99432cfdb696952c9b7146f155a815aa">AP::ahrs</a>().get_origin(<a class="code" href="LogStructure_8h.html#ab36c838093e3699b68977ecfff272bc8a5f73dc8b4696c3114bbc7015b24103fd">ekf_origin</a>)) {</div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;    }</div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;    mavlink_msg_gps_global_origin_send(</div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;        <a class="code" href="LogStructure_8h.html#ab36c838093e3699b68977ecfff272bc8a5f73dc8b4696c3114bbc7015b24103fd">ekf_origin</a>.lat,</div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;        <a class="code" href="LogStructure_8h.html#ab36c838093e3699b68977ecfff272bc8a5f73dc8b4696c3114bbc7015b24103fd">ekf_origin</a>.lng,</div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;        <a class="code" href="LogStructure_8h.html#ab36c838093e3699b68977ecfff272bc8a5f73dc8b4696c3114bbc7015b24103fd">ekf_origin</a>.alt * 10,</div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;        <a class="code" href="namespaceAP__HAL.html#a7aa0ce7625c9680e30ff4a99940907a5">AP_HAL::micros64</a>());</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;}</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;</div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;<span class="comment">  Send MAVLink heartbeat</span></div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02557"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a594bdee663bf384059b643517d48da32"> 2557</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a594bdee663bf384059b643517d48da32">GCS_MAVLINK::send_heartbeat</a>()<span class="keyword"> const</span></div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;    mavlink_msg_heartbeat_send(</div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;        <a class="code" href="GCS__Common_8cpp.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a>().frame_type(),</div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;        MAV_AUTOPILOT_ARDUPILOTMEGA,</div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a117f9a72fc1d3be064cded650cf311e8">base_mode</a>(),</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;        <a class="code" href="GCS__Common_8cpp.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a>().custom_mode(),</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#afd5f5c2bef34fef841acd5f90a2d59c9">system_status</a>());</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;}</div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;</div><div class="line"><a name="l02568"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#ab03ead633c327ce88a24bf4d00f743b6"> 2568</a></span>&#160;MAV_RESULT <a class="code" href="structGCS__MAVLINK.html#ab03ead633c327ce88a24bf4d00f743b6">GCS_MAVLINK::handle_command_set_message_interval</a>(<span class="keyword">const</span> mavlink_command_long_t &amp;packet)</div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;{</div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;    <span class="keyword">const</span> uint32_t msg_id = (uint32_t)packet.param1;</div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;    <span class="keyword">const</span> int32_t interval_us = (int32_t)packet.param2;</div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;</div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;    uint16_t <a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a>;</div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;    <span class="keywordflow">if</span> (interval_us == 0) {</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;        <span class="comment">// zero is &quot;reset to default rate&quot;</span></div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="structGCS__MAVLINK.html#a37d3fae28018d3432206dd3e706f37f9">get_default_interval_for_mavlink_message_id</a>(msg_id, <a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a>)) {</div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;            <span class="keywordflow">return</span> MAV_RESULT_FAILED;</div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;        }</div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (interval_us == -1) {</div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;        <span class="comment">// minus-one is &quot;stop sending&quot;</span></div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a> = 0;</div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (interval_us &lt; 1000) {</div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;        <span class="comment">// don&#39;t squash sub-ms times to zero</span></div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a> = 1;</div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (interval_us &gt; 60000000) {</div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a> = 60000;</div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a> = interval_us / 1000;</div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;    }</div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structGCS__MAVLINK.html#ac2c3d2352c4047cecbce1cf9437631f6">set_mavlink_message_id_interval</a>(msg_id, <a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a>)) {</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;        <span class="keywordflow">return</span> MAV_RESULT_ACCEPTED;</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;    }</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;    <span class="keywordflow">return</span> MAV_RESULT_FAILED;</div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;}</div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;</div><div class="line"><a name="l02597"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a67fea52889ec858e710b39cf2324849c"> 2597</a></span>&#160;MAV_RESULT <a class="code" href="structGCS__MAVLINK.html#a67fea52889ec858e710b39cf2324849c">GCS_MAVLINK::handle_command_request_message</a>(<span class="keyword">const</span> mavlink_command_long_t &amp;packet)</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;{</div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;    <span class="keyword">const</span> uint32_t mavlink_id = (uint32_t)packet.param1;</div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;    <span class="keyword">const</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991">ap_message</a> <span class="keywordtype">id</span> = <a class="code" href="structGCS__MAVLINK.html#a8b947efd39ef128020f20544da6cfc25">mavlink_id_to_ap_message_id</a>(mavlink_id);</div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;    <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a67d8257d6aa089cfd08b5c6f35b7718e">MSG_LAST</a>) {</div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;        <span class="keywordflow">return</span> MAV_RESULT_FAILED;</div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;    }</div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;    <a class="code" href="structGCS__MAVLINK.html#a4902306dab46ff02b2296f99eb1f1c9c">send_message</a>(<span class="keywordtype">id</span>);</div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;    <span class="keywordflow">return</span> MAV_RESULT_ACCEPTED;</div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;}</div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;</div><div class="line"><a name="l02608"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a6225be4d1ccb6d956f1919b062bf2e66"> 2608</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="structGCS__MAVLINK.html#a6225be4d1ccb6d956f1919b062bf2e66">GCS_MAVLINK::get_ap_message_interval</a>(<a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991">ap_message</a> <span class="keywordtype">id</span>, uint16_t &amp;interval_ms)<span class="keyword"> const</span></div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;    <span class="comment">// check if it&#39;s a specially-handled message:</span></div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;    <span class="keyword">const</span> int8_t deferred_offset = <a class="code" href="structGCS__MAVLINK.html#ac5b5b95814e90243cc47e05742146372">get_deferred_message_index</a>(<span class="keywordtype">id</span>);</div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;    <span class="keywordflow">if</span> (deferred_offset != -1) {</div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a> = <a class="code" href="structGCS__MAVLINK.html#a7677b38b86b12d2966994a54ea5edbd4">deferred_message</a>[deferred_offset].<a class="code" href="structGCS__MAVLINK_1_1deferred__message__t.html#a1aed6ec6ca91364e195c5a7c1c219ace">interval_ms</a>;</div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;    }</div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;</div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;    <span class="comment">// check the deferred message buckets:</span></div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;    <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code" href="AP__Common_8h.html#a121caf32c5b5d704ef3453f0885a9ea5">ARRAY_SIZE</a>(<a class="code" href="structGCS__MAVLINK.html#ade499c2dfc150405083857afe83bf5bc">deferred_message_bucket</a>); i++) {</div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;        <span class="keyword">const</span> <a class="code" href="structGCS__MAVLINK_1_1deferred__message__bucket__t.html">deferred_message_bucket_t</a> &amp;bucket = <a class="code" href="structGCS__MAVLINK.html#ade499c2dfc150405083857afe83bf5bc">deferred_message_bucket</a>[i];</div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;        <span class="keywordflow">if</span> (bucket.<a class="code" href="structGCS__MAVLINK_1_1deferred__message__bucket__t.html#a8f4bf56ecfdeceba3cb32d6abdb53951">ap_message_ids</a>.<a class="code" href="classBitmask.html#a0be34bb49dbf06972c4a16c0b12cd846">get</a>(<span class="keywordtype">id</span>)) {</div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;            <a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a> = bucket.<a class="code" href="structGCS__MAVLINK_1_1deferred__message__bucket__t.html#ab9e7ae8495102a2d21a67ada970d0b0d">interval_ms</a>;</div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;        }</div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;    }</div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;</div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;}</div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;</div><div class="line"><a name="l02629"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#ac70cb2b36ea28b838c8b4cafa3a3f2c7"> 2629</a></span>&#160;MAV_RESULT <a class="code" href="structGCS__MAVLINK.html#ac70cb2b36ea28b838c8b4cafa3a3f2c7">GCS_MAVLINK::handle_command_get_message_interval</a>(<span class="keyword">const</span> mavlink_command_long_t &amp;packet)</div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;{</div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="GCS__MAVLink_8cpp.html#a2a0fd455fd37f642e9eb67373a14b7d9">comm_get_txspace</a>(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>) &lt; <a class="code" href="GCS_8h.html#a9f9bd054f58892da86c64ad06c6b2179">PAYLOAD_SIZE</a>(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>, MESSAGE_INTERVAL) + <a class="code" href="GCS_8h.html#a9f9bd054f58892da86c64ad06c6b2179">PAYLOAD_SIZE</a>(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>, COMMAND_ACK)) {</div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;        <span class="keywordflow">return</span> MAV_RESULT_TEMPORARILY_REJECTED;</div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;    }</div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;</div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;    <span class="keyword">const</span> uint32_t mavlink_id = (uint32_t)packet.param1;</div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;    if (mavlink_id &gt;= 2 &lt;&lt; 15) {</div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;        <span class="comment">// response packet limits range this works against!</span></div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;        mavlink_msg_message_interval_send(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>, mavlink_id, 0); <span class="comment">// not available</span></div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;        <span class="keywordflow">return</span> MAV_RESULT_FAILED;</div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;    }</div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;</div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;    <span class="keyword">const</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991">ap_message</a> <span class="keywordtype">id</span> = <a class="code" href="structGCS__MAVLINK.html#a8b947efd39ef128020f20544da6cfc25">mavlink_id_to_ap_message_id</a>(mavlink_id);</div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;    <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a67d8257d6aa089cfd08b5c6f35b7718e">MSG_LAST</a>) {</div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;        mavlink_msg_message_interval_send(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>, mavlink_id, 0); <span class="comment">// not available</span></div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;        <span class="keywordflow">return</span> MAV_RESULT_FAILED;</div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;    }</div><div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;</div><div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;    uint16_t <a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a> = 0;</div><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="structGCS__MAVLINK.html#a6225be4d1ccb6d956f1919b062bf2e66">get_ap_message_interval</a>(<span class="keywordtype">id</span>, <a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a>)) {</div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;        <span class="comment">// not streaming this message at the moment...</span></div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;        mavlink_msg_message_interval_send(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>, mavlink_id, -1); <span class="comment">// disabled</span></div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;        <span class="keywordflow">return</span> MAV_RESULT_ACCEPTED;</div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;    }</div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;</div><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a> == 0) {</div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;        mavlink_msg_message_interval_send(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>, mavlink_id, -1); <span class="comment">// disabled</span></div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;        <span class="keywordflow">return</span> MAV_RESULT_ACCEPTED;</div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;    }</div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;</div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;    mavlink_msg_message_interval_send(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>, mavlink_id, <a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a> * 1000);</div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;    <span class="keywordflow">return</span> MAV_RESULT_ACCEPTED;</div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;}</div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;</div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;</div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;<span class="comment">// are we still delaying telemetry to try to avoid Xbee bricking?</span></div><div class="line"><a name="l02666"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#abcd38f5b7a9c3895b139a7aeaa6e65da"> 2666</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="structGCS__MAVLINK.html#abcd38f5b7a9c3895b139a7aeaa6e65da">GCS_MAVLINK::telemetry_delayed</a>()<span class="keyword"> const</span></div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;    uint32_t tnow = <a class="code" href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a>() &gt;&gt; 10;</div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;    <span class="keywordflow">if</span> (tnow &gt; <a class="code" href="structGCS__MAVLINK.html#a6b28d39ba0b6d7be473c03b21be358ff">telem_delay</a>()) {</div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;    }</div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a> == MAVLINK_COMM_0 &amp;&amp; <a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#a13ed800ad745085097f4d6dce9070eb0">gpio</a>-&gt;<a class="code" href="classAP__HAL_1_1GPIO.html#ab0ea67003249493b7efc0528410b9be6">usb_connected</a>()) {</div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;        <span class="comment">// this is USB telemetry, so won&#39;t be an Xbee</span></div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;    }</div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;    <span class="comment">// we&#39;re either on the 2nd UART, or no USB cable is connected</span></div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;    <span class="comment">// we need to delay telemetry by the TELEM_DELAY time</span></div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;}</div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;</div><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;</div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;<span class="comment">  send SERVO_OUTPUT_RAW</span></div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02685"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#ab6f47a24d390d4a7e324a79a23d3ae28"> 2685</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#ab6f47a24d390d4a7e324a79a23d3ae28">GCS_MAVLINK::send_servo_output_raw</a>()</div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;{</div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;    uint16_t values[16] {};</div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structGCS__MAVLINK.html#a9b46604132c167947d25d2df08e048fe">in_hil_mode</a>()) {</div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;        <span class="keywordflow">for</span> (uint8_t i=0; i&lt;16; i++) {</div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;            values[i] = <a class="code" href="classSRV__Channels.html#a650fab39dbed7c6ce33747c34e66a208">SRV_Channels::srv_channel</a>(i)-&gt;<a class="code" href="classSRV__Channel.html#abd494c5e7f0400992d9b898071c1b992">get_output_pwm</a>();</div><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;        }</div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;        <a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#aa6daf2df3dfc0b9f0f503db64a52b0cc">rcout</a>-&gt;<a class="code" href="classAP__HAL_1_1RCOutput.html#a636fcf1b8ebc6b591a15fbc917f83f4f">read</a>(values, 16);</div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;    }</div><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;    <span class="keywordflow">for</span> (uint8_t i=0; i&lt;16; i++) {</div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;        <span class="keywordflow">if</span> (values[i] == 65535) {</div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;            values[i] = 0;</div><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;        }</div><div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;    }    </div><div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;    mavlink_msg_servo_output_raw_send(</div><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;            <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;            <a class="code" href="namespaceAP__HAL.html#a8293355e35887733b1fd151aef08a787">AP_HAL::micros</a>(),</div><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;            0,     <span class="comment">// port</span></div><div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;            values[0],  values[1],  values[2],  values[3],</div><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;            values[4],  values[5],  values[6],  values[7],</div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;            values[8],  values[9],  values[10], values[11],</div><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;            values[12], values[13], values[14], values[15]);</div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;}</div><div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;</div><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;</div><div class="line"><a name="l02711"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a007e2acbb02611a68d30d68ed140b0fe"> 2711</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a007e2acbb02611a68d30d68ed140b0fe">GCS_MAVLINK::send_collision_all</a>(<span class="keyword">const</span> <a class="code" href="classAP__Avoidance_1_1Obstacle.html">AP_Avoidance::Obstacle</a> &amp;threat, MAV_COLLISION_ACTION behaviour)</div><div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;{</div><div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;    <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code" href="GCS__MAVLink_8h.html#aff625e94451bf446bdd56f5d0e081077">MAVLINK_COMM_NUM_BUFFERS</a>; i++) {</div><div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;        <span class="keywordflow">if</span> ((1U&lt;&lt;i) &amp; <a class="code" href="structGCS__MAVLINK.html#a9d41c619b9282f98439533324050c99c">mavlink_active</a>) {</div><div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;            mavlink_channel_t <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a> = (mavlink_channel_t)(MAVLINK_COMM_0+i);</div><div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="GCS__MAVLink_8cpp.html#a2a0fd455fd37f642e9eb67373a14b7d9">comm_get_txspace</a>(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>) &gt;= MAVLINK_NUM_NON_PAYLOAD_BYTES + MAVLINK_MSG_ID_COLLISION) {</div><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;                mavlink_msg_collision_send(</div><div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;                    <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;                    MAV_COLLISION_SRC_ADSB,</div><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;                    threat.<a class="code" href="classAP__Avoidance_1_1Obstacle.html#aa67d9528c916fd4e828672acf8314a35">src_id</a>,</div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;                    behaviour,</div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;                    threat.<a class="code" href="classAP__Avoidance_1_1Obstacle.html#a8b5a48daccfe4c510b81d6731b896add">threat_level</a>,</div><div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;                    threat.<a class="code" href="classAP__Avoidance_1_1Obstacle.html#abd8f09947f45d0ce330615176e15febb">time_to_closest_approach</a>,</div><div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;                    threat.<a class="code" href="classAP__Avoidance_1_1Obstacle.html#a372b03e813c79eb79663cefd031646ed">closest_approach_z</a>,</div><div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;                    threat.<a class="code" href="classAP__Avoidance_1_1Obstacle.html#a70a3af409629cad3737c25003937f7fc">closest_approach_xy</a></div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;                    );</div><div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;            }</div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;        }</div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;    }</div><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;}</div><div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;</div><div class="line"><a name="l02732"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a0c78458a0addc976857a39563deab6a7"> 2732</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a0c78458a0addc976857a39563deab6a7">GCS_MAVLINK::send_accelcal_vehicle_position</a>(uint32_t position)</div><div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;{</div><div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="GCS_8h.html#a6bcce1fe6fd8b6277f4f2dd0e738aec1">HAVE_PAYLOAD_SPACE</a>(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>, COMMAND_LONG)) {</div><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;        mavlink_msg_command_long_send(</div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;            <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;            0,</div><div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;            0,</div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;            MAV_CMD_ACCELCAL_VEHICLE_POS,</div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;            0,</div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;            (<span class="keywordtype">float</span>) position,</div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;            0, 0, 0, 0, 0, 0);</div><div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;    }</div><div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;}</div><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;</div><div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;</div><div class="line"><a name="l02747"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#adb3b41a33f84e6f33bda6ffca0a39f46"> 2747</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="structGCS__MAVLINK.html#adb3b41a33f84e6f33bda6ffca0a39f46">GCS_MAVLINK::vfr_hud_airspeed</a>()<span class="keyword"> const</span></div><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;    <a class="code" href="classAP__Airspeed.html">AP_Airspeed</a> *<a class="code" href="Airspeed_8cpp.html#abfed87a61c42e885ee14d5222b47583f">airspeed</a> = <a class="code" href="classAP__Airspeed.html#a6bfb2eababf55852b35bdff810ca86d1">AP_Airspeed::get_singleton</a>();</div><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="Airspeed_8cpp.html#abfed87a61c42e885ee14d5222b47583f">airspeed</a> != <span class="keyword">nullptr</span> &amp;&amp; <a class="code" href="Airspeed_8cpp.html#abfed87a61c42e885ee14d5222b47583f">airspeed</a>-&gt;<a class="code" href="classAP__Airspeed.html#a1f93ae84c30efc1375765b835004e7a9">healthy</a>()) {</div><div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="Airspeed_8cpp.html#abfed87a61c42e885ee14d5222b47583f">airspeed</a>-&gt;<a class="code" href="classAP__Airspeed.html#a02885c320f3cedbc08c02bc8894aba04">get_airspeed</a>();</div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;    }</div><div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;    <span class="comment">// because most vehicles don&#39;t have airspeed sensors, we return a</span></div><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;    <span class="comment">// different sort of speed estimate in the relevant field for</span></div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;    <span class="comment">// comparison&#39;s sake.</span></div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceAP.html#ae6eeec356455220f913e47e323057cd5">AP::gps</a>().<a class="code" href="classAP__GPS.html#ae7f097588dd863d4624f6fec1509e0e6">ground_speed</a>();</div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;}</div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;</div><div class="line"><a name="l02759"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a2d81f25058bd85a4f7e75634050c4cb1"> 2759</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="structGCS__MAVLINK.html#a2d81f25058bd85a4f7e75634050c4cb1">GCS_MAVLINK::vfr_hud_climbrate</a>()<span class="keyword"> const</span></div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;    <a class="code" href="classVector3.html">Vector3f</a> velned;</div><div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespaceAP.html#a99432cfdb696952c9b7146f155a815aa">AP::ahrs</a>().get_velocity_NED(velned)) {</div><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;      velned.<a class="code" href="classVector3.html#adf1769d5ee5df2f8585df2f540fa5efe">zero</a>();</div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;    }</div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;    <span class="keywordflow">return</span> -velned.<a class="code" href="classVector3.html#ab3e7f5401dd6e951978bfa746809f74f">z</a>;</div><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;}</div><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;</div><div class="line"><a name="l02768"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a2f1b229ecfdc51aeea284173f7ed6a61"> 2768</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="structGCS__MAVLINK.html#a2f1b229ecfdc51aeea284173f7ed6a61">GCS_MAVLINK::vfr_hud_alt</a>()<span class="keyword"> const</span></div><div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structGCS__MAVLINK.html#aba66df4511a3307badb689d3768ba166">global_position_current_loc</a>.<a class="code" href="classLocation.html#a89e532f5bcc13db2f51ff9eed667c2b6">alt</a> * 0.01f; <span class="comment">// cm -&gt; m</span></div><div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;}</div><div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;</div><div class="line"><a name="l02773"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#af4c7fce15464d8ff4a13eb30a0d7d8d5"> 2773</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#af4c7fce15464d8ff4a13eb30a0d7d8d5">GCS_MAVLINK::send_vfr_hud</a>()</div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;{</div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;    <a class="code" href="classAP__AHRS.html">AP_AHRS</a> &amp;<a class="code" href="AHRS__Test_8cpp.html#a7da610c2722190575e0ded7e4204d743">ahrs</a> = <a class="code" href="namespaceAP.html#a99432cfdb696952c9b7146f155a815aa">AP::ahrs</a>();</div><div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;</div><div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;    <span class="comment">// return values ignored; we send stale data</span></div><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;    <a class="code" href="AHRS__Test_8cpp.html#a7da610c2722190575e0ded7e4204d743">ahrs</a>.<a class="code" href="classAP__AHRS__NavEKF.html#a5b5c5de012442fd1c6c2f66b5148d313">get_position</a>(<a class="code" href="structGCS__MAVLINK.html#aba66df4511a3307badb689d3768ba166">global_position_current_loc</a>);</div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;</div><div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;    mavlink_msg_vfr_hud_send(</div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#adb3b41a33f84e6f33bda6ffca0a39f46">vfr_hud_airspeed</a>(),</div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;        <a class="code" href="AHRS__Test_8cpp.html#a7da610c2722190575e0ded7e4204d743">ahrs</a>.<a class="code" href="classAP__AHRS.html#a11efcc2b48256bf736f33ac26063ae16">groundspeed</a>(),</div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;        (<a class="code" href="AHRS__Test_8cpp.html#a7da610c2722190575e0ded7e4204d743">ahrs</a>.<a class="code" href="classAP__AHRS.html#a8a160130dd99016a19abab9d85917261">yaw_sensor</a> / 100) % 360,</div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a153ea3cf1e1e1d0e8d8d8753d3915091">vfr_hud_throttle</a>(),</div><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a2f1b229ecfdc51aeea284173f7ed6a61">vfr_hud_alt</a>(),</div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a2d81f25058bd85a4f7e75634050c4cb1">vfr_hud_climbrate</a>());</div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;}</div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;</div><div class="line"><a name="l02790"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a090c17fc4c5a599232b8a624e8d64d47"> 2790</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a090c17fc4c5a599232b8a624e8d64d47">GCS_MAVLINK::zero_rc_outputs</a>()</div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;{</div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;    <span class="comment">// Send an invalid signal to the motors to prevent spinning due to neutral (1500) pwm pulse being cut short</span></div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;    <span class="comment">// For that matter, send an invalid signal to all channels to prevent undesired/unexpected behavior</span></div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;    <a class="code" href="classSRV__Channels.html#a6bdc435846b87498670af6018e094f64">SRV_Channels::cork</a>();</div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="RC__Channel_8h.html#ad8f949ef5f11f906dc35ae5a38c67179">NUM_RC_CHANNELS</a>; i++) {</div><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;        <a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#aa6daf2df3dfc0b9f0f503db64a52b0cc">rcout</a>-&gt;<a class="code" href="classAP__HAL_1_1RCOutput.html#ade771f122696035c1e831ccc63a33893">write</a>(i, 0);</div><div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;    }</div><div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;    <a class="code" href="classSRV__Channels.html#a3d06352d58d90ae7934ef500505b937f">SRV_Channels::push</a>();</div><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;}</div><div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;</div><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;<span class="comment">  handle a MAV_CMD_PREFLIGHT_REBOOT_SHUTDOWN command </span></div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;<span class="comment">  Optionally disable PX4IO overrides. This is done for quadplanes to</span></div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;<span class="comment">  prevent the mixer running while rebooting which can start the VTOL</span></div><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;<span class="comment">  motors. That can be dangerous when a preflight reboot is done with</span></div><div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;<span class="comment">  the pilot close to the aircraft and can also damage the aircraft</span></div><div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02809"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a2c41f461a8bc8bddbb7ed30ce2a1f135"> 2809</a></span>&#160;MAV_RESULT <a class="code" href="structGCS__MAVLINK.html#a2c41f461a8bc8bddbb7ed30ce2a1f135">GCS_MAVLINK::handle_preflight_reboot</a>(<span class="keyword">const</span> mavlink_command_long_t &amp;packet)</div><div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;{</div><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AP__Math_8cpp.html#accbd9f8bbc0adacd51efa66fad490c24">is_equal</a>(packet.param1, 42.0f) &amp;&amp;</div><div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;        <a class="code" href="AP__Math_8cpp.html#accbd9f8bbc0adacd51efa66fad490c24">is_equal</a>(packet.param2, 24.0f) &amp;&amp;</div><div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;        <a class="code" href="AP__Math_8cpp.html#accbd9f8bbc0adacd51efa66fad490c24">is_equal</a>(packet.param3, 71.0f) &amp;&amp;</div><div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;        <a class="code" href="AP__Math_8cpp.html#accbd9f8bbc0adacd51efa66fad490c24">is_equal</a>(packet.param4, 93.0f)) {</div><div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;        <span class="comment">// this is a magic sequence to force the main loop to</span></div><div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;        <span class="comment">// lockup. This is for testing the stm32 watchdog</span></div><div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;        <span class="comment">// functionality</span></div><div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;        <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div><div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;            <a class="code" href="structGCS__MAVLINK.html#a8712f50cee60529cc3c31aec2633391b">send_text</a>(MAV_SEVERITY_WARNING,<span class="stringliteral">&quot;entering lockup&quot;</span>);</div><div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;            <a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#a94ab41309b1ff10b8b862b826e59c882">scheduler</a>-&gt;<a class="code" href="classAP__HAL_1_1Scheduler.html#ab3175e2e6223ccfe82f957e41cc12b26">delay</a>(250);</div><div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;        }</div><div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;    }</div><div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;</div><div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#a9337a60383f4264fa96a20dbe43a4e2e">util</a>-&gt;<a class="code" href="classAP__HAL_1_1Util.html#a287a2b82fa30b92c8d52aad61d4d27b7">get_soft_armed</a>()) {</div><div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;        <span class="comment">// refuse reboot when armed</span></div><div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;        <span class="keywordflow">return</span> MAV_RESULT_FAILED;</div><div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;    }</div><div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;</div><div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="AP__Math_8cpp.html#accbd9f8bbc0adacd51efa66fad490c24">is_equal</a>(packet.param1, 1.0f) || <a class="code" href="AP__Math_8cpp.html#accbd9f8bbc0adacd51efa66fad490c24">is_equal</a>(packet.param1, 3.0f))) {</div><div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;        <span class="comment">// param1 must be 1 or 3 - 1 being reboot, 3 being reboot-to-bootloader</span></div><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;        <span class="keywordflow">return</span> MAV_RESULT_UNSUPPORTED;</div><div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;    }</div><div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;</div><div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structGCS__MAVLINK.html#adc1ed7d077ebd18897573ce66762c1c0">should_zero_rc_outputs_on_reboot</a>()) {</div><div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a090c17fc4c5a599232b8a624e8d64d47">zero_rc_outputs</a>();</div><div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;    }</div><div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;</div><div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;    <span class="comment">// send ack before we reboot</span></div><div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;    mavlink_msg_command_ack_send(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>, packet.command, MAV_RESULT_ACCEPTED);</div><div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;    <span class="comment">// Notify might want to blink some LEDs:</span></div><div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;    <a class="code" href="classAP__Notify.html">AP_Notify</a> *<a class="code" href="ToshibaLED__test_8cpp.html#a1e113a9d02dfe1bd93e9190d10c45cad">notify</a> = <a class="code" href="classAP__Notify.html#a0264facb8d3b5c35a7cff0171acdabd0">AP_Notify::get_singleton</a>();</div><div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ToshibaLED__test_8cpp.html#a1e113a9d02dfe1bd93e9190d10c45cad">notify</a>) {</div><div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;        <a class="code" href="classAP__Notify.html#a724dd074a094de26e17c72c38ac499e9">AP_Notify::flags</a>.<a class="code" href="structAP__Notify_1_1notify__flags__and__values__type.html#a7423b617c0687c42b916fbf18545f10a">firmware_update</a> = 1;</div><div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;        <a class="code" href="ToshibaLED__test_8cpp.html#a1e113a9d02dfe1bd93e9190d10c45cad">notify</a>-&gt;<a class="code" href="classAP__Notify.html#af0f7003f65d99efcffa33d7060c56ac9">update</a>();</div><div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;    }</div><div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;    <span class="comment">// force safety on</span></div><div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;    <a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#aa6daf2df3dfc0b9f0f503db64a52b0cc">rcout</a>-&gt;<a class="code" href="classAP__HAL_1_1RCOutput.html#a6852e3aa22747f045dc71972e97d7de6">force_safety_on</a>();</div><div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;    <a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#aa6daf2df3dfc0b9f0f503db64a52b0cc">rcout</a>-&gt;<a class="code" href="classAP__HAL_1_1RCOutput.html#af1625f683d791c5c843fed2a6cefde3f">force_safety_no_wait</a>();</div><div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;</div><div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;    <span class="comment">// flush pending parameter writes</span></div><div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;    <a class="code" href="classAP__Param.html#a148701a80b7a045d03afe890265fcbfd">AP_Param::flush</a>();</div><div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;</div><div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;    <a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#a94ab41309b1ff10b8b862b826e59c882">scheduler</a>-&gt;<a class="code" href="classAP__HAL_1_1Scheduler.html#ab3175e2e6223ccfe82f957e41cc12b26">delay</a>(200);</div><div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;    </div><div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;    <span class="comment">// when packet.param1 == 3 we reboot to hold in bootloader</span></div><div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> hold_in_bootloader = <a class="code" href="AP__Math_8cpp.html#accbd9f8bbc0adacd51efa66fad490c24">is_equal</a>(packet.param1, 3.0f);</div><div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;    <a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#a94ab41309b1ff10b8b862b826e59c882">scheduler</a>-&gt;<a class="code" href="classAP__HAL_1_1Scheduler.html#a9fc1cebafebb6588842f4f0e18c7a996">reboot</a>(hold_in_bootloader);</div><div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;</div><div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;    <span class="keywordflow">return</span> MAV_RESULT_FAILED;</div><div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;}</div><div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;</div><div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;<span class="comment">  handle a flight termination request</span></div><div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02865"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#acfc1187142442967f8373970d0d5f408"> 2865</a></span>&#160;MAV_RESULT <a class="code" href="structGCS__MAVLINK.html#acfc1187142442967f8373970d0d5f408">GCS_MAVLINK::handle_flight_termination</a>(<span class="keyword">const</span> mavlink_command_long_t &amp;packet)</div><div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;{</div><div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;    <a class="code" href="classAP__AdvancedFailsafe.html">AP_AdvancedFailsafe</a> *failsafe = <a class="code" href="structGCS__MAVLINK.html#a085f9cede300d1fd4b58aa8b1719274f">get_advanced_failsafe</a>();</div><div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;    <span class="keywordflow">if</span> (failsafe == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;        <span class="keywordflow">return</span> MAV_RESULT_UNSUPPORTED;</div><div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;    }</div><div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;</div><div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;    <span class="keywordtype">bool</span> should_terminate = packet.param1 &gt; 0.5f;</div><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;</div><div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;    <span class="keywordflow">if</span> (failsafe-&gt;<a class="code" href="classAP__AdvancedFailsafe.html#ac2c01b0447f5c4c06d1ca476764933b4">gcs_terminate</a>(should_terminate, <span class="stringliteral">&quot;GCS request&quot;</span>)) {</div><div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;        <span class="keywordflow">return</span> MAV_RESULT_ACCEPTED;</div><div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;    }</div><div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;    <span class="keywordflow">return</span> MAV_RESULT_FAILED;</div><div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;}</div><div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;</div><div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;<span class="comment">  handle a R/C bind request (for spektrum)</span></div><div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02883"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a03ff2b05cc97e31acf23019c00752388"> 2883</a></span>&#160;MAV_RESULT <a class="code" href="structGCS__MAVLINK.html#a03ff2b05cc97e31acf23019c00752388">GCS_MAVLINK::handle_rc_bind</a>(<span class="keyword">const</span> mavlink_command_long_t &amp;packet)</div><div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;{</div><div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;    <span class="comment">// initiate bind procedure. We accept the DSM type from either</span></div><div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;    <span class="comment">// param1 or param2 due to a past mixup with what parameter is the</span></div><div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;    <span class="comment">// right one</span></div><div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classRC__Channels.html#af71de44b3d11d95c2d8bfc5d6b429c48">RC_Channels::receiver_bind</a>(packet.param2&gt;0?packet.param2:packet.param1)) {</div><div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;        <span class="keywordflow">return</span> MAV_RESULT_FAILED;</div><div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;    }</div><div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;    <span class="keywordflow">return</span> MAV_RESULT_ACCEPTED;</div><div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;}</div><div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;</div><div class="line"><a name="l02894"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a08ff9403ca6fe218d0bd30d106d1aa73"> 2894</a></span>&#160;uint64_t <a class="code" href="structGCS__MAVLINK.html#a08ff9403ca6fe218d0bd30d106d1aa73">GCS_MAVLINK::timesync_receive_timestamp_ns</a>()<span class="keyword"> const</span></div><div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;    uint64_t ret = <a class="code" href="structGCS__MAVLINK.html#a534b55e4a0350601fbdc54818a6dedbe">_port</a>-&gt;<a class="code" href="classAP__HAL_1_1UARTDriver.html#a050efe232fa3e0106e5576ccc2538bd3">receive_time_constraint_us</a>(<a class="code" href="GCS_8h.html#a9f9bd054f58892da86c64ad06c6b2179">PAYLOAD_SIZE</a>(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>, TIMESYNC));</div><div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;    <span class="keywordflow">if</span> (ret == 0) {</div><div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;        ret = <a class="code" href="namespaceAP__HAL.html#a7aa0ce7625c9680e30ff4a99940907a5">AP_HAL::micros64</a>();</div><div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;    }</div><div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;    <span class="keywordflow">return</span> ret*1000<a class="code" href="lobject_8c.html#a6185afb135442b229d91201b1a3c6eb2">LL</a>;</div><div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;}</div><div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;</div><div class="line"><a name="l02903"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a4aa7860d644a9d699bc80cb6c9bd76e4"> 2903</a></span>&#160;uint64_t <a class="code" href="structGCS__MAVLINK.html#a4aa7860d644a9d699bc80cb6c9bd76e4">GCS_MAVLINK::timesync_timestamp_ns</a>()<span class="keyword"> const</span></div><div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;    <span class="comment">// we add in our own system id try to ensure we only consider</span></div><div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;    <span class="comment">// responses to our own timesync request messages</span></div><div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceAP__HAL.html#a7aa0ce7625c9680e30ff4a99940907a5">AP_HAL::micros64</a>()*1000<a class="code" href="lobject_8c.html#a6185afb135442b229d91201b1a3c6eb2">LL</a> + <a class="code" href="routing_8cpp.html#a5123629902b8b0dcf1d5cb7336558801">mavlink_system</a>.sysid;</div><div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;}</div><div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;</div><div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;<span class="comment">  return a timesync request</span></div><div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;<span class="comment">  Sends back ts1 as received, and tc1 is the local timestamp in usec</span></div><div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02914"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#ae00bb5fbb1a3e4843be647dc9b09f51f"> 2914</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#ae00bb5fbb1a3e4843be647dc9b09f51f">GCS_MAVLINK::handle_timesync</a>(mavlink_message_t *msg)</div><div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;{</div><div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;    <span class="comment">// decode incoming timesync message</span></div><div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;    mavlink_timesync_t tsync;</div><div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;    mavlink_msg_timesync_decode(msg, &amp;tsync);</div><div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;</div><div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;    <span class="keywordflow">if</span> (tsync.tc1 != 0) {</div><div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;        <span class="comment">// this is a response to a timesync request</span></div><div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;        <span class="keywordflow">if</span> (tsync.ts1 != <a class="code" href="structGCS__MAVLINK.html#a40b0b7a81909c4ae2e14216de7c68abb">_timesync_request</a>.sent_ts1) {</div><div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;            <span class="comment">// we didn&#39;t actually send the request.... or it&#39;s a</span></div><div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;            <span class="comment">// response to an ancient request...</span></div><div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;        }</div><div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;        <span class="keyword">const</span> uint64_t round_trip_time_us = (<a class="code" href="structGCS__MAVLINK.html#a08ff9403ca6fe218d0bd30d106d1aa73">timesync_receive_timestamp_ns</a>() - <a class="code" href="structGCS__MAVLINK.html#a40b0b7a81909c4ae2e14216de7c68abb">_timesync_request</a>.sent_ts1)*0.001<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>;</div><div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;<span class="preprocessor">#if 0</span></div><div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;        <a class="code" href="GCS__Common_8cpp.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a>().<a class="code" href="classGCS.html#a9866f3484283db744409e40719cef765">send_text</a>(MAV_SEVERITY_INFO,</div><div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;                        <span class="stringliteral">&quot;timesync response sysid=%u (latency=%fms)&quot;</span>,</div><div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;                        msg-&gt;sysid,</div><div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;                        round_trip_time_us*0.001f);</div><div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;        <a class="code" href="classAP__Logger.html">AP_Logger</a> *<a class="code" href="AHRS__Test_8cpp.html#a9fede12aaeb5750bcb131cae0430647c">logger</a> = <a class="code" href="classAP__Logger.html#a7dfeda4dc3df2edc8531110c9d7252dc">AP_Logger::get_singleton</a>();</div><div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="AHRS__Test_8cpp.html#a9fede12aaeb5750bcb131cae0430647c">logger</a> != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;            <a class="code" href="namespaceAP.html#aa35bfac1ea2da16f110e8e72db7b3b20">AP::logger</a>().<a class="code" href="classAP__Logger.html#a320182e24dfaf50d436cf065c97169bb">Write</a>(</div><div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;                <span class="stringliteral">&quot;TSYN&quot;</span>,</div><div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;                <span class="stringliteral">&quot;TimeUS,SysID,RTT&quot;</span>,</div><div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;                <span class="stringliteral">&quot;s-s&quot;</span>,</div><div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;                <span class="stringliteral">&quot;F-F&quot;</span>,</div><div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;                <span class="stringliteral">&quot;QBQ&quot;</span>,</div><div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;                <a class="code" href="namespaceAP__HAL.html#a7aa0ce7625c9680e30ff4a99940907a5">AP_HAL::micros64</a>(),</div><div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;                msg-&gt;sysid,</div><div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;                round_trip_time_us</div><div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;                );</div><div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;        }</div><div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;    }</div><div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;</div><div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="GCS_8h.html#a6bcce1fe6fd8b6277f4f2dd0e738aec1">HAVE_PAYLOAD_SPACE</a>(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>, TIMESYNC)) {</div><div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;        <span class="comment">// drop this timesync request entirely</span></div><div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;    }</div><div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;</div><div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;    <span class="comment">// create new timesync struct with tc1 field as system time in</span></div><div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;    <span class="comment">// nanoseconds.  The client timestamp is as close as possible to</span></div><div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;    <span class="comment">// the time we received the TIMESYNC message.</span></div><div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;    mavlink_timesync_t rsync;</div><div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;    rsync.tc1 = <a class="code" href="structGCS__MAVLINK.html#a08ff9403ca6fe218d0bd30d106d1aa73">timesync_receive_timestamp_ns</a>();</div><div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;    rsync.ts1 = tsync.ts1;</div><div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;</div><div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;    <span class="comment">// respond with a timesync message</span></div><div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;    mavlink_msg_timesync_send(</div><div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;        rsync.tc1,</div><div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;        rsync.ts1</div><div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;        );</div><div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;}</div><div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;</div><div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;<span class="comment"> * broadcast a timesync message.  We may get multiple responses to this request.</span></div><div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02973"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a9706d56a7f8516b03b88ba7f671682cc"> 2973</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a9706d56a7f8516b03b88ba7f671682cc">GCS_MAVLINK::send_timesync</a>()</div><div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;{</div><div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;    <a class="code" href="structGCS__MAVLINK.html#a40b0b7a81909c4ae2e14216de7c68abb">_timesync_request</a>.sent_ts1 = <a class="code" href="structGCS__MAVLINK.html#a4aa7860d644a9d699bc80cb6c9bd76e4">timesync_timestamp_ns</a>();</div><div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;    mavlink_msg_timesync_send(</div><div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;        0,</div><div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a40b0b7a81909c4ae2e14216de7c68abb">_timesync_request</a>.sent_ts1</div><div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;        );</div><div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;}</div><div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;</div><div class="line"><a name="l02983"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a3e1b87c59be0f67950cce0314ffa4c30"> 2983</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a3e1b87c59be0f67950cce0314ffa4c30">GCS_MAVLINK::handle_statustext</a>(mavlink_message_t *msg)</div><div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;{</div><div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;    <a class="code" href="classAP__Logger.html">AP_Logger</a> *<a class="code" href="AHRS__Test_8cpp.html#a9fede12aaeb5750bcb131cae0430647c">logger</a> = <a class="code" href="classAP__Logger.html#a7dfeda4dc3df2edc8531110c9d7252dc">AP_Logger::get_singleton</a>();</div><div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AHRS__Test_8cpp.html#a9fede12aaeb5750bcb131cae0430647c">logger</a> == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;    }</div><div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;</div><div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;    mavlink_statustext_t packet;</div><div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;    mavlink_msg_statustext_decode(msg, &amp;packet);</div><div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;    <span class="keyword">const</span> uint8_t max_prefix_len = 20;</div><div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;    <span class="keyword">const</span> uint8_t text_len = MAVLINK_MSG_STATUSTEXT_FIELD_TEXT_LEN+1+max_prefix_len;</div><div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;    <span class="keywordtype">char</span> text[text_len] = { <span class="charliteral">&#39;G&#39;</span>,<span class="charliteral">&#39;C&#39;</span>,<span class="charliteral">&#39;S&#39;</span>,<span class="charliteral">&#39;:&#39;</span>};</div><div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;    uint8_t offset = strlen(text);</div><div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;</div><div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;    <span class="keywordflow">if</span> (msg-&gt;sysid != <a class="code" href="structGCS__MAVLINK.html#a5ad53d67eacf2e9ed33533b7874f34b7">sysid_my_gcs</a>()) {</div><div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;        offset = <a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#a9337a60383f4264fa96a20dbe43a4e2e">util</a>-&gt;<a class="code" href="classAP__HAL_1_1Util.html#adead79890b223f40eaf092fda231c2f2">snprintf</a>(text,</div><div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;                                    max_prefix_len,</div><div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;                                    <span class="stringliteral">&quot;SRC=%u/%u:&quot;</span>,</div><div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;                                    msg-&gt;sysid,</div><div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;                                    msg-&gt;compid);</div><div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;    }</div><div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;</div><div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;    memcpy(&amp;text[offset], packet.text, MAVLINK_MSG_STATUSTEXT_FIELD_TEXT_LEN);</div><div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;</div><div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;    <a class="code" href="AHRS__Test_8cpp.html#a9fede12aaeb5750bcb131cae0430647c">logger</a>-&gt;<a class="code" href="classAP__Logger.html#ab72f6a6fdb1a23d793e37725f68b98c2">Write_Message</a>(text);</div><div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;}</div><div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;</div><div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;</div><div class="line"><a name="l03011"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a4923a073dc82971c7b4d4116170a9726"> 3011</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a4923a073dc82971c7b4d4116170a9726">GCS_MAVLINK::handle_system_time_message</a>(<span class="keyword">const</span> mavlink_message_t *msg)</div><div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;{</div><div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;    mavlink_system_time_t packet;</div><div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;    mavlink_msg_system_time_decode(msg, &amp;packet);</div><div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;</div><div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;    <a class="code" href="namespaceAP.html#ac357c38b6638140c5510e6ba566b998b">AP::rtc</a>().<a class="code" href="classAP__RTC.html#abb961ded9907a2dbaa1b20de2b3b5ce0">set_utc_usec</a>(packet.time_unix_usec, <a class="code" href="classAP__RTC.html#af5ed0a2bd918379395e227179c7d6af3af24f5220e80acdcbe479c663b4d7c0cf">AP_RTC::SOURCE_MAVLINK_SYSTEM_TIME</a>);</div><div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;}</div><div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;</div><div class="line"><a name="l03019"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a735b4b8b692fa6985a7f7b99c6b4d58c"> 3019</a></span>&#160;MAV_RESULT <a class="code" href="structGCS__MAVLINK.html#a735b4b8b692fa6985a7f7b99c6b4d58c">GCS_MAVLINK::handle_command_camera</a>(<span class="keyword">const</span> mavlink_command_long_t &amp;packet)</div><div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;{</div><div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;    <a class="code" href="classAP__Camera.html">AP_Camera</a> *<a class="code" href="namespaceAP.html#a0ecc5d8af819e985ee88fea6c8b59b12">camera</a> = <a class="code" href="namespaceAP.html#a0ecc5d8af819e985ee88fea6c8b59b12">AP::camera</a>();</div><div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespaceAP.html#a0ecc5d8af819e985ee88fea6c8b59b12">camera</a> == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;        <span class="keywordflow">return</span> MAV_RESULT_UNSUPPORTED;</div><div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;    }</div><div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;</div><div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;    MAV_RESULT <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = MAV_RESULT_FAILED;</div><div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;    <span class="keywordflow">switch</span> (packet.command) {</div><div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_DO_DIGICAM_CONFIGURE:</div><div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;        <a class="code" href="namespaceAP.html#a0ecc5d8af819e985ee88fea6c8b59b12">camera</a>-&gt;<a class="code" href="classAP__Camera.html#a2ceac45cdd6c13d66052c8168fff689c">configure</a>(packet.param1,</div><div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;                          packet.param2,</div><div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;                          packet.param3,</div><div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;                          packet.param4,</div><div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;                          packet.param5,</div><div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;                          packet.param6,</div><div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;                          packet.param7);</div><div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;        <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = MAV_RESULT_ACCEPTED;</div><div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_DO_DIGICAM_CONTROL:</div><div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;        <a class="code" href="namespaceAP.html#a0ecc5d8af819e985ee88fea6c8b59b12">camera</a>-&gt;<a class="code" href="classAP__Camera.html#a7c7aa23d1a71db5345bb11899bbb8f31">control</a>(packet.param1,</div><div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;                        packet.param2,</div><div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;                        packet.param3,</div><div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;                        packet.param4,</div><div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;                        packet.param5,</div><div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;                        packet.param6);</div><div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;        <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = MAV_RESULT_ACCEPTED;</div><div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_DO_SET_CAM_TRIGG_DIST:</div><div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;        <a class="code" href="namespaceAP.html#a0ecc5d8af819e985ee88fea6c8b59b12">camera</a>-&gt;<a class="code" href="classAP__Camera.html#a4a39e7eb5e1df8b95ef260b0638c6fc7">set_trigger_distance</a>(packet.param1);</div><div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;        <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = MAV_RESULT_ACCEPTED;</div><div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;        <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = MAV_RESULT_UNSUPPORTED;</div><div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;    }</div><div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a>;</div><div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;}</div><div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;</div><div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;</div><div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;<span class="comment">// sets ekf_origin if it has not been set.</span></div><div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;<span class="comment">//  should only be used when there is no GPS to provide an absolute position</span></div><div class="line"><a name="l03061"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#af12f472c624f3c0735b082c982e7ec42"> 3061</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#af12f472c624f3c0735b082c982e7ec42">GCS_MAVLINK::set_ekf_origin</a>(<span class="keyword">const</span> <a class="code" href="classLocation.html">Location</a>&amp; loc)</div><div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;{</div><div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;    <span class="comment">// check location is valid</span></div><div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;    <span class="keywordflow">if</span> (!loc.<a class="code" href="classLocation.html#a25f7297551af447cf46aef3ae92c2632">check_latlng</a>()) {</div><div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;    }</div><div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;</div><div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;    <a class="code" href="classAP__AHRS.html">AP_AHRS</a> &amp;<a class="code" href="AHRS__Test_8cpp.html#a7da610c2722190575e0ded7e4204d743">ahrs</a> = <a class="code" href="namespaceAP.html#a99432cfdb696952c9b7146f155a815aa">AP::ahrs</a>();</div><div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;</div><div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;    <span class="comment">// check if EKF origin has already been set</span></div><div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;    <a class="code" href="classLocation.html">Location</a> <a class="code" href="LogStructure_8h.html#ab36c838093e3699b68977ecfff272bc8a5f73dc8b4696c3114bbc7015b24103fd">ekf_origin</a>;</div><div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AHRS__Test_8cpp.html#a7da610c2722190575e0ded7e4204d743">ahrs</a>.<a class="code" href="classAP__AHRS__NavEKF.html#ae1df19ca0e69b1b93219865c9136ea2a">get_origin</a>(<a class="code" href="LogStructure_8h.html#ab36c838093e3699b68977ecfff272bc8a5f73dc8b4696c3114bbc7015b24103fd">ekf_origin</a>)) {</div><div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;    }</div><div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;</div><div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="AHRS__Test_8cpp.html#a7da610c2722190575e0ded7e4204d743">ahrs</a>.<a class="code" href="classAP__AHRS__NavEKF.html#ad4132c9b9b70c061179a31f24a388ecc">set_origin</a>(loc)) {</div><div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;    }</div><div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;</div><div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;    <a class="code" href="AHRS__Test_8cpp.html#a7da610c2722190575e0ded7e4204d743">ahrs</a>.<a class="code" href="classAP__AHRS.html#ac9514f5193b6a15b16d995fd8ee0e4c4">Log_Write_Home_And_Origin</a>();</div><div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;</div><div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;    <span class="comment">// send ekf origin to GCS</span></div><div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="structGCS__MAVLINK.html#a30034cdbd89bcfb86392411f9b5935db">try_send_message</a>(<a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991af5b97ab8c9c725ebc1a437d5145a96d9">MSG_ORIGIN</a>)) {</div><div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;        <span class="comment">// try again later</span></div><div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a4902306dab46ff02b2296f99eb1f1c9c">send_message</a>(<a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991af5b97ab8c9c725ebc1a437d5145a96d9">MSG_ORIGIN</a>);</div><div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;    }</div><div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;}</div><div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;</div><div class="line"><a name="l03089"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#ad02c83895334e008e3c2f454a616893e"> 3089</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#ad02c83895334e008e3c2f454a616893e">GCS_MAVLINK::handle_set_gps_global_origin</a>(<span class="keyword">const</span> mavlink_message_t *msg)</div><div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;{</div><div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;    mavlink_set_gps_global_origin_t packet;</div><div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;    mavlink_msg_set_gps_global_origin_decode(msg, &amp;packet);</div><div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;</div><div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;    <span class="comment">// sanity check location</span></div><div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="location_8cpp.html#a8e3c1a8152caf33ff0ec0d96e4c79a96">check_latlng</a>(packet.latitude, packet.longitude)) {</div><div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;        <span class="comment">// silently drop the request</span></div><div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;    }</div><div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;</div><div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;    <a class="code" href="classLocation.html">Location</a> <a class="code" href="LogStructure_8h.html#ab36c838093e3699b68977ecfff272bc8a5f73dc8b4696c3114bbc7015b24103fd">ekf_origin</a> {};</div><div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;    <a class="code" href="LogStructure_8h.html#ab36c838093e3699b68977ecfff272bc8a5f73dc8b4696c3114bbc7015b24103fd">ekf_origin</a>.lat = packet.latitude;</div><div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;    <a class="code" href="LogStructure_8h.html#ab36c838093e3699b68977ecfff272bc8a5f73dc8b4696c3114bbc7015b24103fd">ekf_origin</a>.lng = packet.longitude;</div><div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;    <a class="code" href="LogStructure_8h.html#ab36c838093e3699b68977ecfff272bc8a5f73dc8b4696c3114bbc7015b24103fd">ekf_origin</a>.alt = packet.altitude / 10;</div><div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;    <a class="code" href="structGCS__MAVLINK.html#af12f472c624f3c0735b082c982e7ec42">set_ekf_origin</a>(<a class="code" href="LogStructure_8h.html#ab36c838093e3699b68977ecfff272bc8a5f73dc8b4696c3114bbc7015b24103fd">ekf_origin</a>);</div><div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;}</div><div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;</div><div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;<span class="comment">  handle a DATA96 message</span></div><div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03110"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#ae9efd2f3c6bcfaa8055c75b30428d132"> 3110</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#ae9efd2f3c6bcfaa8055c75b30428d132">GCS_MAVLINK::handle_data_packet</a>(mavlink_message_t *msg)</div><div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;{</div><div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;<span class="preprocessor">#if HAL_RCINPUT_WITH_AP_RADIO</span></div><div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;    mavlink_data96_t m;</div><div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;    mavlink_msg_data96_decode(msg, &amp;m);</div><div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;    <span class="keywordflow">switch</span> (m.type) {</div><div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;    <span class="keywordflow">case</span> 42:</div><div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;    <span class="keywordflow">case</span> 43: {</div><div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;        <span class="comment">// pass to AP_Radio (for firmware upload and playing test tunes)</span></div><div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;        <a class="code" href="classAP__Radio.html">AP_Radio</a> *radio = <a class="code" href="classAP__Radio.html#a21f45a471aa1f737cb58ee0b6a39447f">AP_Radio::get_singleton</a>();</div><div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;        <span class="keywordflow">if</span> (radio != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;            radio-&gt;<a class="code" href="classAP__Radio.html#ab54ad395cb356e5ceed2d75d9b56677d">handle_data_packet</a>(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>, m);</div><div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;        }</div><div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;    }</div><div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;        <span class="comment">// unknown</span></div><div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;    }</div><div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;}</div><div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;</div><div class="line"><a name="l03132"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a208713246c44b4618dfe4e9bdd5b80ce"> 3132</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a208713246c44b4618dfe4e9bdd5b80ce">GCS_MAVLINK::handle_vision_position_delta</a>(mavlink_message_t *msg)</div><div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;{</div><div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;    <a class="code" href="classAP__VisualOdom.html">AP_VisualOdom</a> *visual_odom = <a class="code" href="namespaceAP.html#a838cb6b095e282a91f90f8e39c9ef8e8">AP::visualodom</a>();</div><div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;    <span class="keywordflow">if</span> (visual_odom == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;    }</div><div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;    visual_odom-&gt;<a class="code" href="classAP__VisualOdom.html#ab2ff3d0aeff412358c99fb0281fbad5f">handle_msg</a>(msg);</div><div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;}</div><div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;</div><div class="line"><a name="l03141"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a3f74dcfb77af6c36c0a56e87959fded3"> 3141</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a3f74dcfb77af6c36c0a56e87959fded3">GCS_MAVLINK::handle_vision_position_estimate</a>(mavlink_message_t *msg)</div><div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;{</div><div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;    mavlink_vision_position_estimate_t m;</div><div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;    mavlink_msg_vision_position_estimate_decode(msg, &amp;m);</div><div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;</div><div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;    <a class="code" href="structGCS__MAVLINK.html#a6f49b41ed3f9b5e11df9a4a1221e2f84">handle_common_vision_position_estimate_data</a>(m.usec, m.x, m.y, m.z, m.roll, m.pitch, m.yaw,</div><div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;                                                <a class="code" href="GCS_8h.html#a9f9bd054f58892da86c64ad06c6b2179">PAYLOAD_SIZE</a>(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>, VISION_POSITION_ESTIMATE));</div><div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;}</div><div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;</div><div class="line"><a name="l03150"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#aec273d3bdc27755bfb8f2680dd2e5071"> 3150</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#aec273d3bdc27755bfb8f2680dd2e5071">GCS_MAVLINK::handle_global_vision_position_estimate</a>(mavlink_message_t *msg)</div><div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;{</div><div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;    mavlink_global_vision_position_estimate_t m;</div><div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;    mavlink_msg_global_vision_position_estimate_decode(msg, &amp;m);</div><div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;</div><div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;    <a class="code" href="structGCS__MAVLINK.html#a6f49b41ed3f9b5e11df9a4a1221e2f84">handle_common_vision_position_estimate_data</a>(m.usec, m.x, m.y, m.z, m.roll, m.pitch, m.yaw,</div><div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;                                                <a class="code" href="GCS_8h.html#a9f9bd054f58892da86c64ad06c6b2179">PAYLOAD_SIZE</a>(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>, GLOBAL_VISION_POSITION_ESTIMATE));</div><div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;}</div><div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;</div><div class="line"><a name="l03159"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a5a232dea09ba3ec0c8459e0a7b72200b"> 3159</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a5a232dea09ba3ec0c8459e0a7b72200b">GCS_MAVLINK::handle_vicon_position_estimate</a>(mavlink_message_t *msg)</div><div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;{</div><div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;    mavlink_vicon_position_estimate_t m;</div><div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;    mavlink_msg_vicon_position_estimate_decode(msg, &amp;m);</div><div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;</div><div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;    <a class="code" href="structGCS__MAVLINK.html#a6f49b41ed3f9b5e11df9a4a1221e2f84">handle_common_vision_position_estimate_data</a>(m.usec, m.x, m.y, m.z, m.roll, m.pitch, m.yaw,</div><div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;                                                <a class="code" href="GCS_8h.html#a9f9bd054f58892da86c64ad06c6b2179">PAYLOAD_SIZE</a>(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>, VICON_POSITION_ESTIMATE));</div><div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;}</div><div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;</div><div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;<span class="comment">// there are several messages which all have identical fields in them.</span></div><div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;<span class="comment">// This function provides common handling for the data contained in</span></div><div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;<span class="comment">// these packets</span></div><div class="line"><a name="l03171"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a6f49b41ed3f9b5e11df9a4a1221e2f84"> 3171</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a6f49b41ed3f9b5e11df9a4a1221e2f84">GCS_MAVLINK::handle_common_vision_position_estimate_data</a>(<span class="keyword">const</span> uint64_t usec,</div><div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;                                                              <span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code" href="DerivativeFilter_8cpp.html#a91f27329cbc70a03207bcee33e2b42fd">x</a>,</div><div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;                                                              <span class="keyword">const</span> <span class="keywordtype">float</span> y,</div><div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;                                                              <span class="keyword">const</span> <span class="keywordtype">float</span> z,</div><div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;                                                              <span class="keyword">const</span> <span class="keywordtype">float</span> roll,</div><div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;                                                              <span class="keyword">const</span> <span class="keywordtype">float</span> pitch,</div><div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;                                                              <span class="keyword">const</span> <span class="keywordtype">float</span> yaw,</div><div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;                                                              <span class="keyword">const</span> uint16_t payload_size)</div><div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;{</div><div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;    <span class="comment">// correct offboard timestamp to be in local ms since boot</span></div><div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;    uint32_t timestamp_ms = <a class="code" href="structGCS__MAVLINK.html#ae8b2f1fa9c38f804d3782859ebf590bf">correct_offboard_timestamp_usec_to_ms</a>(usec, payload_size);</div><div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;    </div><div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;    <span class="comment">// sensor assumed to be at 0,0,0 body-frame; need parameters for this?</span></div><div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;    <span class="comment">// or a new message </span></div><div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;    <span class="keyword">const</span> <a class="code" href="classVector3.html">Vector3f</a> sensor_offset = {};</div><div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;    <span class="keyword">const</span> <a class="code" href="classVector3.html">Vector3f</a> pos = {</div><div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;        <a class="code" href="DerivativeFilter_8cpp.html#a91f27329cbc70a03207bcee33e2b42fd">x</a>,</div><div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;        y,</div><div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;        z</div><div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;    };</div><div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;    <a class="code" href="classQuaternion.html">Quaternion</a> attitude;</div><div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;    attitude.<a class="code" href="classQuaternion.html#aff2d2d3d1c5937523df8357deae4eeab">from_euler</a>(roll, pitch, yaw); <span class="comment">// from_vector312?</span></div><div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> posErr = 0; <span class="comment">// parameter required?</span></div><div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> angErr = 0; <span class="comment">// parameter required?</span></div><div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;    <span class="keyword">const</span> uint32_t reset_timestamp_ms = 0; <span class="comment">// no data available</span></div><div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;</div><div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;    <a class="code" href="namespaceAP.html#a99432cfdb696952c9b7146f155a815aa">AP::ahrs</a>().<a class="code" href="classAP__AHRS.html#a862f8f1b3a5e51d23de7c6ffa04fe342">writeExtNavData</a>(sensor_offset,</div><div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;                               pos,</div><div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;                               attitude,</div><div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;                               posErr,</div><div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;                               angErr,</div><div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;                               timestamp_ms,</div><div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;                               reset_timestamp_ms);</div><div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;</div><div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;    <a class="code" href="structGCS__MAVLINK.html#a55d154ed0cc60fbe500079649e71507c">log_vision_position_estimate_data</a>(usec, <a class="code" href="DerivativeFilter_8cpp.html#a91f27329cbc70a03207bcee33e2b42fd">x</a>, y, z, roll, pitch, yaw);</div><div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;}</div><div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;</div><div class="line"><a name="l03208"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a55d154ed0cc60fbe500079649e71507c"> 3208</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a55d154ed0cc60fbe500079649e71507c">GCS_MAVLINK::log_vision_position_estimate_data</a>(<span class="keyword">const</span> uint64_t usec,</div><div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;                                                    <span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code" href="DerivativeFilter_8cpp.html#a91f27329cbc70a03207bcee33e2b42fd">x</a>,</div><div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;                                                    <span class="keyword">const</span> <span class="keywordtype">float</span> y,</div><div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;                                                    <span class="keyword">const</span> <span class="keywordtype">float</span> z,</div><div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;                                                    <span class="keyword">const</span> <span class="keywordtype">float</span> roll,</div><div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;                                                    <span class="keyword">const</span> <span class="keywordtype">float</span> pitch,</div><div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;                                                    <span class="keyword">const</span> <span class="keywordtype">float</span> yaw)</div><div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;{</div><div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;    <a class="code" href="namespaceAP.html#aa35bfac1ea2da16f110e8e72db7b3b20">AP::logger</a>().<a class="code" href="classAP__Logger.html#a320182e24dfaf50d436cf065c97169bb">Write</a>(<span class="stringliteral">&quot;VISP&quot;</span>, <span class="stringliteral">&quot;TimeUS,RemTimeUS,PX,PY,PZ,Roll,Pitch,Yaw&quot;</span>,</div><div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;                                           <span class="stringliteral">&quot;ssmmmddh&quot;</span>, <span class="stringliteral">&quot;FF000000&quot;</span>, <span class="stringliteral">&quot;QQffffff&quot;</span>,</div><div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;                                           (uint64_t)<a class="code" href="namespaceAP__HAL.html#a7aa0ce7625c9680e30ff4a99940907a5">AP_HAL::micros64</a>(),</div><div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;                                           (uint64_t)usec,</div><div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;                                           (<span class="keywordtype">double</span>)<a class="code" href="DerivativeFilter_8cpp.html#a91f27329cbc70a03207bcee33e2b42fd">x</a>,</div><div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;                                           (<span class="keywordtype">double</span>)y,</div><div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;                                           (<span class="keywordtype">double</span>)z,</div><div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;                                           (<span class="keywordtype">double</span>)(roll * <a class="code" href="definitions_8h.html#a89e47af0449640d4f15191aba5ca24c6">RAD_TO_DEG</a>),</div><div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;                                           (<span class="keywordtype">double</span>)(pitch * <a class="code" href="definitions_8h.html#a89e47af0449640d4f15191aba5ca24c6">RAD_TO_DEG</a>),</div><div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;                                           (<span class="keywordtype">double</span>)(yaw * <a class="code" href="definitions_8h.html#a89e47af0449640d4f15191aba5ca24c6">RAD_TO_DEG</a>));</div><div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;}</div><div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;</div><div class="line"><a name="l03228"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a700265c4d6a54364427b1ac0153e20e3"> 3228</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a700265c4d6a54364427b1ac0153e20e3">GCS_MAVLINK::handle_att_pos_mocap</a>(mavlink_message_t *msg)</div><div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;{</div><div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;    mavlink_att_pos_mocap_t m;</div><div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;    mavlink_msg_att_pos_mocap_decode(msg, &amp;m);</div><div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;</div><div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;    <span class="comment">// sensor assumed to be at 0,0,0 body-frame; need parameters for this?</span></div><div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;    <span class="keyword">const</span> <a class="code" href="classVector3.html">Vector3f</a> sensor_offset = {};</div><div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;    <span class="keyword">const</span> <a class="code" href="classVector3.html">Vector3f</a> pos = {</div><div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;        m.<a class="code" href="classVector3.html#a1a0f7e168c71ca798099f0ba8a444244">x</a>,</div><div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;        m.y,</div><div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;        m.z</div><div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;    };</div><div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;    <a class="code" href="classQuaternion.html">Quaternion</a> attitude = <a class="code" href="classQuaternion.html">Quaternion</a>(m.q);</div><div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> posErr = 0; <span class="comment">// parameter required?</span></div><div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> angErr = 0; <span class="comment">// parameter required?</span></div><div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;    <span class="comment">// correct offboard timestamp to be in local ms since boot</span></div><div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;    uint32_t timestamp_ms = <a class="code" href="structGCS__MAVLINK.html#ae8b2f1fa9c38f804d3782859ebf590bf">correct_offboard_timestamp_usec_to_ms</a>(m.time_usec, <a class="code" href="GCS_8h.html#a9f9bd054f58892da86c64ad06c6b2179">PAYLOAD_SIZE</a>(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>, ATT_POS_MOCAP));</div><div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;    <span class="keyword">const</span> uint32_t reset_timestamp_ms = 0; <span class="comment">// no data available</span></div><div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;</div><div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;    <a class="code" href="namespaceAP.html#a99432cfdb696952c9b7146f155a815aa">AP::ahrs</a>().<a class="code" href="classAP__AHRS.html#a862f8f1b3a5e51d23de7c6ffa04fe342">writeExtNavData</a>(sensor_offset,</div><div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;                               pos,</div><div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;                               attitude,</div><div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;                               posErr,</div><div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;                               angErr,</div><div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;                               timestamp_ms,</div><div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;                               reset_timestamp_ms);</div><div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;   </div><div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;    <span class="comment">// calculate euler orientation for logging</span></div><div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;    <span class="keywordtype">float</span> roll;</div><div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;    <span class="keywordtype">float</span> pitch;</div><div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;    <span class="keywordtype">float</span> yaw;</div><div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;    attitude.<a class="code" href="classQuaternion.html#a16eda13811dc1ec519adf9b5c1b1eb7c">to_euler</a>(roll, pitch, yaw);</div><div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;</div><div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;    <a class="code" href="structGCS__MAVLINK.html#a55d154ed0cc60fbe500079649e71507c">log_vision_position_estimate_data</a>(m.time_usec, m.x, m.y, m.z, roll, pitch, yaw);</div><div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;}</div><div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;</div><div class="line"><a name="l03264"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#aa266a88726e518b6c613f0f02252f41c"> 3264</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#aa266a88726e518b6c613f0f02252f41c">GCS_MAVLINK::handle_command_ack</a>(<span class="keyword">const</span> mavlink_message_t* msg)</div><div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;{</div><div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;    <a class="code" href="classAP__AccelCal.html">AP_AccelCal</a> *accelcal = <a class="code" href="namespaceAP.html#ac571aa5a2ef71b7f4b4b2bfa09143fb9">AP::ins</a>().<a class="code" href="classAP__InertialSensor.html#a2dc43f0372ce70538ecb27f97c0c820c">get_acal</a>();</div><div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;    <span class="keywordflow">if</span> (accelcal != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;        accelcal-&gt;<a class="code" href="classAP__AccelCal.html#a84bc8ae16571fc72c96dc89db26f94a5">handleMessage</a>(msg);</div><div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;    }</div><div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;}</div><div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;</div><div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;<span class="comment">// allow override of RC channel values for HIL or for complete GCS</span></div><div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;<span class="comment">// control of switch position and RC PWM values.</span></div><div class="line"><a name="l03274"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a8f3d2fd6bb03efc6d955a7304d8d541a"> 3274</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a8f3d2fd6bb03efc6d955a7304d8d541a">GCS_MAVLINK::handle_rc_channels_override</a>(<span class="keyword">const</span> mavlink_message_t *msg)</div><div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;{</div><div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;    <span class="keywordflow">if</span>(msg-&gt;sysid != <a class="code" href="structGCS__MAVLINK.html#a5ad53d67eacf2e9ed33533b7874f34b7">sysid_my_gcs</a>()) {</div><div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;        <span class="keywordflow">return</span>; <span class="comment">// Only accept control from our gcs</span></div><div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;    }</div><div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;</div><div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;    <span class="keyword">const</span> uint32_t tnow = <a class="code" href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a>();</div><div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;</div><div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;    mavlink_rc_channels_override_t packet;</div><div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;    mavlink_msg_rc_channels_override_decode(msg, &amp;packet);</div><div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;</div><div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;    <span class="keyword">const</span> uint16_t override_data[] = {</div><div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;        packet.chan1_raw,</div><div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;        packet.chan2_raw,</div><div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;        packet.chan3_raw,</div><div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;        packet.chan4_raw,</div><div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;        packet.chan5_raw,</div><div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;        packet.chan6_raw,</div><div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;        packet.chan7_raw,</div><div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;        packet.chan8_raw,</div><div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;        packet.chan9_raw,</div><div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;        packet.chan10_raw,</div><div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;        packet.chan11_raw,</div><div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;        packet.chan12_raw,</div><div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;        packet.chan13_raw,</div><div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;        packet.chan14_raw,</div><div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;        packet.chan15_raw,</div><div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;        packet.chan16_raw</div><div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;    };</div><div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;</div><div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;    <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code" href="AP__Common_8h.html#a121caf32c5b5d704ef3453f0885a9ea5">ARRAY_SIZE</a>(override_data); i++) {</div><div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;        <span class="comment">// Per MAVLink spec a value of UINT16_MAX means to ignore this field.</span></div><div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;        <span class="keywordflow">if</span> (override_data[i] != UINT16_MAX) {</div><div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;            <a class="code" href="classRC__Channels.html#a8c9ced1f38cf3223738e2633ef92dafa">RC_Channels::set_override</a>(i, override_data[i], tnow);</div><div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;        }</div><div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;    }</div><div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;}</div><div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;</div><div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;<span class="comment">// allow override of RC channel values for HIL or for complete GCS</span></div><div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;<span class="comment">// control of switch position and RC PWM values.</span></div><div class="line"><a name="l03314"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a536bd36365cc7457917d633e697085e9"> 3314</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a536bd36365cc7457917d633e697085e9">GCS_MAVLINK::handle_optical_flow</a>(<span class="keyword">const</span> mavlink_message_t *msg)</div><div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;{</div><div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;    <a class="code" href="classOpticalFlow.html">OpticalFlow</a> *<a class="code" href="AP__OpticalFlow__test_8cpp.html#a7dca3af7ddfcb79556fe4ed5660e605c">optflow</a> = <a class="code" href="namespaceAP.html#a4f2e5c5dc038d7aceb39b73dbf92c30e">AP::opticalflow</a>();</div><div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AP__OpticalFlow__test_8cpp.html#a7dca3af7ddfcb79556fe4ed5660e605c">optflow</a> == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;    }</div><div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;    <a class="code" href="AP__OpticalFlow__test_8cpp.html#a7dca3af7ddfcb79556fe4ed5660e605c">optflow</a>-&gt;<a class="code" href="classOpticalFlow.html#a4b88fcf8bf529d5250faf5570df1d507">handle_msg</a>(msg);</div><div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;}</div><div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;</div><div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;<span class="comment">  handle messages which don&#39;t require vehicle specific data</span></div><div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03326"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a13da94a2548ade6552a5250eb3251e89"> 3326</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a13da94a2548ade6552a5250eb3251e89">GCS_MAVLINK::handle_common_message</a>(mavlink_message_t *msg)</div><div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;{</div><div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;    <span class="keywordflow">switch</span> (msg-&gt;msgid) {</div><div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_COMMAND_ACK: {</div><div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#aa266a88726e518b6c613f0f02252f41c">handle_command_ack</a>(msg);</div><div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;    }</div><div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;</div><div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_SETUP_SIGNING:</div><div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a641f77057c3054842e46a835425e07e4">handle_setup_signing</a>(msg);</div><div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;</div><div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_PARAM_REQUEST_LIST:</div><div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_PARAM_SET:</div><div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_PARAM_REQUEST_READ:</div><div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a5c5ff4ed407fd9d381c0a985e649db32">handle_common_param_message</a>(msg);</div><div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;</div><div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_SET_GPS_GLOBAL_ORIGIN:</div><div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#ad02c83895334e008e3c2f454a616893e">handle_set_gps_global_origin</a>(msg);</div><div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;</div><div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_DEVICE_OP_READ:</div><div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#ad7479108500f36baa60c58a4b5261f72">handle_device_op_read</a>(msg);</div><div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_DEVICE_OP_WRITE:</div><div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a27d9f692cade4d488cac2227d125563d">handle_device_op_write</a>(msg);</div><div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_TIMESYNC:</div><div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#ae00bb5fbb1a3e4843be647dc9b09f51f">handle_timesync</a>(msg);</div><div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_LOG_REQUEST_LIST:</div><div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_LOG_REQUEST_DATA:</div><div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_LOG_ERASE:</div><div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_LOG_REQUEST_END:</div><div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_REMOTE_LOG_BLOCK_STATUS:</div><div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;        <a class="code" href="namespaceAP.html#aa35bfac1ea2da16f110e8e72db7b3b20">AP::logger</a>().<a class="code" href="classAP__Logger.html#a887cc366f529b545442ee7f83547ac52">handle_mavlink_msg</a>(*<span class="keyword">this</span>, msg);</div><div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;</div><div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;</div><div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_DIGICAM_CONTROL:</div><div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;        {</div><div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;            <a class="code" href="classAP__Camera.html">AP_Camera</a> *<a class="code" href="namespaceAP.html#a0ecc5d8af819e985ee88fea6c8b59b12">camera</a> = <a class="code" href="namespaceAP.html#a0ecc5d8af819e985ee88fea6c8b59b12">AP::camera</a>();</div><div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="namespaceAP.html#a0ecc5d8af819e985ee88fea6c8b59b12">camera</a> == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;                <span class="keywordflow">return</span>;</div><div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;            }</div><div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;            <a class="code" href="namespaceAP.html#a0ecc5d8af819e985ee88fea6c8b59b12">camera</a>-&gt;<a class="code" href="classAP__Camera.html#a5a9157e5d811fa1b55bebe90fe731065">control_msg</a>(msg);</div><div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;        }</div><div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;</div><div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_SET_MODE:</div><div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#ac8b61d6ff34dbae1be71540cf87b15ee">handle_set_mode</a>(msg);</div><div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;</div><div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_AUTOPILOT_VERSION_REQUEST:</div><div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#ab8956ef32413ce91ff99cc4159b0d52f">handle_send_autopilot_version</a>(msg);</div><div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;</div><div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_MISSION_WRITE_PARTIAL_LIST:</div><div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_MISSION_REQUEST_LIST:</div><div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_MISSION_COUNT:</div><div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_MISSION_CLEAR_ALL:</div><div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_MISSION_ITEM:</div><div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_MISSION_ITEM_INT:</div><div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_MISSION_REQUEST_INT:</div><div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_MISSION_REQUEST:</div><div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_MISSION_ACK:</div><div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_MISSION_SET_CURRENT:</div><div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a00013e2a14c47d88af2638763d82e7d3">handle_common_mission_message</a>(msg);</div><div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;</div><div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_COMMAND_LONG:</div><div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#abc79cdd8393234b66f2e8217a527f8f9">handle_command_long</a>(msg);</div><div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;</div><div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_COMMAND_INT:</div><div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a080b5b10d6792fae80833aa9bbca2569">handle_command_int</a>(msg);</div><div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;</div><div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_FENCE_POINT:</div><div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_FENCE_FETCH_POINT:</div><div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#afe1ee2ae1b71e301868876d261b42a3c">handle_fence_message</a>(msg);</div><div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;</div><div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_GIMBAL_REPORT:</div><div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a37e07887edf8f4f5c8ee0cd38ddc9a11">handle_mount_message</a>(msg);</div><div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;</div><div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_PARAM_VALUE:</div><div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a61256f7905c3e8edd5adfd2b3e392025">handle_param_value</a>(msg);</div><div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;</div><div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_SERIAL_CONTROL:</div><div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a1a4eddd46f85698c5200084589fd302d">handle_serial_control</a>(msg);</div><div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;</div><div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_GPS_RTCM_DATA:</div><div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_GPS_INPUT:</div><div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_HIL_GPS:</div><div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_GPS_INJECT_DATA:</div><div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;        <a class="code" href="namespaceAP.html#ae6eeec356455220f913e47e323057cd5">AP::gps</a>().<a class="code" href="classAP__GPS.html#a3074764330bd4dfd9da851b59a6df2ed">handle_msg</a>(msg);</div><div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;</div><div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_STATUSTEXT:</div><div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a3e1b87c59be0f67950cce0314ffa4c30">handle_statustext</a>(msg);</div><div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;</div><div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_LED_CONTROL:</div><div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;        <span class="comment">// send message to Notify</span></div><div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;        <a class="code" href="classAP__Notify.html#ab3c6ab1cb46123285a0f3608b2e2ae4c">AP_Notify::handle_led_control</a>(msg);</div><div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;</div><div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_MOUNT_CONFIGURE: <span class="comment">// deprecated. Use MAV_CMD_DO_MOUNT_CONFIGURE</span></div><div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_MOUNT_CONTROL: <span class="comment">// deprecated. Use MAV_CMD_DO_MOUNT_CONTROL</span></div><div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a37e07887edf8f4f5c8ee0cd38ddc9a11">handle_mount_message</a>(msg);</div><div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;</div><div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_PLAY_TUNE:</div><div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;        <span class="comment">// send message to Notify</span></div><div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;        <a class="code" href="classAP__Notify.html#a8aecf8b30f7963e09c569d42f6fe89e2">AP_Notify::handle_play_tune</a>(msg);</div><div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;</div><div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_RALLY_POINT:</div><div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_RALLY_FETCH_POINT:</div><div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a0cddddd51bc5ea4c137c1927d2e34d97">handle_common_rally_message</a>(msg);</div><div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;</div><div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_REQUEST_DATA_STREAM:</div><div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#ab138669a99fc1a9d86d5aced80454dab">handle_request_data_stream</a>(msg);</div><div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;</div><div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_DATA96:</div><div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#ae9efd2f3c6bcfaa8055c75b30428d132">handle_data_packet</a>(msg);</div><div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;        <span class="keywordflow">break</span>;        </div><div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;</div><div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_VISION_POSITION_DELTA:</div><div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a208713246c44b4618dfe4e9bdd5b80ce">handle_vision_position_delta</a>(msg);</div><div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;</div><div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_VISION_POSITION_ESTIMATE:</div><div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a3f74dcfb77af6c36c0a56e87959fded3">handle_vision_position_estimate</a>(msg);</div><div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;</div><div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_GLOBAL_VISION_POSITION_ESTIMATE:</div><div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#aec273d3bdc27755bfb8f2680dd2e5071">handle_global_vision_position_estimate</a>(msg);</div><div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;</div><div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_VICON_POSITION_ESTIMATE:</div><div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a5a232dea09ba3ec0c8459e0a7b72200b">handle_vicon_position_estimate</a>(msg);</div><div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;</div><div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_ATT_POS_MOCAP:</div><div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a700265c4d6a54364427b1ac0153e20e3">handle_att_pos_mocap</a>(msg);</div><div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;</div><div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_SYSTEM_TIME:</div><div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a4923a073dc82971c7b4d4116170a9726">handle_system_time_message</a>(msg);</div><div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;</div><div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_RC_CHANNELS_OVERRIDE:</div><div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a8f3d2fd6bb03efc6d955a7304d8d541a">handle_rc_channels_override</a>(msg);</div><div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;</div><div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_OPTICAL_FLOW:</div><div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a536bd36365cc7457917d633e697085e9">handle_optical_flow</a>(msg);</div><div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;    }</div><div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;}</div><div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;</div><div class="line"><a name="l03495"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a00013e2a14c47d88af2638763d82e7d3"> 3495</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a00013e2a14c47d88af2638763d82e7d3">GCS_MAVLINK::handle_common_mission_message</a>(mavlink_message_t *msg)</div><div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;{</div><div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;    <a class="code" href="classAP__Mission.html">AP_Mission</a> *_mission = <a class="code" href="namespaceAP.html#a67bce6e94b1af5e88d027330df5d8eca">AP::mission</a>();</div><div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;    <span class="keywordflow">if</span> (_mission == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;    }</div><div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;    <span class="keywordflow">switch</span> (msg-&gt;msgid) {</div><div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_MISSION_WRITE_PARTIAL_LIST: <span class="comment">// MAV ID: 38</span></div><div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;    {</div><div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a9592cb2ff598cfd3b0d7352e3e3df841">handle_mission_write_partial_list</a>(msg);</div><div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;    }</div><div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;</div><div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;    <span class="comment">// GCS has sent us a mission item, store to EEPROM</span></div><div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_MISSION_ITEM:           <span class="comment">// MAV ID: 39</span></div><div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_MISSION_ITEM_INT:</div><div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a67d79fd73d6a53e265fa102d508eab98">handle_mission_item</a>(msg);</div><div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;</div><div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;    <span class="comment">// read an individual command from EEPROM and send it to the GCS</span></div><div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_MISSION_REQUEST_INT:</div><div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a2093a0591a3db60700f254ed78dce18d">handle_mission_request_int</a>(msg);</div><div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_MISSION_REQUEST:</div><div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#ac528f7e91bf82403fdf395a91435df2f">handle_mission_request</a>(msg);</div><div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;</div><div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_MISSION_SET_CURRENT:    <span class="comment">// MAV ID: 41</span></div><div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;    {</div><div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#ad4e76e7f27bc999e806416e24aa10f26">handle_mission_set_current</a>(*_mission, msg);</div><div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;    }</div><div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;</div><div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;    <span class="comment">// GCS request the full list of commands, we return just the number and leave the GCS to then request each command individually</span></div><div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_MISSION_REQUEST_LIST:       <span class="comment">// MAV ID: 43</span></div><div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;    {</div><div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a77d0ba68a753475e530318db583575a4">handle_mission_request_list</a>(msg);</div><div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;    }</div><div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;</div><div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;    <span class="comment">// GCS provides the full number of commands it wishes to upload</span></div><div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;    <span class="comment">//  individual commands will then be sent from the GCS using the MAVLINK_MSG_ID_MISSION_ITEM message</span></div><div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_MISSION_COUNT:          <span class="comment">// MAV ID: 44</span></div><div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;    {</div><div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#af48072aa21948d3d13cf660a744ce454">handle_mission_count</a>(msg);</div><div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;    }</div><div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;</div><div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_MISSION_CLEAR_ALL:      <span class="comment">// MAV ID: 45</span></div><div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;    {</div><div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a7868048c0aaca4e2374082d15fcc85a9">handle_mission_clear_all</a>(msg);</div><div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;    }</div><div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;</div><div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;    <span class="keywordflow">case</span> MAVLINK_MSG_ID_MISSION_ACK:</div><div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;        <span class="comment">/* not used */</span></div><div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;    }</div><div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;}</div><div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;</div><div class="line"><a name="l03555"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#ab8956ef32413ce91ff99cc4159b0d52f"> 3555</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#ab8956ef32413ce91ff99cc4159b0d52f">GCS_MAVLINK::handle_send_autopilot_version</a>(<span class="keyword">const</span> mavlink_message_t *msg)</div><div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;{</div><div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;    <a class="code" href="structGCS__MAVLINK.html#a8ed79496b0f3efa28e630bddc8f59e62">send_autopilot_version</a>();</div><div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;}</div><div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;</div><div class="line"><a name="l03560"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#adcf424c726b3b459b5c9f5346236224a"> 3560</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#adcf424c726b3b459b5c9f5346236224a">GCS_MAVLINK::send_banner</a>()</div><div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;{</div><div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;    <span class="comment">// mark the firmware version in the tlog</span></div><div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;    <span class="keyword">const</span> <a class="code" href="classAP__FWVersion.html">AP_FWVersion</a> &amp;fwver = <a class="code" href="namespaceAP.html#a47655f5b6fe937b02c57d7c314ca3587">AP::fwversion</a>();</div><div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;</div><div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;    <a class="code" href="structGCS__MAVLINK.html#a8712f50cee60529cc3c31aec2633391b">send_text</a>(MAV_SEVERITY_INFO, fwver.<a class="code" href="classAP__FWVersion.html#a1df17a9f600f6b1a7dd4dd012b226c9a">fw_string</a>);</div><div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;</div><div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;    <span class="keywordflow">if</span> (fwver.<a class="code" href="classAP__FWVersion.html#a066b24da78d27e68d310b1accd317e44">middleware_name</a> &amp;&amp; fwver.<a class="code" href="classAP__FWVersion.html#a749979024157e00f5f7db2195143b014">os_name</a>) {</div><div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a8712f50cee60529cc3c31aec2633391b">send_text</a>(MAV_SEVERITY_INFO, <span class="stringliteral">&quot;%s: %s %s: %s&quot;</span>,</div><div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;                  fwver.<a class="code" href="classAP__FWVersion.html#a066b24da78d27e68d310b1accd317e44">middleware_name</a>, fwver.<a class="code" href="classAP__FWVersion.html#a087a76e42563c0b848490e6119033d1c">middleware_hash_str</a>,</div><div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;                  fwver.<a class="code" href="classAP__FWVersion.html#a749979024157e00f5f7db2195143b014">os_name</a>, fwver.<a class="code" href="classAP__FWVersion.html#af21558b1bb1ccd7c242ecae3778a043e">os_hash_str</a>);</div><div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fwver.<a class="code" href="classAP__FWVersion.html#a749979024157e00f5f7db2195143b014">os_name</a>) {</div><div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a8712f50cee60529cc3c31aec2633391b">send_text</a>(MAV_SEVERITY_INFO, <span class="stringliteral">&quot;%s: %s&quot;</span>,</div><div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;                  fwver.<a class="code" href="classAP__FWVersion.html#a749979024157e00f5f7db2195143b014">os_name</a>, fwver.<a class="code" href="classAP__FWVersion.html#af21558b1bb1ccd7c242ecae3778a043e">os_hash_str</a>);</div><div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;    }</div><div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;</div><div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;    <span class="comment">// send system ID if we can</span></div><div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;    <span class="keywordtype">char</span> sysid[40];</div><div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#a9337a60383f4264fa96a20dbe43a4e2e">util</a>-&gt;<a class="code" href="classAP__HAL_1_1Util.html#a6772b40dba50acc0e81803c33f5b5860">get_system_id</a>(sysid)) {</div><div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a8712f50cee60529cc3c31aec2633391b">send_text</a>(MAV_SEVERITY_INFO, sysid);</div><div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;    }</div><div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;}</div><div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;</div><div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;</div><div class="line"><a name="l03584"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a8e9655385616fad0e7000838554e517a"> 3584</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a8e9655385616fad0e7000838554e517a">GCS_MAVLINK::send_simstate</a>()<span class="keyword"> const</span></div><div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;<span class="preprocessor">#if CONFIG_HAL_BOARD == HAL_BOARD_SITL</span></div><div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;    <a class="code" href="classSITL_1_1SITL.html">SITL::SITL</a> *<a class="code" href="namespaceAP.html#ab2991c8a02a28bf52b0aba35d9c3bc2f">sitl</a> = <a class="code" href="namespaceAP.html#ab2991c8a02a28bf52b0aba35d9c3bc2f">AP::sitl</a>();</div><div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespaceAP.html#ab2991c8a02a28bf52b0aba35d9c3bc2f">sitl</a> == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;    }</div><div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;    <a class="code" href="namespaceAP.html#ab2991c8a02a28bf52b0aba35d9c3bc2f">sitl</a>-&gt;<a class="code" href="classSITL_1_1SITL.html#af31d1e43d9db3382853bda2b6f1c9e08">simstate_send</a>(<a class="code" href="structGCS__MAVLINK.html#a38bdeec979d6dbc84c7ca09bafb5bc04">get_chan</a>());</div><div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;}</div><div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;</div><div class="line"><a name="l03595"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a083d1726ff9cb84cb42b65433fcdd216"> 3595</a></span>&#160;MAV_RESULT <a class="code" href="structGCS__MAVLINK.html#a083d1726ff9cb84cb42b65433fcdd216">GCS_MAVLINK::handle_command_flash_bootloader</a>(<span class="keyword">const</span> mavlink_command_long_t &amp;packet)</div><div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;{</div><div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;    <span class="keywordflow">if</span> (uint32_t(packet.param5) != 290876) {</div><div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;        <a class="code" href="GCS__Common_8cpp.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a>().<a class="code" href="classGCS.html#a9866f3484283db744409e40719cef765">send_text</a>(MAV_SEVERITY_INFO, <span class="stringliteral">&quot;Magic not set&quot;</span>);</div><div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;        <span class="keywordflow">return</span> MAV_RESULT_FAILED;</div><div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;    }</div><div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;</div><div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#a9337a60383f4264fa96a20dbe43a4e2e">util</a>-&gt;<a class="code" href="classAP__HAL_1_1Util.html#a04d41b2013106a8395744b3cf90568f0">flash_bootloader</a>()) {</div><div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;        <span class="keywordflow">return</span> MAV_RESULT_FAILED;</div><div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;    }</div><div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;</div><div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;    <span class="keywordflow">return</span> MAV_RESULT_ACCEPTED;</div><div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;}</div><div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;</div><div class="line"><a name="l03609"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a9b50b969ed3f331f2cc46ff9edcad029"> 3609</a></span>&#160;MAV_RESULT <a class="code" href="structGCS__MAVLINK.html#a9b50b969ed3f331f2cc46ff9edcad029">GCS_MAVLINK::handle_command_preflight_set_sensor_offsets</a>(<span class="keyword">const</span> mavlink_command_long_t &amp;packet)</div><div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;{</div><div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;    <a class="code" href="classCompass.html">Compass</a> &amp;<a class="code" href="AHRS__Test_8cpp.html#a58b8e143b1d5e3b2c1048c94ffa16ee2">compass</a> = <a class="code" href="namespaceAP.html#ab9d0bcbec954b6c20abd8e13e6de7356">AP::compass</a>();</div><div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;</div><div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;    uint8_t compassNumber = -1;</div><div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AP__Math_8cpp.html#accbd9f8bbc0adacd51efa66fad490c24">is_equal</a>(packet.param1, 2.0f)) {</div><div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;        compassNumber = 0;</div><div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="AP__Math_8cpp.html#accbd9f8bbc0adacd51efa66fad490c24">is_equal</a>(packet.param1, 5.0f)) {</div><div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;        compassNumber = 1;</div><div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="AP__Math_8cpp.html#accbd9f8bbc0adacd51efa66fad490c24">is_equal</a>(packet.param1, 6.0f)) {</div><div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;        compassNumber = 2;</div><div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;    }</div><div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;    <span class="keywordflow">if</span> (compassNumber == (uint8_t) -1) {</div><div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;        <span class="keywordflow">return</span> MAV_RESULT_FAILED;</div><div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;    }</div><div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;    <a class="code" href="AHRS__Test_8cpp.html#a58b8e143b1d5e3b2c1048c94ffa16ee2">compass</a>.<a class="code" href="classCompass.html#afeac6bcfad2650762cccda72dbce3e69">set_and_save_offsets</a>(compassNumber, <a class="code" href="vector3_8h.html#af345ad77ba5e240c7ab72b4b2077e754">Vector3f</a>(packet.param2, packet.param3, packet.param4));</div><div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;    <span class="keywordflow">return</span> MAV_RESULT_ACCEPTED;</div><div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;}</div><div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;</div><div class="line"><a name="l03628"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a2c5f6fc0bb8157be295890ff2bc845a8"> 3628</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="structGCS__MAVLINK.html#a2c5f6fc0bb8157be295890ff2bc845a8">GCS_MAVLINK::calibrate_gyros</a>()</div><div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;{</div><div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;    <a class="code" href="namespaceAP.html#ac571aa5a2ef71b7f4b4b2bfa09143fb9">AP::ins</a>().<a class="code" href="classAP__InertialSensor.html#a424609d1eb3dc8473040c9e6f87771ad">init_gyro</a>();</div><div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespaceAP.html#ac571aa5a2ef71b7f4b4b2bfa09143fb9">AP::ins</a>().gyro_calibrated_ok_all()) {</div><div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;    }</div><div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;    <a class="code" href="namespaceAP.html#a99432cfdb696952c9b7146f155a815aa">AP::ahrs</a>().<a class="code" href="classAP__AHRS.html#a7befeb0b01e3ac4322d554fbfc624e76">reset_gyro_drift</a>();</div><div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;}</div><div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;</div><div class="line"><a name="l03638"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#ab18a4f9e78055494fc43c9665b6644a5"> 3638</a></span>&#160;MAV_RESULT <a class="code" href="structGCS__MAVLINK.html#ab18a4f9e78055494fc43c9665b6644a5">GCS_MAVLINK::_handle_command_preflight_calibration_baro</a>()</div><div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;{</div><div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;    <span class="comment">// fast barometer calibration</span></div><div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;    <a class="code" href="GCS__Common_8cpp.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a>().<a class="code" href="classGCS.html#a9866f3484283db744409e40719cef765">send_text</a>(MAV_SEVERITY_INFO, <span class="stringliteral">&quot;Updating barometer calibration&quot;</span>);</div><div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;    <a class="code" href="namespaceAP.html#a8aec57eb0b7a79044cbc1f0ca4b75bcf">AP::baro</a>().<a class="code" href="classAP__Baro.html#a67fd690b15ef9f0f23b3304831ca913a">update_calibration</a>();</div><div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;    <a class="code" href="GCS__Common_8cpp.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a>().<a class="code" href="classGCS.html#a9866f3484283db744409e40719cef765">send_text</a>(MAV_SEVERITY_INFO, <span class="stringliteral">&quot;Barometer calibration complete&quot;</span>);</div><div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;</div><div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;    <a class="code" href="classAP__Airspeed.html">AP_Airspeed</a> *<a class="code" href="Airspeed_8cpp.html#abfed87a61c42e885ee14d5222b47583f">airspeed</a> = <a class="code" href="classAP__Airspeed.html#a6bfb2eababf55852b35bdff810ca86d1">AP_Airspeed::get_singleton</a>();</div><div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="Airspeed_8cpp.html#abfed87a61c42e885ee14d5222b47583f">airspeed</a> != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;        <a class="code" href="Airspeed_8cpp.html#abfed87a61c42e885ee14d5222b47583f">airspeed</a>-&gt;<a class="code" href="classAP__Airspeed.html#afb7c91590b3efc00ee2d72cc6bcc856f">calibrate</a>(<span class="keyword">false</span>);</div><div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;    }</div><div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;</div><div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;    <span class="keywordflow">return</span> MAV_RESULT_ACCEPTED;</div><div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;}</div><div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;</div><div class="line"><a name="l03653"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a60c3c7ed1d9e0a9d298fac37c688763b"> 3653</a></span>&#160;MAV_RESULT <a class="code" href="structGCS__MAVLINK.html#a60c3c7ed1d9e0a9d298fac37c688763b">GCS_MAVLINK::_handle_command_preflight_calibration</a>(<span class="keyword">const</span> mavlink_command_long_t &amp;packet)</div><div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;{</div><div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AP__Math_8cpp.html#accbd9f8bbc0adacd51efa66fad490c24">is_equal</a>(packet.param1,1.0f)) {</div><div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="structGCS__MAVLINK.html#a2c5f6fc0bb8157be295890ff2bc845a8">calibrate_gyros</a>()) {</div><div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;            <span class="keywordflow">return</span> MAV_RESULT_FAILED;</div><div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;        }</div><div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;        <span class="keywordflow">return</span> MAV_RESULT_ACCEPTED;</div><div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;    }</div><div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;</div><div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AP__Math_8cpp.html#accbd9f8bbc0adacd51efa66fad490c24">is_equal</a>(packet.param3,1.0f)) {</div><div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="structGCS__MAVLINK.html#ab18a4f9e78055494fc43c9665b6644a5">_handle_command_preflight_calibration_baro</a>();</div><div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;    }</div><div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;</div><div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AP__Math_8cpp.html#accbd9f8bbc0adacd51efa66fad490c24">is_equal</a>(packet.param5,1.0f)) {</div><div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;        <span class="comment">// start with gyro calibration</span></div><div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="structGCS__MAVLINK.html#a2c5f6fc0bb8157be295890ff2bc845a8">calibrate_gyros</a>()) {</div><div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;            <span class="keywordflow">return</span> MAV_RESULT_FAILED;</div><div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;        }</div><div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;        <span class="comment">// start accel cal</span></div><div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;        <a class="code" href="namespaceAP.html#ac571aa5a2ef71b7f4b4b2bfa09143fb9">AP::ins</a>().<a class="code" href="classAP__InertialSensor.html#ad04cd1cbcc7c31914e3dbcaf7eb83b19">acal_init</a>();</div><div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;        <a class="code" href="namespaceAP.html#ac571aa5a2ef71b7f4b4b2bfa09143fb9">AP::ins</a>().<a class="code" href="classAP__InertialSensor.html#a2dc43f0372ce70538ecb27f97c0c820c">get_acal</a>()-&gt;<a class="code" href="classAP__AccelCal.html#a5a1f3f9b0c46aa6f245440c0a1a358d7">start</a>(<span class="keyword">this</span>);</div><div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;        <span class="keywordflow">return</span> MAV_RESULT_ACCEPTED;</div><div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;    }</div><div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;</div><div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AP__Math_8cpp.html#accbd9f8bbc0adacd51efa66fad490c24">is_equal</a>(packet.param5,2.0f)) {</div><div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="structGCS__MAVLINK.html#a2c5f6fc0bb8157be295890ff2bc845a8">calibrate_gyros</a>()) {</div><div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;            <span class="keywordflow">return</span> MAV_RESULT_FAILED;</div><div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;        }</div><div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;        <span class="keywordtype">float</span> trim_roll, trim_pitch;</div><div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="namespaceAP.html#ac571aa5a2ef71b7f4b4b2bfa09143fb9">AP::ins</a>().calibrate_trim(trim_roll, trim_pitch)) {</div><div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;            <span class="keywordflow">return</span> MAV_RESULT_FAILED;</div><div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;        }</div><div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;        <span class="comment">// reset ahrs&#39;s trim to suggested values from calibration routine</span></div><div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;        <a class="code" href="namespaceAP.html#a99432cfdb696952c9b7146f155a815aa">AP::ahrs</a>().<a class="code" href="classAP__AHRS.html#ab45359e5c71751e421577e6a2d85625e">set_trim</a>(<a class="code" href="vector3_8h.html#af345ad77ba5e240c7ab72b4b2077e754">Vector3f</a>(trim_roll, trim_pitch, 0));</div><div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;        <span class="keywordflow">return</span> MAV_RESULT_ACCEPTED;</div><div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;    }</div><div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;</div><div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AP__Math_8cpp.html#accbd9f8bbc0adacd51efa66fad490c24">is_equal</a>(packet.param5,4.0f)) {</div><div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;        <span class="comment">// simple accel calibration</span></div><div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespaceAP.html#ac571aa5a2ef71b7f4b4b2bfa09143fb9">AP::ins</a>().<a class="code" href="classAP__InertialSensor.html#abde1abead9e4ff8875808e49ad6e551f">simple_accel_cal</a>();</div><div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;    }</div><div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;</div><div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;    <span class="keywordflow">return</span> MAV_RESULT_UNSUPPORTED;</div><div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;}</div><div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;</div><div class="line"><a name="l03698"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a562b2955a49da7d782d3f55ed8e021c9"> 3698</a></span>&#160;MAV_RESULT <a class="code" href="structGCS__MAVLINK.html#a562b2955a49da7d782d3f55ed8e021c9">GCS_MAVLINK::handle_command_preflight_calibration</a>(<span class="keyword">const</span> mavlink_command_long_t &amp;packet)</div><div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;{</div><div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#a9337a60383f4264fa96a20dbe43a4e2e">util</a>-&gt;<a class="code" href="classAP__HAL_1_1Util.html#a287a2b82fa30b92c8d52aad61d4d27b7">get_soft_armed</a>()) {</div><div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;        <span class="comment">// *preflight*, remember?</span></div><div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;        <span class="keywordflow">return</span> MAV_RESULT_FAILED;</div><div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;    }</div><div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;    <span class="comment">// now call subclass methods:</span></div><div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structGCS__MAVLINK.html#a60c3c7ed1d9e0a9d298fac37c688763b">_handle_command_preflight_calibration</a>(packet);</div><div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;}</div><div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;</div><div class="line"><a name="l03708"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a43f96ca9e7b136f08224e2665556034b"> 3708</a></span>&#160;MAV_RESULT <a class="code" href="structGCS__MAVLINK.html#a43f96ca9e7b136f08224e2665556034b">GCS_MAVLINK::handle_command_preflight_can</a>(<span class="keyword">const</span> mavlink_command_long_t &amp;packet)</div><div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;{</div><div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;<span class="preprocessor">#if HAL_WITH_UAVCAN</span></div><div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#a9337a60383f4264fa96a20dbe43a4e2e">util</a>-&gt;<a class="code" href="classAP__HAL_1_1Util.html#a287a2b82fa30b92c8d52aad61d4d27b7">get_soft_armed</a>()) {</div><div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;        <span class="comment">// *preflight*, remember?</span></div><div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;        <span class="keywordflow">return</span> MAV_RESULT_TEMPORARILY_REJECTED;</div><div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;    }</div><div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;</div><div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;    <span class="keywordtype">bool</span> start_stop = <a class="code" href="AP__Math_8cpp.html#accbd9f8bbc0adacd51efa66fad490c24">is_equal</a>(packet.param1,1.0f) ? true : <span class="keyword">false</span>;</div><div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;    <span class="keywordtype">bool</span> can_exists = <span class="keyword">false</span>;</div><div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;    uint8_t num_drivers = AP::can().get_num_drivers();</div><div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;</div><div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;    <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; num_drivers; i++) {</div><div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;        <span class="keywordflow">switch</span> (AP::can().get_protocol_type(i)) {</div><div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;            <span class="keywordflow">case</span> AP_BoardConfig_CAN::Protocol_Type_KDECAN: {</div><div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;<span class="comment">// To be replaced with macro saying if KDECAN library is included</span></div><div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;<span class="preprocessor">#if APM_BUILD_TYPE(APM_BUILD_ArduCopter) || APM_BUILD_TYPE(APM_BUILD_ArduPlane) || APM_BUILD_TYPE(APM_BUILD_ArduSub)</span></div><div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;                <a class="code" href="classAP__KDECAN.html">AP_KDECAN</a> *ap_kdecan = <a class="code" href="classAP__KDECAN.html#a1f62c80879764d4e6655baa2b0c0a39e">AP_KDECAN::get_kdecan</a>(i);</div><div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;</div><div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;                <span class="keywordflow">if</span> (ap_kdecan != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;                    can_exists = <span class="keyword">true</span>;</div><div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;                    <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = ap_kdecan-&gt;<a class="code" href="classAP__KDECAN.html#a6b79837c29e1c5d3cf7bc22f7ba4bec5">run_enumeration</a>(start_stop) &amp;&amp; <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a>;</div><div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;                }</div><div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;                <a class="code" href="AP__Common_8h.html#acaddc9a4164b70ff0b43ba64b3a6bd40">UNUSED_RESULT</a>(start_stop); <span class="comment">// prevent unused variable error</span></div><div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;            }</div><div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;            <span class="keywordflow">case</span> AP_BoardConfig_CAN::Protocol_Type_UAVCAN:</div><div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;            <span class="keywordflow">case</span> AP_BoardConfig_CAN::Protocol_Type_None:</div><div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;            <span class="keywordflow">default</span>:</div><div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;        }</div><div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;    }</div><div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;</div><div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;    MAV_RESULT ack = MAV_RESULT_DENIED;</div><div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;    <span class="keywordflow">if</span> (can_exists) {</div><div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;        ack = <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> ? MAV_RESULT_ACCEPTED : MAV_RESULT_FAILED;</div><div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;    }</div><div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;</div><div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;    <span class="keywordflow">return</span> ack;</div><div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;    <span class="keywordflow">return</span> MAV_RESULT_UNSUPPORTED;</div><div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;}</div><div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;</div><div class="line"><a name="l03755"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a74172861552ab8de0c825190508f38ff"> 3755</a></span>&#160;MAV_RESULT <a class="code" href="structGCS__MAVLINK.html#a74172861552ab8de0c825190508f38ff">GCS_MAVLINK::handle_command_battery_reset</a>(<span class="keyword">const</span> mavlink_command_long_t &amp;packet)</div><div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;{</div><div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;    <span class="keyword">const</span> uint16_t battery_mask = packet.param1;</div><div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> percentage = packet.param2;</div><div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespaceAP.html#aac3bcb68bcccad29cc493b878aef055e">AP::battery</a>().reset_remaining(battery_mask, percentage)) {</div><div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;        <span class="keywordflow">return</span> MAV_RESULT_ACCEPTED;</div><div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;    }</div><div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;    <span class="keywordflow">return</span> MAV_RESULT_FAILED;</div><div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;}</div><div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;</div><div class="line"><a name="l03765"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#acc3f14c49157522bc5c00c3fe1c1b553"> 3765</a></span>&#160;MAV_RESULT <a class="code" href="structGCS__MAVLINK.html#acc3f14c49157522bc5c00c3fe1c1b553">GCS_MAVLINK::handle_command_mag_cal</a>(<span class="keyword">const</span> mavlink_command_long_t &amp;packet)</div><div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;{</div><div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceAP.html#ab9d0bcbec954b6c20abd8e13e6de7356">AP::compass</a>().<a class="code" href="classCompass.html#ab4993a08b27d38ebb96276dc40c5f5fb">handle_mag_cal_command</a>(packet);</div><div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;}</div><div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;</div><div class="line"><a name="l03770"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a37dc18e37d159145cf1e87d88e554db5"> 3770</a></span>&#160;MAV_RESULT <a class="code" href="structGCS__MAVLINK.html#a37dc18e37d159145cf1e87d88e554db5">GCS_MAVLINK::handle_command_request_autopilot_capabilities</a>(<span class="keyword">const</span> mavlink_command_long_t &amp;packet)</div><div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;{</div><div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="AP__Math_8cpp.html#accbd9f8bbc0adacd51efa66fad490c24">is_equal</a>(packet.param1,1.0f)) {</div><div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;        <span class="keywordflow">return</span> MAV_RESULT_FAILED;</div><div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;    }</div><div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;</div><div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;    <a class="code" href="structGCS__MAVLINK.html#a8ed79496b0f3efa28e630bddc8f59e62">send_autopilot_version</a>();</div><div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;</div><div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;    <span class="keywordflow">return</span> MAV_RESULT_ACCEPTED;</div><div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;}</div><div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;</div><div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;</div><div class="line"><a name="l03782"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#aeb2afa7acf64a184d17a81270de4d054"> 3782</a></span>&#160;MAV_RESULT <a class="code" href="structGCS__MAVLINK.html#aeb2afa7acf64a184d17a81270de4d054">GCS_MAVLINK::handle_command_do_send_banner</a>(<span class="keyword">const</span> mavlink_command_long_t &amp;packet)</div><div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;{</div><div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;    <a class="code" href="structGCS__MAVLINK.html#adcf424c726b3b459b5c9f5346236224a">send_banner</a>();</div><div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;    <span class="keywordflow">return</span> MAV_RESULT_ACCEPTED;</div><div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;}</div><div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;</div><div class="line"><a name="l03788"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a19b41aa20ad8b57801f6554551e29b05"> 3788</a></span>&#160;MAV_RESULT <a class="code" href="structGCS__MAVLINK.html#a19b41aa20ad8b57801f6554551e29b05">GCS_MAVLINK::handle_command_do_set_mode</a>(<span class="keyword">const</span> mavlink_command_long_t &amp;packet)</div><div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;{</div><div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;    <span class="keyword">const</span> MAV_MODE _base_mode = (MAV_MODE)packet.param1;</div><div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;    <span class="keyword">const</span> uint32_t _custom_mode = (uint32_t)packet.param2;</div><div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;</div><div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structGCS__MAVLINK.html#a7ff42b90dc344d26bf27e7ed3f21c656">_set_mode_common</a>(_base_mode, _custom_mode);</div><div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;}</div><div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;</div><div class="line"><a name="l03796"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a256bd83477e0d72b40300bf1d7207750"> 3796</a></span>&#160;MAV_RESULT <a class="code" href="structGCS__MAVLINK.html#a256bd83477e0d72b40300bf1d7207750">GCS_MAVLINK::handle_command_get_home_position</a>(<span class="keyword">const</span> mavlink_command_long_t &amp;packet)</div><div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;{</div><div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespaceAP.html#a99432cfdb696952c9b7146f155a815aa">AP::ahrs</a>().home_is_set()) {</div><div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;        <span class="keywordflow">return</span> MAV_RESULT_FAILED;</div><div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;    }</div><div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="structGCS__MAVLINK.html#a30034cdbd89bcfb86392411f9b5935db">try_send_message</a>(<a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991ae245f098f5ee0ec75b4dc6331f769f8f">MSG_HOME</a>)) {</div><div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;        <span class="comment">// try again later</span></div><div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a4902306dab46ff02b2296f99eb1f1c9c">send_message</a>(<a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991ae245f098f5ee0ec75b4dc6331f769f8f">MSG_HOME</a>);</div><div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;    }</div><div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="structGCS__MAVLINK.html#a30034cdbd89bcfb86392411f9b5935db">try_send_message</a>(<a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991af5b97ab8c9c725ebc1a437d5145a96d9">MSG_ORIGIN</a>)) {</div><div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;        <span class="comment">// try again later</span></div><div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a4902306dab46ff02b2296f99eb1f1c9c">send_message</a>(<a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991af5b97ab8c9c725ebc1a437d5145a96d9">MSG_ORIGIN</a>);</div><div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;    }</div><div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;</div><div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;    <span class="keywordflow">return</span> MAV_RESULT_ACCEPTED;</div><div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;}</div><div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;</div><div class="line"><a name="l03813"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a69c4fd4a93baf6a354289b08253ca974"> 3813</a></span>&#160;MAV_RESULT <a class="code" href="structGCS__MAVLINK.html#a69c4fd4a93baf6a354289b08253ca974">GCS_MAVLINK::handle_command_do_gripper</a>(<span class="keyword">const</span> mavlink_command_long_t &amp;packet)</div><div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;{</div><div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;    <a class="code" href="classAP__Gripper.html">AP_Gripper</a> *<a class="code" href="namespaceAP.html#a281eab484336c7b9e2e34072a94895e0">gripper</a> = <a class="code" href="namespaceAP.html#a281eab484336c7b9e2e34072a94895e0">AP::gripper</a>();</div><div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespaceAP.html#a281eab484336c7b9e2e34072a94895e0">gripper</a> == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;        <span class="keywordflow">return</span> MAV_RESULT_FAILED;</div><div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;    }</div><div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;</div><div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;    <span class="comment">// param1 : gripper number (ignored)</span></div><div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;    <span class="comment">// param2 : action (0=release, 1=grab). See GRIPPER_ACTIONS enum.</span></div><div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="namespaceAP.html#a281eab484336c7b9e2e34072a94895e0">gripper</a>-&gt;<a class="code" href="classAP__Gripper.html#a582c100e6f5d1d8b0c7bd68b30c4c426">enabled</a>()) {</div><div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;        <span class="keywordflow">return</span> MAV_RESULT_FAILED;</div><div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;    }</div><div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;</div><div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;    MAV_RESULT <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = MAV_RESULT_ACCEPTED;</div><div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;</div><div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;    <span class="keywordflow">switch</span> ((uint8_t)packet.param2) {</div><div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;    <span class="keywordflow">case</span> GRIPPER_ACTION_RELEASE:</div><div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;        <a class="code" href="namespaceAP.html#a281eab484336c7b9e2e34072a94895e0">gripper</a>-&gt;<a class="code" href="classAP__Gripper.html#a40b0812c1f3ddefcc90bfb6d968c244c">release</a>();</div><div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;    <span class="keywordflow">case</span> GRIPPER_ACTION_GRAB:</div><div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;        <a class="code" href="namespaceAP.html#a281eab484336c7b9e2e34072a94895e0">gripper</a>-&gt;<a class="code" href="classAP__Gripper.html#a0ab7a524f9fc267b0a68eb3076702936">grab</a>();</div><div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;        <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = MAV_RESULT_FAILED;</div><div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;    }</div><div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;</div><div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a>;</div><div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;}</div><div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;</div><div class="line"><a name="l03843"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a98e33d770e491a2a3629c547e17d153b"> 3843</a></span>&#160;MAV_RESULT <a class="code" href="structGCS__MAVLINK.html#a98e33d770e491a2a3629c547e17d153b">GCS_MAVLINK::handle_command_accelcal_vehicle_pos</a>(<span class="keyword">const</span> mavlink_command_long_t &amp;packet)</div><div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;{</div><div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespaceAP.html#ac571aa5a2ef71b7f4b4b2bfa09143fb9">AP::ins</a>().get_acal()-&gt;gcs_vehicle_position(packet.param1)) {</div><div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;        <span class="keywordflow">return</span> MAV_RESULT_FAILED;</div><div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;    }</div><div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;    <span class="keywordflow">return</span> MAV_RESULT_ACCEPTED;</div><div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;}</div><div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;</div><div class="line"><a name="l03851"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#af083ab3c20afaa7260b8461f1c1f6245"> 3851</a></span>&#160;MAV_RESULT <a class="code" href="structGCS__MAVLINK.html#af083ab3c20afaa7260b8461f1c1f6245">GCS_MAVLINK::handle_command_mount</a>(<span class="keyword">const</span> mavlink_command_long_t &amp;packet)</div><div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;{</div><div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;    <a class="code" href="classAP__Mount.html">AP_Mount</a> *<a class="code" href="namespaceAP.html#aa6f0d760efc796d0ad5345d3acc377b8">mount</a> = <a class="code" href="namespaceAP.html#aa6f0d760efc796d0ad5345d3acc377b8">AP::mount</a>();</div><div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespaceAP.html#aa6f0d760efc796d0ad5345d3acc377b8">mount</a> == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;        <span class="keywordflow">return</span> MAV_RESULT_UNSUPPORTED;</div><div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;    }</div><div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceAP.html#aa6f0d760efc796d0ad5345d3acc377b8">mount</a>-&gt;<a class="code" href="classAP__Mount.html#a9e00880d3945a9629aacaad5abf856b3">handle_command_long</a>(packet);</div><div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;}</div><div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;</div><div class="line"><a name="l03860"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#ae86392598ecfadf9cb7139a1b2b940b6"> 3860</a></span>&#160;MAV_RESULT <a class="code" href="structGCS__MAVLINK.html#ae86392598ecfadf9cb7139a1b2b940b6">GCS_MAVLINK::handle_command_do_set_home</a>(<span class="keyword">const</span> mavlink_command_long_t &amp;packet)</div><div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;{</div><div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AP__Math_8cpp.html#accbd9f8bbc0adacd51efa66fad490c24">is_equal</a>(packet.param1, 1.0f) || (<a class="code" href="AP__Math_8h.html#a2a12cce483e9b870da70d30406d82c60">is_zero</a>(packet.param5) &amp;&amp; <a class="code" href="AP__Math_8h.html#a2a12cce483e9b870da70d30406d82c60">is_zero</a>(packet.param6))) {</div><div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;        <span class="comment">// param1 is 1 (or both lat and lon are zero); use current location</span></div><div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="structGCS__MAVLINK.html#a16b1113424afd184dabe92c0d3432bda">set_home_to_current_location</a>(<span class="keyword">true</span>)) {</div><div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;            <span class="keywordflow">return</span> MAV_RESULT_FAILED;</div><div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;        }</div><div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;        <span class="keywordflow">return</span> MAV_RESULT_ACCEPTED;</div><div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;    }</div><div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;</div><div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;    <span class="comment">// ensure param1 is zero</span></div><div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="AP__Math_8h.html#a2a12cce483e9b870da70d30406d82c60">is_zero</a>(packet.param1)) {</div><div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;        <span class="keywordflow">return</span> MAV_RESULT_FAILED;</div><div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;    }</div><div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;</div><div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;    <a class="code" href="classLocation.html">Location</a> new_home_loc;</div><div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;    new_home_loc.<a class="code" href="classLocation.html#ae51548c2cf32311043ca19b94b9a9223">lat</a> = (int32_t)(packet.param5 * 1.0e7f);</div><div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;    new_home_loc.<a class="code" href="classLocation.html#a5831f0aca9e51a15adb96fad465f72f8">lng</a> = (int32_t)(packet.param6 * 1.0e7f);</div><div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;    new_home_loc.<a class="code" href="classLocation.html#a89e532f5bcc13db2f51ff9eed667c2b6">alt</a> = (int32_t)(packet.param7 * 100.0f);</div><div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="structGCS__MAVLINK.html#af1c0fd653d5f1fd10dadfb22f41dd865">set_home</a>(new_home_loc, <span class="keyword">true</span>)) {</div><div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;        <span class="keywordflow">return</span> MAV_RESULT_FAILED;</div><div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;    }</div><div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;    <span class="keywordflow">return</span> MAV_RESULT_ACCEPTED;</div><div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;}</div><div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;</div><div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;</div><div class="line"><a name="l03886"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a29e2941413d50ab63cd70f5beadef19a"> 3886</a></span>&#160;MAV_RESULT <a class="code" href="structGCS__MAVLINK.html#a29e2941413d50ab63cd70f5beadef19a">GCS_MAVLINK::handle_command_long_packet</a>(<span class="keyword">const</span> mavlink_command_long_t &amp;packet)</div><div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;{</div><div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;    MAV_RESULT <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = MAV_RESULT_FAILED;</div><div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;</div><div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;    <span class="keywordflow">switch</span> (packet.command) {</div><div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;</div><div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_ACCELCAL_VEHICLE_POS:</div><div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;        <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = <a class="code" href="structGCS__MAVLINK.html#a98e33d770e491a2a3629c547e17d153b">handle_command_accelcal_vehicle_pos</a>(packet);</div><div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;</div><div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_DO_SET_MODE:</div><div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;        <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = <a class="code" href="structGCS__MAVLINK.html#a19b41aa20ad8b57801f6554551e29b05">handle_command_do_set_mode</a>(packet);</div><div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;</div><div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_DO_SEND_BANNER:</div><div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;        <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = <a class="code" href="structGCS__MAVLINK.html#aeb2afa7acf64a184d17a81270de4d054">handle_command_do_send_banner</a>(packet);</div><div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;</div><div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_DO_SET_HOME:</div><div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;        <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = <a class="code" href="structGCS__MAVLINK.html#ae86392598ecfadf9cb7139a1b2b940b6">handle_command_do_set_home</a>(packet);</div><div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;</div><div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_DO_FENCE_ENABLE:</div><div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;        <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = <a class="code" href="structGCS__MAVLINK.html#a57a3874a62f431ac3dee427fe2b53117">handle_command_do_fence_enable</a>(packet);</div><div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;</div><div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_PREFLIGHT_REBOOT_SHUTDOWN:</div><div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;        <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = <a class="code" href="structGCS__MAVLINK.html#a2c41f461a8bc8bddbb7ed30ce2a1f135">handle_preflight_reboot</a>(packet);</div><div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;</div><div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_DO_START_MAG_CAL:</div><div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_DO_ACCEPT_MAG_CAL:</div><div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_DO_CANCEL_MAG_CAL: {</div><div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;        <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = <a class="code" href="structGCS__MAVLINK.html#acc3f14c49157522bc5c00c3fe1c1b553">handle_command_mag_cal</a>(packet);</div><div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;    }</div><div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;</div><div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_START_RX_PAIR:</div><div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;        <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = <a class="code" href="structGCS__MAVLINK.html#a03ff2b05cc97e31acf23019c00752388">handle_rc_bind</a>(packet);</div><div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;</div><div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_DO_DIGICAM_CONFIGURE:</div><div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_DO_DIGICAM_CONTROL:</div><div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_DO_SET_CAM_TRIGG_DIST:</div><div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;        <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = <a class="code" href="structGCS__MAVLINK.html#a735b4b8b692fa6985a7f7b99c6b4d58c">handle_command_camera</a>(packet);</div><div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;</div><div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_DO_GRIPPER:</div><div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;        <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = <a class="code" href="structGCS__MAVLINK.html#a69c4fd4a93baf6a354289b08253ca974">handle_command_do_gripper</a>(packet);</div><div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;</div><div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_DO_MOUNT_CONFIGURE:</div><div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_DO_MOUNT_CONTROL:</div><div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;        <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = <a class="code" href="structGCS__MAVLINK.html#af083ab3c20afaa7260b8461f1c1f6245">handle_command_mount</a>(packet);</div><div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;</div><div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_REQUEST_AUTOPILOT_CAPABILITIES: {</div><div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;        <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = <a class="code" href="structGCS__MAVLINK.html#a37dc18e37d159145cf1e87d88e554db5">handle_command_request_autopilot_capabilities</a>(packet);</div><div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;    }</div><div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;</div><div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_DO_SET_ROI_LOCATION:</div><div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_DO_SET_ROI:</div><div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;        <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = <a class="code" href="structGCS__MAVLINK.html#af8c46f04ef8c384de8d23c3651c1eef1">handle_command_do_set_roi</a>(packet);</div><div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;</div><div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_PREFLIGHT_CALIBRATION:</div><div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;        <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = <a class="code" href="structGCS__MAVLINK.html#a562b2955a49da7d782d3f55ed8e021c9">handle_command_preflight_calibration</a>(packet);</div><div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;</div><div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_BATTERY_RESET:</div><div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;        <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = <a class="code" href="structGCS__MAVLINK.html#a74172861552ab8de0c825190508f38ff">handle_command_battery_reset</a>(packet);</div><div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;        </div><div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_PREFLIGHT_UAVCAN:</div><div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;        <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = <a class="code" href="structGCS__MAVLINK.html#a43f96ca9e7b136f08224e2665556034b">handle_command_preflight_can</a>(packet);</div><div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;</div><div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_FLASH_BOOTLOADER:</div><div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;        <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = <a class="code" href="structGCS__MAVLINK.html#a083d1726ff9cb84cb42b65433fcdd216">handle_command_flash_bootloader</a>(packet);</div><div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;</div><div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_PREFLIGHT_SET_SENSOR_OFFSETS: {</div><div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;        <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = <a class="code" href="structGCS__MAVLINK.html#a9b50b969ed3f331f2cc46ff9edcad029">handle_command_preflight_set_sensor_offsets</a>(packet);</div><div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;    }</div><div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;</div><div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_GET_HOME_POSITION:</div><div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;        <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = <a class="code" href="structGCS__MAVLINK.html#a256bd83477e0d72b40300bf1d7207750">handle_command_get_home_position</a>(packet);</div><div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;</div><div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_PREFLIGHT_STORAGE:</div><div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="AP__Math_8cpp.html#accbd9f8bbc0adacd51efa66fad490c24">is_equal</a>(packet.param1, 2.0f)) {</div><div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;            <a class="code" href="classAP__Param.html#a4a86ea5356adc75cd1cf80ec01f0dfa8">AP_Param::erase_all</a>();</div><div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;            <a class="code" href="structGCS__MAVLINK.html#a8712f50cee60529cc3c31aec2633391b">send_text</a>(MAV_SEVERITY_WARNING, <span class="stringliteral">&quot;All parameters reset, reboot board&quot;</span>);</div><div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;            <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a>= MAV_RESULT_ACCEPTED;</div><div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;        }</div><div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;</div><div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_SET_MESSAGE_INTERVAL:</div><div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;        <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = <a class="code" href="structGCS__MAVLINK.html#ab03ead633c327ce88a24bf4d00f743b6">handle_command_set_message_interval</a>(packet);</div><div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;</div><div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_GET_MESSAGE_INTERVAL:</div><div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;        <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = <a class="code" href="structGCS__MAVLINK.html#ac70cb2b36ea28b838c8b4cafa3a3f2c7">handle_command_get_message_interval</a>(packet);</div><div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;</div><div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_REQUEST_MESSAGE:</div><div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;        <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = <a class="code" href="structGCS__MAVLINK.html#a67fea52889ec858e710b39cf2324849c">handle_command_request_message</a>(packet);</div><div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;</div><div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_DO_SET_SERVO:</div><div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_DO_REPEAT_SERVO:</div><div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_DO_SET_RELAY:</div><div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_DO_REPEAT_RELAY:</div><div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;        <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = <a class="code" href="structGCS__MAVLINK.html#afd3ab3d8ffa0312e0cfb5a780221eebd">handle_servorelay_message</a>(packet);</div><div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;</div><div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_DO_FLIGHTTERMINATION:</div><div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;        <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = <a class="code" href="structGCS__MAVLINK.html#acfc1187142442967f8373970d0d5f408">handle_flight_termination</a>(packet);</div><div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;</div><div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_COMPONENT_ARM_DISARM:</div><div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="AP__Math_8cpp.html#accbd9f8bbc0adacd51efa66fad490c24">is_equal</a>(packet.param1,1.0f)) {</div><div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;            <span class="comment">// run pre_arm_checks and arm_checks and display failures</span></div><div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">bool</span> do_arming_checks = !<a class="code" href="AP__Math_8cpp.html#accbd9f8bbc0adacd51efa66fad490c24">is_equal</a>(packet.param2,<a class="code" href="structGCS__MAVLINK.html#aeb3b60569c945ad118e7da420f19d67e">magic_force_arm_value</a>);</div><div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="namespaceAP.html#a13852d97b041687ca5df7d76e7207a3d">AP::arming</a>().is_armed() ||</div><div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;                <a class="code" href="namespaceAP.html#a13852d97b041687ca5df7d76e7207a3d">AP::arming</a>().arm(<a class="code" href="classAP__Arming.html#a1760410b21c1e6183808a9f328d39007a2b45d810cc872a32caa6e524d97e1bc1">AP_Arming::Method::MAVLINK</a>, do_arming_checks)) {</div><div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;                <span class="keywordflow">return</span> MAV_RESULT_ACCEPTED;</div><div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;            }</div><div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;            <span class="keywordflow">return</span> MAV_RESULT_FAILED;</div><div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;        }</div><div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="AP__Math_8h.html#a2a12cce483e9b870da70d30406d82c60">is_zero</a>(packet.param1))  {</div><div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="namespaceAP.html#a13852d97b041687ca5df7d76e7207a3d">AP::arming</a>().is_armed()) {</div><div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;                <span class="keywordflow">return</span> MAV_RESULT_ACCEPTED;</div><div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;            }</div><div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;            <span class="comment">// allow vehicle to disallow disarm.  Copter does this if</span></div><div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;            <span class="comment">// the vehicle isn&#39;t considered landed.</span></div><div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="structGCS__MAVLINK.html#a4280ba0127cf45582080c3398f99dd5a">allow_disarm</a>() &amp;&amp;</div><div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;                !<a class="code" href="AP__Math_8cpp.html#accbd9f8bbc0adacd51efa66fad490c24">is_equal</a>(packet.param2, <a class="code" href="structGCS__MAVLINK.html#a46d9c40617930f05170da56d37229f42">magic_force_disarm_value</a>)) {</div><div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;                <span class="keywordflow">return</span> MAV_RESULT_FAILED;</div><div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;            }</div><div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="namespaceAP.html#a13852d97b041687ca5df7d76e7207a3d">AP::arming</a>().disarm()) {</div><div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;                <span class="keywordflow">return</span> MAV_RESULT_ACCEPTED;</div><div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;            }</div><div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;            <span class="keywordflow">return</span> MAV_RESULT_FAILED;</div><div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;        }</div><div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;</div><div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;        <span class="keywordflow">return</span> MAV_RESULT_UNSUPPORTED;</div><div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;</div><div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;        <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = MAV_RESULT_UNSUPPORTED;</div><div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;    }</div><div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;</div><div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a>;</div><div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;}</div><div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;</div><div class="line"><a name="l04044"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#abc79cdd8393234b66f2e8217a527f8f9"> 4044</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#abc79cdd8393234b66f2e8217a527f8f9">GCS_MAVLINK::handle_command_long</a>(mavlink_message_t *msg)</div><div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;{</div><div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;    <span class="comment">// decode packet</span></div><div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;    mavlink_command_long_t packet;</div><div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;    mavlink_msg_command_long_decode(msg, &amp;packet);</div><div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;</div><div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;    <a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#a9337a60383f4264fa96a20dbe43a4e2e">util</a>-&gt;<a class="code" href="classAP__HAL_1_1Util.html#a64273fdab59825cea305a403054c25bf">persistent_data</a>.<a class="code" href="structAP__HAL_1_1Util_1_1PersistentData.html#aad66d8d6bbb9ff51d10c38b84fa74824">last_mavlink_cmd</a> = packet.command;</div><div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;</div><div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;    <span class="keyword">const</span> MAV_RESULT <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = <a class="code" href="structGCS__MAVLINK.html#a29e2941413d50ab63cd70f5beadef19a">handle_command_long_packet</a>(packet);</div><div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;</div><div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;    <span class="comment">// send ACK or NAK</span></div><div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;    mavlink_msg_command_ack_send(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>, packet.command, <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a>);</div><div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;</div><div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;    <a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#a9337a60383f4264fa96a20dbe43a4e2e">util</a>-&gt;<a class="code" href="classAP__HAL_1_1Util.html#a64273fdab59825cea305a403054c25bf">persistent_data</a>.<a class="code" href="structAP__HAL_1_1Util_1_1PersistentData.html#aad66d8d6bbb9ff51d10c38b84fa74824">last_mavlink_cmd</a> = 0;</div><div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;}</div><div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;</div><div class="line"><a name="l04060"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a51f900a2ef4e2e34d2671cca2ef2c534"> 4060</a></span>&#160;MAV_RESULT <a class="code" href="structGCS__MAVLINK.html#af8c46f04ef8c384de8d23c3651c1eef1">GCS_MAVLINK::handle_command_do_set_roi</a>(<span class="keyword">const</span> <a class="code" href="classLocation.html">Location</a> &amp;roi_loc)</div><div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;{</div><div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;    <a class="code" href="classAP__Mount.html">AP_Mount</a> *<a class="code" href="namespaceAP.html#aa6f0d760efc796d0ad5345d3acc377b8">mount</a> = <a class="code" href="namespaceAP.html#aa6f0d760efc796d0ad5345d3acc377b8">AP::mount</a>();</div><div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespaceAP.html#aa6f0d760efc796d0ad5345d3acc377b8">mount</a> == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;        <span class="keywordflow">return</span> MAV_RESULT_UNSUPPORTED;</div><div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;    }</div><div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;</div><div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;    <span class="comment">// sanity check location</span></div><div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;    <span class="keywordflow">if</span> (!roi_loc.<a class="code" href="classLocation.html#a25f7297551af447cf46aef3ae92c2632">check_latlng</a>()) {</div><div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;        <span class="keywordflow">return</span> MAV_RESULT_FAILED;</div><div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160;    }</div><div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;</div><div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;    <span class="keywordflow">if</span> (roi_loc.<a class="code" href="classLocation.html#ae51548c2cf32311043ca19b94b9a9223">lat</a> == 0 &amp;&amp; roi_loc.<a class="code" href="classLocation.html#a5831f0aca9e51a15adb96fad465f72f8">lng</a> == 0 &amp;&amp; roi_loc.<a class="code" href="classLocation.html#a89e532f5bcc13db2f51ff9eed667c2b6">alt</a> == 0) {</div><div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;        <span class="comment">// switch off the camera tracking if enabled</span></div><div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespaceAP.html#aa6f0d760efc796d0ad5345d3acc377b8">mount</a>-&gt;<a class="code" href="classAP__Mount.html#a82a1a9ffb9d880f646071092769ec46d">get_mode</a>() == MAV_MOUNT_MODE_GPS_POINT) {</div><div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;            <a class="code" href="namespaceAP.html#aa6f0d760efc796d0ad5345d3acc377b8">mount</a>-&gt;<a class="code" href="classAP__Mount.html#a68a94bbf6ab531daa66ff6e3b17a0104">set_mode_to_default</a>();</div><div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;        }</div><div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;        <span class="comment">// send the command to the camera mount</span></div><div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;        <a class="code" href="namespaceAP.html#aa6f0d760efc796d0ad5345d3acc377b8">mount</a>-&gt;<a class="code" href="classAP__Mount.html#adbb183f324f69fc8997801147d1ba346">set_roi_target</a>(roi_loc);</div><div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;    }</div><div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;    <span class="keywordflow">return</span> MAV_RESULT_ACCEPTED;</div><div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;}</div><div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;</div><div class="line"><a name="l04084"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#ad1b9e681a5c3a530e5522abfaac80a26"> 4084</a></span>&#160;MAV_RESULT <a class="code" href="structGCS__MAVLINK.html#ad1b9e681a5c3a530e5522abfaac80a26">GCS_MAVLINK::handle_command_int_do_set_home</a>(<span class="keyword">const</span> mavlink_command_int_t &amp;packet)</div><div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;{</div><div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AP__Math_8cpp.html#accbd9f8bbc0adacd51efa66fad490c24">is_equal</a>(packet.param1, 1.0f) || (packet.x == 0 &amp;&amp; packet.y == 0)) {</div><div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;        <span class="comment">// param1 is 1 (or both lat and lon are zero); use current location</span></div><div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="structGCS__MAVLINK.html#a16b1113424afd184dabe92c0d3432bda">set_home_to_current_location</a>(<span class="keyword">true</span>)) {</div><div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;            <span class="keywordflow">return</span> MAV_RESULT_FAILED;</div><div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;        }</div><div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;        <span class="keywordflow">return</span> MAV_RESULT_ACCEPTED;</div><div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;    }</div><div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;    <span class="comment">// ensure param1 is zero</span></div><div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="AP__Math_8h.html#a2a12cce483e9b870da70d30406d82c60">is_zero</a>(packet.param1)) {</div><div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;        <span class="keywordflow">return</span> MAV_RESULT_FAILED;</div><div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;    }</div><div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;    <a class="code" href="classLocation.html#af494dabb88cd43e0d4efa99f04d31351">Location::AltFrame</a> frame;</div><div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="structGCS__MAVLINK.html#ae92d17021254192f5562d5a724542152">mavlink_coordinate_frame_to_location_alt_frame</a>(packet.frame, frame)) {</div><div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;        <span class="comment">// unknown coordinate frame</span></div><div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160;        <span class="keywordflow">return</span> MAV_RESULT_UNSUPPORTED;</div><div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160;    }</div><div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;    <span class="keyword">const</span> <a class="code" href="classLocation.html">Location</a> new_home_loc{</div><div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;        packet.x,</div><div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;        packet.y,</div><div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;        int32_t(packet.z * 100),</div><div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160;        frame,</div><div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;    };</div><div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="structGCS__MAVLINK.html#af1c0fd653d5f1fd10dadfb22f41dd865">set_home</a>(new_home_loc, <span class="keyword">true</span>)) {</div><div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;        <span class="keywordflow">return</span> MAV_RESULT_FAILED;</div><div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;    }</div><div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;    <span class="keywordflow">return</span> MAV_RESULT_ACCEPTED;</div><div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;}</div><div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160;</div><div class="line"><a name="l04114"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#af8c46f04ef8c384de8d23c3651c1eef1"> 4114</a></span>&#160;MAV_RESULT <a class="code" href="structGCS__MAVLINK.html#af8c46f04ef8c384de8d23c3651c1eef1">GCS_MAVLINK::handle_command_do_set_roi</a>(<span class="keyword">const</span> mavlink_command_int_t &amp;packet)</div><div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;{</div><div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;    <span class="comment">// be aware that this method is called for both MAV_CMD_DO_SET_ROI</span></div><div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;    <span class="comment">// and MAV_CMD_DO_SET_ROI_LOCATION.  If you intend to support any</span></div><div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;    <span class="comment">// of the extra fields in the former then you will need to split</span></div><div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160;    <span class="comment">// off support for MAV_CMD_DO_SET_ROI_LOCATION (which doesn&#39;t</span></div><div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160;    <span class="comment">// support the extra fields).</span></div><div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;</div><div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;    <span class="comment">// param1 : /* Region of interest mode (not used)*/</span></div><div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;    <span class="comment">// param2 : /* MISSION index/ target ID (not used)*/</span></div><div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;    <span class="comment">// param3 : /* ROI index (not used)*/</span></div><div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;    <span class="comment">// param4 : /* empty */</span></div><div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;    <span class="comment">// x : lat</span></div><div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;    <span class="comment">// y : lon</span></div><div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;    <span class="comment">// z : alt</span></div><div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;    <a class="code" href="classLocation.html">Location</a> roi_loc;</div><div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;    roi_loc.<a class="code" href="classLocation.html#ae51548c2cf32311043ca19b94b9a9223">lat</a> = packet.x;</div><div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;    roi_loc.<a class="code" href="classLocation.html#a5831f0aca9e51a15adb96fad465f72f8">lng</a> = packet.y;</div><div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;    roi_loc.<a class="code" href="classLocation.html#a89e532f5bcc13db2f51ff9eed667c2b6">alt</a> = (int32_t)(packet.z * 100.0f);</div><div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structGCS__MAVLINK.html#af8c46f04ef8c384de8d23c3651c1eef1">handle_command_do_set_roi</a>(roi_loc);</div><div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;}</div><div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;</div><div class="line"><a name="l04136"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a4d80b10aa220076c5000b28059ce9997"> 4136</a></span>&#160;MAV_RESULT <a class="code" href="structGCS__MAVLINK.html#af8c46f04ef8c384de8d23c3651c1eef1">GCS_MAVLINK::handle_command_do_set_roi</a>(<span class="keyword">const</span> mavlink_command_long_t &amp;packet)</div><div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;{</div><div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;    <span class="comment">// be aware that this method is called for both MAV_CMD_DO_SET_ROI</span></div><div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;    <span class="comment">// and MAV_CMD_DO_SET_ROI_LOCATION.  If you intend to support any</span></div><div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;    <span class="comment">// of the extra fields in the former then you will need to split</span></div><div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;    <span class="comment">// off support for MAV_CMD_DO_SET_ROI_LOCATION (which doesn&#39;t</span></div><div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;    <span class="comment">// support the extra fields).</span></div><div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;</div><div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;    <a class="code" href="classLocation.html">Location</a> roi_loc;</div><div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;    roi_loc.<a class="code" href="classLocation.html#ae51548c2cf32311043ca19b94b9a9223">lat</a> = (int32_t)(packet.param5 * 1.0e7f);</div><div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160;    roi_loc.<a class="code" href="classLocation.html#a5831f0aca9e51a15adb96fad465f72f8">lng</a> = (int32_t)(packet.param6 * 1.0e7f);</div><div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;    roi_loc.<a class="code" href="classLocation.html#a89e532f5bcc13db2f51ff9eed667c2b6">alt</a> = (int32_t)(packet.param7 * 100.0f);</div><div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structGCS__MAVLINK.html#af8c46f04ef8c384de8d23c3651c1eef1">handle_command_do_set_roi</a>(roi_loc);</div><div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;}</div><div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;</div><div class="line"><a name="l04151"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a2de5c17edcd69201f39b10feec9acbf2"> 4151</a></span>&#160;MAV_RESULT <a class="code" href="structGCS__MAVLINK.html#a2de5c17edcd69201f39b10feec9acbf2">GCS_MAVLINK::handle_command_int_packet</a>(<span class="keyword">const</span> mavlink_command_int_t &amp;packet)</div><div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;{</div><div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;    <span class="keywordflow">switch</span> (packet.command) {</div><div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_DO_SET_ROI:</div><div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_DO_SET_ROI_LOCATION:</div><div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="structGCS__MAVLINK.html#af8c46f04ef8c384de8d23c3651c1eef1">handle_command_do_set_roi</a>(packet);</div><div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;    <span class="keywordflow">case</span> MAV_CMD_DO_SET_HOME:</div><div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="structGCS__MAVLINK.html#ad1b9e681a5c3a530e5522abfaac80a26">handle_command_int_do_set_home</a>(packet);</div><div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;    }</div><div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;    <span class="keywordflow">return</span> MAV_RESULT_UNSUPPORTED;</div><div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;}</div><div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;</div><div class="line"><a name="l04165"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a080b5b10d6792fae80833aa9bbca2569"> 4165</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a080b5b10d6792fae80833aa9bbca2569">GCS_MAVLINK::handle_command_int</a>(mavlink_message_t *msg)</div><div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;{</div><div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;    <span class="comment">// decode packet</span></div><div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;    mavlink_command_int_t packet;</div><div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;    mavlink_msg_command_int_decode(msg, &amp;packet);</div><div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;</div><div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;    <a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#a9337a60383f4264fa96a20dbe43a4e2e">util</a>-&gt;<a class="code" href="classAP__HAL_1_1Util.html#a64273fdab59825cea305a403054c25bf">persistent_data</a>.<a class="code" href="structAP__HAL_1_1Util_1_1PersistentData.html#aad66d8d6bbb9ff51d10c38b84fa74824">last_mavlink_cmd</a> = packet.command;</div><div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;</div><div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;    <span class="keyword">const</span> MAV_RESULT <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a> = <a class="code" href="structGCS__MAVLINK.html#a2de5c17edcd69201f39b10feec9acbf2">handle_command_int_packet</a>(packet);</div><div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;</div><div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;    <span class="comment">// send ACK or NAK</span></div><div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;    mavlink_msg_command_ack_send(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>, packet.command, <a class="code" href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a>);</div><div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;</div><div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;    <a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#a9337a60383f4264fa96a20dbe43a4e2e">util</a>-&gt;<a class="code" href="classAP__HAL_1_1Util.html#a64273fdab59825cea305a403054c25bf">persistent_data</a>.<a class="code" href="structAP__HAL_1_1Util_1_1PersistentData.html#aad66d8d6bbb9ff51d10c38b84fa74824">last_mavlink_cmd</a> = 0;</div><div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;}</div><div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;</div><div class="line"><a name="l04181"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a8dcfcf18e3ea3e611870669adb57f6e7"> 4181</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="structGCS__MAVLINK.html#a8dcfcf18e3ea3e611870669adb57f6e7">GCS_MAVLINK::try_send_compass_message</a>(<span class="keyword">const</span> <span class="keyword">enum</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991">ap_message</a> <span class="keywordtype">id</span>)</div><div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;{</div><div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;    <a class="code" href="classCompass.html">Compass</a> &amp;<a class="code" href="AHRS__Test_8cpp.html#a58b8e143b1d5e3b2c1048c94ffa16ee2">compass</a> = <a class="code" href="namespaceAP.html#ab9d0bcbec954b6c20abd8e13e6de7356">AP::compass</a>();</div><div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;    <span class="keywordtype">bool</span> ret = <span class="keyword">true</span>;</div><div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160;    <span class="keywordflow">switch</span> (<span class="keywordtype">id</span>) {</div><div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a3c88ebe543de65cbff2cda10622c016f">MSG_MAG_CAL_PROGRESS</a>:</div><div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;        <a class="code" href="AHRS__Test_8cpp.html#a58b8e143b1d5e3b2c1048c94ffa16ee2">compass</a>.<a class="code" href="classCompass.html#aa81dfaba861a7072aac805e6cbae25d4">send_mag_cal_progress</a>(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>);</div><div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;        ret = <span class="keyword">true</span>;;</div><div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a0e50f472a0810b781212091a1ec7757c">MSG_MAG_CAL_REPORT</a>:</div><div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;        <a class="code" href="AHRS__Test_8cpp.html#a58b8e143b1d5e3b2c1048c94ffa16ee2">compass</a>.<a class="code" href="classCompass.html#a17d18b7b6d4fd415595d63d4741d4e83">send_mag_cal_report</a>(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>);</div><div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;        ret = <span class="keyword">true</span>;</div><div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;        ret = <span class="keyword">true</span>;</div><div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;    }</div><div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;    <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160;}</div><div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160;</div><div class="line"><a name="l04201"></a><span class="lineno"><a class="line" href="classGCS.html#ae64fa32af9663333bc2477fa5bf7b490"> 4201</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classGCS.html#ae64fa32af9663333bc2477fa5bf7b490">GCS::try_send_queued_message_for_type</a>(MAV_MISSION_TYPE <a class="code" href="structtype.html">type</a>) {</div><div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;    <a class="code" href="classMissionItemProtocol.html">MissionItemProtocol</a> *prot = <a class="code" href="classGCS.html#aed6a0f9e19a4077461d2eafee723e8b0">get_prot_for_mission_type</a>(<a class="code" href="structtype.html">type</a>);</div><div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;    <span class="keywordflow">if</span> (prot == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;    }</div><div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;    prot-&gt;<a class="code" href="classMissionItemProtocol.html#af7af44856eb9316f160b1a6fbe22f263">queued_request_send</a>();</div><div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;}</div><div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;</div><div class="line"><a name="l04209"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#ab0fc102dcf76a7e807f1e2497d43afdf"> 4209</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="structGCS__MAVLINK.html#ab0fc102dcf76a7e807f1e2497d43afdf">GCS_MAVLINK::try_send_mission_message</a>(<span class="keyword">const</span> <span class="keyword">enum</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991">ap_message</a> <span class="keywordtype">id</span>)</div><div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160;{</div><div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;    <a class="code" href="classAP__Mission.html">AP_Mission</a> *<a class="code" href="namespaceAP.html#a67bce6e94b1af5e88d027330df5d8eca">mission</a> = <a class="code" href="namespaceAP.html#a67bce6e94b1af5e88d027330df5d8eca">AP::mission</a>();</div><div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespaceAP.html#a67bce6e94b1af5e88d027330df5d8eca">mission</a> == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160;    }</div><div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160;</div><div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160;    <span class="keywordtype">bool</span> ret = <span class="keyword">true</span>;</div><div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160;    <span class="keywordflow">switch</span> (<span class="keywordtype">id</span>) {</div><div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a6a14481a31e91d7aa41f6da668fbd792">MSG_CURRENT_WAYPOINT</a>:</div><div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(MISSION_CURRENT);</div><div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;        mavlink_msg_mission_current_send(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>, <a class="code" href="namespaceAP.html#a67bce6e94b1af5e88d027330df5d8eca">mission</a>-&gt;<a class="code" href="classAP__Mission.html#a631c1e64dcae05e22112360c6f20855f">get_current_nav_index</a>());</div><div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;        ret = <span class="keyword">true</span>;</div><div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a582437196b32d4486ddd95fa10e31bcd">MSG_MISSION_ITEM_REACHED</a>:</div><div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(MISSION_ITEM_REACHED);</div><div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;        mavlink_msg_mission_item_reached_send(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>, <a class="code" href="structGCS__MAVLINK.html#a271d9d2295f7d2eab79b8f23a7191542">mission_item_reached_index</a>);</div><div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;        ret = <span class="keyword">true</span>;</div><div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a0914d9b9c0654977fa3edd375b0d07ba">MSG_NEXT_MISSION_REQUEST_WAYPOINTS</a>:</div><div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(MISSION_REQUEST);</div><div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;        <a class="code" href="GCS__Common_8cpp.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a>().<a class="code" href="classGCS.html#ae64fa32af9663333bc2477fa5bf7b490">try_send_queued_message_for_type</a>(MAV_MISSION_TYPE_MISSION);</div><div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;        ret = <span class="keyword">true</span>;</div><div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a9e75afa34cdb7e71a4f6069d53e84b27">MSG_NEXT_MISSION_REQUEST_RALLY</a>:</div><div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(MISSION_REQUEST);</div><div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;        <a class="code" href="GCS__Common_8cpp.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a>().<a class="code" href="classGCS.html#ae64fa32af9663333bc2477fa5bf7b490">try_send_queued_message_for_type</a>(MAV_MISSION_TYPE_RALLY);</div><div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;        ret = <span class="keyword">true</span>;</div><div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;        ret = <span class="keyword">true</span>;</div><div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160;    }</div><div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;    <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;}</div><div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;</div><div class="line"><a name="l04245"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a653b18d5067a9fc69367eeefd2d7663e"> 4245</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a653b18d5067a9fc69367eeefd2d7663e">GCS_MAVLINK::send_hwstatus</a>()</div><div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;{</div><div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;    mavlink_msg_hwstatus_send(</div><div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l04249"></a><span class="lineno"> 4249</span>&#160;        <a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#a48a758dbd587c916aa4f5ea5ae9521e4">analogin</a>-&gt;<a class="code" href="classAP__HAL_1_1AnalogIn.html#a84c87bc57f06182afc85725cafe22698">board_voltage</a>()*1000,</div><div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160;        0);</div><div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;}</div><div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;</div><div class="line"><a name="l04253"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#acac9b00eb3bd1cd6685f3b4e5db51b26"> 4253</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#acac9b00eb3bd1cd6685f3b4e5db51b26">GCS_MAVLINK::send_rpm</a>()<span class="keyword"> const</span></div><div class="line"><a name="l04254"></a><span class="lineno"> 4254</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l04255"></a><span class="lineno"> 4255</span>&#160;    <a class="code" href="classAP__RPM.html">AP_RPM</a> *<a class="code" href="namespaceAP.html#ad5986df034b9156395fea23c11cb2210">rpm</a> = <a class="code" href="namespaceAP.html#ad5986df034b9156395fea23c11cb2210">AP::rpm</a>();</div><div class="line"><a name="l04256"></a><span class="lineno"> 4256</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespaceAP.html#ad5986df034b9156395fea23c11cb2210">rpm</a> == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l04257"></a><span class="lineno"> 4257</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l04258"></a><span class="lineno"> 4258</span>&#160;    }</div><div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160;</div><div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespaceAP.html#ad5986df034b9156395fea23c11cb2210">rpm</a>-&gt;<a class="code" href="classAP__RPM.html#a76ecca7a584a760e39be09ba29dcbdeb">enabled</a>(0) &amp;&amp; !<a class="code" href="namespaceAP.html#ad5986df034b9156395fea23c11cb2210">rpm</a>-&gt;<a class="code" href="classAP__RPM.html#a76ecca7a584a760e39be09ba29dcbdeb">enabled</a>(1)) {</div><div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160;    }</div><div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160;</div><div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160;    mavlink_msg_rpm_send(</div><div class="line"><a name="l04265"></a><span class="lineno"> 4265</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l04266"></a><span class="lineno"> 4266</span>&#160;        <a class="code" href="namespaceAP.html#ad5986df034b9156395fea23c11cb2210">rpm</a>-&gt;<a class="code" href="classAP__RPM.html#a6222178dcb331b70cbf292cbba8fd8eb">get_rpm</a>(0),</div><div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160;        <a class="code" href="namespaceAP.html#ad5986df034b9156395fea23c11cb2210">rpm</a>-&gt;<a class="code" href="classAP__RPM.html#a6222178dcb331b70cbf292cbba8fd8eb">get_rpm</a>(1));</div><div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;}</div><div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160;</div><div class="line"><a name="l04270"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#aa5be0175cd3488cff905d41913f8fd3f"> 4270</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#aa5be0175cd3488cff905d41913f8fd3f">GCS_MAVLINK::send_sys_status</a>()</div><div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160;{</div><div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160;    <span class="comment">// send extended status only once vehicle has been initialised</span></div><div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160;    <span class="comment">// to avoid unnecessary errors being reported to user</span></div><div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="GCS__Common_8cpp.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a>().vehicle_initialised()) {</div><div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l04276"></a><span class="lineno"> 4276</span>&#160;    }</div><div class="line"><a name="l04277"></a><span class="lineno"> 4277</span>&#160;</div><div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160;    int16_t battery_current = -1;</div><div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160;    int8_t battery_remaining = -1;</div><div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160;</div><div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160;    <span class="keyword">const</span> <a class="code" href="classAP__BattMonitor.html">AP_BattMonitor</a> &amp;<a class="code" href="namespaceAP.html#aac3bcb68bcccad29cc493b878aef055e">battery</a> = <a class="code" href="namespaceAP.html#aac3bcb68bcccad29cc493b878aef055e">AP::battery</a>();</div><div class="line"><a name="l04282"></a><span class="lineno"> 4282</span>&#160;</div><div class="line"><a name="l04283"></a><span class="lineno"> 4283</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespaceAP.html#aac3bcb68bcccad29cc493b878aef055e">battery</a>.<a class="code" href="classAP__BattMonitor.html#a686b822215badd97a701bf3d391e95c0">has_current</a>() &amp;&amp; <a class="code" href="namespaceAP.html#aac3bcb68bcccad29cc493b878aef055e">battery</a>.<a class="code" href="classAP__BattMonitor.html#a9d4b297f1efacb5bbad0679579b384aa">healthy</a>()) {</div><div class="line"><a name="l04284"></a><span class="lineno"> 4284</span>&#160;        battery_remaining = <a class="code" href="namespaceAP.html#aac3bcb68bcccad29cc493b878aef055e">battery</a>.<a class="code" href="classAP__BattMonitor.html#afdc523c75aff5beed8f8e34a33c8736d">capacity_remaining_pct</a>();</div><div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160;        battery_current = <a class="code" href="namespaceAP.html#aac3bcb68bcccad29cc493b878aef055e">battery</a>.<a class="code" href="classAP__BattMonitor.html#a280ff28558f03d85c6090321287bdd77">current_amps</a>() * 100;</div><div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160;    }</div><div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;</div><div class="line"><a name="l04288"></a><span class="lineno"> 4288</span>&#160;    uint32_t control_sensors_present;</div><div class="line"><a name="l04289"></a><span class="lineno"> 4289</span>&#160;    uint32_t control_sensors_enabled;</div><div class="line"><a name="l04290"></a><span class="lineno"> 4290</span>&#160;    uint32_t control_sensors_health;</div><div class="line"><a name="l04291"></a><span class="lineno"> 4291</span>&#160;</div><div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160;    <a class="code" href="GCS__Common_8cpp.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a>().<a class="code" href="classGCS.html#aacaf8dfffa2f8c3d542705a9b62206a3">get_sensor_status_flags</a>(control_sensors_present, control_sensors_enabled, control_sensors_health);</div><div class="line"><a name="l04293"></a><span class="lineno"> 4293</span>&#160;</div><div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160;    <span class="keyword">const</span> uint32_t errors = <a class="code" href="namespaceAP.html#afceb236ff617aaaa2b08afacd72532b0">AP::internalerror</a>().<a class="code" href="classAP__InternalError.html#a4396aa49ba2d14f80df61bfbd9c17de3">errors</a>();</div><div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160;    <span class="keyword">const</span> uint16_t errors1 = errors &amp; 0xffff;</div><div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;    <span class="keyword">const</span> uint16_t errors2 = (errors&gt;&gt;16) &amp; 0xffff;</div><div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160;    <span class="keyword">const</span> uint16_t errors4 = <a class="code" href="namespaceAP.html#afceb236ff617aaaa2b08afacd72532b0">AP::internalerror</a>().<a class="code" href="classAP__InternalError.html#a1f7f14a65194ec4df6fb0f155f59a55a">count</a>() &amp; 0xffff;</div><div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160;</div><div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;    mavlink_msg_sys_status_send(</div><div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;        control_sensors_present,</div><div class="line"><a name="l04302"></a><span class="lineno"> 4302</span>&#160;        control_sensors_enabled,</div><div class="line"><a name="l04303"></a><span class="lineno"> 4303</span>&#160;        control_sensors_health,</div><div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160;        static_cast&lt;uint16_t&gt;(<a class="code" href="namespaceAP.html#acdeafe5406efd2650ba54d24d3aecb7c">AP::scheduler</a>().load_average() * 1000),</div><div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160;        <a class="code" href="namespaceAP.html#aac3bcb68bcccad29cc493b878aef055e">battery</a>.<a class="code" href="classAP__BattMonitor.html#a03394a700753687bbb87632743cc2bb3">voltage</a>() * 1000,  <span class="comment">// mV</span></div><div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160;        battery_current,        <span class="comment">// in 10mA units</span></div><div class="line"><a name="l04307"></a><span class="lineno"> 4307</span>&#160;        battery_remaining,      <span class="comment">// in %</span></div><div class="line"><a name="l04308"></a><span class="lineno"> 4308</span>&#160;        0,  <span class="comment">// comm drops %,</span></div><div class="line"><a name="l04309"></a><span class="lineno"> 4309</span>&#160;        0,  <span class="comment">// comm drops in pkts,</span></div><div class="line"><a name="l04310"></a><span class="lineno"> 4310</span>&#160;        errors1,</div><div class="line"><a name="l04311"></a><span class="lineno"> 4311</span>&#160;        errors2,</div><div class="line"><a name="l04312"></a><span class="lineno"> 4312</span>&#160;        0,  <span class="comment">// errors3</span></div><div class="line"><a name="l04313"></a><span class="lineno"> 4313</span>&#160;        errors4); <span class="comment">// errors4</span></div><div class="line"><a name="l04314"></a><span class="lineno"> 4314</span>&#160;}</div><div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160;</div><div class="line"><a name="l04316"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#aa417e1ce8bac9601fdc1d239f1b0dd55"> 4316</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#aa417e1ce8bac9601fdc1d239f1b0dd55">GCS_MAVLINK::send_extended_sys_state</a>()<span class="keyword"> const</span></div><div class="line"><a name="l04317"></a><span class="lineno"> 4317</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l04318"></a><span class="lineno"> 4318</span>&#160;    mavlink_msg_extended_sys_state_send(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>, <a class="code" href="structGCS__MAVLINK.html#ab92bda7b9cd97acd8cbeed37f6cc2523">vtol_state</a>(), <a class="code" href="structGCS__MAVLINK.html#a348b56e82e0531e38631b87cdc6715c2">landed_state</a>());</div><div class="line"><a name="l04319"></a><span class="lineno"> 4319</span>&#160;}</div><div class="line"><a name="l04320"></a><span class="lineno"> 4320</span>&#160;</div><div class="line"><a name="l04321"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a07fa470686562809a0dedbccd1174cc4"> 4321</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a07fa470686562809a0dedbccd1174cc4">GCS_MAVLINK::send_attitude</a>()<span class="keyword"> const</span></div><div class="line"><a name="l04322"></a><span class="lineno"> 4322</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l04323"></a><span class="lineno"> 4323</span>&#160;    <span class="keyword">const</span> <a class="code" href="classAP__AHRS.html">AP_AHRS</a> &amp;<a class="code" href="AHRS__Test_8cpp.html#a7da610c2722190575e0ded7e4204d743">ahrs</a> = <a class="code" href="namespaceAP.html#a99432cfdb696952c9b7146f155a815aa">AP::ahrs</a>();</div><div class="line"><a name="l04324"></a><span class="lineno"> 4324</span>&#160;    <span class="keyword">const</span> <a class="code" href="classVector3.html">Vector3f</a> omega = <a class="code" href="AHRS__Test_8cpp.html#a7da610c2722190575e0ded7e4204d743">ahrs</a>.<a class="code" href="classAP__AHRS__NavEKF.html#a86244462b889fe1b5a69c438a2cdbd46">get_gyro</a>();</div><div class="line"><a name="l04325"></a><span class="lineno"> 4325</span>&#160;    mavlink_msg_attitude_send(</div><div class="line"><a name="l04326"></a><span class="lineno"> 4326</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l04327"></a><span class="lineno"> 4327</span>&#160;        <a class="code" href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a>(),</div><div class="line"><a name="l04328"></a><span class="lineno"> 4328</span>&#160;        <a class="code" href="AHRS__Test_8cpp.html#a7da610c2722190575e0ded7e4204d743">ahrs</a>.<a class="code" href="classAP__AHRS.html#a384a23e205126cf43e91bec9668b7ed0">roll</a>,</div><div class="line"><a name="l04329"></a><span class="lineno"> 4329</span>&#160;        <a class="code" href="AHRS__Test_8cpp.html#a7da610c2722190575e0ded7e4204d743">ahrs</a>.<a class="code" href="classAP__AHRS.html#a2aa61744614d8e0ef64803583359a56e">pitch</a>,</div><div class="line"><a name="l04330"></a><span class="lineno"> 4330</span>&#160;        <a class="code" href="AHRS__Test_8cpp.html#a7da610c2722190575e0ded7e4204d743">ahrs</a>.<a class="code" href="classAP__AHRS.html#a63359ca9325c63642050bcf1c3e1cd63">yaw</a>,</div><div class="line"><a name="l04331"></a><span class="lineno"> 4331</span>&#160;        omega.<a class="code" href="classVector3.html#a1a0f7e168c71ca798099f0ba8a444244">x</a>,</div><div class="line"><a name="l04332"></a><span class="lineno"> 4332</span>&#160;        omega.<a class="code" href="classVector3.html#a561df88b28e106e337a25bb86554a569">y</a>,</div><div class="line"><a name="l04333"></a><span class="lineno"> 4333</span>&#160;        omega.<a class="code" href="classVector3.html#ab3e7f5401dd6e951978bfa746809f74f">z</a>);</div><div class="line"><a name="l04334"></a><span class="lineno"> 4334</span>&#160;}</div><div class="line"><a name="l04335"></a><span class="lineno"> 4335</span>&#160;</div><div class="line"><a name="l04336"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a5e7cf1f9924831f616bcba8f884d38e4"> 4336</a></span>&#160;int32_t <a class="code" href="structGCS__MAVLINK.html#a5e7cf1f9924831f616bcba8f884d38e4">GCS_MAVLINK::global_position_int_alt</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l04337"></a><span class="lineno"> 4337</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structGCS__MAVLINK.html#aba66df4511a3307badb689d3768ba166">global_position_current_loc</a>.<a class="code" href="classLocation.html#a89e532f5bcc13db2f51ff9eed667c2b6">alt</a> * 10UL;</div><div class="line"><a name="l04338"></a><span class="lineno"> 4338</span>&#160;}</div><div class="line"><a name="l04339"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a47a95e0408b12f075a8ad043ac1ebcd4"> 4339</a></span>&#160;int32_t <a class="code" href="structGCS__MAVLINK.html#a47a95e0408b12f075a8ad043ac1ebcd4">GCS_MAVLINK::global_position_int_relative_alt</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l04340"></a><span class="lineno"> 4340</span>&#160;    <span class="keywordtype">float</span> posD;</div><div class="line"><a name="l04341"></a><span class="lineno"> 4341</span>&#160;    <a class="code" href="namespaceAP.html#a99432cfdb696952c9b7146f155a815aa">AP::ahrs</a>().<a class="code" href="classAP__AHRS.html#a6573f5db06887fb66661ecb18e03ec3f">get_relative_position_D_home</a>(posD);</div><div class="line"><a name="l04342"></a><span class="lineno"> 4342</span>&#160;    posD *= -1000.0f; <span class="comment">// change from down to up and metres to millimeters</span></div><div class="line"><a name="l04343"></a><span class="lineno"> 4343</span>&#160;    <span class="keywordflow">return</span> posD;</div><div class="line"><a name="l04344"></a><span class="lineno"> 4344</span>&#160;}</div><div class="line"><a name="l04345"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a54799f0dccf195b8bdf6d095db0e59ad"> 4345</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a54799f0dccf195b8bdf6d095db0e59ad">GCS_MAVLINK::send_global_position_int</a>()</div><div class="line"><a name="l04346"></a><span class="lineno"> 4346</span>&#160;{</div><div class="line"><a name="l04347"></a><span class="lineno"> 4347</span>&#160;    <a class="code" href="classAP__AHRS.html">AP_AHRS</a> &amp;<a class="code" href="AHRS__Test_8cpp.html#a7da610c2722190575e0ded7e4204d743">ahrs</a> = <a class="code" href="namespaceAP.html#a99432cfdb696952c9b7146f155a815aa">AP::ahrs</a>();</div><div class="line"><a name="l04348"></a><span class="lineno"> 4348</span>&#160;</div><div class="line"><a name="l04349"></a><span class="lineno"> 4349</span>&#160;    <a class="code" href="AHRS__Test_8cpp.html#a7da610c2722190575e0ded7e4204d743">ahrs</a>.<a class="code" href="classAP__AHRS__NavEKF.html#a5b5c5de012442fd1c6c2f66b5148d313">get_position</a>(<a class="code" href="structGCS__MAVLINK.html#aba66df4511a3307badb689d3768ba166">global_position_current_loc</a>); <span class="comment">// return value ignored; we send stale data</span></div><div class="line"><a name="l04350"></a><span class="lineno"> 4350</span>&#160;</div><div class="line"><a name="l04351"></a><span class="lineno"> 4351</span>&#160;    <a class="code" href="classVector3.html">Vector3f</a> vel;</div><div class="line"><a name="l04352"></a><span class="lineno"> 4352</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="AHRS__Test_8cpp.html#a7da610c2722190575e0ded7e4204d743">ahrs</a>.<a class="code" href="classAP__AHRS__NavEKF.html#a908ee6995ad1a06f8c9c88d8f185c1af">get_velocity_NED</a>(vel)) {</div><div class="line"><a name="l04353"></a><span class="lineno"> 4353</span>&#160;        vel.<a class="code" href="classVector3.html#adf1769d5ee5df2f8585df2f540fa5efe">zero</a>();</div><div class="line"><a name="l04354"></a><span class="lineno"> 4354</span>&#160;    }</div><div class="line"><a name="l04355"></a><span class="lineno"> 4355</span>&#160;</div><div class="line"><a name="l04356"></a><span class="lineno"> 4356</span>&#160;    mavlink_msg_global_position_int_send(</div><div class="line"><a name="l04357"></a><span class="lineno"> 4357</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l04358"></a><span class="lineno"> 4358</span>&#160;        <a class="code" href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a>(),</div><div class="line"><a name="l04359"></a><span class="lineno"> 4359</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#aba66df4511a3307badb689d3768ba166">global_position_current_loc</a>.<a class="code" href="classLocation.html#ae51548c2cf32311043ca19b94b9a9223">lat</a>, <span class="comment">// in 1E7 degrees</span></div><div class="line"><a name="l04360"></a><span class="lineno"> 4360</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#aba66df4511a3307badb689d3768ba166">global_position_current_loc</a>.<a class="code" href="classLocation.html#a5831f0aca9e51a15adb96fad465f72f8">lng</a>, <span class="comment">// in 1E7 degrees</span></div><div class="line"><a name="l04361"></a><span class="lineno"> 4361</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a5e7cf1f9924831f616bcba8f884d38e4">global_position_int_alt</a>(),       <span class="comment">// millimeters above ground/sea level</span></div><div class="line"><a name="l04362"></a><span class="lineno"> 4362</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a47a95e0408b12f075a8ad043ac1ebcd4">global_position_int_relative_alt</a>(), <span class="comment">// millimeters above home</span></div><div class="line"><a name="l04363"></a><span class="lineno"> 4363</span>&#160;        vel.<a class="code" href="classVector3.html#a1a0f7e168c71ca798099f0ba8a444244">x</a> * 100,                     <span class="comment">// X speed cm/s (+ve North)</span></div><div class="line"><a name="l04364"></a><span class="lineno"> 4364</span>&#160;        vel.<a class="code" href="classVector3.html#a561df88b28e106e337a25bb86554a569">y</a> * 100,                     <span class="comment">// Y speed cm/s (+ve East)</span></div><div class="line"><a name="l04365"></a><span class="lineno"> 4365</span>&#160;        vel.<a class="code" href="classVector3.html#ab3e7f5401dd6e951978bfa746809f74f">z</a> * 100,                     <span class="comment">// Z speed cm/s (+ve Down)</span></div><div class="line"><a name="l04366"></a><span class="lineno"> 4366</span>&#160;        <a class="code" href="AHRS__Test_8cpp.html#a7da610c2722190575e0ded7e4204d743">ahrs</a>.<a class="code" href="classAP__AHRS.html#a8a160130dd99016a19abab9d85917261">yaw_sensor</a>);                <span class="comment">// compass heading in 1/100 degree</span></div><div class="line"><a name="l04367"></a><span class="lineno"> 4367</span>&#160;}</div><div class="line"><a name="l04368"></a><span class="lineno"> 4368</span>&#160;</div><div class="line"><a name="l04369"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#af6ed021236bfe75ff8ca02e3889013bb"> 4369</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#af6ed021236bfe75ff8ca02e3889013bb">GCS_MAVLINK::send_gimbal_report</a>()<span class="keyword"> const</span></div><div class="line"><a name="l04370"></a><span class="lineno"> 4370</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l04371"></a><span class="lineno"> 4371</span>&#160;    <a class="code" href="classAP__Mount.html">AP_Mount</a> *<a class="code" href="namespaceAP.html#aa6f0d760efc796d0ad5345d3acc377b8">mount</a> = <a class="code" href="namespaceAP.html#aa6f0d760efc796d0ad5345d3acc377b8">AP::mount</a>();</div><div class="line"><a name="l04372"></a><span class="lineno"> 4372</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespaceAP.html#aa6f0d760efc796d0ad5345d3acc377b8">mount</a> == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l04373"></a><span class="lineno"> 4373</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l04374"></a><span class="lineno"> 4374</span>&#160;    }</div><div class="line"><a name="l04375"></a><span class="lineno"> 4375</span>&#160;    <a class="code" href="namespaceAP.html#aa6f0d760efc796d0ad5345d3acc377b8">mount</a>-&gt;<a class="code" href="classAP__Mount.html#af8f376cbf1c77af36fc4603921c5bb7a">send_gimbal_report</a>(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>);</div><div class="line"><a name="l04376"></a><span class="lineno"> 4376</span>&#160;}</div><div class="line"><a name="l04377"></a><span class="lineno"> 4377</span>&#160;</div><div class="line"><a name="l04378"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#ab1a181db52459069be4b570f2cdd83c7"> 4378</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#ab1a181db52459069be4b570f2cdd83c7">GCS_MAVLINK::send_mount_status</a>()<span class="keyword"> const</span></div><div class="line"><a name="l04379"></a><span class="lineno"> 4379</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l04380"></a><span class="lineno"> 4380</span>&#160;    <a class="code" href="classAP__Mount.html">AP_Mount</a> *<a class="code" href="namespaceAP.html#aa6f0d760efc796d0ad5345d3acc377b8">mount</a> = <a class="code" href="namespaceAP.html#aa6f0d760efc796d0ad5345d3acc377b8">AP::mount</a>();</div><div class="line"><a name="l04381"></a><span class="lineno"> 4381</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespaceAP.html#aa6f0d760efc796d0ad5345d3acc377b8">mount</a> == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l04382"></a><span class="lineno"> 4382</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l04383"></a><span class="lineno"> 4383</span>&#160;    }</div><div class="line"><a name="l04384"></a><span class="lineno"> 4384</span>&#160;    <a class="code" href="namespaceAP.html#aa6f0d760efc796d0ad5345d3acc377b8">mount</a>-&gt;<a class="code" href="classAP__Mount.html#a415edaa4d8df1d4b17e3bcd49f96ea11">send_mount_status</a>(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>);</div><div class="line"><a name="l04385"></a><span class="lineno"> 4385</span>&#160;}</div><div class="line"><a name="l04386"></a><span class="lineno"> 4386</span>&#160;</div><div class="line"><a name="l04387"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#aee84d7757e12e04e2a10466f4a7cdfd9"> 4387</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#aee84d7757e12e04e2a10466f4a7cdfd9">GCS_MAVLINK::send_set_position_target_global_int</a>(uint8_t target_system, uint8_t target_component, <span class="keyword">const</span> <a class="code" href="classLocation.html">Location</a>&amp; loc)</div><div class="line"><a name="l04388"></a><span class="lineno"> 4388</span>&#160;{</div><div class="line"><a name="l04389"></a><span class="lineno"> 4389</span>&#160;</div><div class="line"><a name="l04390"></a><span class="lineno"> 4390</span>&#160;    <span class="keyword">const</span> uint16_t type_mask = POSITION_TARGET_TYPEMASK_VX_IGNORE | POSITION_TARGET_TYPEMASK_VY_IGNORE | POSITION_TARGET_TYPEMASK_VZ_IGNORE | \</div><div class="line"><a name="l04391"></a><span class="lineno"> 4391</span>&#160;                               POSITION_TARGET_TYPEMASK_AX_IGNORE | POSITION_TARGET_TYPEMASK_AY_IGNORE | POSITION_TARGET_TYPEMASK_AZ_IGNORE | \</div><div class="line"><a name="l04392"></a><span class="lineno"> 4392</span>&#160;                               POSITION_TARGET_TYPEMASK_YAW_IGNORE | POSITION_TARGET_TYPEMASK_YAW_RATE_IGNORE;</div><div class="line"><a name="l04393"></a><span class="lineno"> 4393</span>&#160;</div><div class="line"><a name="l04394"></a><span class="lineno"> 4394</span>&#160;    <span class="comment">// convert altitude to relative to home</span></div><div class="line"><a name="l04395"></a><span class="lineno"> 4395</span>&#160;    int32_t rel_alt;</div><div class="line"><a name="l04396"></a><span class="lineno"> 4396</span>&#160;    <span class="keywordflow">if</span> (!loc.<a class="code" href="classLocation.html#a0b8a5317ad6b631a7a82c52b258fec1f">get_alt_cm</a>(<a class="code" href="classLocation.html#af494dabb88cd43e0d4efa99f04d31351adc2241348a103ecefcef66579c80336f">Location::AltFrame::ABOVE_HOME</a>, rel_alt)) {</div><div class="line"><a name="l04397"></a><span class="lineno"> 4397</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160;    }</div><div class="line"><a name="l04399"></a><span class="lineno"> 4399</span>&#160;</div><div class="line"><a name="l04400"></a><span class="lineno"> 4400</span>&#160;    mavlink_msg_set_position_target_global_int_send(</div><div class="line"><a name="l04401"></a><span class="lineno"> 4401</span>&#160;            <a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>,</div><div class="line"><a name="l04402"></a><span class="lineno"> 4402</span>&#160;            <a class="code" href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a>(),</div><div class="line"><a name="l04403"></a><span class="lineno"> 4403</span>&#160;            target_system,</div><div class="line"><a name="l04404"></a><span class="lineno"> 4404</span>&#160;            target_component,</div><div class="line"><a name="l04405"></a><span class="lineno"> 4405</span>&#160;            MAV_FRAME_GLOBAL_RELATIVE_ALT_INT,</div><div class="line"><a name="l04406"></a><span class="lineno"> 4406</span>&#160;            type_mask,</div><div class="line"><a name="l04407"></a><span class="lineno"> 4407</span>&#160;            loc.<a class="code" href="classLocation.html#ae51548c2cf32311043ca19b94b9a9223">lat</a>,</div><div class="line"><a name="l04408"></a><span class="lineno"> 4408</span>&#160;            loc.<a class="code" href="classLocation.html#a5831f0aca9e51a15adb96fad465f72f8">lng</a>,</div><div class="line"><a name="l04409"></a><span class="lineno"> 4409</span>&#160;            rel_alt,</div><div class="line"><a name="l04410"></a><span class="lineno"> 4410</span>&#160;            0,0,0,  <span class="comment">// vx, vy, vz</span></div><div class="line"><a name="l04411"></a><span class="lineno"> 4411</span>&#160;            0,0,0,  <span class="comment">// ax, ay, az</span></div><div class="line"><a name="l04412"></a><span class="lineno"> 4412</span>&#160;            0,0);   <span class="comment">// yaw, yaw_rate</span></div><div class="line"><a name="l04413"></a><span class="lineno"> 4413</span>&#160;}</div><div class="line"><a name="l04414"></a><span class="lineno"> 4414</span>&#160;</div><div class="line"><a name="l04415"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a30034cdbd89bcfb86392411f9b5935db"> 4415</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="structGCS__MAVLINK.html#a30034cdbd89bcfb86392411f9b5935db">GCS_MAVLINK::try_send_message</a>(<span class="keyword">const</span> <span class="keyword">enum</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991">ap_message</a> <span class="keywordtype">id</span>)</div><div class="line"><a name="l04416"></a><span class="lineno"> 4416</span>&#160;{</div><div class="line"><a name="l04417"></a><span class="lineno"> 4417</span>&#160;    <span class="keywordtype">bool</span> ret = <span class="keyword">true</span>;</div><div class="line"><a name="l04418"></a><span class="lineno"> 4418</span>&#160;</div><div class="line"><a name="l04419"></a><span class="lineno"> 4419</span>&#160;    <span class="keywordflow">switch</span>(<span class="keywordtype">id</span>) {</div><div class="line"><a name="l04420"></a><span class="lineno"> 4420</span>&#160;</div><div class="line"><a name="l04421"></a><span class="lineno"> 4421</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991ad4eedc6e33f030259108cd91c0f33f0a">MSG_ATTITUDE</a>:</div><div class="line"><a name="l04422"></a><span class="lineno"> 4422</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(ATTITUDE);</div><div class="line"><a name="l04423"></a><span class="lineno"> 4423</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a07fa470686562809a0dedbccd1174cc4">send_attitude</a>();</div><div class="line"><a name="l04424"></a><span class="lineno"> 4424</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04425"></a><span class="lineno"> 4425</span>&#160;</div><div class="line"><a name="l04426"></a><span class="lineno"> 4426</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a1d5ca2d41c5912a2b2d745603598e06b">MSG_NEXT_PARAM</a>:</div><div class="line"><a name="l04427"></a><span class="lineno"> 4427</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(PARAM_VALUE);</div><div class="line"><a name="l04428"></a><span class="lineno"> 4428</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a508b2da2af9a77f175c60cac467cec70">queued_param_send</a>();</div><div class="line"><a name="l04429"></a><span class="lineno"> 4429</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04430"></a><span class="lineno"> 4430</span>&#160;</div><div class="line"><a name="l04431"></a><span class="lineno"> 4431</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991aea3f04b4eb41ef0bab298c196c69e5c6">MSG_GIMBAL_REPORT</a>:</div><div class="line"><a name="l04432"></a><span class="lineno"> 4432</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(GIMBAL_REPORT);</div><div class="line"><a name="l04433"></a><span class="lineno"> 4433</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#af6ed021236bfe75ff8ca02e3889013bb">send_gimbal_report</a>();</div><div class="line"><a name="l04434"></a><span class="lineno"> 4434</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04435"></a><span class="lineno"> 4435</span>&#160;</div><div class="line"><a name="l04436"></a><span class="lineno"> 4436</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991aaf685040f895290768639de8386f0f75">MSG_HEARTBEAT</a>:</div><div class="line"><a name="l04437"></a><span class="lineno"> 4437</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(HEARTBEAT);</div><div class="line"><a name="l04438"></a><span class="lineno"> 4438</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a4f6a9d9c5ac83defda00c72f0da3d904">last_heartbeat_time</a> = <a class="code" href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a>();</div><div class="line"><a name="l04439"></a><span class="lineno"> 4439</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a594bdee663bf384059b643517d48da32">send_heartbeat</a>();</div><div class="line"><a name="l04440"></a><span class="lineno"> 4440</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04441"></a><span class="lineno"> 4441</span>&#160;</div><div class="line"><a name="l04442"></a><span class="lineno"> 4442</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a1e7a2c19e16925a80c620505bd2a52f6">MSG_HWSTATUS</a>:</div><div class="line"><a name="l04443"></a><span class="lineno"> 4443</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(HWSTATUS);</div><div class="line"><a name="l04444"></a><span class="lineno"> 4444</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a653b18d5067a9fc69367eeefd2d7663e">send_hwstatus</a>();</div><div class="line"><a name="l04445"></a><span class="lineno"> 4445</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04446"></a><span class="lineno"> 4446</span>&#160;</div><div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a7a1eccc78139fabd82ca8496ae66f072">MSG_LOCATION</a>:</div><div class="line"><a name="l04448"></a><span class="lineno"> 4448</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(GLOBAL_POSITION_INT);</div><div class="line"><a name="l04449"></a><span class="lineno"> 4449</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a54799f0dccf195b8bdf6d095db0e59ad">send_global_position_int</a>();</div><div class="line"><a name="l04450"></a><span class="lineno"> 4450</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04451"></a><span class="lineno"> 4451</span>&#160;</div><div class="line"><a name="l04452"></a><span class="lineno"> 4452</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991ae245f098f5ee0ec75b4dc6331f769f8f">MSG_HOME</a>:</div><div class="line"><a name="l04453"></a><span class="lineno"> 4453</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(HOME_POSITION);</div><div class="line"><a name="l04454"></a><span class="lineno"> 4454</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a747e5080afc71eee57f6c2fc58754004">send_home_position</a>();</div><div class="line"><a name="l04455"></a><span class="lineno"> 4455</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04456"></a><span class="lineno"> 4456</span>&#160;</div><div class="line"><a name="l04457"></a><span class="lineno"> 4457</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991af5b97ab8c9c725ebc1a437d5145a96d9">MSG_ORIGIN</a>:</div><div class="line"><a name="l04458"></a><span class="lineno"> 4458</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(GPS_GLOBAL_ORIGIN);</div><div class="line"><a name="l04459"></a><span class="lineno"> 4459</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#af4a0693c948bab93b5337be3c651e499">send_gps_global_origin</a>();</div><div class="line"><a name="l04460"></a><span class="lineno"> 4460</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04461"></a><span class="lineno"> 4461</span>&#160;</div><div class="line"><a name="l04462"></a><span class="lineno"> 4462</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991abb84d7bdc2da17d4cf7b7c9de283a579">MSG_RPM</a>:</div><div class="line"><a name="l04463"></a><span class="lineno"> 4463</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(<a class="code" href="RPM__generic_8cpp.html#ab06e47b0f5828988561a78a542223be2">RPM</a>);</div><div class="line"><a name="l04464"></a><span class="lineno"> 4464</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#acac9b00eb3bd1cd6685f3b4e5db51b26">send_rpm</a>();</div><div class="line"><a name="l04465"></a><span class="lineno"> 4465</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04466"></a><span class="lineno"> 4466</span>&#160;</div><div class="line"><a name="l04467"></a><span class="lineno"> 4467</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a6a14481a31e91d7aa41f6da668fbd792">MSG_CURRENT_WAYPOINT</a>:</div><div class="line"><a name="l04468"></a><span class="lineno"> 4468</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a582437196b32d4486ddd95fa10e31bcd">MSG_MISSION_ITEM_REACHED</a>:</div><div class="line"><a name="l04469"></a><span class="lineno"> 4469</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a0914d9b9c0654977fa3edd375b0d07ba">MSG_NEXT_MISSION_REQUEST_WAYPOINTS</a>:</div><div class="line"><a name="l04470"></a><span class="lineno"> 4470</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a9e75afa34cdb7e71a4f6069d53e84b27">MSG_NEXT_MISSION_REQUEST_RALLY</a>:</div><div class="line"><a name="l04471"></a><span class="lineno"> 4471</span>&#160;        ret = <a class="code" href="structGCS__MAVLINK.html#ab0fc102dcf76a7e807f1e2497d43afdf">try_send_mission_message</a>(<span class="keywordtype">id</span>);</div><div class="line"><a name="l04472"></a><span class="lineno"> 4472</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04473"></a><span class="lineno"> 4473</span>&#160;</div><div class="line"><a name="l04474"></a><span class="lineno"> 4474</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a3c88ebe543de65cbff2cda10622c016f">MSG_MAG_CAL_PROGRESS</a>:</div><div class="line"><a name="l04475"></a><span class="lineno"> 4475</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a0e50f472a0810b781212091a1ec7757c">MSG_MAG_CAL_REPORT</a>:</div><div class="line"><a name="l04476"></a><span class="lineno"> 4476</span>&#160;        ret = <a class="code" href="structGCS__MAVLINK.html#a8dcfcf18e3ea3e611870669adb57f6e7">try_send_compass_message</a>(<span class="keywordtype">id</span>);</div><div class="line"><a name="l04477"></a><span class="lineno"> 4477</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04478"></a><span class="lineno"> 4478</span>&#160;</div><div class="line"><a name="l04479"></a><span class="lineno"> 4479</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a953b154df3b239607deff1c1461c88ed">MSG_BATTERY_STATUS</a>:</div><div class="line"><a name="l04480"></a><span class="lineno"> 4480</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#acf29755bc5eab5ab6cb36b207426742f">send_battery_status</a>();</div><div class="line"><a name="l04481"></a><span class="lineno"> 4481</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04482"></a><span class="lineno"> 4482</span>&#160;</div><div class="line"><a name="l04483"></a><span class="lineno"> 4483</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a053f8e893a061490a9c1fe6c2ae10157">MSG_BATTERY2</a>:</div><div class="line"><a name="l04484"></a><span class="lineno"> 4484</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(BATTERY2);</div><div class="line"><a name="l04485"></a><span class="lineno"> 4485</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a814da55cf1114e1fd2ee470cc310e0e3">send_battery2</a>();</div><div class="line"><a name="l04486"></a><span class="lineno"> 4486</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04487"></a><span class="lineno"> 4487</span>&#160;</div><div class="line"><a name="l04488"></a><span class="lineno"> 4488</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991aca4b6be3d7289e59f079ff0a82963fe0">MSG_EKF_STATUS_REPORT</a>:</div><div class="line"><a name="l04489"></a><span class="lineno"> 4489</span>&#160;<span class="preprocessor">#if AP_AHRS_NAVEKF_AVAILABLE</span></div><div class="line"><a name="l04490"></a><span class="lineno"> 4490</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(EKF_STATUS_REPORT);</div><div class="line"><a name="l04491"></a><span class="lineno"> 4491</span>&#160;        <a class="code" href="namespaceAP.html#ab742b8c41eb0a08e79d6fbec520a87a4">AP::ahrs_navekf</a>().<a class="code" href="classAP__AHRS__NavEKF.html#a087f9c90645ceabd1fd453fac7caa8dd">send_ekf_status_report</a>(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>);</div><div class="line"><a name="l04492"></a><span class="lineno"> 4492</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04493"></a><span class="lineno"> 4493</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04494"></a><span class="lineno"> 4494</span>&#160;</div><div class="line"><a name="l04495"></a><span class="lineno"> 4495</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a272f1bc1b83c115d1447c95d965a8184">MSG_MEMINFO</a>:</div><div class="line"><a name="l04496"></a><span class="lineno"> 4496</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(MEMINFO);</div><div class="line"><a name="l04497"></a><span class="lineno"> 4497</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#af4e400a4a17773e5a8bbae3993911bf8">send_meminfo</a>();</div><div class="line"><a name="l04498"></a><span class="lineno"> 4498</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04499"></a><span class="lineno"> 4499</span>&#160;</div><div class="line"><a name="l04500"></a><span class="lineno"> 4500</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991ae9a7c633e107e9cea381665f0c0a93d5">MSG_FENCE_STATUS</a>:</div><div class="line"><a name="l04501"></a><span class="lineno"> 4501</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(FENCE_STATUS);</div><div class="line"><a name="l04502"></a><span class="lineno"> 4502</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#aa9b11773cc5658b43662adcbbf07a3b2">send_fence_status</a>();</div><div class="line"><a name="l04503"></a><span class="lineno"> 4503</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04504"></a><span class="lineno"> 4504</span>&#160;</div><div class="line"><a name="l04505"></a><span class="lineno"> 4505</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991ad83f0ebefe148e4568fe0630c52fa5a4">MSG_RANGEFINDER</a>:</div><div class="line"><a name="l04506"></a><span class="lineno"> 4506</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(RANGEFINDER);</div><div class="line"><a name="l04507"></a><span class="lineno"> 4507</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#ac9c6e86aff8fb7affad6c3b50461c361">send_rangefinder</a>();</div><div class="line"><a name="l04508"></a><span class="lineno"> 4508</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04509"></a><span class="lineno"> 4509</span>&#160;</div><div class="line"><a name="l04510"></a><span class="lineno"> 4510</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991ae4beecf8a2a68dbee2cb06e3cb96a8a3">MSG_DISTANCE_SENSOR</a>:</div><div class="line"><a name="l04511"></a><span class="lineno"> 4511</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a721836da33de06f2dc29f5331dd8157a">send_distance_sensor</a>();</div><div class="line"><a name="l04512"></a><span class="lineno"> 4512</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04513"></a><span class="lineno"> 4513</span>&#160;</div><div class="line"><a name="l04514"></a><span class="lineno"> 4514</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991aafd3d6c9917b97e76f2dcebabe9cfd1d">MSG_CAMERA_FEEDBACK</a>:</div><div class="line"><a name="l04515"></a><span class="lineno"> 4515</span>&#160;        {</div><div class="line"><a name="l04516"></a><span class="lineno"> 4516</span>&#160;            <a class="code" href="classAP__Camera.html">AP_Camera</a> *<a class="code" href="namespaceAP.html#a0ecc5d8af819e985ee88fea6c8b59b12">camera</a> = <a class="code" href="namespaceAP.html#a0ecc5d8af819e985ee88fea6c8b59b12">AP::camera</a>();</div><div class="line"><a name="l04517"></a><span class="lineno"> 4517</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="namespaceAP.html#a0ecc5d8af819e985ee88fea6c8b59b12">camera</a> == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l04518"></a><span class="lineno"> 4518</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l04519"></a><span class="lineno"> 4519</span>&#160;            }</div><div class="line"><a name="l04520"></a><span class="lineno"> 4520</span>&#160;            <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(CAMERA_FEEDBACK);</div><div class="line"><a name="l04521"></a><span class="lineno"> 4521</span>&#160;            <a class="code" href="namespaceAP.html#a0ecc5d8af819e985ee88fea6c8b59b12">camera</a>-&gt;<a class="code" href="classAP__Camera.html#a83895a822a9b5b5c74e62d801013ccd7">send_feedback</a>(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>);</div><div class="line"><a name="l04522"></a><span class="lineno"> 4522</span>&#160;        }</div><div class="line"><a name="l04523"></a><span class="lineno"> 4523</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04524"></a><span class="lineno"> 4524</span>&#160;</div><div class="line"><a name="l04525"></a><span class="lineno"> 4525</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991af867b3847c7b81984f0479271acc306e">MSG_SYSTEM_TIME</a>:</div><div class="line"><a name="l04526"></a><span class="lineno"> 4526</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(SYSTEM_TIME);</div><div class="line"><a name="l04527"></a><span class="lineno"> 4527</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a194d4de4298dca0fb2d7f5d4fb20a404">send_system_time</a>();</div><div class="line"><a name="l04528"></a><span class="lineno"> 4528</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04529"></a><span class="lineno"> 4529</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a4c7517102745667e743de0b380d2989f">MSG_GPS_RAW</a>:</div><div class="line"><a name="l04530"></a><span class="lineno"> 4530</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(GPS_RAW_INT);</div><div class="line"><a name="l04531"></a><span class="lineno"> 4531</span>&#160;        <a class="code" href="namespaceAP.html#ae6eeec356455220f913e47e323057cd5">AP::gps</a>().<a class="code" href="classAP__GPS.html#a266ef4a39f7a303fc1905bf7f9e4ed09">send_mavlink_gps_raw</a>(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>);</div><div class="line"><a name="l04532"></a><span class="lineno"> 4532</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04533"></a><span class="lineno"> 4533</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a6dfd24fe06164421c8f0f936bc88f062">MSG_GPS_RTK</a>:</div><div class="line"><a name="l04534"></a><span class="lineno"> 4534</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(GPS_RTK);</div><div class="line"><a name="l04535"></a><span class="lineno"> 4535</span>&#160;        <a class="code" href="namespaceAP.html#ae6eeec356455220f913e47e323057cd5">AP::gps</a>().<a class="code" href="classAP__GPS.html#af0ca31342e4c693bf1ef3ec174145963">send_mavlink_gps_rtk</a>(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>, 0);</div><div class="line"><a name="l04536"></a><span class="lineno"> 4536</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04537"></a><span class="lineno"> 4537</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a3ff54982e66b2ab26ae02153da744788">MSG_GPS2_RAW</a>:</div><div class="line"><a name="l04538"></a><span class="lineno"> 4538</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(GPS2_RAW);</div><div class="line"><a name="l04539"></a><span class="lineno"> 4539</span>&#160;        <a class="code" href="namespaceAP.html#ae6eeec356455220f913e47e323057cd5">AP::gps</a>().<a class="code" href="classAP__GPS.html#a559c00ff3bbc1232f68e64d29a892128">send_mavlink_gps2_raw</a>(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>);</div><div class="line"><a name="l04540"></a><span class="lineno"> 4540</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04541"></a><span class="lineno"> 4541</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991ae759c992f698fa86600e959b3358ae9b">MSG_GPS2_RTK</a>:</div><div class="line"><a name="l04542"></a><span class="lineno"> 4542</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(GPS2_RTK);</div><div class="line"><a name="l04543"></a><span class="lineno"> 4543</span>&#160;        <a class="code" href="namespaceAP.html#ae6eeec356455220f913e47e323057cd5">AP::gps</a>().<a class="code" href="classAP__GPS.html#af0ca31342e4c693bf1ef3ec174145963">send_mavlink_gps_rtk</a>(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>, 1);</div><div class="line"><a name="l04544"></a><span class="lineno"> 4544</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04545"></a><span class="lineno"> 4545</span>&#160;</div><div class="line"><a name="l04546"></a><span class="lineno"> 4546</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a272283e2882b1fe0dd3672e9d28853c3">MSG_LOCAL_POSITION</a>:</div><div class="line"><a name="l04547"></a><span class="lineno"> 4547</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(LOCAL_POSITION_NED);</div><div class="line"><a name="l04548"></a><span class="lineno"> 4548</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a02ed33d056d9bdd44fcf806c810a2127">send_local_position</a>();</div><div class="line"><a name="l04549"></a><span class="lineno"> 4549</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04550"></a><span class="lineno"> 4550</span>&#160;</div><div class="line"><a name="l04551"></a><span class="lineno"> 4551</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a5a44740c768dc9dc7a6937e75fa645b7">MSG_MOUNT_STATUS</a>:</div><div class="line"><a name="l04552"></a><span class="lineno"> 4552</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(MOUNT_STATUS);</div><div class="line"><a name="l04553"></a><span class="lineno"> 4553</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#ab1a181db52459069be4b570f2cdd83c7">send_mount_status</a>();</div><div class="line"><a name="l04554"></a><span class="lineno"> 4554</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04555"></a><span class="lineno"> 4555</span>&#160;</div><div class="line"><a name="l04556"></a><span class="lineno"> 4556</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991aec6be05f52859e4bbaf957e598699333">MSG_OPTICAL_FLOW</a>:</div><div class="line"><a name="l04557"></a><span class="lineno"> 4557</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(OPTICAL_FLOW);</div><div class="line"><a name="l04558"></a><span class="lineno"> 4558</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a7a8e21be24155bbcdd33b9f637493e0c">send_opticalflow</a>();</div><div class="line"><a name="l04559"></a><span class="lineno"> 4559</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04560"></a><span class="lineno"> 4560</span>&#160;</div><div class="line"><a name="l04561"></a><span class="lineno"> 4561</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a692bcb4ac40fb82572a744f263fb17e1">MSG_POSITION_TARGET_GLOBAL_INT</a>:</div><div class="line"><a name="l04562"></a><span class="lineno"> 4562</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(POSITION_TARGET_GLOBAL_INT);</div><div class="line"><a name="l04563"></a><span class="lineno"> 4563</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#adb754306f60222f433eaf1c9c6a0e7fd">send_position_target_global_int</a>();</div><div class="line"><a name="l04564"></a><span class="lineno"> 4564</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04565"></a><span class="lineno"> 4565</span>&#160;</div><div class="line"><a name="l04566"></a><span class="lineno"> 4566</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a2ecc69fc8fb933e2fb079da4bc06fec6">MSG_POSITION_TARGET_LOCAL_NED</a>:</div><div class="line"><a name="l04567"></a><span class="lineno"> 4567</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(POSITION_TARGET_LOCAL_NED);</div><div class="line"><a name="l04568"></a><span class="lineno"> 4568</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a0eb1cd6bb593be5f6434d3905daae777">send_position_target_local_ned</a>();</div><div class="line"><a name="l04569"></a><span class="lineno"> 4569</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04570"></a><span class="lineno"> 4570</span>&#160;</div><div class="line"><a name="l04571"></a><span class="lineno"> 4571</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a4759d8aac0540ff1bb3bff473f9a91f2">MSG_POWER_STATUS</a>:</div><div class="line"><a name="l04572"></a><span class="lineno"> 4572</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(POWER_STATUS);</div><div class="line"><a name="l04573"></a><span class="lineno"> 4573</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a731179362dc1cb1bbd2fd77eec523d8b">send_power_status</a>();</div><div class="line"><a name="l04574"></a><span class="lineno"> 4574</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04575"></a><span class="lineno"> 4575</span>&#160;</div><div class="line"><a name="l04576"></a><span class="lineno"> 4576</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a6f54574c93c3fac75f233979803d8a6a">MSG_RC_CHANNELS</a>:</div><div class="line"><a name="l04577"></a><span class="lineno"> 4577</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(RC_CHANNELS);</div><div class="line"><a name="l04578"></a><span class="lineno"> 4578</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#ab809e8b8607d06dc52632a31d03908b8">send_rc_channels</a>();</div><div class="line"><a name="l04579"></a><span class="lineno"> 4579</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04580"></a><span class="lineno"> 4580</span>&#160;</div><div class="line"><a name="l04581"></a><span class="lineno"> 4581</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a54a9bfe37e3928d9145e37cb0a4eb86b">MSG_RC_CHANNELS_RAW</a>:</div><div class="line"><a name="l04582"></a><span class="lineno"> 4582</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(RC_CHANNELS_RAW);</div><div class="line"><a name="l04583"></a><span class="lineno"> 4583</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#ae21a87a0378400930179c5f1cec4a5b0">send_rc_channels_raw</a>();</div><div class="line"><a name="l04584"></a><span class="lineno"> 4584</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04585"></a><span class="lineno"> 4585</span>&#160;</div><div class="line"><a name="l04586"></a><span class="lineno"> 4586</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991ac4581ddf59eacccb739fe968d8ccdeb1">MSG_RAW_IMU</a>:</div><div class="line"><a name="l04587"></a><span class="lineno"> 4587</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(RAW_IMU);</div><div class="line"><a name="l04588"></a><span class="lineno"> 4588</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#aacd08f30831b2bda3f5b9d150d3ab26a">send_raw_imu</a>();</div><div class="line"><a name="l04589"></a><span class="lineno"> 4589</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04590"></a><span class="lineno"> 4590</span>&#160;</div><div class="line"><a name="l04591"></a><span class="lineno"> 4591</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a7fca0791c3a7bcd42e0185784d67c0f3">MSG_SCALED_IMU</a>:</div><div class="line"><a name="l04592"></a><span class="lineno"> 4592</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(SCALED_IMU);</div><div class="line"><a name="l04593"></a><span class="lineno"> 4593</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a0f37af5b7e1f3c292add18a81b77f5c1">send_scaled_imu</a>(0, mavlink_msg_scaled_imu_send);</div><div class="line"><a name="l04594"></a><span class="lineno"> 4594</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04595"></a><span class="lineno"> 4595</span>&#160;</div><div class="line"><a name="l04596"></a><span class="lineno"> 4596</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a670942393e2610f590949912ed3d1df8">MSG_SCALED_IMU2</a>:</div><div class="line"><a name="l04597"></a><span class="lineno"> 4597</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(SCALED_IMU2);</div><div class="line"><a name="l04598"></a><span class="lineno"> 4598</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a0f37af5b7e1f3c292add18a81b77f5c1">send_scaled_imu</a>(1, mavlink_msg_scaled_imu2_send);</div><div class="line"><a name="l04599"></a><span class="lineno"> 4599</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04600"></a><span class="lineno"> 4600</span>&#160;</div><div class="line"><a name="l04601"></a><span class="lineno"> 4601</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991ad022ac06a04612e3ccac40b3b1f6f15a">MSG_SCALED_IMU3</a>:</div><div class="line"><a name="l04602"></a><span class="lineno"> 4602</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(SCALED_IMU3);</div><div class="line"><a name="l04603"></a><span class="lineno"> 4603</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a0f37af5b7e1f3c292add18a81b77f5c1">send_scaled_imu</a>(2, mavlink_msg_scaled_imu3_send);</div><div class="line"><a name="l04604"></a><span class="lineno"> 4604</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04605"></a><span class="lineno"> 4605</span>&#160;</div><div class="line"><a name="l04606"></a><span class="lineno"> 4606</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a620e330b9e238577b3c088dce5d5337d">MSG_SCALED_PRESSURE</a>:</div><div class="line"><a name="l04607"></a><span class="lineno"> 4607</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(SCALED_PRESSURE);</div><div class="line"><a name="l04608"></a><span class="lineno"> 4608</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#af9bb82ea69a50e86660dfc8d0076153c">send_scaled_pressure</a>();</div><div class="line"><a name="l04609"></a><span class="lineno"> 4609</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04610"></a><span class="lineno"> 4610</span>&#160;</div><div class="line"><a name="l04611"></a><span class="lineno"> 4611</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a01fbfb12e47029f9621c94ff2c64e614">MSG_SCALED_PRESSURE2</a>:</div><div class="line"><a name="l04612"></a><span class="lineno"> 4612</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(SCALED_PRESSURE2);</div><div class="line"><a name="l04613"></a><span class="lineno"> 4613</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a76ce47aa6ba6b03708dc5632bc9785f3">send_scaled_pressure2</a>();</div><div class="line"><a name="l04614"></a><span class="lineno"> 4614</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04615"></a><span class="lineno"> 4615</span>&#160;</div><div class="line"><a name="l04616"></a><span class="lineno"> 4616</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a1e77ebaf5b0b961a589efe3fc0fef2fd">MSG_SCALED_PRESSURE3</a>:</div><div class="line"><a name="l04617"></a><span class="lineno"> 4617</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(SCALED_PRESSURE3);</div><div class="line"><a name="l04618"></a><span class="lineno"> 4618</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#ab18dbbbce41d8a78d46a9b477ca43d07">send_scaled_pressure3</a>();</div><div class="line"><a name="l04619"></a><span class="lineno"> 4619</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04620"></a><span class="lineno"> 4620</span>&#160;</div><div class="line"><a name="l04621"></a><span class="lineno"> 4621</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a9df9a1d5d38a8a2049888714c1abbab7">MSG_SENSOR_OFFSETS</a>:</div><div class="line"><a name="l04622"></a><span class="lineno"> 4622</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(SENSOR_OFFSETS);</div><div class="line"><a name="l04623"></a><span class="lineno"> 4623</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a9ad8ab4104e517668d23b4b08129ee7a">send_sensor_offsets</a>();</div><div class="line"><a name="l04624"></a><span class="lineno"> 4624</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04625"></a><span class="lineno"> 4625</span>&#160;</div><div class="line"><a name="l04626"></a><span class="lineno"> 4626</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a817773171d33c6e3c664d8f408d3e2fa">MSG_SERVO_OUTPUT_RAW</a>:</div><div class="line"><a name="l04627"></a><span class="lineno"> 4627</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(SERVO_OUTPUT_RAW);</div><div class="line"><a name="l04628"></a><span class="lineno"> 4628</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#ab6f47a24d390d4a7e324a79a23d3ae28">send_servo_output_raw</a>();</div><div class="line"><a name="l04629"></a><span class="lineno"> 4629</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04630"></a><span class="lineno"> 4630</span>&#160;</div><div class="line"><a name="l04631"></a><span class="lineno"> 4631</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991aadb1c1b31dc09b85abc9355c8a06a5a4">MSG_SIMSTATE</a>:</div><div class="line"><a name="l04632"></a><span class="lineno"> 4632</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(SIMSTATE);</div><div class="line"><a name="l04633"></a><span class="lineno"> 4633</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a8e9655385616fad0e7000838554e517a">send_simstate</a>();</div><div class="line"><a name="l04634"></a><span class="lineno"> 4634</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04635"></a><span class="lineno"> 4635</span>&#160;</div><div class="line"><a name="l04636"></a><span class="lineno"> 4636</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991ad6d3d1976c7c297320d0a22fb827017a">MSG_SYS_STATUS</a>:</div><div class="line"><a name="l04637"></a><span class="lineno"> 4637</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(SYS_STATUS);</div><div class="line"><a name="l04638"></a><span class="lineno"> 4638</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#aa5be0175cd3488cff905d41913f8fd3f">send_sys_status</a>();</div><div class="line"><a name="l04639"></a><span class="lineno"> 4639</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04640"></a><span class="lineno"> 4640</span>&#160;</div><div class="line"><a name="l04641"></a><span class="lineno"> 4641</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a0a2d68b0712655adc9d43369639949a1">MSG_AHRS2</a>:</div><div class="line"><a name="l04642"></a><span class="lineno"> 4642</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(AHRS2);</div><div class="line"><a name="l04643"></a><span class="lineno"> 4643</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a505f72ae2d47e4be47ddd1a8dcda3c14">send_ahrs2</a>();</div><div class="line"><a name="l04644"></a><span class="lineno"> 4644</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04645"></a><span class="lineno"> 4645</span>&#160;</div><div class="line"><a name="l04646"></a><span class="lineno"> 4646</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a42faf948a4e2db64769dbbbbd9989d2f">MSG_AHRS3</a>:</div><div class="line"><a name="l04647"></a><span class="lineno"> 4647</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(AHRS3);</div><div class="line"><a name="l04648"></a><span class="lineno"> 4648</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a5ef68d042e48054de048216ca97475f8">send_ahrs3</a>();</div><div class="line"><a name="l04649"></a><span class="lineno"> 4649</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04650"></a><span class="lineno"> 4650</span>&#160;</div><div class="line"><a name="l04651"></a><span class="lineno"> 4651</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991ac135e7becb863f5bf647e16fd8bc3aa2">MSG_PID_TUNING</a>:</div><div class="line"><a name="l04652"></a><span class="lineno"> 4652</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(PID_TUNING);</div><div class="line"><a name="l04653"></a><span class="lineno"> 4653</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a7da5040cb1f3aa7345502156ec6852b4">send_pid_tuning</a>();</div><div class="line"><a name="l04654"></a><span class="lineno"> 4654</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04655"></a><span class="lineno"> 4655</span>&#160;</div><div class="line"><a name="l04656"></a><span class="lineno"> 4656</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a95af9461c6a4e8216750a1ceefa4ed27">MSG_NAV_CONTROLLER_OUTPUT</a>:</div><div class="line"><a name="l04657"></a><span class="lineno"> 4657</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(NAV_CONTROLLER_OUTPUT);</div><div class="line"><a name="l04658"></a><span class="lineno"> 4658</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#ad4d07f21cb8ccca21bcec576f56ce23c">send_nav_controller_output</a>();</div><div class="line"><a name="l04659"></a><span class="lineno"> 4659</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04660"></a><span class="lineno"> 4660</span>&#160;</div><div class="line"><a name="l04661"></a><span class="lineno"> 4661</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a60210ad07652c7b66db5f1a5e8220663">MSG_AHRS</a>:</div><div class="line"><a name="l04662"></a><span class="lineno"> 4662</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(AHRS);</div><div class="line"><a name="l04663"></a><span class="lineno"> 4663</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#ab0f4f231edafcfbbb297a32923ccd3b1">send_ahrs</a>();</div><div class="line"><a name="l04664"></a><span class="lineno"> 4664</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04665"></a><span class="lineno"> 4665</span>&#160;</div><div class="line"><a name="l04666"></a><span class="lineno"> 4666</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a276c699b197f97ea3abe7e92c920cd2b">MSG_EXTENDED_SYS_STATE</a>:</div><div class="line"><a name="l04667"></a><span class="lineno"> 4667</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(EXTENDED_SYS_STATE);</div><div class="line"><a name="l04668"></a><span class="lineno"> 4668</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#aa417e1ce8bac9601fdc1d239f1b0dd55">send_extended_sys_state</a>();</div><div class="line"><a name="l04669"></a><span class="lineno"> 4669</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04670"></a><span class="lineno"> 4670</span>&#160;</div><div class="line"><a name="l04671"></a><span class="lineno"> 4671</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991ac9d2569c7978f2114127f70ca50c2e9d">MSG_VFR_HUD</a>:</div><div class="line"><a name="l04672"></a><span class="lineno"> 4672</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(VFR_HUD);</div><div class="line"><a name="l04673"></a><span class="lineno"> 4673</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#af4c7fce15464d8ff4a13eb30a0d7d8d5">send_vfr_hud</a>();</div><div class="line"><a name="l04674"></a><span class="lineno"> 4674</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04675"></a><span class="lineno"> 4675</span>&#160;</div><div class="line"><a name="l04676"></a><span class="lineno"> 4676</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a465cc8bb7530784d28105720cdd90786">MSG_VIBRATION</a>:</div><div class="line"><a name="l04677"></a><span class="lineno"> 4677</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(VIBRATION);</div><div class="line"><a name="l04678"></a><span class="lineno"> 4678</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a674f4da15be7463e4966f517d7a77e1d">send_vibration</a>();</div><div class="line"><a name="l04679"></a><span class="lineno"> 4679</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04680"></a><span class="lineno"> 4680</span>&#160;</div><div class="line"><a name="l04681"></a><span class="lineno"> 4681</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991acbbb4b0664daf80d9f5db9e4d5d53191">MSG_ESC_TELEMETRY</a>: {</div><div class="line"><a name="l04682"></a><span class="lineno"> 4682</span>&#160;<span class="preprocessor">#ifdef HAVE_AP_BLHELI_SUPPORT</span></div><div class="line"><a name="l04683"></a><span class="lineno"> 4683</span>&#160;        <a class="code" href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a>(ESC_TELEMETRY_1_TO_4);</div><div class="line"><a name="l04684"></a><span class="lineno"> 4684</span>&#160;        AP_BLHeli *blheli = AP_BLHeli::get_singleton();</div><div class="line"><a name="l04685"></a><span class="lineno"> 4685</span>&#160;        <span class="keywordflow">if</span> (blheli) {</div><div class="line"><a name="l04686"></a><span class="lineno"> 4686</span>&#160;            blheli-&gt;send_esc_telemetry_mavlink(uint8_t(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>));</div><div class="line"><a name="l04687"></a><span class="lineno"> 4687</span>&#160;        }</div><div class="line"><a name="l04688"></a><span class="lineno"> 4688</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04689"></a><span class="lineno"> 4689</span>&#160;<span class="preprocessor">#if HAL_WITH_UAVCAN</span></div><div class="line"><a name="l04690"></a><span class="lineno"> 4690</span>&#160;        uint8_t num_drivers = AP::can().get_num_drivers();</div><div class="line"><a name="l04691"></a><span class="lineno"> 4691</span>&#160;</div><div class="line"><a name="l04692"></a><span class="lineno"> 4692</span>&#160;        <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; num_drivers; i++) {</div><div class="line"><a name="l04693"></a><span class="lineno"> 4693</span>&#160;            <span class="keywordflow">switch</span> (AP::can().get_protocol_type(i)) {</div><div class="line"><a name="l04694"></a><span class="lineno"> 4694</span>&#160;                <span class="keywordflow">case</span> AP_BoardConfig_CAN::Protocol_Type_KDECAN: {</div><div class="line"><a name="l04695"></a><span class="lineno"> 4695</span>&#160;<span class="comment">// To be replaced with macro saying if KDECAN library is included</span></div><div class="line"><a name="l04696"></a><span class="lineno"> 4696</span>&#160;<span class="preprocessor">#if APM_BUILD_TYPE(APM_BUILD_ArduCopter) || APM_BUILD_TYPE(APM_BUILD_ArduPlane) || APM_BUILD_TYPE(APM_BUILD_ArduSub)</span></div><div class="line"><a name="l04697"></a><span class="lineno"> 4697</span>&#160;                    <a class="code" href="classAP__KDECAN.html">AP_KDECAN</a> *ap_kdecan = <a class="code" href="classAP__KDECAN.html#a1f62c80879764d4e6655baa2b0c0a39e">AP_KDECAN::get_kdecan</a>(i);</div><div class="line"><a name="l04698"></a><span class="lineno"> 4698</span>&#160;                    <span class="keywordflow">if</span> (ap_kdecan != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l04699"></a><span class="lineno"> 4699</span>&#160;                        ap_kdecan-&gt;<a class="code" href="classAP__KDECAN.html#a8d99a9dbc51b39edc73b1a1d3689826e">send_mavlink</a>(uint8_t(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>));</div><div class="line"><a name="l04700"></a><span class="lineno"> 4700</span>&#160;                    }</div><div class="line"><a name="l04701"></a><span class="lineno"> 4701</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04702"></a><span class="lineno"> 4702</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l04703"></a><span class="lineno"> 4703</span>&#160;                }</div><div class="line"><a name="l04704"></a><span class="lineno"> 4704</span>&#160;                <span class="keywordflow">case</span> AP_BoardConfig_CAN::Protocol_Type_ToshibaCAN: {</div><div class="line"><a name="l04705"></a><span class="lineno"> 4705</span>&#160;                    <a class="code" href="classAP__ToshibaCAN.html">AP_ToshibaCAN</a> *ap_tcan = <a class="code" href="classAP__ToshibaCAN.html#a6284c53e57725273772f90f0491e5d66">AP_ToshibaCAN::get_tcan</a>(i);</div><div class="line"><a name="l04706"></a><span class="lineno"> 4706</span>&#160;                    <span class="keywordflow">if</span> (ap_tcan != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l04707"></a><span class="lineno"> 4707</span>&#160;                        ap_tcan-&gt;<a class="code" href="classAP__ToshibaCAN.html#aa90c03d802cb9b366b47150cba024c58">send_esc_telemetry_mavlink</a>(uint8_t(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>));</div><div class="line"><a name="l04708"></a><span class="lineno"> 4708</span>&#160;                    }</div><div class="line"><a name="l04709"></a><span class="lineno"> 4709</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l04710"></a><span class="lineno"> 4710</span>&#160;                }</div><div class="line"><a name="l04711"></a><span class="lineno"> 4711</span>&#160;                <span class="keywordflow">case</span> AP_BoardConfig_CAN::Protocol_Type_UAVCAN:</div><div class="line"><a name="l04712"></a><span class="lineno"> 4712</span>&#160;                <span class="keywordflow">case</span> AP_BoardConfig_CAN::Protocol_Type_None:</div><div class="line"><a name="l04713"></a><span class="lineno"> 4713</span>&#160;                <span class="keywordflow">default</span>:</div><div class="line"><a name="l04714"></a><span class="lineno"> 4714</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l04715"></a><span class="lineno"> 4715</span>&#160;            }</div><div class="line"><a name="l04716"></a><span class="lineno"> 4716</span>&#160;        }</div><div class="line"><a name="l04717"></a><span class="lineno"> 4717</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04718"></a><span class="lineno"> 4718</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04719"></a><span class="lineno"> 4719</span>&#160;    }</div><div class="line"><a name="l04720"></a><span class="lineno"> 4720</span>&#160;</div><div class="line"><a name="l04721"></a><span class="lineno"> 4721</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l04722"></a><span class="lineno"> 4722</span>&#160;        <span class="comment">// try_send_message must always at some stage return true for</span></div><div class="line"><a name="l04723"></a><span class="lineno"> 4723</span>&#160;        <span class="comment">// a message, or we will attempt to infinitely retry the</span></div><div class="line"><a name="l04724"></a><span class="lineno"> 4724</span>&#160;        <span class="comment">// message as part of send_message.</span></div><div class="line"><a name="l04725"></a><span class="lineno"> 4725</span>&#160;        <span class="comment">// This message will be sent out at the same rate as the</span></div><div class="line"><a name="l04726"></a><span class="lineno"> 4726</span>&#160;        <span class="comment">// unknown message, so should be safe.</span></div><div class="line"><a name="l04727"></a><span class="lineno"> 4727</span>&#160;        <a class="code" href="GCS__Common_8cpp.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a>().<a class="code" href="classGCS.html#a9866f3484283db744409e40719cef765">send_text</a>(MAV_SEVERITY_DEBUG, <span class="stringliteral">&quot;Sending unknown message (%u)&quot;</span>, <span class="keywordtype">id</span>);</div><div class="line"><a name="l04728"></a><span class="lineno"> 4728</span>&#160;<span class="preprocessor">#if CONFIG_HAL_BOARD == HAL_BOARD_SITL</span></div><div class="line"><a name="l04729"></a><span class="lineno"> 4729</span>&#160;        <a class="code" href="namespaceAP__HAL.html#a71832f03d849a0c088f04fc98d3c8143">AP_HAL::panic</a>(<span class="stringliteral">&quot;Sending unknown ap_message %u&quot;</span>, <span class="keywordtype">id</span>);</div><div class="line"><a name="l04730"></a><span class="lineno"> 4730</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04731"></a><span class="lineno"> 4731</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04732"></a><span class="lineno"> 4732</span>&#160;    }</div><div class="line"><a name="l04733"></a><span class="lineno"> 4733</span>&#160;</div><div class="line"><a name="l04734"></a><span class="lineno"> 4734</span>&#160;    <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l04735"></a><span class="lineno"> 4735</span>&#160;}</div><div class="line"><a name="l04736"></a><span class="lineno"> 4736</span>&#160;</div><div class="line"><a name="l04737"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#aa9263cd0a1bb3697c476dc0be960c507"> 4737</a></span>&#160;uint16_t <a class="code" href="structGCS__MAVLINK.html#aa9263cd0a1bb3697c476dc0be960c507">GCS_MAVLINK::get_interval_for_stream</a>(<a class="code" href="structGCS__MAVLINK.html#adddef772ef98e96b764a2f173d792b32">GCS_MAVLINK::streams</a> <span class="keywordtype">id</span>)<span class="keyword"> const</span></div><div class="line"><a name="l04738"></a><span class="lineno"> 4738</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l04739"></a><span class="lineno"> 4739</span>&#160;    <span class="keyword">const</span> int16_t frate = <a class="code" href="structGCS__MAVLINK.html#a5c4409683ad502ab3e94b382673a0141">streamRates</a>[id].get();</div><div class="line"><a name="l04740"></a><span class="lineno"> 4740</span>&#160;    <span class="keywordflow">if</span> (frate == 0) {</div><div class="line"><a name="l04741"></a><span class="lineno"> 4741</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04742"></a><span class="lineno"> 4742</span>&#160;    }</div><div class="line"><a name="l04743"></a><span class="lineno"> 4743</span>&#160;    <span class="keyword">const</span> uint32_t ret = 1000/frate;</div><div class="line"><a name="l04744"></a><span class="lineno"> 4744</span>&#160;    <span class="keywordflow">if</span> (ret &gt; 60000) {</div><div class="line"><a name="l04745"></a><span class="lineno"> 4745</span>&#160;        <span class="keywordflow">return</span> 60000;</div><div class="line"><a name="l04746"></a><span class="lineno"> 4746</span>&#160;    }</div><div class="line"><a name="l04747"></a><span class="lineno"> 4747</span>&#160;    <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l04748"></a><span class="lineno"> 4748</span>&#160;}</div><div class="line"><a name="l04749"></a><span class="lineno"> 4749</span>&#160;</div><div class="line"><a name="l04750"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a08e5a22c8915300128e6d1b4ade7687a"> 4750</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a08e5a22c8915300128e6d1b4ade7687a">GCS_MAVLINK::initialise_message_intervals_for_stream</a>(<a class="code" href="structGCS__MAVLINK.html#adddef772ef98e96b764a2f173d792b32">GCS_MAVLINK::streams</a> <span class="keywordtype">id</span>)</div><div class="line"><a name="l04751"></a><span class="lineno"> 4751</span>&#160;{</div><div class="line"><a name="l04752"></a><span class="lineno"> 4752</span>&#160;    <span class="keywordflow">for</span> (uint8_t i=0; <a class="code" href="structGCS__MAVLINK.html#aca6455041498c4fe94ae428c615a4cb0">all_stream_entries</a>[i].<a class="code" href="structGCS__MAVLINK_1_1stream__entries.html#a2a0b2f76bfa82e9c97290dc79542a0d0">ap_message_ids</a> != <span class="keyword">nullptr</span>; i++) {</div><div class="line"><a name="l04753"></a><span class="lineno"> 4753</span>&#160;        <span class="keyword">const</span> <a class="code" href="structGCS__MAVLINK_1_1stream__entries.html">GCS_MAVLINK::stream_entries</a> &amp;entries = <a class="code" href="structGCS__MAVLINK.html#aca6455041498c4fe94ae428c615a4cb0">all_stream_entries</a>[i];</div><div class="line"><a name="l04754"></a><span class="lineno"> 4754</span>&#160;        <span class="keywordflow">if</span> (entries.<a class="code" href="structGCS__MAVLINK_1_1stream__entries.html#afdd583b4714280f482447b826c14ba83">stream_id</a> != <span class="keywordtype">id</span>) {</div><div class="line"><a name="l04755"></a><span class="lineno"> 4755</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l04756"></a><span class="lineno"> 4756</span>&#160;        }</div><div class="line"><a name="l04757"></a><span class="lineno"> 4757</span>&#160;        <span class="comment">// found it!</span></div><div class="line"><a name="l04758"></a><span class="lineno"> 4758</span>&#160;        <span class="keyword">const</span> uint16_t <a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a> = <a class="code" href="structGCS__MAVLINK.html#aa9263cd0a1bb3697c476dc0be960c507">get_interval_for_stream</a>(<span class="keywordtype">id</span>);</div><div class="line"><a name="l04759"></a><span class="lineno"> 4759</span>&#160;        <span class="keywordflow">for</span> (uint8_t j=0; j&lt;entries.<a class="code" href="structGCS__MAVLINK_1_1stream__entries.html#acf9fbc3c3086552a8d179d9b2761e1be">num_ap_message_ids</a>; j++) {</div><div class="line"><a name="l04760"></a><span class="lineno"> 4760</span>&#160;            <a class="code" href="structGCS__MAVLINK.html#a4d854fdc822e438da966a41782e8bb82">set_ap_message_interval</a>(entries.<a class="code" href="structGCS__MAVLINK_1_1stream__entries.html#a2a0b2f76bfa82e9c97290dc79542a0d0">ap_message_ids</a>[j], <a class="code" href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">interval_ms</a>);</div><div class="line"><a name="l04761"></a><span class="lineno"> 4761</span>&#160;        }</div><div class="line"><a name="l04762"></a><span class="lineno"> 4762</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04763"></a><span class="lineno"> 4763</span>&#160;    }</div><div class="line"><a name="l04764"></a><span class="lineno"> 4764</span>&#160;}</div><div class="line"><a name="l04765"></a><span class="lineno"> 4765</span>&#160;</div><div class="line"><a name="l04766"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a2377a4ec647d1a9052f654e0e899a696"> 4766</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a2377a4ec647d1a9052f654e0e899a696">GCS_MAVLINK::initialise_message_intervals_from_streamrates</a>()</div><div class="line"><a name="l04767"></a><span class="lineno"> 4767</span>&#160;{</div><div class="line"><a name="l04768"></a><span class="lineno"> 4768</span>&#160;    <span class="comment">// this is O(n^2), but it&#39;s once at boot and across a 10-entry list...</span></div><div class="line"><a name="l04769"></a><span class="lineno"> 4769</span>&#160;    <span class="keywordflow">for</span> (uint8_t i=0; <a class="code" href="structGCS__MAVLINK.html#aca6455041498c4fe94ae428c615a4cb0">all_stream_entries</a>[i].<a class="code" href="structGCS__MAVLINK_1_1stream__entries.html#a2a0b2f76bfa82e9c97290dc79542a0d0">ap_message_ids</a> != <span class="keyword">nullptr</span>; i++) {</div><div class="line"><a name="l04770"></a><span class="lineno"> 4770</span>&#160;        <a class="code" href="structGCS__MAVLINK.html#a08e5a22c8915300128e6d1b4ade7687a">initialise_message_intervals_for_stream</a>(<a class="code" href="structGCS__MAVLINK.html#aca6455041498c4fe94ae428c615a4cb0">all_stream_entries</a>[i].stream_id);</div><div class="line"><a name="l04771"></a><span class="lineno"> 4771</span>&#160;    }</div><div class="line"><a name="l04772"></a><span class="lineno"> 4772</span>&#160;    <a class="code" href="structGCS__MAVLINK.html#ac2c3d2352c4047cecbce1cf9437631f6">set_mavlink_message_id_interval</a>(MAVLINK_MSG_ID_HEARTBEAT, 1000);</div><div class="line"><a name="l04773"></a><span class="lineno"> 4773</span>&#160;}</div><div class="line"><a name="l04774"></a><span class="lineno"> 4774</span>&#160;</div><div class="line"><a name="l04775"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#ac747807d69da72d1d3660c8e962ecd54"> 4775</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="structGCS__MAVLINK.html#ac747807d69da72d1d3660c8e962ecd54">GCS_MAVLINK::get_default_interval_for_ap_message</a>(<span class="keyword">const</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991">ap_message</a> <span class="keywordtype">id</span>, uint16_t &amp;interval)<span class="keyword"> const</span></div><div class="line"><a name="l04776"></a><span class="lineno"> 4776</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l04777"></a><span class="lineno"> 4777</span>&#160;    <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991aaf685040f895290768639de8386f0f75">MSG_HEARTBEAT</a>) {</div><div class="line"><a name="l04778"></a><span class="lineno"> 4778</span>&#160;        <span class="comment">// handle heartbeat requests as a special case because heartbeat is not &quot;streamed&quot;</span></div><div class="line"><a name="l04779"></a><span class="lineno"> 4779</span>&#160;        interval = 1000;</div><div class="line"><a name="l04780"></a><span class="lineno"> 4780</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l04781"></a><span class="lineno"> 4781</span>&#160;    }</div><div class="line"><a name="l04782"></a><span class="lineno"> 4782</span>&#160;</div><div class="line"><a name="l04783"></a><span class="lineno"> 4783</span>&#160;    <span class="comment">// find which stream this ap_message is in</span></div><div class="line"><a name="l04784"></a><span class="lineno"> 4784</span>&#160;    <span class="keywordflow">for</span> (uint8_t i=0; <a class="code" href="structGCS__MAVLINK.html#aca6455041498c4fe94ae428c615a4cb0">all_stream_entries</a>[i].<a class="code" href="structGCS__MAVLINK_1_1stream__entries.html#a2a0b2f76bfa82e9c97290dc79542a0d0">ap_message_ids</a> != <span class="keyword">nullptr</span>; i++) {</div><div class="line"><a name="l04785"></a><span class="lineno"> 4785</span>&#160;        <span class="keyword">const</span> <a class="code" href="structGCS__MAVLINK_1_1stream__entries.html">GCS_MAVLINK::stream_entries</a> &amp;entries = <a class="code" href="structGCS__MAVLINK.html#aca6455041498c4fe94ae428c615a4cb0">all_stream_entries</a>[i];</div><div class="line"><a name="l04786"></a><span class="lineno"> 4786</span>&#160;        <span class="keywordflow">for</span> (uint8_t j=0; j&lt;entries.<a class="code" href="structGCS__MAVLINK_1_1stream__entries.html#acf9fbc3c3086552a8d179d9b2761e1be">num_ap_message_ids</a>; j++) {</div><div class="line"><a name="l04787"></a><span class="lineno"> 4787</span>&#160;            <span class="keywordflow">if</span> (entries.<a class="code" href="structGCS__MAVLINK_1_1stream__entries.html#a2a0b2f76bfa82e9c97290dc79542a0d0">ap_message_ids</a>[j] == <span class="keywordtype">id</span>) {</div><div class="line"><a name="l04788"></a><span class="lineno"> 4788</span>&#160;                interval = <a class="code" href="structGCS__MAVLINK.html#aa9263cd0a1bb3697c476dc0be960c507">get_interval_for_stream</a>(<a class="code" href="structGCS__MAVLINK.html#aca6455041498c4fe94ae428c615a4cb0">all_stream_entries</a>[i].stream_id);</div><div class="line"><a name="l04789"></a><span class="lineno"> 4789</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l04790"></a><span class="lineno"> 4790</span>&#160;            }</div><div class="line"><a name="l04791"></a><span class="lineno"> 4791</span>&#160;        }</div><div class="line"><a name="l04792"></a><span class="lineno"> 4792</span>&#160;    }</div><div class="line"><a name="l04793"></a><span class="lineno"> 4793</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l04794"></a><span class="lineno"> 4794</span>&#160;}</div><div class="line"><a name="l04795"></a><span class="lineno"> 4795</span>&#160;</div><div class="line"><a name="l04796"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a37d3fae28018d3432206dd3e706f37f9"> 4796</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="structGCS__MAVLINK.html#a37d3fae28018d3432206dd3e706f37f9">GCS_MAVLINK::get_default_interval_for_mavlink_message_id</a>(<span class="keyword">const</span> uint32_t mavlink_message_id, uint16_t &amp;interval)<span class="keyword"> const</span></div><div class="line"><a name="l04797"></a><span class="lineno"> 4797</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l04798"></a><span class="lineno"> 4798</span>&#160;    <span class="keyword">const</span> <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991">ap_message</a> <span class="keywordtype">id</span> = <a class="code" href="structGCS__MAVLINK.html#a8b947efd39ef128020f20544da6cfc25">mavlink_id_to_ap_message_id</a>(mavlink_message_id);</div><div class="line"><a name="l04799"></a><span class="lineno"> 4799</span>&#160;    <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == <a class="code" href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a67d8257d6aa089cfd08b5c6f35b7718e">MSG_LAST</a>) {</div><div class="line"><a name="l04800"></a><span class="lineno"> 4800</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l04801"></a><span class="lineno"> 4801</span>&#160;    }</div><div class="line"><a name="l04802"></a><span class="lineno"> 4802</span>&#160;</div><div class="line"><a name="l04803"></a><span class="lineno"> 4803</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structGCS__MAVLINK.html#ac747807d69da72d1d3660c8e962ecd54">get_default_interval_for_ap_message</a>(<span class="keywordtype">id</span>, interval);</div><div class="line"><a name="l04804"></a><span class="lineno"> 4804</span>&#160;}</div><div class="line"><a name="l04805"></a><span class="lineno"> 4805</span>&#160;</div><div class="line"><a name="l04806"></a><span class="lineno"> 4806</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04807"></a><span class="lineno"> 4807</span>&#160;<span class="comment">  correct an offboard timestamp in microseconds into a local timestamp</span></div><div class="line"><a name="l04808"></a><span class="lineno"> 4808</span>&#160;<span class="comment">  since boot in milliseconds. See the JitterCorrection code for details</span></div><div class="line"><a name="l04809"></a><span class="lineno"> 4809</span>&#160;<span class="comment"></span></div><div class="line"><a name="l04810"></a><span class="lineno"> 4810</span>&#160;<span class="comment">  Return a value in milliseconds since boot (for use by the EKF)</span></div><div class="line"><a name="l04811"></a><span class="lineno"> 4811</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04812"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#ae8b2f1fa9c38f804d3782859ebf590bf"> 4812</a></span>&#160;uint32_t <a class="code" href="structGCS__MAVLINK.html#ae8b2f1fa9c38f804d3782859ebf590bf">GCS_MAVLINK::correct_offboard_timestamp_usec_to_ms</a>(uint64_t offboard_usec, uint16_t payload_size)</div><div class="line"><a name="l04813"></a><span class="lineno"> 4813</span>&#160;{</div><div class="line"><a name="l04814"></a><span class="lineno"> 4814</span>&#160;    uint64_t local_us;</div><div class="line"><a name="l04815"></a><span class="lineno"> 4815</span>&#160;    <span class="comment">// if the HAL supports it then constrain the latest possible time</span></div><div class="line"><a name="l04816"></a><span class="lineno"> 4816</span>&#160;    <span class="comment">// the packet could have been sent by the uart receive time and</span></div><div class="line"><a name="l04817"></a><span class="lineno"> 4817</span>&#160;    <span class="comment">// the baudrate and packet size.</span></div><div class="line"><a name="l04818"></a><span class="lineno"> 4818</span>&#160;    uint64_t uart_receive_time = <a class="code" href="structGCS__MAVLINK.html#a534b55e4a0350601fbdc54818a6dedbe">_port</a>-&gt;<a class="code" href="classAP__HAL_1_1UARTDriver.html#a050efe232fa3e0106e5576ccc2538bd3">receive_time_constraint_us</a>(payload_size);</div><div class="line"><a name="l04819"></a><span class="lineno"> 4819</span>&#160;    <span class="keywordflow">if</span> (uart_receive_time != 0) {</div><div class="line"><a name="l04820"></a><span class="lineno"> 4820</span>&#160;        local_us = uart_receive_time;</div><div class="line"><a name="l04821"></a><span class="lineno"> 4821</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04822"></a><span class="lineno"> 4822</span>&#160;        local_us = <a class="code" href="namespaceAP__HAL.html#a7aa0ce7625c9680e30ff4a99940907a5">AP_HAL::micros64</a>();</div><div class="line"><a name="l04823"></a><span class="lineno"> 4823</span>&#160;    }</div><div class="line"><a name="l04824"></a><span class="lineno"> 4824</span>&#160;    uint64_t corrected_us = <a class="code" href="structGCS__MAVLINK.html#a63cc99e4439d7e8b3db0fac35badc452">lag_correction</a>.<a class="code" href="classJitterCorrection.html#acac0fcd86c6ed7583727e5ba00eaa008">correct_offboard_timestamp_usec</a>(offboard_usec, local_us);</div><div class="line"><a name="l04825"></a><span class="lineno"> 4825</span>&#160;</div><div class="line"><a name="l04826"></a><span class="lineno"> 4826</span>&#160;    <span class="keywordflow">return</span> corrected_us / 1000U;</div><div class="line"><a name="l04827"></a><span class="lineno"> 4827</span>&#160;}</div><div class="line"><a name="l04828"></a><span class="lineno"> 4828</span>&#160;</div><div class="line"><a name="l04829"></a><span class="lineno"> 4829</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04830"></a><span class="lineno"> 4830</span>&#160;<span class="comment">  return true if we will accept this packet. Used to implement SYSID_ENFORCE</span></div><div class="line"><a name="l04831"></a><span class="lineno"> 4831</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04832"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a29f1b5bdb21d1e135278aa29d8c55e65"> 4832</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="structGCS__MAVLINK.html#a29f1b5bdb21d1e135278aa29d8c55e65">GCS_MAVLINK::accept_packet</a>(<span class="keyword">const</span> mavlink_status_t &amp;status,</div><div class="line"><a name="l04833"></a><span class="lineno"> 4833</span>&#160;                                mavlink_message_t &amp;msg)</div><div class="line"><a name="l04834"></a><span class="lineno"> 4834</span>&#160;{</div><div class="line"><a name="l04835"></a><span class="lineno"> 4835</span>&#160;    <span class="keywordflow">if</span> (msg.sysid == <a class="code" href="routing_8cpp.html#a5123629902b8b0dcf1d5cb7336558801">mavlink_system</a>.sysid) {</div><div class="line"><a name="l04836"></a><span class="lineno"> 4836</span>&#160;        <span class="comment">// accept packets from our own components</span></div><div class="line"><a name="l04837"></a><span class="lineno"> 4837</span>&#160;        <span class="comment">// (e.g. mavlink-connected companion computers)</span></div><div class="line"><a name="l04838"></a><span class="lineno"> 4838</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l04839"></a><span class="lineno"> 4839</span>&#160;    }</div><div class="line"><a name="l04840"></a><span class="lineno"> 4840</span>&#160;</div><div class="line"><a name="l04841"></a><span class="lineno"> 4841</span>&#160;    <span class="keywordflow">if</span> (msg.sysid == <a class="code" href="structGCS__MAVLINK.html#a5ad53d67eacf2e9ed33533b7874f34b7">sysid_my_gcs</a>()) {</div><div class="line"><a name="l04842"></a><span class="lineno"> 4842</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l04843"></a><span class="lineno"> 4843</span>&#160;    }</div><div class="line"><a name="l04844"></a><span class="lineno"> 4844</span>&#160;</div><div class="line"><a name="l04845"></a><span class="lineno"> 4845</span>&#160;    <span class="keywordflow">if</span> (msg.msgid == MAVLINK_MSG_ID_RADIO ||</div><div class="line"><a name="l04846"></a><span class="lineno"> 4846</span>&#160;        msg.msgid == MAVLINK_MSG_ID_RADIO_STATUS) {</div><div class="line"><a name="l04847"></a><span class="lineno"> 4847</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l04848"></a><span class="lineno"> 4848</span>&#160;    }</div><div class="line"><a name="l04849"></a><span class="lineno"> 4849</span>&#160;</div><div class="line"><a name="l04850"></a><span class="lineno"> 4850</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="structGCS__MAVLINK.html#a0b018c3d69c6d87c62e73e88fad1e27d">sysid_enforce</a>()) {</div><div class="line"><a name="l04851"></a><span class="lineno"> 4851</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l04852"></a><span class="lineno"> 4852</span>&#160;    }</div><div class="line"><a name="l04853"></a><span class="lineno"> 4853</span>&#160;</div><div class="line"><a name="l04854"></a><span class="lineno"> 4854</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l04855"></a><span class="lineno"> 4855</span>&#160;}</div><div class="line"><a name="l04856"></a><span class="lineno"> 4856</span>&#160;</div><div class="line"><a name="l04857"></a><span class="lineno"> 4857</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04858"></a><span class="lineno"> 4858</span>&#160;<span class="comment">  update UART pass-thru, if enabled</span></div><div class="line"><a name="l04859"></a><span class="lineno"> 4859</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04860"></a><span class="lineno"><a class="line" href="classGCS.html#adc7c302e95484e1e69d31469263d5cc6"> 4860</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classGCS.html#adc7c302e95484e1e69d31469263d5cc6">GCS::update_passthru</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l04861"></a><span class="lineno"> 4861</span>&#160;{</div><div class="line"><a name="l04862"></a><span class="lineno"> 4862</span>&#160;    <a class="code" href="Semaphores_8h.html#a819dd9ac6de800cdf1014b0a922b67d4">WITH_SEMAPHORE</a>(<a class="code" href="classGCS.html#ac858f9d69829e5dbf535d1cb75d041af">_passthru</a>.sem);</div><div class="line"><a name="l04863"></a><span class="lineno"> 4863</span>&#160;    uint32_t now = <a class="code" href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a>();</div><div class="line"><a name="l04864"></a><span class="lineno"> 4864</span>&#160;</div><div class="line"><a name="l04865"></a><span class="lineno"> 4865</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classGCS.html#aef0051fb119f32631310ac40f6e11ddf">enabled</a> = <a class="code" href="namespaceAP.html#aa01135941499a6cbb5fc30403fc24c65">AP::serialmanager</a>().<a class="code" href="classAP__SerialManager.html#a895e72ab58afc1ae8c2bf7f93c08a352">get_passthru</a>(<a class="code" href="classGCS.html#ac858f9d69829e5dbf535d1cb75d041af">_passthru</a>.port1, <a class="code" href="classGCS.html#ac858f9d69829e5dbf535d1cb75d041af">_passthru</a>.port2, <a class="code" href="classGCS.html#ac858f9d69829e5dbf535d1cb75d041af">_passthru</a>.timeout_s);</div><div class="line"><a name="l04866"></a><span class="lineno"> 4866</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classGCS.html#aef0051fb119f32631310ac40f6e11ddf">enabled</a> &amp;&amp; !<a class="code" href="classGCS.html#ac858f9d69829e5dbf535d1cb75d041af">_passthru</a>.enabled) {</div><div class="line"><a name="l04867"></a><span class="lineno"> 4867</span>&#160;        <a class="code" href="classGCS.html#ac858f9d69829e5dbf535d1cb75d041af">_passthru</a>.start_ms = now;</div><div class="line"><a name="l04868"></a><span class="lineno"> 4868</span>&#160;        <a class="code" href="classGCS.html#ac858f9d69829e5dbf535d1cb75d041af">_passthru</a>.last_ms = 0;</div><div class="line"><a name="l04869"></a><span class="lineno"> 4869</span>&#160;        <a class="code" href="classGCS.html#ac858f9d69829e5dbf535d1cb75d041af">_passthru</a>.enabled = <span class="keyword">true</span>;</div><div class="line"><a name="l04870"></a><span class="lineno"> 4870</span>&#160;        <a class="code" href="classGCS.html#ac858f9d69829e5dbf535d1cb75d041af">_passthru</a>.last_port1_data_ms = now;</div><div class="line"><a name="l04871"></a><span class="lineno"> 4871</span>&#160;        <a class="code" href="GCS__Common_8cpp.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a>().<a class="code" href="classGCS.html#a9866f3484283db744409e40719cef765">send_text</a>(MAV_SEVERITY_INFO, <span class="stringliteral">&quot;Passthru enabled&quot;</span>);</div><div class="line"><a name="l04872"></a><span class="lineno"> 4872</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classGCS.html#ac858f9d69829e5dbf535d1cb75d041af">_passthru</a>.timer_installed) {</div><div class="line"><a name="l04873"></a><span class="lineno"> 4873</span>&#160;            <a class="code" href="classGCS.html#ac858f9d69829e5dbf535d1cb75d041af">_passthru</a>.timer_installed = <span class="keyword">true</span>;</div><div class="line"><a name="l04874"></a><span class="lineno"> 4874</span>&#160;            <a class="code" href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#a94ab41309b1ff10b8b862b826e59c882">scheduler</a>-&gt;<a class="code" href="classAP__HAL_1_1Scheduler.html#ac2c4230957d5dbd3c2fd104af2794b4f">register_timer_process</a>(<a class="code" href="functor_8h.html#a00e5874203cecc310017f9166f2c0e36">FUNCTOR_BIND_MEMBER</a>(&amp;<a class="code" href="classGCS.html#a087d7e22cbeaf19adc59c3057970335a">GCS::passthru_timer</a>, <span class="keywordtype">void</span>));</div><div class="line"><a name="l04875"></a><span class="lineno"> 4875</span>&#160;        }</div><div class="line"><a name="l04876"></a><span class="lineno"> 4876</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="classGCS.html#aef0051fb119f32631310ac40f6e11ddf">enabled</a> &amp;&amp; <a class="code" href="classGCS.html#ac858f9d69829e5dbf535d1cb75d041af">_passthru</a>.enabled) {</div><div class="line"><a name="l04877"></a><span class="lineno"> 4877</span>&#160;        <a class="code" href="classGCS.html#ac858f9d69829e5dbf535d1cb75d041af">_passthru</a>.enabled = <span class="keyword">false</span>;</div><div class="line"><a name="l04878"></a><span class="lineno"> 4878</span>&#160;        <a class="code" href="classGCS.html#ac858f9d69829e5dbf535d1cb75d041af">_passthru</a>.port1-&gt;lock_port(0, 0);</div><div class="line"><a name="l04879"></a><span class="lineno"> 4879</span>&#160;        <a class="code" href="classGCS.html#ac858f9d69829e5dbf535d1cb75d041af">_passthru</a>.port2-&gt;lock_port(0, 0);</div><div class="line"><a name="l04880"></a><span class="lineno"> 4880</span>&#160;        <a class="code" href="GCS__Common_8cpp.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a>().<a class="code" href="classGCS.html#a9866f3484283db744409e40719cef765">send_text</a>(MAV_SEVERITY_INFO, <span class="stringliteral">&quot;Passthru disabled&quot;</span>);</div><div class="line"><a name="l04881"></a><span class="lineno"> 4881</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classGCS.html#aef0051fb119f32631310ac40f6e11ddf">enabled</a> &amp;&amp;</div><div class="line"><a name="l04882"></a><span class="lineno"> 4882</span>&#160;               <a class="code" href="classGCS.html#ac858f9d69829e5dbf535d1cb75d041af">_passthru</a>.timeout_s &amp;&amp;</div><div class="line"><a name="l04883"></a><span class="lineno"> 4883</span>&#160;               now - <a class="code" href="classGCS.html#ac858f9d69829e5dbf535d1cb75d041af">_passthru</a>.last_port1_data_ms &gt; uint32_t(<a class="code" href="classGCS.html#ac858f9d69829e5dbf535d1cb75d041af">_passthru</a>.timeout_s)*1000U) {</div><div class="line"><a name="l04884"></a><span class="lineno"> 4884</span>&#160;        <span class="comment">// timed out, disable</span></div><div class="line"><a name="l04885"></a><span class="lineno"> 4885</span>&#160;        <a class="code" href="classGCS.html#ac858f9d69829e5dbf535d1cb75d041af">_passthru</a>.enabled = <span class="keyword">false</span>;</div><div class="line"><a name="l04886"></a><span class="lineno"> 4886</span>&#160;        <a class="code" href="classGCS.html#ac858f9d69829e5dbf535d1cb75d041af">_passthru</a>.port1-&gt;lock_port(0, 0);</div><div class="line"><a name="l04887"></a><span class="lineno"> 4887</span>&#160;        <a class="code" href="classGCS.html#ac858f9d69829e5dbf535d1cb75d041af">_passthru</a>.port2-&gt;lock_port(0, 0);</div><div class="line"><a name="l04888"></a><span class="lineno"> 4888</span>&#160;        <a class="code" href="namespaceAP.html#aa01135941499a6cbb5fc30403fc24c65">AP::serialmanager</a>().<a class="code" href="classAP__SerialManager.html#abba6683a5a75d7ff52584586755237dc">disable_passthru</a>();</div><div class="line"><a name="l04889"></a><span class="lineno"> 4889</span>&#160;        <a class="code" href="GCS__Common_8cpp.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a>().<a class="code" href="classGCS.html#a9866f3484283db744409e40719cef765">send_text</a>(MAV_SEVERITY_INFO, <span class="stringliteral">&quot;Passthru timed out&quot;</span>);</div><div class="line"><a name="l04890"></a><span class="lineno"> 4890</span>&#160;    }</div><div class="line"><a name="l04891"></a><span class="lineno"> 4891</span>&#160;}</div><div class="line"><a name="l04892"></a><span class="lineno"> 4892</span>&#160;</div><div class="line"><a name="l04893"></a><span class="lineno"> 4893</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l04894"></a><span class="lineno"> 4894</span>&#160;<span class="comment">  called at 1kHz to handle pass-thru between SERIA0_PASSTHRU port and hal.console</span></div><div class="line"><a name="l04895"></a><span class="lineno"> 4895</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04896"></a><span class="lineno"><a class="line" href="classGCS.html#a087d7e22cbeaf19adc59c3057970335a"> 4896</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classGCS.html#a087d7e22cbeaf19adc59c3057970335a">GCS::passthru_timer</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l04897"></a><span class="lineno"> 4897</span>&#160;{</div><div class="line"><a name="l04898"></a><span class="lineno"> 4898</span>&#160;    <a class="code" href="Semaphores_8h.html#a819dd9ac6de800cdf1014b0a922b67d4">WITH_SEMAPHORE</a>(<a class="code" href="classGCS.html#ac858f9d69829e5dbf535d1cb75d041af">_passthru</a>.sem);</div><div class="line"><a name="l04899"></a><span class="lineno"> 4899</span>&#160;</div><div class="line"><a name="l04900"></a><span class="lineno"> 4900</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classGCS.html#ac858f9d69829e5dbf535d1cb75d041af">_passthru</a>.enabled) {</div><div class="line"><a name="l04901"></a><span class="lineno"> 4901</span>&#160;        <span class="comment">// it has been disabled after starting</span></div><div class="line"><a name="l04902"></a><span class="lineno"> 4902</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l04903"></a><span class="lineno"> 4903</span>&#160;    }</div><div class="line"><a name="l04904"></a><span class="lineno"> 4904</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classGCS.html#ac858f9d69829e5dbf535d1cb75d041af">_passthru</a>.start_ms != 0) {</div><div class="line"><a name="l04905"></a><span class="lineno"> 4905</span>&#160;        uint32_t now = <a class="code" href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a>();</div><div class="line"><a name="l04906"></a><span class="lineno"> 4906</span>&#160;        <span class="keywordflow">if</span> (now - <a class="code" href="classGCS.html#ac858f9d69829e5dbf535d1cb75d041af">_passthru</a>.start_ms &lt; 1000) {</div><div class="line"><a name="l04907"></a><span class="lineno"> 4907</span>&#160;            <span class="comment">// delay for 1s so the reply for the SERIAL0_PASSTHRU param set can be seen by GCS</span></div><div class="line"><a name="l04908"></a><span class="lineno"> 4908</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l04909"></a><span class="lineno"> 4909</span>&#160;        }</div><div class="line"><a name="l04910"></a><span class="lineno"> 4910</span>&#160;        <a class="code" href="classGCS.html#ac858f9d69829e5dbf535d1cb75d041af">_passthru</a>.start_ms = 0;</div><div class="line"><a name="l04911"></a><span class="lineno"> 4911</span>&#160;    }</div><div class="line"><a name="l04912"></a><span class="lineno"> 4912</span>&#160;</div><div class="line"><a name="l04913"></a><span class="lineno"> 4913</span>&#160;    <span class="comment">// while pass-thru is enabled lock both ports. They remain</span></div><div class="line"><a name="l04914"></a><span class="lineno"> 4914</span>&#160;    <span class="comment">// locked until disabled again, or reboot</span></div><div class="line"><a name="l04915"></a><span class="lineno"> 4915</span>&#160;    <span class="keyword">const</span> uint32_t lock_key = 0x3256AB9F;</div><div class="line"><a name="l04916"></a><span class="lineno"> 4916</span>&#160;    <a class="code" href="classGCS.html#ac858f9d69829e5dbf535d1cb75d041af">_passthru</a>.port1-&gt;lock_port(lock_key, lock_key);</div><div class="line"><a name="l04917"></a><span class="lineno"> 4917</span>&#160;    <a class="code" href="classGCS.html#ac858f9d69829e5dbf535d1cb75d041af">_passthru</a>.port2-&gt;lock_port(lock_key, lock_key);</div><div class="line"><a name="l04918"></a><span class="lineno"> 4918</span>&#160;</div><div class="line"><a name="l04919"></a><span class="lineno"> 4919</span>&#160;    int16_t b;</div><div class="line"><a name="l04920"></a><span class="lineno"> 4920</span>&#160;    uint8_t buf[64];</div><div class="line"><a name="l04921"></a><span class="lineno"> 4921</span>&#160;    uint8_t nbytes = 0;</div><div class="line"><a name="l04922"></a><span class="lineno"> 4922</span>&#160;</div><div class="line"><a name="l04923"></a><span class="lineno"> 4923</span>&#160;    <span class="comment">// read from port1, and write to port2</span></div><div class="line"><a name="l04924"></a><span class="lineno"> 4924</span>&#160;    <span class="keywordflow">while</span> (nbytes &lt; <span class="keyword">sizeof</span>(buf) &amp;&amp; (b = <a class="code" href="classGCS.html#ac858f9d69829e5dbf535d1cb75d041af">_passthru</a>.port1-&gt;read_locked(lock_key)) &gt;= 0) {</div><div class="line"><a name="l04925"></a><span class="lineno"> 4925</span>&#160;        buf[nbytes++] = b;</div><div class="line"><a name="l04926"></a><span class="lineno"> 4926</span>&#160;    }</div><div class="line"><a name="l04927"></a><span class="lineno"> 4927</span>&#160;    <span class="keywordflow">if</span> (nbytes &gt; 0) {</div><div class="line"><a name="l04928"></a><span class="lineno"> 4928</span>&#160;        <a class="code" href="classGCS.html#ac858f9d69829e5dbf535d1cb75d041af">_passthru</a>.last_port1_data_ms = <a class="code" href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a>();</div><div class="line"><a name="l04929"></a><span class="lineno"> 4929</span>&#160;        <a class="code" href="classGCS.html#ac858f9d69829e5dbf535d1cb75d041af">_passthru</a>.port2-&gt;write_locked(buf, nbytes, lock_key);</div><div class="line"><a name="l04930"></a><span class="lineno"> 4930</span>&#160;    }</div><div class="line"><a name="l04931"></a><span class="lineno"> 4931</span>&#160;</div><div class="line"><a name="l04932"></a><span class="lineno"> 4932</span>&#160;    <span class="comment">// read from port2, and write to port1</span></div><div class="line"><a name="l04933"></a><span class="lineno"> 4933</span>&#160;    nbytes = 0;</div><div class="line"><a name="l04934"></a><span class="lineno"> 4934</span>&#160;    <span class="keywordflow">while</span> (nbytes &lt; <span class="keyword">sizeof</span>(buf) &amp;&amp; (b = <a class="code" href="classGCS.html#ac858f9d69829e5dbf535d1cb75d041af">_passthru</a>.port2-&gt;read_locked(lock_key)) &gt;= 0) {</div><div class="line"><a name="l04935"></a><span class="lineno"> 4935</span>&#160;        buf[nbytes++] = b;</div><div class="line"><a name="l04936"></a><span class="lineno"> 4936</span>&#160;    }</div><div class="line"><a name="l04937"></a><span class="lineno"> 4937</span>&#160;    <span class="keywordflow">if</span> (nbytes &gt; 0) {</div><div class="line"><a name="l04938"></a><span class="lineno"> 4938</span>&#160;        <a class="code" href="classGCS.html#ac858f9d69829e5dbf535d1cb75d041af">_passthru</a>.port1-&gt;write_locked(buf, nbytes, lock_key);</div><div class="line"><a name="l04939"></a><span class="lineno"> 4939</span>&#160;    }</div><div class="line"><a name="l04940"></a><span class="lineno"> 4940</span>&#160;}</div><div class="line"><a name="l04941"></a><span class="lineno"> 4941</span>&#160;</div><div class="line"><a name="l04942"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#ae92d17021254192f5562d5a724542152"> 4942</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="structGCS__MAVLINK.html#ae92d17021254192f5562d5a724542152">GCS_MAVLINK::mavlink_coordinate_frame_to_location_alt_frame</a>(<span class="keyword">const</span> uint8_t coordinate_frame, <a class="code" href="classLocation.html#af494dabb88cd43e0d4efa99f04d31351">Location::AltFrame</a> &amp;frame)</div><div class="line"><a name="l04943"></a><span class="lineno"> 4943</span>&#160;{</div><div class="line"><a name="l04944"></a><span class="lineno"> 4944</span>&#160;    <span class="keywordflow">switch</span> (coordinate_frame) {</div><div class="line"><a name="l04945"></a><span class="lineno"> 4945</span>&#160;    <span class="keywordflow">case</span> MAV_FRAME_GLOBAL_RELATIVE_ALT: <span class="comment">// solo shot manager incorrectly sends RELATIVE_ALT instead of RELATIVE_ALT_INT</span></div><div class="line"><a name="l04946"></a><span class="lineno"> 4946</span>&#160;    <span class="keywordflow">case</span> MAV_FRAME_GLOBAL_RELATIVE_ALT_INT:</div><div class="line"><a name="l04947"></a><span class="lineno"> 4947</span>&#160;        frame = <a class="code" href="classLocation.html#af494dabb88cd43e0d4efa99f04d31351adc2241348a103ecefcef66579c80336f">Location::AltFrame::ABOVE_HOME</a>;</div><div class="line"><a name="l04948"></a><span class="lineno"> 4948</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l04949"></a><span class="lineno"> 4949</span>&#160;    <span class="keywordflow">case</span> MAV_FRAME_GLOBAL_TERRAIN_ALT:</div><div class="line"><a name="l04950"></a><span class="lineno"> 4950</span>&#160;    <span class="keywordflow">case</span> MAV_FRAME_GLOBAL_TERRAIN_ALT_INT:</div><div class="line"><a name="l04951"></a><span class="lineno"> 4951</span>&#160;        frame = <a class="code" href="classLocation.html#af494dabb88cd43e0d4efa99f04d31351a34ab8af7507092f7b3a2e41b94b9ed6a">Location::AltFrame::ABOVE_TERRAIN</a>;</div><div class="line"><a name="l04952"></a><span class="lineno"> 4952</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l04953"></a><span class="lineno"> 4953</span>&#160;    <span class="keywordflow">case</span> MAV_FRAME_GLOBAL:</div><div class="line"><a name="l04954"></a><span class="lineno"> 4954</span>&#160;    <span class="keywordflow">case</span> MAV_FRAME_GLOBAL_INT:</div><div class="line"><a name="l04955"></a><span class="lineno"> 4955</span>&#160;        frame = <a class="code" href="classLocation.html#af494dabb88cd43e0d4efa99f04d31351a3a0bc063b6db8cae0361657958be836f">Location::AltFrame::ABSOLUTE</a>;</div><div class="line"><a name="l04956"></a><span class="lineno"> 4956</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l04957"></a><span class="lineno"> 4957</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l04958"></a><span class="lineno"> 4958</span>&#160;<span class="preprocessor">#if CONFIG_HAL_BOARD == HAL_BOARD_SITL</span></div><div class="line"><a name="l04959"></a><span class="lineno"> 4959</span>&#160;        <a class="code" href="GCS__Common_8cpp.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a>().<a class="code" href="classGCS.html#a9866f3484283db744409e40719cef765">send_text</a>(MAV_SEVERITY_INFO, <span class="stringliteral">&quot;Unknown mavlink coordinate frame %u&quot;</span>, coordinate_frame);</div><div class="line"><a name="l04960"></a><span class="lineno"> 4960</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04961"></a><span class="lineno"> 4961</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l04962"></a><span class="lineno"> 4962</span>&#160;    }</div><div class="line"><a name="l04963"></a><span class="lineno"> 4963</span>&#160;}</div><div class="line"><a name="l04964"></a><span class="lineno"> 4964</span>&#160;</div><div class="line"><a name="l04965"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#aabad4b34ae619e84f2f10deb9ee1caca"> 4965</a></span>&#160;uint64_t <a class="code" href="structGCS__MAVLINK.html#aabad4b34ae619e84f2f10deb9ee1caca">GCS_MAVLINK::capabilities</a>()<span class="keyword"> const</span></div><div class="line"><a name="l04966"></a><span class="lineno"> 4966</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l04967"></a><span class="lineno"> 4967</span>&#160;    uint64_t ret = 0;</div><div class="line"><a name="l04968"></a><span class="lineno"> 4968</span>&#160;</div><div class="line"><a name="l04969"></a><span class="lineno"> 4969</span>&#160;    <a class="code" href="classAP__SerialManager.html#af95280ba50704a8adece62755cb348e7">AP_SerialManager::SerialProtocol</a> mavlink_protocol = <a class="code" href="namespaceAP.html#aa01135941499a6cbb5fc30403fc24c65">AP::serialmanager</a>().<a class="code" href="classAP__SerialManager.html#aeec52d0317706a561feba321569f09a9">get_mavlink_protocol</a>(<a class="code" href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">chan</a>);</div><div class="line"><a name="l04970"></a><span class="lineno"> 4970</span>&#160;    <span class="keywordflow">if</span> (mavlink_protocol == <a class="code" href="classAP__SerialManager.html#af95280ba50704a8adece62755cb348e7a0e4f0e3620bdb2bf2f9e79058a3c095b">AP_SerialManager::SerialProtocol_MAVLink2</a>) {</div><div class="line"><a name="l04971"></a><span class="lineno"> 4971</span>&#160;        ret |= MAV_PROTOCOL_CAPABILITY_MAVLINK2;</div><div class="line"><a name="l04972"></a><span class="lineno"> 4972</span>&#160;    }</div><div class="line"><a name="l04973"></a><span class="lineno"> 4973</span>&#160;</div><div class="line"><a name="l04974"></a><span class="lineno"> 4974</span>&#160;    <a class="code" href="classAP__AdvancedFailsafe.html">AP_AdvancedFailsafe</a> *failsafe = <a class="code" href="structGCS__MAVLINK.html#a085f9cede300d1fd4b58aa8b1719274f">get_advanced_failsafe</a>();</div><div class="line"><a name="l04975"></a><span class="lineno"> 4975</span>&#160;    <span class="keywordflow">if</span> (failsafe != <span class="keyword">nullptr</span> &amp;&amp; failsafe-&gt;<a class="code" href="classAP__AdvancedFailsafe.html#ac1cf01bebffa6a670fa28f10e4a81746">enabled</a>()) {</div><div class="line"><a name="l04976"></a><span class="lineno"> 4976</span>&#160;        <span class="comment">// Copter and Sub may also set this bit as they can always terminate</span></div><div class="line"><a name="l04977"></a><span class="lineno"> 4977</span>&#160;        ret |= MAV_PROTOCOL_CAPABILITY_FLIGHT_TERMINATION;</div><div class="line"><a name="l04978"></a><span class="lineno"> 4978</span>&#160;    }</div><div class="line"><a name="l04979"></a><span class="lineno"> 4979</span>&#160;</div><div class="line"><a name="l04980"></a><span class="lineno"> 4980</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespaceAP.html#ae87744fcd7073579dee4ddbf9d32239e">AP::rally</a>()) {</div><div class="line"><a name="l04981"></a><span class="lineno"> 4981</span>&#160;        ret |= MAV_PROTOCOL_CAPABILITY_MISSION_RALLY;</div><div class="line"><a name="l04982"></a><span class="lineno"> 4982</span>&#160;    }</div><div class="line"><a name="l04983"></a><span class="lineno"> 4983</span>&#160;    <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l04984"></a><span class="lineno"> 4984</span>&#160;}</div><div class="line"><a name="l04985"></a><span class="lineno"> 4985</span>&#160;</div><div class="line"><a name="l04986"></a><span class="lineno"> 4986</span>&#160;</div><div class="line"><a name="l04987"></a><span class="lineno"><a class="line" href="structGCS__MAVLINK.html#a11bfe5a51b55db1f18f12dd5175e581e"> 4987</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structGCS__MAVLINK.html#a11bfe5a51b55db1f18f12dd5175e581e">GCS_MAVLINK::manual_override</a>(<a class="code" href="classRC__Channel.html">RC_Channel</a> *c, int16_t value_in, <span class="keyword">const</span> uint16_t offset, <span class="keyword">const</span> <span class="keywordtype">float</span> scaler, <span class="keyword">const</span> uint32_t tnow, <span class="keyword">const</span> <span class="keywordtype">bool</span> reversed)</div><div class="line"><a name="l04988"></a><span class="lineno"> 4988</span>&#160;{</div><div class="line"><a name="l04989"></a><span class="lineno"> 4989</span>&#160;    <span class="keywordflow">if</span> (c == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l04990"></a><span class="lineno"> 4990</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l04991"></a><span class="lineno"> 4991</span>&#160;    }</div><div class="line"><a name="l04992"></a><span class="lineno"> 4992</span>&#160;    int16_t override_value = 0;</div><div class="line"><a name="l04993"></a><span class="lineno"> 4993</span>&#160;    <span class="keywordflow">if</span> (value_in != INT16_MAX) {</div><div class="line"><a name="l04994"></a><span class="lineno"> 4994</span>&#160;        <span class="keyword">const</span> int16_t radio_min = c-&gt;<a class="code" href="classRC__Channel.html#a186bd6c744701bce1755f836d44d5f96">get_radio_min</a>();</div><div class="line"><a name="l04995"></a><span class="lineno"> 4995</span>&#160;        <span class="keyword">const</span> int16_t radio_max = c-&gt;<a class="code" href="classRC__Channel.html#aa056e3c3b15ca3e44aee9f97b7ca7855">get_radio_max</a>();</div><div class="line"><a name="l04996"></a><span class="lineno"> 4996</span>&#160;        <span class="keywordflow">if</span> (reversed) {</div><div class="line"><a name="l04997"></a><span class="lineno"> 4997</span>&#160;            value_in *= -1;</div><div class="line"><a name="l04998"></a><span class="lineno"> 4998</span>&#160;        }</div><div class="line"><a name="l04999"></a><span class="lineno"> 4999</span>&#160;        override_value = radio_min + (radio_max - radio_min) * (value_in + offset) / scaler;</div><div class="line"><a name="l05000"></a><span class="lineno"> 5000</span>&#160;    }</div><div class="line"><a name="l05001"></a><span class="lineno"> 5001</span>&#160;    c-&gt;<a class="code" href="classRC__Channel.html#ac3a80b19d42df06b06744464a5643f8f">set_override</a>(override_value, tnow);</div><div class="line"><a name="l05002"></a><span class="lineno"> 5002</span>&#160;}</div><div class="line"><a name="l05003"></a><span class="lineno"> 5003</span>&#160;</div><div class="line"><a name="l05004"></a><span class="lineno"><a class="line" href="GCS__Common_8cpp.html#a1d3cc361b864ddf64a44c12ab3bd044e"> 5004</a></span>&#160;<a class="code" href="classGCS.html">GCS</a> &amp;<a class="code" href="GCS__Common_8cpp.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a>()</div><div class="line"><a name="l05005"></a><span class="lineno"> 5005</span>&#160;{</div><div class="line"><a name="l05006"></a><span class="lineno"> 5006</span>&#160;    <span class="keywordflow">return</span> *<a class="code" href="classGCS.html#a684e9575c690f04ad04e105d6e8fde49">GCS::get_singleton</a>();</div><div class="line"><a name="l05007"></a><span class="lineno"> 5007</span>&#160;}</div><div class="ttc" id="classAP__Airspeed_html"><div class="ttname"><a href="classAP__Airspeed.html">AP_Airspeed</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__Airspeed_8h_source.html#l00035">AP_Airspeed.h:35</a></div></div>
<div class="ttc" id="classAP__Logger_html_a927c103f1880fd610bd4d0205e91ab64"><div class="ttname"><a href="classAP__Logger.html#a927c103f1880fd610bd4d0205e91ab64">AP_Logger::Write_Radio</a></div><div class="ttdeci">void Write_Radio(const mavlink_radio_t &amp;packet)</div><div class="ttdef"><b>Definition:</b> <a href="LogFile_8cpp_source.html#l00529">LogFile.cpp:529</a></div></div>
<div class="ttc" id="classAP__Notify_html_a0264facb8d3b5c35a7cff0171acdabd0"><div class="ttname"><a href="classAP__Notify.html#a0264facb8d3b5c35a7cff0171acdabd0">AP_Notify::get_singleton</a></div><div class="ttdeci">static AP_Notify * get_singleton(void)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Notify_8h_source.html#l00051">AP_Notify.h:51</a></div></div>
<div class="ttc" id="classQuaternion_html"><div class="ttname"><a href="classQuaternion.html">Quaternion</a></div><div class="ttdef"><b>Definition:</b> <a href="quaternion_8h_source.html#l00026">quaternion.h:26</a></div></div>
<div class="ttc" id="classQuaternion_html_a16eda13811dc1ec519adf9b5c1b1eb7c"><div class="ttname"><a href="classQuaternion.html#a16eda13811dc1ec519adf9b5c1b1eb7c">Quaternion::to_euler</a></div><div class="ttdeci">void to_euler(float &amp;roll, float &amp;pitch, float &amp;yaw) const</div><div class="ttdef"><b>Definition:</b> <a href="quaternion_8cpp_source.html#l00272">quaternion.cpp:272</a></div></div>
<div class="ttc" id="AHRS__Test_8cpp_html_a878e6c2ca2a501e59b25efe16eda17c6"><div class="ttname"><a href="AHRS__Test_8cpp.html#a878e6c2ca2a501e59b25efe16eda17c6">barometer</a></div><div class="ttdeci">static AP_Baro barometer</div><div class="ttdef"><b>Definition:</b> <a href="AHRS__Test_8cpp_source.html#l00026">AHRS_Test.cpp:26</a></div></div>
<div class="ttc" id="classMissionItemProtocol__Rally_html_a8cb3419075833799c439f18eac23c5d6"><div class="ttname"><a href="classMissionItemProtocol__Rally.html#a8cb3419075833799c439f18eac23c5d6">MissionItemProtocol_Rally::rally</a></div><div class="ttdeci">AP_Rally &amp; rally</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00269">GCS.h:269</a></div></div>
<div class="ttc" id="classAP__HAL_1_1Util_html_a2a2e64f649d25593951054d44c0ed53b"><div class="ttname"><a href="classAP__HAL_1_1Util.html#a2a2e64f649d25593951054d44c0ed53b">AP_HAL::Util::available_memory</a></div><div class="ttdeci">virtual uint32_t available_memory(void)</div><div class="ttdef"><b>Definition:</b> <a href="Util_8h_source.html#l00153">Util.h:153</a></div></div>
<div class="ttc" id="classAP__Logger_html_a887cc366f529b545442ee7f83547ac52"><div class="ttname"><a href="classAP__Logger.html#a887cc366f529b545442ee7f83547ac52">AP_Logger::handle_mavlink_msg</a></div><div class="ttdeci">void handle_mavlink_msg(class GCS_MAVLINK &amp;, mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Logger_8cpp_source.html#l00654">AP_Logger.cpp:654</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ad7479108500f36baa60c58a4b5261f72"><div class="ttname"><a href="structGCS__MAVLINK.html#ad7479108500f36baa60c58a4b5261f72">GCS_MAVLINK::handle_device_op_read</a></div><div class="ttdeci">void handle_device_op_read(mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__DeviceOp_8cpp_source.html#l00029">GCS_DeviceOp.cpp:29</a></div></div>
<div class="ttc" id="classAP__Logger_html_afa00768a36d54330f6613b477b3c4e05"><div class="ttname"><a href="classAP__Logger.html#afa00768a36d54330f6613b477b3c4e05">AP_Logger::handle_log_send</a></div><div class="ttdeci">void handle_log_send()</div><div class="ttdef"><b>Definition:</b> <a href="AP__Logger__MAVLinkLogTransfer_8cpp_source.html#l00185">AP_Logger_MAVLinkLogTransfer.cpp:185</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_adcf424c726b3b459b5c9f5346236224a"><div class="ttname"><a href="structGCS__MAVLINK.html#adcf424c726b3b459b5c9f5346236224a">GCS_MAVLINK::send_banner</a></div><div class="ttdeci">virtual void send_banner()</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l03560">GCS_Common.cpp:3560</a></div></div>
<div class="ttc" id="classAP__KDECAN_html_a1f62c80879764d4e6655baa2b0c0a39e"><div class="ttname"><a href="classAP__KDECAN.html#a1f62c80879764d4e6655baa2b0c0a39e">AP_KDECAN::get_kdecan</a></div><div class="ttdeci">static AP_KDECAN * get_kdecan(uint8_t driver_index)</div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a9b6a83c38b4c0a26c888f2ae641ab6bd"><div class="ttname"><a href="structGCS__MAVLINK.html#a9b6a83c38b4c0a26c888f2ae641ab6bd">GCS_MAVLINK::chan</a></div><div class="ttdeci">mavlink_channel_t chan</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00523">GCS.h:523</a></div></div>
<div class="ttc" id="namespaceAP_html_a4f2e5c5dc038d7aceb39b73dbf92c30e"><div class="ttname"><a href="namespaceAP.html#a4f2e5c5dc038d7aceb39b73dbf92c30e">AP::opticalflow</a></div><div class="ttdeci">OpticalFlow * opticalflow()</div><div class="ttdef"><b>Definition:</b> <a href="OpticalFlow_8cpp_source.html#l00223">OpticalFlow.cpp:223</a></div></div>
<div class="ttc" id="classAP__HAL_1_1Util_html_a287a2b82fa30b92c8d52aad61d4d27b7"><div class="ttname"><a href="classAP__HAL_1_1Util.html#a287a2b82fa30b92c8d52aad61d4d27b7">AP_HAL::Util::get_soft_armed</a></div><div class="ttdeci">bool get_soft_armed() const</div><div class="ttdef"><b>Definition:</b> <a href="Util_8h_source.html#l00015">Util.h:15</a></div></div>
<div class="ttc" id="classAP__HAL_1_1UARTDriver_html_acd5e319d580fe14755931d37b5d4deaf"><div class="ttname"><a href="classAP__HAL_1_1UARTDriver.html#acd5e319d580fe14755931d37b5d4deaf">AP_HAL::UARTDriver::flow_control</a></div><div class="ttdeci">flow_control</div><div class="ttdef"><b>Definition:</b> <a href="UARTDriver_8h_source.html#l00061">UARTDriver.h:61</a></div></div>
<div class="ttc" id="namespaceAP_html_ab9d0bcbec954b6c20abd8e13e6de7356"><div class="ttname"><a href="namespaceAP.html#ab9d0bcbec954b6c20abd8e13e6de7356">AP::compass</a></div><div class="ttdeci">Compass &amp; compass()</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8cpp_source.html#l01331">AP_Compass.cpp:1331</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a620e330b9e238577b3c088dce5d5337d"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a620e330b9e238577b3c088dce5d5337d">MSG_SCALED_PRESSURE</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00051">GCS.h:51</a></div></div>
<div class="ttc" id="classAP__Notify_html_ab3c6ab1cb46123285a0f3608b2e2ae4c"><div class="ttname"><a href="classAP__Notify.html#ab3c6ab1cb46123285a0f3608b2e2ae4c">AP_Notify::handle_led_control</a></div><div class="ttdeci">static void handle_led_control(mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Notify_8cpp_source.html#l00334">AP_Notify.cpp:334</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991ad83f0ebefe148e4568fe0630c52fa5a4"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991ad83f0ebefe148e4568fe0630c52fa5a4">MSG_RANGEFINDER</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00071">GCS.h:71</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ab92bda7b9cd97acd8cbeed37f6cc2523"><div class="ttname"><a href="structGCS__MAVLINK.html#ab92bda7b9cd97acd8cbeed37f6cc2523">GCS_MAVLINK::vtol_state</a></div><div class="ttdeci">virtual MAV_VTOL_STATE vtol_state() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00518">GCS.h:518</a></div></div>
<div class="ttc" id="classRangeFinder_html_aa7b45987158dbccaea5ea52ed4dd1954"><div class="ttname"><a href="classRangeFinder.html#aa7b45987158dbccaea5ea52ed4dd1954">RangeFinder::get_backend</a></div><div class="ttdeci">AP_RangeFinder_Backend * get_backend(uint8_t id) const</div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8cpp_source.html#l00522">RangeFinder.cpp:522</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a5c806eb8dfd27f4d0038bdeb755d53c5"><div class="ttname"><a href="structGCS__MAVLINK.html#a5c806eb8dfd27f4d0038bdeb755d53c5">GCS_MAVLINK::handle_radio_status</a></div><div class="ttdeci">void handle_radio_status(mavlink_message_t *msg, bool log_radio)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00916">GCS_Common.cpp:916</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a814da55cf1114e1fd2ee470cc310e0e3"><div class="ttname"><a href="structGCS__MAVLINK.html#a814da55cf1114e1fd2ee470cc310e0e3">GCS_MAVLINK::send_battery2</a></div><div class="ttdeci">void send_battery2()</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02311">GCS_Common.cpp:2311</a></div></div>
<div class="ttc" id="classAP__Gripper_html"><div class="ttname"><a href="classAP__Gripper.html">AP_Gripper</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__Gripper_8h_source.html#l00022">AP_Gripper.h:22</a></div></div>
<div class="ttc" id="classMissionItemProtocol__Waypoints_html_ab8e3067c9746ee9ebf15b19f56ea95e4"><div class="ttname"><a href="classMissionItemProtocol__Waypoints.html#ab8e3067c9746ee9ebf15b19f56ea95e4">MissionItemProtocol_Waypoints::replace_item</a></div><div class="ttdeci">MAV_MISSION_RESULT replace_item(const mavlink_mission_item_int_t &amp;) override WARN_IF_UNUSED</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l01020">GCS_Common.cpp:1020</a></div></div>
<div class="ttc" id="classAP__FWVersion_html_a749979024157e00f5f7db2195143b014"><div class="ttname"><a href="classAP__FWVersion.html#a749979024157e00f5f7db2195143b014">AP_FWVersion::os_name</a></div><div class="ttdeci">const char * os_name</div><div class="ttdef"><b>Definition:</b> <a href="AP__FWVersion_8h_source.html#l00018">AP_FWVersion.h:18</a></div></div>
<div class="ttc" id="AP__SerialManager_8h_html"><div class="ttname"><a href="AP__SerialManager_8h.html">AP_SerialManager.h</a></div></div>
<div class="ttc" id="classAP__RPM_html_a76ecca7a584a760e39be09ba29dcbdeb"><div class="ttname"><a href="classAP__RPM.html#a76ecca7a584a760e39be09ba29dcbdeb">AP_RPM::enabled</a></div><div class="ttdeci">bool enabled(uint8_t instance) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__RPM_8cpp_source.html#l00170">AP_RPM.cpp:170</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a0914d9b9c0654977fa3edd375b0d07ba"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a0914d9b9c0654977fa3edd375b0d07ba">MSG_NEXT_MISSION_REQUEST_WAYPOINTS</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00061">GCS.h:61</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a01fbfb12e47029f9621c94ff2c64e614"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a01fbfb12e47029f9621c94ff2c64e614">MSG_SCALED_PRESSURE2</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00052">GCS.h:52</a></div></div>
<div class="ttc" id="AP__Baro_8h_html"><div class="ttname"><a href="AP__Baro_8h.html">AP_Baro.h</a></div></div>
<div class="ttc" id="classAP__Mission_html_a4089847656c808d9a5faf123722a089a"><div class="ttname"><a href="classAP__Mission.html#a4089847656c808d9a5faf123722a089a">AP_Mission::mission_cmd_to_mavlink_int</a></div><div class="ttdeci">static bool mission_cmd_to_mavlink_int(const AP_Mission::Mission_Command &amp;cmd, mavlink_mission_item_int_t &amp;packet)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Mission_8cpp_source.html#l01132">AP_Mission.cpp:1132</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ab0fc102dcf76a7e807f1e2497d43afdf"><div class="ttname"><a href="structGCS__MAVLINK.html#ab0fc102dcf76a7e807f1e2497d43afdf">GCS_MAVLINK::try_send_mission_message</a></div><div class="ttdeci">bool try_send_mission_message(enum ap_message id)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l04209">GCS_Common.cpp:4209</a></div></div>
<div class="ttc" id="AHRS__Test_8cpp_html_a90ddf96040cbf0429052dafd4fa64c12"><div class="ttname"><a href="AHRS__Test_8cpp.html#a90ddf96040cbf0429052dafd4fa64c12">serial_manager</a></div><div class="ttdeci">static AP_SerialManager serial_manager</div><div class="ttdef"><b>Definition:</b> <a href="AHRS__Test_8cpp_source.html#l00027">AHRS_Test.cpp:27</a></div></div>
<div class="ttc" id="classMissionItemProtocol_html_abfe7fcef112784317a64ffec9904d150"><div class="ttname"><a href="classMissionItemProtocol.html#abfe7fcef112784317a64ffec9904d150">MissionItemProtocol::append_item</a></div><div class="ttdeci">virtual MAV_MISSION_RESULT append_item(const mavlink_mission_item_int_t &amp;mission_item_int)=0</div></div>
<div class="ttc" id="classAP__Airspeed_html_aa17de10e34d65c132353ddc6373f0e99"><div class="ttname"><a href="classAP__Airspeed.html#aa17de10e34d65c132353ddc6373f0e99">AP_Airspeed::enabled</a></div><div class="ttdeci">bool enabled(uint8_t i) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__Airspeed_8h_source.html#l00085">AP_Airspeed.h:85</a></div></div>
<div class="ttc" id="classMissionItemProtocol_html_a57a903def01c5bcd0069f306d7656884"><div class="ttname"><a href="classMissionItemProtocol.html#a57a903def01c5bcd0069f306d7656884">MissionItemProtocol::timeout</a></div><div class="ttdeci">virtual void timeout()</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00212">GCS.h:212</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_aa33bf3ed989c78eba9e4d85366ef1d2e"><div class="ttname"><a href="structGCS__MAVLINK.html#aa33bf3ed989c78eba9e4d85366ef1d2e">GCS_MAVLINK::_perf_packet</a></div><div class="ttdeci">AP_HAL::Util::perf_counter_t _perf_packet</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00710">GCS.h:710</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ae86392598ecfadf9cb7139a1b2b940b6"><div class="ttname"><a href="structGCS__MAVLINK.html#ae86392598ecfadf9cb7139a1b2b940b6">GCS_MAVLINK::handle_command_do_set_home</a></div><div class="ttdeci">MAV_RESULT handle_command_do_set_home(const mavlink_command_long_t &amp;packet)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l03860">GCS_Common.cpp:3860</a></div></div>
<div class="ttc" id="classAP__Mount_html_adbb183f324f69fc8997801147d1ba346"><div class="ttname"><a href="classAP__Mount.html#adbb183f324f69fc8997801147d1ba346">AP_Mount::set_roi_target</a></div><div class="ttdeci">void set_roi_target(const struct Location &amp;target_loc)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Mount_8h_source.html#l00112">AP_Mount.h:112</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991aafd3d6c9917b97e76f2dcebabe9cfd1d"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991aafd3d6c9917b97e76f2dcebabe9cfd1d">MSG_CAMERA_FEEDBACK</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00075">GCS.h:75</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ab18dbbbce41d8a78d46a9b477ca43d07"><div class="ttname"><a href="structGCS__MAVLINK.html#ab18dbbbce41d8a78d46a9b477ca43d07">GCS_MAVLINK::send_scaled_pressure3</a></div><div class="ttdeci">virtual void send_scaled_pressure3()</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02091">GCS_Common.cpp:2091</a></div></div>
<div class="ttc" id="classRC__Channels_html_a76e1ecc576586ebe6ed46317676be2a4"><div class="ttname"><a href="classRC__Channels.html#a76e1ecc576586ebe6ed46317676be2a4">RC_Channels::get_valid_channel_count</a></div><div class="ttdeci">static uint8_t get_valid_channel_count(void)</div><div class="ttdef"><b>Definition:</b> <a href="RC__Channels_8cpp_source.html#l00085">RC_Channels.cpp:85</a></div></div>
<div class="ttc" id="structAP__Proximity_1_1Proximity__Distance__Array_html"><div class="ttname"><a href="structAP__Proximity_1_1Proximity__Distance__Array.html">AP_Proximity::Proximity_Distance_Array</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__Proximity_8h_source.html#l00063">AP_Proximity.h:63</a></div></div>
<div class="ttc" id="classAP__SerialManager_html_ac7f526a7c129f9d922e34b0bf3a2c457"><div class="ttname"><a href="classAP__SerialManager.html#ac7f526a7c129f9d922e34b0bf3a2c457">AP_SerialManager::get_mavlink_channel</a></div><div class="ttdeci">bool get_mavlink_channel(enum SerialProtocol protocol, uint8_t instance, mavlink_channel_t &amp;mav_chan) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__SerialManager_8cpp_source.html#l00413">AP_SerialManager.cpp:413</a></div></div>
<div class="ttc" id="classAP__AHRS_html_a384a23e205126cf43e91bec9668b7ed0"><div class="ttname"><a href="classAP__AHRS.html#a384a23e205126cf43e91bec9668b7ed0">AP_AHRS::roll</a></div><div class="ttdeci">float roll</div><div class="ttdef"><b>Definition:</b> <a href="AP__AHRS_8h_source.html#l00220">AP_AHRS.h:220</a></div></div>
<div class="ttc" id="classMissionItemProtocol__Rally_html"><div class="ttname"><a href="classMissionItemProtocol__Rally.html">MissionItemProtocol_Rally</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00251">GCS.h:251</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ad3c8c95f626ce715264e4d5fd3e18ab0"><div class="ttname"><a href="structGCS__MAVLINK.html#ad3c8c95f626ce715264e4d5fd3e18ab0">GCS_MAVLINK::next_deferred_message_to_send_cache</a></div><div class="ttdeci">int8_t next_deferred_message_to_send_cache</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00735">GCS.h:735</a></div></div>
<div class="ttc" id="BARO__generic_8cpp_html_a0480b812cba9c1d9c71a5fb1071bd0fc"><div class="ttname"><a href="BARO__generic_8cpp.html#a0480b812cba9c1d9c71a5fb1071bd0fc">counter</a></div><div class="ttdeci">static uint8_t counter</div><div class="ttdef"><b>Definition:</b> <a href="BARO__generic_8cpp_source.html#l00032">BARO_generic.cpp:32</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a953b154df3b239607deff1c1461c88ed"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a953b154df3b239607deff1c1461c88ed">MSG_BATTERY_STATUS</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00091">GCS.h:91</a></div></div>
<div class="ttc" id="classAP__FWVersion_html_a1df17a9f600f6b1a7dd4dd012b226c9a"><div class="ttname"><a href="classAP__FWVersion.html#a1df17a9f600f6b1a7dd4dd012b226c9a">AP_FWVersion::fw_string</a></div><div class="ttdeci">const char * fw_string</div><div class="ttdef"><b>Definition:</b> <a href="AP__FWVersion_8h_source.html#l00014">AP_FWVersion.h:14</a></div></div>
<div class="ttc" id="classAP__FWVersion_html_a066b24da78d27e68d310b1accd317e44"><div class="ttname"><a href="classAP__FWVersion.html#a066b24da78d27e68d310b1accd317e44">AP_FWVersion::middleware_name</a></div><div class="ttdeci">const char * middleware_name</div><div class="ttdef"><b>Definition:</b> <a href="AP__FWVersion_8h_source.html#l00016">AP_FWVersion.h:16</a></div></div>
<div class="ttc" id="classGCS_html_a07a8ce284513a8ce8336b085d0b8aadf"><div class="ttname"><a href="classGCS.html#a07a8ce284513a8ce8336b085d0b8aadf">GCS::update_send</a></div><div class="ttdeci">void update_send()</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02243">GCS_Common.cpp:2243</a></div></div>
<div class="ttc" id="unionAP__Mission_1_1Content_html_a504fcc7e9ab1d880aa002d87f9f53c72"><div class="ttname"><a href="unionAP__Mission_1_1Content.html#a504fcc7e9ab1d880aa002d87f9f53c72">AP_Mission::Content::jump</a></div><div class="ttdeci">Jump_Command jump</div><div class="ttdef"><b>Definition:</b> <a href="AP__Mission_8h_source.html#l00197">AP_Mission.h:197</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a4923a073dc82971c7b4d4116170a9726"><div class="ttname"><a href="structGCS__MAVLINK.html#a4923a073dc82971c7b4d4116170a9726">GCS_MAVLINK::handle_system_time_message</a></div><div class="ttdeci">void handle_system_time_message(const mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l03011">GCS_Common.cpp:3011</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a4280ba0127cf45582080c3398f99dd5a"><div class="ttname"><a href="structGCS__MAVLINK.html#a4280ba0127cf45582080c3398f99dd5a">GCS_MAVLINK::allow_disarm</a></div><div class="ttdeci">virtual bool allow_disarm() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00662">GCS.h:662</a></div></div>
<div class="ttc" id="classAP__HAL_1_1RCOutput_html_af1625f683d791c5c843fed2a6cefde3f"><div class="ttname"><a href="classAP__HAL_1_1RCOutput.html#af1625f683d791c5c843fed2a6cefde3f">AP_HAL::RCOutput::force_safety_no_wait</a></div><div class="ttdeci">virtual void force_safety_no_wait(void)</div><div class="ttdef"><b>Definition:</b> <a href="RCOutput_8h_source.html#l00110">RCOutput.h:110</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a6b28d39ba0b6d7be473c03b21be358ff"><div class="ttname"><a href="structGCS__MAVLINK.html#a6b28d39ba0b6d7be473c03b21be358ff">GCS_MAVLINK::telem_delay</a></div><div class="ttdeci">virtual uint32_t telem_delay() const =0</div></div>
<div class="ttc" id="classAP__Proximity_html_af6397f7a3a7799575ffc0138e10d202aaca1c08feb4111c8ce0afbaa89d3a12ba"><div class="ttname"><a href="classAP__Proximity.html#af6397f7a3a7799575ffc0138e10d202aaca1c08feb4111c8ce0afbaa89d3a12ba">AP_Proximity::Proximity_NotConnected</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__Proximity_8h_source.html#l00057">AP_Proximity.h:57</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a2ecc69fc8fb933e2fb079da4bc06fec6"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a2ecc69fc8fb933e2fb079da4bc06fec6">MSG_POSITION_TARGET_LOCAL_NED</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00089">GCS.h:89</a></div></div>
<div class="ttc" id="classAP__Baro_html_ad56b4323cfc37bb7510e6cf319ecd7ad"><div class="ttname"><a href="classAP__Baro.html#ad56b4323cfc37bb7510e6cf319ecd7ad">AP_Baro::num_instances</a></div><div class="ttdeci">uint8_t num_instances(void) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__Baro_8h_source.html#l00158">AP_Baro.h:158</a></div></div>
<div class="ttc" id="classAP__Gripper_html_a582c100e6f5d1d8b0c7bd68b30c4c426"><div class="ttname"><a href="classAP__Gripper.html#a582c100e6f5d1d8b0c7bd68b30c4c426">AP_Gripper::enabled</a></div><div class="ttdeci">bool enabled() const</div><div class="ttdef"><b>Definition:</b> <a href="AP__Gripper_8h_source.html#l00033">AP_Gripper.h:33</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a1abbf4a96b6bddc103570b154fb59269"><div class="ttname"><a href="structGCS__MAVLINK.html#a1abbf4a96b6bddc103570b154fb59269">GCS_MAVLINK::send_packet_count</a></div><div class="ttdeci">uint16_t send_packet_count</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00897">GCS.h:897</a></div></div>
<div class="ttc" id="AP__Airspeed_8h_html"><div class="ttname"><a href="AP__Airspeed_8h.html">AP_Airspeed.h</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ab8956ef32413ce91ff99cc4159b0d52f"><div class="ttname"><a href="structGCS__MAVLINK.html#ab8956ef32413ce91ff99cc4159b0d52f">GCS_MAVLINK::handle_send_autopilot_version</a></div><div class="ttdeci">void handle_send_autopilot_version(const mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l03555">GCS_Common.cpp:3555</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_afd3ab3d8ffa0312e0cfb5a780221eebd"><div class="ttname"><a href="structGCS__MAVLINK.html#afd3ab3d8ffa0312e0cfb5a780221eebd">GCS_MAVLINK::handle_servorelay_message</a></div><div class="ttdeci">MAV_RESULT handle_servorelay_message(const mavlink_command_long_t &amp;packet)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__ServoRelay_8cpp_source.html#l00005">GCS_ServoRelay.cpp:5</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a7c0c74e4cc6b27ce2dd6caa0f7cd8a3e"><div class="ttname"><a href="structGCS__MAVLINK.html#a7c0c74e4cc6b27ce2dd6caa0f7cd8a3e">GCS_MAVLINK::send_mission_ack</a></div><div class="ttdeci">void send_mission_ack(const mavlink_message_t &amp;msg, MAV_MISSION_TYPE mission_type, MAV_MISSION_RESULT result) const</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00310">GCS.h:310</a></div></div>
<div class="ttc" id="classAP__RTC_html_abb961ded9907a2dbaa1b20de2b3b5ce0"><div class="ttname"><a href="classAP__RTC.html#abb961ded9907a2dbaa1b20de2b3b5ce0">AP_RTC::set_utc_usec</a></div><div class="ttdeci">void set_utc_usec(uint64_t time_utc_usec, source_type type)</div><div class="ttdef"><b>Definition:</b> <a href="AP__RTC_8cpp_source.html#l00034">AP_RTC.cpp:34</a></div></div>
<div class="ttc" id="classAP__RangeFinder__Backend_html_a68d8cec7904e440bc9e977edcf1db4cc"><div class="ttname"><a href="classAP__RangeFinder__Backend.html#a68d8cec7904e440bc9e977edcf1db4cc">AP_RangeFinder_Backend::voltage_mv</a></div><div class="ttdeci">uint16_t voltage_mv() const</div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder__Backend_8h_source.html#l00038">RangeFinder_Backend.h:38</a></div></div>
<div class="ttc" id="classAP__AHRS__NavEKF_html_a087f9c90645ceabd1fd453fac7caa8dd"><div class="ttname"><a href="classAP__AHRS__NavEKF.html#a087f9c90645ceabd1fd453fac7caa8dd">AP_AHRS_NavEKF::send_ekf_status_report</a></div><div class="ttdeci">void send_ekf_status_report(mavlink_channel_t chan) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__AHRS__NavEKF_8cpp_source.html#l01528">AP_AHRS_NavEKF.cpp:1528</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a9ffa2d0359bf7dd8b3607617938a510f"><div class="ttname"><a href="structGCS__MAVLINK.html#a9ffa2d0359bf7dd8b3607617938a510f">GCS_MAVLINK::send_scaled_pressure_instance</a></div><div class="ttdeci">void send_scaled_pressure_instance(uint8_t instance, void(*send_fn)(mavlink_channel_t chan, uint32_t time_boot_ms, float press_abs, float press_diff, int16_t temperature))</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02047">GCS_Common.cpp:2047</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_aec273d3bdc27755bfb8f2680dd2e5071"><div class="ttname"><a href="structGCS__MAVLINK.html#aec273d3bdc27755bfb8f2680dd2e5071">GCS_MAVLINK::handle_global_vision_position_estimate</a></div><div class="ttdeci">void handle_global_vision_position_estimate(mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l03150">GCS_Common.cpp:3150</a></div></div>
<div class="ttc" id="classAP__Rally_html"><div class="ttname"><a href="classAP__Rally.html">AP_Rally</a></div><div class="ttdoc">Object managing Rally Points.</div><div class="ttdef"><b>Definition:</b> <a href="AP__Rally_8h_source.html#l00034">AP_Rally.h:34</a></div></div>
<div class="ttc" id="AP__ToshibaCAN_8h_html"><div class="ttname"><a href="AP__ToshibaCAN_8h.html">AP_ToshibaCAN.h</a></div></div>
<div class="ttc" id="vector3_8h_html_af345ad77ba5e240c7ab72b4b2077e754"><div class="ttname"><a href="vector3_8h.html#af345ad77ba5e240c7ab72b4b2077e754">Vector3f</a></div><div class="ttdeci">Vector3&lt; float &gt; Vector3f</div><div class="ttdef"><b>Definition:</b> <a href="vector3_8h_source.html#l00252">vector3.h:252</a></div></div>
<div class="ttc" id="classAP__AHRS__NavEKF_html_a9e93c8ec48c59534bb3e930d8ced51fd"><div class="ttname"><a href="classAP__AHRS__NavEKF.html#a9e93c8ec48c59534bb3e930d8ced51fd">AP_AHRS_NavEKF::get_error_yaw</a></div><div class="ttdeci">float get_error_yaw() const override</div><div class="ttdef"><b>Definition:</b> <a href="AP__AHRS__NavEKF_8cpp_source.html#l00457">AP_AHRS_NavEKF.cpp:457</a></div></div>
<div class="ttc" id="Semaphores_8h_html_a819dd9ac6de800cdf1014b0a922b67d4"><div class="ttname"><a href="Semaphores_8h.html#a819dd9ac6de800cdf1014b0a922b67d4">WITH_SEMAPHORE</a></div><div class="ttdeci">#define WITH_SEMAPHORE(sem)</div><div class="ttdef"><b>Definition:</b> <a href="Semaphores_8h_source.html#l00048">Semaphores.h:48</a></div></div>
<div class="ttc" id="AP__Proximity_8h_html_a08b5ac9aaf4ef1c32a8bb8e7aff7bff9"><div class="ttname"><a href="AP__Proximity_8h.html#a08b5ac9aaf4ef1c32a8bb8e7aff7bff9">PROXIMITY_SENSOR_ID_START</a></div><div class="ttdeci">#define PROXIMITY_SENSOR_ID_START</div><div class="ttdef"><b>Definition:</b> <a href="AP__Proximity_8h_source.html#l00028">AP_Proximity.h:28</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a60210ad07652c7b66db5f1a5e8220663"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a60210ad07652c7b66db5f1a5e8220663">MSG_AHRS</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00065">GCS.h:65</a></div></div>
<div class="ttc" id="classAP__AdvancedFailsafe_html_ac2c01b0447f5c4c06d1ca476764933b4"><div class="ttname"><a href="classAP__AdvancedFailsafe.html#ac2c01b0447f5c4c06d1ca476764933b4">AP_AdvancedFailsafe::gcs_terminate</a></div><div class="ttdeci">bool gcs_terminate(bool should_terminate, const char *reason)</div><div class="ttdef"><b>Definition:</b> <a href="AP__AdvancedFailsafe_8cpp_source.html#l00384">AP_AdvancedFailsafe.cpp:384</a></div></div>
<div class="ttc" id="classAP__HAL_1_1Util_html_a6b7f7ba5272a4a2f7ae352fe35af90e1"><div class="ttname"><a href="classAP__HAL_1_1Util.html#a6b7f7ba5272a4a2f7ae352fe35af90e1">AP_HAL::Util::perf_alloc</a></div><div class="ttdeci">virtual perf_counter_t perf_alloc(perf_counter_type t, const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="Util_8h_source.html#l00131">Util.h:131</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a594bdee663bf384059b643517d48da32"><div class="ttname"><a href="structGCS__MAVLINK.html#a594bdee663bf384059b643517d48da32">GCS_MAVLINK::send_heartbeat</a></div><div class="ttdeci">void send_heartbeat(void) const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02557">GCS_Common.cpp:2557</a></div></div>
<div class="ttc" id="AP__InternalError_8h_html"><div class="ttname"><a href="AP__InternalError_8h.html">AP_InternalError.h</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_af12f472c624f3c0735b082c982e7ec42"><div class="ttname"><a href="structGCS__MAVLINK.html#af12f472c624f3c0735b082c982e7ec42">GCS_MAVLINK::set_ekf_origin</a></div><div class="ttdeci">void set_ekf_origin(const Location &amp;loc)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l03061">GCS_Common.cpp:3061</a></div></div>
<div class="ttc" id="classAP__Baro_html_a67fd690b15ef9f0f23b3304831ca913a"><div class="ttname"><a href="classAP__Baro.html#a67fd690b15ef9f0f23b3304831ca913a">AP_Baro::update_calibration</a></div><div class="ttdeci">void update_calibration(void)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Baro_8cpp_source.html#l00271">AP_Baro.cpp:271</a></div></div>
<div class="ttc" id="classAP__SerialManager_html_a895e72ab58afc1ae8c2bf7f93c08a352"><div class="ttname"><a href="classAP__SerialManager.html#a895e72ab58afc1ae8c2bf7f93c08a352">AP_SerialManager::get_passthru</a></div><div class="ttdeci">bool get_passthru(AP_HAL::UARTDriver *&amp;port1, AP_HAL::UARTDriver *&amp;port2, uint8_t &amp;timeout_s) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__SerialManager_8cpp_source.html#l00538">AP_SerialManager.cpp:538</a></div></div>
<div class="ttc" id="classAP__FWVersion_html_ae1441de09d1b00a17c2e684f6a04c20e"><div class="ttname"><a href="classAP__FWVersion.html#ae1441de09d1b00a17c2e684f6a04c20e">AP_FWVersion::major</a></div><div class="ttdeci">uint8_t major</div><div class="ttdef"><b>Definition:</b> <a href="AP__FWVersion_8h_source.html#l00010">AP_FWVersion.h:10</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_aa417e1ce8bac9601fdc1d239f1b0dd55"><div class="ttname"><a href="structGCS__MAVLINK.html#aa417e1ce8bac9601fdc1d239f1b0dd55">GCS_MAVLINK::send_extended_sys_state</a></div><div class="ttdeci">void send_extended_sys_state() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l04316">GCS_Common.cpp:4316</a></div></div>
<div class="ttc" id="classCompass_html_a4519009b6dc2e68c498903eb314c2a60"><div class="ttname"><a href="classCompass.html#a4519009b6dc2e68c498903eb314c2a60">Compass::get_declination</a></div><div class="ttdeci">float get_declination() const</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8cpp_source.html#l01106">AP_Compass.cpp:1106</a></div></div>
<div class="ttc" id="classGCS_html_ade82ad44b8dcea3f95ab08f4f8b59924"><div class="ttname"><a href="classGCS.html#ade82ad44b8dcea3f95ab08f4f8b59924">GCS::send_mission_item_reached_message</a></div><div class="ttdeci">void send_mission_item_reached_message(uint16_t mission_index)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02283">GCS_Common.cpp:2283</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a37d3fae28018d3432206dd3e706f37f9"><div class="ttname"><a href="structGCS__MAVLINK.html#a37d3fae28018d3432206dd3e706f37f9">GCS_MAVLINK::get_default_interval_for_mavlink_message_id</a></div><div class="ttdeci">bool get_default_interval_for_mavlink_message_id(const uint32_t mavlink_message_id, uint16_t &amp;interval) const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l04796">GCS_Common.cpp:4796</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a29e2941413d50ab63cd70f5beadef19a"><div class="ttname"><a href="structGCS__MAVLINK.html#a29e2941413d50ab63cd70f5beadef19a">GCS_MAVLINK::handle_command_long_packet</a></div><div class="ttdeci">virtual MAV_RESULT handle_command_long_packet(const mavlink_command_long_t &amp;packet)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l03886">GCS_Common.cpp:3886</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991ac135e7becb863f5bf647e16fd8bc3aa2"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991ac135e7becb863f5bf647e16fd8bc3aa2">MSG_PID_TUNING</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00083">GCS.h:83</a></div></div>
<div class="ttc" id="GCS_8h_html_ab80838ce3f62637b02903e120edb82d1"><div class="ttname"><a href="GCS_8h.html#ab80838ce3f62637b02903e120edb82d1">CHECK_PAYLOAD_SIZE</a></div><div class="ttdeci">#define CHECK_PAYLOAD_SIZE(id)</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00026">GCS.h:26</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_aa9263cd0a1bb3697c476dc0be960c507"><div class="ttname"><a href="structGCS__MAVLINK.html#aa9263cd0a1bb3697c476dc0be960c507">GCS_MAVLINK::get_interval_for_stream</a></div><div class="ttdeci">uint16_t get_interval_for_stream(GCS_MAVLINK::streams id) const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l04737">GCS_Common.cpp:4737</a></div></div>
<div class="ttc" id="classAP__HAL_1_1RCOutput_html_ade771f122696035c1e831ccc63a33893"><div class="ttname"><a href="classAP__HAL_1_1RCOutput.html#ade771f122696035c1e831ccc63a33893">AP_HAL::RCOutput::write</a></div><div class="ttdeci">virtual void write(uint8_t chan, uint16_t period_us)=0</div></div>
<div class="ttc" id="classAP__HAL_1_1AnalogIn_html_a84c87bc57f06182afc85725cafe22698"><div class="ttname"><a href="classAP__HAL_1_1AnalogIn.html#a84c87bc57f06182afc85725cafe22698">AP_HAL::AnalogIn::board_voltage</a></div><div class="ttdeci">virtual float board_voltage(void)=0</div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a615db40b8b5652946110bd9a8f757f9c"><div class="ttname"><a href="structGCS__MAVLINK.html#a615db40b8b5652946110bd9a8f757f9c">GCS_MAVLINK::chan_is_streaming</a></div><div class="ttdeci">static uint8_t chan_is_streaming</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00803">GCS.h:803</a></div></div>
<div class="ttc" id="classAP__AdvancedFailsafe_html"><div class="ttname"><a href="classAP__AdvancedFailsafe.html">AP_AdvancedFailsafe</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__AdvancedFailsafe_8h_source.html#l00030">AP_AdvancedFailsafe.h:30</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a76ff239c882575a8255ace879a88980b"><div class="ttname"><a href="structGCS__MAVLINK.html#a76ff239c882575a8255ace879a88980b">GCS_MAVLINK::setup_uart</a></div><div class="ttdeci">void setup_uart(uint8_t instance)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00111">GCS_Common.cpp:111</a></div></div>
<div class="ttc" id="classAP__AHRS__NavEKF_html_a20b0f052bb14c6e4ee4839def8d6fa72"><div class="ttname"><a href="classAP__AHRS__NavEKF.html#a20b0f052bb14c6e4ee4839def8d6fa72">AP_AHRS_NavEKF::get_secondary_attitude</a></div><div class="ttdeci">bool get_secondary_attitude(Vector3f &amp;eulers) const override</div><div class="ttdef"><b>Definition:</b> <a href="AP__AHRS__NavEKF_8cpp_source.html#l00518">AP_AHRS_NavEKF.cpp:518</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a9ed648daa77cef3377e0d2591ce92859"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a9ed648daa77cef3377e0d2591ce92859">MSG_ADSB_VEHICLE</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00090">GCS.h:90</a></div></div>
<div class="ttc" id="classGCS_html_a7b54834de92fbedc24ba0e282934db9d"><div class="ttname"><a href="classGCS.html#a7b54834de92fbedc24ba0e282934db9d">GCS::num_gcs</a></div><div class="ttdeci">virtual uint8_t num_gcs() const =0</div></div>
<div class="ttc" id="classAP__RPM_html_a6222178dcb331b70cbf292cbba8fd8eb"><div class="ttname"><a href="classAP__RPM.html#a6222178dcb331b70cbf292cbba8fd8eb">AP_RPM::get_rpm</a></div><div class="ttdeci">float get_rpm(uint8_t instance) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__RPM_8h_source.html#l00077">AP_RPM.h:77</a></div></div>
<div class="ttc" id="classAP__AHRS__NavEKF_html_a86244462b889fe1b5a69c438a2cdbd46"><div class="ttname"><a href="classAP__AHRS__NavEKF.html#a86244462b889fe1b5a69c438a2cdbd46">AP_AHRS_NavEKF::get_gyro</a></div><div class="ttdeci">const Vector3f &amp; get_gyro(void) const override</div><div class="ttdef"><b>Definition:</b> <a href="AP__AHRS__NavEKF_8cpp_source.html#l00050">AP_AHRS_NavEKF.cpp:50</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a35662822061cee24dea1b6db5d507604"><div class="ttname"><a href="structGCS__MAVLINK.html#a35662822061cee24dea1b6db5d507604">GCS_MAVLINK::should_send_message_in_delay_callback</a></div><div class="ttdeci">bool should_send_message_in_delay_callback(const ap_message id) const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l01227">GCS_Common.cpp:1227</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a5a44740c768dc9dc7a6937e75fa645b7"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a5a44740c768dc9dc7a6937e75fa645b7">MSG_MOUNT_STATUS</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00076">GCS.h:76</a></div></div>
<div class="ttc" id="classAP__HAL_1_1UARTDriver_html_acd5e319d580fe14755931d37b5d4deafa67a3cf106c9c7c7d6e454a7a9610a7d8"><div class="ttname"><a href="classAP__HAL_1_1UARTDriver.html#acd5e319d580fe14755931d37b5d4deafa67a3cf106c9c7c7d6e454a7a9610a7d8">AP_HAL::UARTDriver::FLOW_CONTROL_DISABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="UARTDriver_8h_source.html#l00062">UARTDriver.h:62</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html"><div class="ttname"><a href="structGCS__MAVLINK.html">GCS_MAVLINK</a></div><div class="ttdoc">MAVLink transport control class.</div><div class="ttdef"><b>Definition:</b> <a href="AHRS__Test_8cpp_source.html#l00104">AHRS_Test.cpp:104</a></div></div>
<div class="ttc" id="classSITL_1_1SITL_html"><div class="ttname"><a href="classSITL_1_1SITL.html">SITL::SITL</a></div><div class="ttdef"><b>Definition:</b> <a href="SITL_8h_source.html#l00059">SITL.h:59</a></div></div>
<div class="ttc" id="namespaceAP_html_ab742b8c41eb0a08e79d6fbec520a87a4"><div class="ttname"><a href="namespaceAP.html#ab742b8c41eb0a08e79d6fbec520a87a4">AP::ahrs_navekf</a></div><div class="ttdeci">AP_AHRS_NavEKF &amp; ahrs_navekf()</div><div class="ttdef"><b>Definition:</b> <a href="AP__AHRS__NavEKF_8cpp_source.html#l01819">AP_AHRS_NavEKF.cpp:1819</a></div></div>
<div class="ttc" id="classAP__HAL_1_1RCOutput_html_afb075a7e5438b6f0bae228e0b6be0cc2"><div class="ttname"><a href="classAP__HAL_1_1RCOutput.html#afb075a7e5438b6f0bae228e0b6be0cc2">AP_HAL::RCOutput::force_safety_off</a></div><div class="ttdeci">virtual void force_safety_off(void)</div><div class="ttdef"><b>Definition:</b> <a href="RCOutput_8h_source.html#l00105">RCOutput.h:105</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_1_1deferred__message__bucket__t_html_a8f4bf56ecfdeceba3cb32d6abdb53951"><div class="ttname"><a href="structGCS__MAVLINK_1_1deferred__message__bucket__t.html#a8f4bf56ecfdeceba3cb32d6abdb53951">GCS_MAVLINK::deferred_message_bucket_t::ap_message_ids</a></div><div class="ttdeci">Bitmask&lt; MSG_LAST &gt; ap_message_ids</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00738">GCS.h:738</a></div></div>
<div class="ttc" id="AP__BattMonitor_8h_html"><div class="ttname"><a href="AP__BattMonitor_8h.html">AP_BattMonitor.h</a></div></div>
<div class="ttc" id="AHRS__Test_8cpp_html_a7da610c2722190575e0ded7e4204d743"><div class="ttname"><a href="AHRS__Test_8cpp.html#a7da610c2722190575e0ded7e4204d743">ahrs</a></div><div class="ttdeci">AP_AHRS_NavEKF &amp; ahrs</div><div class="ttdef"><b>Definition:</b> <a href="AHRS__Test_8cpp_source.html#l00044">AHRS_Test.cpp:44</a></div></div>
<div class="ttc" id="classAP__Notify_html"><div class="ttname"><a href="classAP__Notify.html">AP_Notify</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__Notify_8h_source.html#l00039">AP_Notify.h:39</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a8ed79496b0f3efa28e630bddc8f59e62"><div class="ttname"><a href="structGCS__MAVLINK.html#a8ed79496b0f3efa28e630bddc8f59e62">GCS_MAVLINK::send_autopilot_version</a></div><div class="ttdeci">void send_autopilot_version() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02416">GCS_Common.cpp:2416</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ac2c3d2352c4047cecbce1cf9437631f6"><div class="ttname"><a href="structGCS__MAVLINK.html#ac2c3d2352c4047cecbce1cf9437631f6">GCS_MAVLINK::set_mavlink_message_id_interval</a></div><div class="ttdeci">bool set_mavlink_message_id_interval(const uint32_t mavlink_id, const uint16_t interval_ms)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l01216">GCS_Common.cpp:1216</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ae92d17021254192f5562d5a724542152"><div class="ttname"><a href="structGCS__MAVLINK.html#ae92d17021254192f5562d5a724542152">GCS_MAVLINK::mavlink_coordinate_frame_to_location_alt_frame</a></div><div class="ttdeci">bool mavlink_coordinate_frame_to_location_alt_frame(uint8_t coordinate_frame, Location::AltFrame &amp;frame)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l04942">GCS_Common.cpp:4942</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a0eb1cd6bb593be5f6434d3905daae777"><div class="ttname"><a href="structGCS__MAVLINK.html#a0eb1cd6bb593be5f6434d3905daae777">GCS_MAVLINK::send_position_target_local_ned</a></div><div class="ttdeci">virtual void send_position_target_local_ned()</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00436">GCS.h:436</a></div></div>
<div class="ttc" id="rotations_8h_html_a67a250c97139a5466814a54c4aa4a681a69e35fa52d2cbc68b5f10e3541215404"><div class="ttname"><a href="rotations_8h.html#a67a250c97139a5466814a54c4aa4a681a69e35fa52d2cbc68b5f10e3541215404">ROTATION_PITCH_270</a></div><div class="ttdef"><b>Definition:</b> <a href="rotations_8h_source.html#l00053">rotations.h:53</a></div></div>
<div class="ttc" id="classAP__AHRS__NavEKF_html_a7933552ae34a7fd8fdfc1e51a4e2fad6"><div class="ttname"><a href="classAP__AHRS__NavEKF.html#a7933552ae34a7fd8fdfc1e51a4e2fad6">AP_AHRS_NavEKF::have_inertial_nav</a></div><div class="ttdeci">bool have_inertial_nav() const override</div><div class="ttdef"><b>Definition:</b> <a href="AP__AHRS__NavEKF_8cpp_source.html#l00642">AP_AHRS_NavEKF.cpp:642</a></div></div>
<div class="ttc" id="classAP__RangeFinder__Backend_html_ab18f1f3fb5439ebc82721c6937ee3bc6"><div class="ttname"><a href="classAP__RangeFinder__Backend.html#ab18f1f3fb5439ebc82721c6937ee3bc6">AP_RangeFinder_Backend::orientation</a></div><div class="ttdeci">enum Rotation orientation() const</div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder__Backend_8h_source.html#l00036">RangeFinder_Backend.h:36</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a276c699b197f97ea3abe7e92c920cd2b"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a276c699b197f97ea3abe7e92c920cd2b">MSG_EXTENDED_SYS_STATE</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00098">GCS.h:98</a></div></div>
<div class="ttc" id="classAP__SerialManager_html"><div class="ttname"><a href="classAP__SerialManager.html">AP_SerialManager</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__SerialManager_8h_source.html#l00078">AP_SerialManager.h:78</a></div></div>
<div class="ttc" id="classGCS_html_af5dac82b632935cf168d6c9849c78d25"><div class="ttname"><a href="classGCS.html#af5dac82b632935cf168d6c9849c78d25">GCS::_missionitemprotocol_waypoints</a></div><div class="ttdeci">static MissionItemProtocol_Waypoints * _missionitemprotocol_waypoints</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00960">GCS.h:960</a></div></div>
<div class="ttc" id="classNavEKF2_html_ac20620a2c08019e941feb11120a09152"><div class="ttname"><a href="classNavEKF2.html#ac20620a2c08019e941feb11120a09152">NavEKF2::activeCores</a></div><div class="ttdeci">uint8_t activeCores(void) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__NavEKF2_8h_source.html#l00050">AP_NavEKF2.h:50</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a8963740a9dd43619c251d60a34abae90"><div class="ttname"><a href="structGCS__MAVLINK.html#a8963740a9dd43619c251d60a34abae90">GCS_MAVLINK::interval_ms</a></div><div class="ttdeci">const uint16_t interval_ms</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00602">GCS.h:602</a></div></div>
<div class="ttc" id="AP__HAL_8h_html"><div class="ttname"><a href="AP__HAL_8h.html">AP_HAL.h</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_acc3f14c49157522bc5c00c3fe1c1b553"><div class="ttname"><a href="structGCS__MAVLINK.html#acc3f14c49157522bc5c00c3fe1c1b553">GCS_MAVLINK::handle_command_mag_cal</a></div><div class="ttdeci">MAV_RESULT handle_command_mag_cal(const mavlink_command_long_t &amp;packet)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l03765">GCS_Common.cpp:3765</a></div></div>
<div class="ttc" id="classAP__RangeFinder__Backend_html_a9ee50edf2273437704ca0bd1f133c575"><div class="ttname"><a href="classAP__RangeFinder__Backend.html#a9ee50edf2273437704ca0bd1f133c575">AP_RangeFinder_Backend::distance_cm</a></div><div class="ttdeci">uint16_t distance_cm() const</div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder__Backend_8h_source.html#l00037">RangeFinder_Backend.h:37</a></div></div>
<div class="ttc" id="classAP__SerialManager_html_aeec52d0317706a561feba321569f09a9"><div class="ttname"><a href="classAP__SerialManager.html#aeec52d0317706a561feba321569f09a9">AP_SerialManager::get_mavlink_protocol</a></div><div class="ttdeci">SerialProtocol get_mavlink_protocol(mavlink_channel_t mav_chan) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__SerialManager_8cpp_source.html#l00429">AP_SerialManager.cpp:429</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ae00bb5fbb1a3e4843be647dc9b09f51f"><div class="ttname"><a href="structGCS__MAVLINK.html#ae00bb5fbb1a3e4843be647dc9b09f51f">GCS_MAVLINK::handle_timesync</a></div><div class="ttdeci">void handle_timesync(mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02914">GCS_Common.cpp:2914</a></div></div>
<div class="ttc" id="AP__VisualOdom_8h_html"><div class="ttname"><a href="AP__VisualOdom_8h.html">AP_VisualOdom.h</a></div></div>
<div class="ttc" id="classAP__HAL_1_1UARTDriver_html_a2a83124757f6f8f6eb4d25b11c9cb97e"><div class="ttname"><a href="classAP__HAL_1_1UARTDriver.html#a2a83124757f6f8f6eb4d25b11c9cb97e">AP_HAL::UARTDriver::begin</a></div><div class="ttdeci">virtual void begin(uint32_t baud)=0</div></div>
<div class="ttc" id="classMissionItemProtocol_html_a3c6d228d5f6dc89c95ac4916e234c5da"><div class="ttname"><a href="classMissionItemProtocol.html#a3c6d228d5f6dc89c95ac4916e234c5da">MissionItemProtocol::timelast_receive_ms</a></div><div class="ttdeci">uint32_t timelast_receive_ms</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00187">GCS.h:187</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_1_1deferred__message__t_html_a2ff0cd2e84d12ace0f8229d0044c8e8f"><div class="ttname"><a href="structGCS__MAVLINK_1_1deferred__message__t.html#a2ff0cd2e84d12ace0f8229d0044c8e8f">GCS_MAVLINK::deferred_message_t::last_sent_ms</a></div><div class="ttdeci">uint16_t last_sent_ms</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00724">GCS.h:724</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a674f4da15be7463e4966f517d7a77e1d"><div class="ttname"><a href="structGCS__MAVLINK.html#a674f4da15be7463e4966f517d7a77e1d">GCS_MAVLINK::send_vibration</a></div><div class="ttdeci">void send_vibration() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02496">GCS_Common.cpp:2496</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a870f84d9aa1c445b2b0d4d7101b836e1"><div class="ttname"><a href="structGCS__MAVLINK.html#a870f84d9aa1c445b2b0d4d7101b836e1">GCS_MAVLINK::handleMessage</a></div><div class="ttdeci">virtual void handleMessage(mavlink_message_t *msg)=0</div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a4f6a9d9c5ac83defda00c72f0da3d904"><div class="ttname"><a href="structGCS__MAVLINK.html#a4f6a9d9c5ac83defda00c72f0da3d904">GCS_MAVLINK::last_heartbeat_time</a></div><div class="ttdeci">uint32_t last_heartbeat_time</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00384">GCS.h:384</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ac8eaa55df74e0b8196a0ab7bd7b853c1"><div class="ttname"><a href="structGCS__MAVLINK.html#ac8eaa55df74e0b8196a0ab7bd7b853c1">GCS_MAVLINK::_queued_parameter</a></div><div class="ttdeci">AP_Param * _queued_parameter</div><div class="ttdoc">next parameter to</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00521">GCS.h:521</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a61256f7905c3e8edd5adfd2b3e392025"><div class="ttname"><a href="structGCS__MAVLINK.html#a61256f7905c3e8edd5adfd2b3e392025">GCS_MAVLINK::handle_param_value</a></div><div class="ttdeci">void handle_param_value(mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00893">GCS_Common.cpp:893</a></div></div>
<div class="ttc" id="classAP__Camera_html_a5a9157e5d811fa1b55bebe90fe731065"><div class="ttname"><a href="classAP__Camera.html#a5a9157e5d811fa1b55bebe90fe731065">AP_Camera::control_msg</a></div><div class="ttdeci">void control_msg(const mavlink_message_t *msg)</div><div class="ttdoc">decode deprecated MavLink message that controls camera.</div><div class="ttdef"><b>Definition:</b> <a href="AP__Camera_8cpp_source.html#l00201">AP_Camera.cpp:201</a></div></div>
<div class="ttc" id="classMissionItemProtocol_html_af677687f0f9d6099f54f547e9f627c98"><div class="ttname"><a href="classMissionItemProtocol.html#af677687f0f9d6099f54f547e9f627c98">MissionItemProtocol::truncate</a></div><div class="ttdeci">virtual void truncate(const mavlink_mission_count_t &amp;packet)=0</div></div>
<div class="ttc" id="structAP__Notify_1_1notify__flags__and__values__type_html_a7423b617c0687c42b916fbf18545f10a"><div class="ttname"><a href="structAP__Notify_1_1notify__flags__and__values__type.html#a7423b617c0687c42b916fbf18545f10a">AP_Notify::notify_flags_and_values_type::firmware_update</a></div><div class="ttdeci">bool firmware_update</div><div class="ttdef"><b>Definition:</b> <a href="AP__Notify_8h_source.html#l00092">AP_Notify.h:92</a></div></div>
<div class="ttc" id="classAP__AHRS__NavEKF_html_a5ad2199bd989701ef041505df71072c4"><div class="ttname"><a href="classAP__AHRS__NavEKF.html#a5ad2199bd989701ef041505df71072c4">AP_AHRS_NavEKF::get_secondary_position</a></div><div class="ttdeci">bool get_secondary_position(struct Location &amp;loc) const override</div><div class="ttdef"><b>Definition:</b> <a href="AP__AHRS__NavEKF_8cpp_source.html#l00559">AP_AHRS_NavEKF.cpp:559</a></div></div>
<div class="ttc" id="classGCS_html_aed6a0f9e19a4077461d2eafee723e8b0"><div class="ttname"><a href="classGCS.html#aed6a0f9e19a4077461d2eafee723e8b0">GCS::get_prot_for_mission_type</a></div><div class="ttdeci">MissionItemProtocol * get_prot_for_mission_type(const MAV_MISSION_TYPE mission_type) const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00500">GCS_Common.cpp:500</a></div></div>
<div class="ttc" id="classAP__InertialSensor_html_a8ca4ae8fdc18ff0d78f8dea93759cc93"><div class="ttname"><a href="classAP__InertialSensor.html#a8ca4ae8fdc18ff0d78f8dea93759cc93">AP_InertialSensor::get_gyro</a></div><div class="ttdeci">const Vector3f &amp; get_gyro(uint8_t i) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__InertialSensor_8h_source.html#l00098">AP_InertialSensor.h:98</a></div></div>
<div class="ttc" id="classAP__Baro_html_ae7be7aff322792daa05c01e4f326cc42"><div class="ttname"><a href="classAP__Baro.html#ae7be7aff322792daa05c01e4f326cc42">AP_Baro::get_temperature</a></div><div class="ttdeci">float get_temperature(void) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__Baro_8h_source.html#l00063">AP_Baro.h:63</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a536bd36365cc7457917d633e697085e9"><div class="ttname"><a href="structGCS__MAVLINK.html#a536bd36365cc7457917d633e697085e9">GCS_MAVLINK::handle_optical_flow</a></div><div class="ttdeci">void handle_optical_flow(const mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l03314">GCS_Common.cpp:3314</a></div></div>
<div class="ttc" id="RangeFinder_8h_html_afff33622f1b34ddb499173e964284402"><div class="ttname"><a href="RangeFinder_8h.html#afff33622f1b34ddb499173e964284402">RANGEFINDER_MAX_INSTANCES</a></div><div class="ttdeci">#define RANGEFINDER_MAX_INSTANCES</div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8h_source.html#l00024">RangeFinder.h:24</a></div></div>
<div class="ttc" id="classAP__Proximity_html_a9feaf5dbfcd60e26d0f7b807592414f3"><div class="ttname"><a href="classAP__Proximity.html#a9feaf5dbfcd60e26d0f7b807592414f3">AP_Proximity::get_upward_distance</a></div><div class="ttdeci">bool get_upward_distance(uint8_t instance, float &amp;distance) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__Proximity_8cpp_source.html#l00453">AP_Proximity.cpp:453</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a7621083aa8145d12a9f685e0c49a1ca3"><div class="ttname"><a href="structGCS__MAVLINK.html#a7621083aa8145d12a9f685e0c49a1ca3">GCS_MAVLINK::alternative</a></div><div class="ttdeci">struct GCS_MAVLINK::@175 alternative</div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a9592cb2ff598cfd3b0d7352e3e3df841"><div class="ttname"><a href="structGCS__MAVLINK.html#a9592cb2ff598cfd3b0d7352e3e3df841">GCS_MAVLINK::handle_mission_write_partial_list</a></div><div class="ttdeci">void handle_mission_write_partial_list(const mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00846">GCS_Common.cpp:846</a></div></div>
<div class="ttc" id="classMissionItemProtocol_html_ac2b502c2410952ecc99c53a1d15a3906"><div class="ttname"><a href="classMissionItemProtocol.html#ac2b502c2410952ecc99c53a1d15a3906">MissionItemProtocol::handle_mission_request</a></div><div class="ttdeci">void handle_mission_request(const GCS_MAVLINK &amp;link, const mavlink_mission_request_t &amp;packet, const mavlink_message_t &amp;msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00667">GCS_Common.cpp:667</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_afaf4b53bc2f64b4fb6bd1fe729b2cef3"><div class="ttname"><a href="structGCS__MAVLINK.html#afaf4b53bc2f64b4fb6bd1fe729b2cef3">GCS_MAVLINK::init</a></div><div class="ttdeci">void init(AP_HAL::UARTDriver *port, mavlink_channel_t mav_chan)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00085">GCS_Common.cpp:85</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_acbeb815a99ca58c50c79d0e460649a5c"><div class="ttname"><a href="structGCS__MAVLINK.html#acbeb815a99ca58c50c79d0e460649a5c">GCS_MAVLINK::pushed_ap_message_ids</a></div><div class="ttdeci">Bitmask&lt; MSG_LAST &gt; pushed_ap_message_ids</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00754">GCS.h:754</a></div></div>
<div class="ttc" id="namespaceAP_html_afceb236ff617aaaa2b08afacd72532b0"><div class="ttname"><a href="namespaceAP.html#afceb236ff617aaaa2b08afacd72532b0">AP::internalerror</a></div><div class="ttdeci">AP_InternalError &amp; internalerror()</div><div class="ttdef"><b>Definition:</b> <a href="AP__InternalError_8cpp_source.html#l00031">AP_InternalError.cpp:31</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a16b1113424afd184dabe92c0d3432bda"><div class="ttname"><a href="structGCS__MAVLINK.html#a16b1113424afd184dabe92c0d3432bda">GCS_MAVLINK::set_home_to_current_location</a></div><div class="ttdeci">virtual bool set_home_to_current_location(bool lock)=0</div></div>
<div class="ttc" id="classAP__AHRS__NavEKF_html_a2eaa5292c27559525eee7894bb1dab99"><div class="ttname"><a href="classAP__AHRS__NavEKF.html#a2eaa5292c27559525eee7894bb1dab99">AP_AHRS_NavEKF::get_error_rp</a></div><div class="ttdeci">float get_error_rp() const override</div><div class="ttdef"><b>Definition:</b> <a href="AP__AHRS__NavEKF_8cpp_source.html#l00452">AP_AHRS_NavEKF.cpp:452</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ac0504e2a8cc5e3c69c531c20557815b3"><div class="ttname"><a href="structGCS__MAVLINK.html#ac0504e2a8cc5e3c69c531c20557815b3">GCS_MAVLINK::reserve_param_space_start_ms</a></div><div class="ttdeci">static uint32_t reserve_param_space_start_ms</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00794">GCS.h:794</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ad4d07f21cb8ccca21bcec576f56ce23c"><div class="ttname"><a href="structGCS__MAVLINK.html#ad4d07f21cb8ccca21bcec576f56ce23c">GCS_MAVLINK::send_nav_controller_output</a></div><div class="ttdeci">virtual void send_nav_controller_output() const =0</div></div>
<div class="ttc" id="classAP__BattMonitor_html_afdc523c75aff5beed8f8e34a33c8736d"><div class="ttname"><a href="classAP__BattMonitor.html#afdc523c75aff5beed8f8e34a33c8736d">AP_BattMonitor::capacity_remaining_pct</a></div><div class="ttdeci">virtual uint8_t capacity_remaining_pct(uint8_t instance) const</div><div class="ttdoc">capacity_remaining_pct - returns the % battery capacity remaining (0 ~ 100)</div><div class="ttdef"><b>Definition:</b> <a href="AP__BattMonitor_8cpp_source.html#l00332">AP_BattMonitor.cpp:332</a></div></div>
<div class="ttc" id="classAP__InertialSensor_html_a424609d1eb3dc8473040c9e6f87771ad"><div class="ttname"><a href="classAP__InertialSensor.html#a424609d1eb3dc8473040c9e6f87771ad">AP_InertialSensor::init_gyro</a></div><div class="ttdeci">void init_gyro(void)</div><div class="ttdef"><b>Definition:</b> <a href="AP__InertialSensor_8cpp_source.html#l00914">AP_InertialSensor.cpp:914</a></div></div>
<div class="ttc" id="GCS_8h_html"><div class="ttname"><a href="GCS_8h.html">GCS.h</a></div><div class="ttdoc">Interface definition for the various Ground Control System.</div></div>
<div class="ttc" id="classAP__Avoidance_1_1Obstacle_html"><div class="ttname"><a href="classAP__Avoidance_1_1Obstacle.html">AP_Avoidance::Obstacle</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__Avoidance_8h_source.html#l00044">AP_Avoidance.h:44</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991af1b76145d215ccb122a2df732e232d26"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991af1b76145d215ccb122a2df732e232d26">MSG_SERVO_OUT</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00060">GCS.h:60</a></div></div>
<div class="ttc" id="classAP__InertialSensor_html_ad04cd1cbcc7c31914e3dbcaf7eb83b19"><div class="ttname"><a href="classAP__InertialSensor.html#ad04cd1cbcc7c31914e3dbcaf7eb83b19">AP_InertialSensor::acal_init</a></div><div class="ttdeci">void acal_init()</div><div class="ttdef"><b>Definition:</b> <a href="AP__InertialSensor_8cpp_source.html#l01714">AP_InertialSensor.cpp:1714</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ab03ead633c327ce88a24bf4d00f743b6"><div class="ttname"><a href="structGCS__MAVLINK.html#ab03ead633c327ce88a24bf4d00f743b6">GCS_MAVLINK::handle_command_set_message_interval</a></div><div class="ttdeci">MAV_RESULT handle_command_set_message_interval(const mavlink_command_long_t &amp;packet)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02568">GCS_Common.cpp:2568</a></div></div>
<div class="ttc" id="classAP__Mission_html"><div class="ttname"><a href="classAP__Mission.html">AP_Mission</a></div><div class="ttdoc">Object managing Mission.</div><div class="ttdef"><b>Definition:</b> <a href="AP__Mission_8h_source.html#l00045">AP_Mission.h:45</a></div></div>
<div class="ttc" id="AP__Math_8h_html_a321a91de43cfb2e95d40cde314d0a80f"><div class="ttname"><a href="AP__Math_8h.html#a321a91de43cfb2e95d40cde314d0a80f">MIN</a></div><div class="ttdeci">static auto MIN(const A &amp;one, const B &amp;two) -&gt; decltype(one&lt; two ? one :two)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Math_8h_source.html#l00202">AP_Math.h:202</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a37dc18e37d159145cf1e87d88e554db5"><div class="ttname"><a href="structGCS__MAVLINK.html#a37dc18e37d159145cf1e87d88e554db5">GCS_MAVLINK::handle_command_request_autopilot_capabilities</a></div><div class="ttdeci">MAV_RESULT handle_command_request_autopilot_capabilities(const mavlink_command_long_t &amp;packet)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l03770">GCS_Common.cpp:3770</a></div></div>
<div class="ttc" id="classAP__Mission_html_a631c1e64dcae05e22112360c6f20855f"><div class="ttname"><a href="classAP__Mission.html#a631c1e64dcae05e22112360c6f20855f">AP_Mission::get_current_nav_index</a></div><div class="ttdeci">uint16_t get_current_nav_index() const</div><div class="ttdef"><b>Definition:</b> <a href="AP__Mission_8h_source.html#l00395">AP_Mission.h:395</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_aca6455041498c4fe94ae428c615a4cb0"><div class="ttname"><a href="structGCS__MAVLINK.html#aca6455041498c4fe94ae428c615a4cb0">GCS_MAVLINK::all_stream_entries</a></div><div class="ttdeci">static const struct stream_entries all_stream_entries[]</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00496">GCS.h:496</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a27d9f692cade4d488cac2227d125563d"><div class="ttname"><a href="structGCS__MAVLINK.html#a27d9f692cade4d488cac2227d125563d">GCS_MAVLINK::handle_device_op_write</a></div><div class="ttdeci">void handle_device_op_write(mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__DeviceOp_8cpp_source.html#l00081">GCS_DeviceOp.cpp:81</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991aed7bdc26192f9a7239a1d205bc77d07d"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991aed7bdc26192f9a7239a1d205bc77d07d">MSG_LANDING</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00093">GCS.h:93</a></div></div>
<div class="ttc" id="structGCS_1_1statustext__t_html_a8ac69081bec324ab3f2c26914aee23e5"><div class="ttname"><a href="structGCS_1_1statustext__t.html#a8ac69081bec324ab3f2c26914aee23e5">GCS::statustext_t::msg</a></div><div class="ttdeci">mavlink_statustext_t msg</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l01013">GCS.h:1013</a></div></div>
<div class="ttc" id="GCS__Common_8cpp_html_a1d3cc361b864ddf64a44c12ab3bd044e"><div class="ttname"><a href="GCS__Common_8cpp.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a></div><div class="ttdeci">GCS &amp; gcs()</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l05004">GCS_Common.cpp:5004</a></div></div>
<div class="ttc" id="classAP__Scheduler_html_a6ea2df59d699e91c31e1688ded595f1c"><div class="ttname"><a href="classAP__Scheduler.html#a6ea2df59d699e91c31e1688ded595f1c">AP_Scheduler::get_loop_period_us</a></div><div class="ttdeci">uint32_t get_loop_period_us()</div><div class="ttdef"><b>Definition:</b> <a href="AP__Scheduler_8h_source.html#l00120">AP_Scheduler.h:120</a></div></div>
<div class="ttc" id="AP__Mount_8h_html"><div class="ttname"><a href="AP__Mount_8h.html">AP_Mount.h</a></div></div>
<div class="ttc" id="classGCS_html_a684e9575c690f04ad04e105d6e8fde49"><div class="ttname"><a href="classGCS.html#a684e9575c690f04ad04e105d6e8fde49">GCS::get_singleton</a></div><div class="ttdeci">static class GCS * get_singleton()</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00935">GCS.h:935</a></div></div>
<div class="ttc" id="classRangeFinder_html_a0f32fa3583c2122741c7cd4b0865a352"><div class="ttname"><a href="classRangeFinder.html#a0f32fa3583c2122741c7cd4b0865a352">RangeFinder::get_singleton</a></div><div class="ttdeci">static RangeFinder * get_singleton(void)</div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8h_source.html#l00157">RangeFinder.h:157</a></div></div>
<div class="ttc" id="classAP__AHRS_html_a8ebd6624062d91ec1d19fc3306513e9a"><div class="ttname"><a href="classAP__AHRS.html#a8ebd6624062d91ec1d19fc3306513e9a">AP_AHRS::get_home</a></div><div class="ttdeci">const struct Location &amp; get_home(void) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__AHRS_8h_source.html#l00440">AP_AHRS.h:440</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a2c5f6fc0bb8157be295890ff2bc845a8"><div class="ttname"><a href="structGCS__MAVLINK.html#a2c5f6fc0bb8157be295890ff2bc845a8">GCS_MAVLINK::calibrate_gyros</a></div><div class="ttdeci">bool calibrate_gyros()</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l03628">GCS_Common.cpp:3628</a></div></div>
<div class="ttc" id="classAP__InternalError_html_ab34174ba770b976b39a18c2b23e854f2"><div class="ttname"><a href="classAP__InternalError.html#ab34174ba770b976b39a18c2b23e854f2">AP_InternalError::error</a></div><div class="ttdeci">void error(const AP_InternalError::error_t error)</div><div class="ttdef"><b>Definition:</b> <a href="AP__InternalError_8cpp_source.html#l00010">AP_InternalError.cpp:10</a></div></div>
<div class="ttc" id="classAP__InternalError_html_a1f7f14a65194ec4df6fb0f155f59a55a"><div class="ttname"><a href="classAP__InternalError.html#a1f7f14a65194ec4df6fb0f155f59a55a">AP_InternalError::count</a></div><div class="ttdeci">uint32_t count() const</div><div class="ttdef"><b>Definition:</b> <a href="AP__InternalError_8h_source.html#l00058">AP_InternalError.h:58</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ac528f7e91bf82403fdf395a91435df2f"><div class="ttname"><a href="structGCS__MAVLINK.html#ac528f7e91bf82403fdf395a91435df2f">GCS_MAVLINK::handle_mission_request</a></div><div class="ttdeci">void handle_mission_request(mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00646">GCS_Common.cpp:646</a></div></div>
<div class="ttc" id="structAP__Mission_1_1Mission__Command_html"><div class="ttname"><a href="structAP__Mission_1_1Mission__Command.html">AP_Mission::Mission_Command</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__Mission_8h_source.html#l00264">AP_Mission.h:264</a></div></div>
<div class="ttc" id="classAP__Mission_html_afaab7a93d7a18a068d1ff267b987bb64"><div class="ttname"><a href="classAP__Mission.html#afaab7a93d7a18a068d1ff267b987bb64">AP_Mission::truncate</a></div><div class="ttdeci">void truncate(uint16_t index)</div><div class="ttdoc">truncate - truncate any mission items beyond given index</div><div class="ttdef"><b>Definition:</b> <a href="AP__Mission_8cpp_source.html#l00210">AP_Mission.cpp:210</a></div></div>
<div class="ttc" id="classAP__GPS_html_a559c00ff3bbc1232f68e64d29a892128"><div class="ttname"><a href="classAP__GPS.html#a559c00ff3bbc1232f68e64d29a892128">AP_GPS::send_mavlink_gps2_raw</a></div><div class="ttdeci">void send_mavlink_gps2_raw(mavlink_channel_t chan)</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8cpp_source.html#l00943">AP_GPS.cpp:943</a></div></div>
<div class="ttc" id="classAP__ToshibaCAN_html_aa90c03d802cb9b366b47150cba024c58"><div class="ttname"><a href="classAP__ToshibaCAN.html#aa90c03d802cb9b366b47150cba024c58">AP_ToshibaCAN::send_esc_telemetry_mavlink</a></div><div class="ttdeci">void send_esc_telemetry_mavlink(uint8_t mav_chan)</div></div>
<div class="ttc" id="classAP__Airspeed_html_a02885c320f3cedbc08c02bc8894aba04"><div class="ttname"><a href="classAP__Airspeed.html#a02885c320f3cedbc08c02bc8894aba04">AP_Airspeed::get_airspeed</a></div><div class="ttdeci">float get_airspeed(uint8_t i) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__Airspeed_8h_source.html#l00053">AP_Airspeed.h:53</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_acf29755bc5eab5ab6cb36b207426742f"><div class="ttname"><a href="structGCS__MAVLINK.html#acf29755bc5eab5ab6cb36b207426742f">GCS_MAVLINK::send_battery_status</a></div><div class="ttdeci">bool send_battery_status() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00318">GCS_Common.cpp:318</a></div></div>
<div class="ttc" id="structGCS_1_1statustext__t_html"><div class="ttname"><a href="structGCS_1_1statustext__t.html">GCS::statustext_t</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l01011">GCS.h:1011</a></div></div>
<div class="ttc" id="classAP__Mission_html_af26b7935304c34d8c03881b02beb3f48"><div class="ttname"><a href="classAP__Mission.html#af26b7935304c34d8c03881b02beb3f48">AP_Mission::num_commands</a></div><div class="ttdeci">uint16_t num_commands() const</div><div class="ttdef"><b>Definition:</b> <a href="AP__Mission_8h_source.html#l00337">AP_Mission.h:337</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991abb84d7bdc2da17d4cf7b7c9de283a579"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991abb84d7bdc2da17d4cf7b7c9de283a579">MSG_RPM</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00085">GCS.h:85</a></div></div>
<div class="ttc" id="structlog__MAV_html"><div class="ttname"><a href="structlog__MAV.html">log_MAV</a></div><div class="ttdef"><b>Definition:</b> <a href="LogStructure_8h_source.html#l00362">LogStructure.h:362</a></div></div>
<div class="ttc" id="classAP__AHRS__NavEKF_html_a7fac0f961ae64a340731720a0d1a2c76"><div class="ttname"><a href="classAP__AHRS__NavEKF.html#a7fac0f961ae64a340731720a0d1a2c76">AP_AHRS_NavEKF::get_hagl</a></div><div class="ttdeci">bool get_hagl(float &amp;hagl) const override</div><div class="ttdef"><b>Definition:</b> <a href="AP__AHRS__NavEKF_8cpp_source.html#l00753">AP_AHRS_NavEKF.cpp:753</a></div></div>
<div class="ttc" id="classMissionItemProtocol_html_af7af44856eb9316f160b1a6fbe22f263"><div class="ttname"><a href="classMissionItemProtocol.html#af7af44856eb9316f160b1a6fbe22f263">MissionItemProtocol::queued_request_send</a></div><div class="ttdeci">void queued_request_send()</div><div class="ttdoc">Send the next pending waypoint, called from deferred message handling code.</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00188">GCS_Common.cpp:188</a></div></div>
<div class="ttc" id="namespaceAP_html_a8b4b4424addfab0bbe9a7290107af2d7"><div class="ttname"><a href="namespaceAP.html#a8b4b4424addfab0bbe9a7290107af2d7">AP::proximity</a></div><div class="ttdeci">AP_Proximity * proximity()</div><div class="ttdef"><b>Definition:</b> <a href="AP__Proximity_8cpp_source.html#l00492">AP_Proximity.cpp:492</a></div></div>
<div class="ttc" id="classGCS_html_a3eab2c61cd4edff6b7a376c85796afef"><div class="ttname"><a href="classGCS.html#a3eab2c61cd4edff6b7a376c85796afef">GCS::frsky</a></div><div class="ttdeci">AP_Frsky_Telem * frsky</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00979">GCS.h:979</a></div></div>
<div class="ttc" id="classMissionItemProtocol__Waypoints_html_a771ecb1605f6048514b306aa5e533046"><div class="ttname"><a href="classMissionItemProtocol__Waypoints.html#a771ecb1605f6048514b306aa5e533046">MissionItemProtocol_Waypoints::item_count</a></div><div class="ttdeci">uint16_t item_count() const override</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00239">GCS.h:239</a></div></div>
<div class="ttc" id="classAP__BattMonitor_html_af7da2493a1943662a28350467d26f2f9"><div class="ttname"><a href="classAP__BattMonitor.html#af7da2493a1943662a28350467d26f2f9">AP_BattMonitor::get_type</a></div><div class="ttdeci">enum AP_BattMonitor_Params::BattMonitor_Type get_type() const</div><div class="ttdoc">get_type - returns battery monitor type</div><div class="ttdef"><b>Definition:</b> <a href="AP__BattMonitor_8h_source.html#l00143">AP_BattMonitor.h:143</a></div></div>
<div class="ttc" id="classAP__AHRS__NavEKF_html_ad4132c9b9b70c061179a31f24a388ecc"><div class="ttname"><a href="classAP__AHRS__NavEKF.html#ad4132c9b9b70c061179a31f24a388ecc">AP_AHRS_NavEKF::set_origin</a></div><div class="ttdeci">bool set_origin(const Location &amp;loc) override</div><div class="ttdef"><b>Definition:</b> <a href="AP__AHRS__NavEKF_8cpp_source.html#l00612">AP_AHRS_NavEKF.cpp:612</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ae21a87a0378400930179c5f1cec4a5b0"><div class="ttname"><a href="structGCS__MAVLINK.html#ae21a87a0378400930179c5f1cec4a5b0">GCS_MAVLINK::send_rc_channels_raw</a></div><div class="ttdeci">void send_rc_channels_raw() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l01942">GCS_Common.cpp:1942</a></div></div>
<div class="ttc" id="classAP__Radio_html_a21f45a471aa1f737cb58ee0b6a39447f"><div class="ttname"><a href="classAP__Radio.html#a21f45a471aa1f737cb58ee0b6a39447f">AP_Radio::get_singleton</a></div><div class="ttdeci">static AP_Radio * get_singleton(void)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Radio_8h_source.html#l00089">AP_Radio.h:89</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a5a0b046381d63cc005988cf75d7c5b1e"><div class="ttname"><a href="structGCS__MAVLINK.html#a5a0b046381d63cc005988cf75d7c5b1e">GCS_MAVLINK::last_tx_seq</a></div><div class="ttdeci">uint8_t last_tx_seq</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00896">GCS.h:896</a></div></div>
<div class="ttc" id="classMissionItemProtocol__Waypoints_html_ab90a684c44ab37cf249d731c52da5bcc"><div class="ttname"><a href="classMissionItemProtocol__Waypoints.html#ab90a684c44ab37cf249d731c52da5bcc">MissionItemProtocol_Waypoints::get_item</a></div><div class="ttdeci">MAV_MISSION_RESULT get_item(const GCS_MAVLINK &amp;_link, const mavlink_message_t &amp;msg, const mavlink_mission_request_int_t &amp;packet, mavlink_mission_item_int_t &amp;ret_packet) override WARN_IF_UNUSED</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00604">GCS_Common.cpp:604</a></div></div>
<div class="ttc" id="classMissionItemProtocol_html"><div class="ttname"><a href="classMissionItemProtocol.html">MissionItemProtocol</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00126">GCS.h:126</a></div></div>
<div class="ttc" id="classBitmask_html_a0be34bb49dbf06972c4a16c0b12cd846"><div class="ttname"><a href="classBitmask.html#a0be34bb49dbf06972c4a16c0b12cd846">Bitmask::get</a></div><div class="ttdeci">bool get(uint16_t bit) const</div><div class="ttdef"><b>Definition:</b> <a href="Bitmask_8h_source.html#l00078">Bitmask.h:78</a></div></div>
<div class="ttc" id="classCompass_html_afeac6bcfad2650762cccda72dbce3e69"><div class="ttname"><a href="classCompass.html#afeac6bcfad2650762cccda72dbce3e69">Compass::set_and_save_offsets</a></div><div class="ttdeci">void set_and_save_offsets(uint8_t i, const Vector3f &amp;offsets)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8cpp_source.html#l01006">AP_Compass.cpp:1006</a></div></div>
<div class="ttc" id="classRangeFinder_html_a1491b0acf5a52d28ad96980bf494fab0"><div class="ttname"><a href="classRangeFinder.html#a1491b0acf5a52d28ad96980bf494fab0">RangeFinder::find_instance</a></div><div class="ttdeci">AP_RangeFinder_Backend * find_instance(enum Rotation orientation) const</div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8cpp_source.html#l00561">RangeFinder.cpp:561</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a4d854fdc822e438da966a41782e8bb82"><div class="ttname"><a href="structGCS__MAVLINK.html#a4d854fdc822e438da966a41782e8bb82">GCS_MAVLINK::set_ap_message_interval</a></div><div class="ttdeci">bool set_ap_message_interval(enum ap_message id, uint16_t interval_ms)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l01557">GCS_Common.cpp:1557</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a2093a0591a3db60700f254ed78dce18d"><div class="ttname"><a href="structGCS__MAVLINK.html#a2093a0591a3db60700f254ed78dce18d">GCS_MAVLINK::handle_mission_request_int</a></div><div class="ttdeci">void handle_mission_request_int(mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00591">GCS_Common.cpp:591</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ae8b2f1fa9c38f804d3782859ebf590bf"><div class="ttname"><a href="structGCS__MAVLINK.html#ae8b2f1fa9c38f804d3782859ebf590bf">GCS_MAVLINK::correct_offboard_timestamp_usec_to_ms</a></div><div class="ttdeci">uint32_t correct_offboard_timestamp_usec_to_ms(uint64_t offboard_usec, uint16_t payload_size)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l04812">GCS_Common.cpp:4812</a></div></div>
<div class="ttc" id="classNavEKF2_html_a866ee4a7ecc7df89eead2cc404956852"><div class="ttname"><a href="classNavEKF2.html#a866ee4a7ecc7df89eead2cc404956852">NavEKF2::getEulerAngles</a></div><div class="ttdeci">void getEulerAngles(int8_t instance, Vector3f &amp;eulers) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__NavEKF2_8cpp_source.html#l01116">AP_NavEKF2.cpp:1116</a></div></div>
<div class="ttc" id="classAP__AHRS_html_a2aa61744614d8e0ef64803583359a56e"><div class="ttname"><a href="classAP__AHRS.html#a2aa61744614d8e0ef64803583359a56e">AP_AHRS::pitch</a></div><div class="ttdeci">float pitch</div><div class="ttdef"><b>Definition:</b> <a href="AP__AHRS_8h_source.html#l00221">AP_AHRS.h:221</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991">ap_message</a></div><div class="ttdeci">ap_message</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00034">GCS.h:34</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_acfa9b0c31f0d23a79278696056b106e4"><div class="ttname"><a href="structGCS__MAVLINK.html#acfa9b0c31f0d23a79278696056b106e4">GCS_MAVLINK::deferred_message_to_send_index</a></div><div class="ttdeci">int8_t deferred_message_to_send_index()</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l01391">GCS_Common.cpp:1391</a></div></div>
<div class="ttc" id="AP__Proximity_8h_html_a13eb412edbf03795761166ee08724c31"><div class="ttname"><a href="AP__Proximity_8h.html#a13eb412edbf03795761166ee08724c31">PROXIMITY_MAX_DIRECTION</a></div><div class="ttdeci">#define PROXIMITY_MAX_DIRECTION</div><div class="ttdef"><b>Definition:</b> <a href="AP__Proximity_8h_source.html#l00027">AP_Proximity.h:27</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a4fa1059971a3676668c5854556cea8c0"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a4fa1059971a3676668c5854556cea8c0">MSG_WIND</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00070">GCS.h:70</a></div></div>
<div class="ttc" id="AP__Logger_8h_html"><div class="ttname"><a href="AP__Logger_8h.html">AP_Logger.h</a></div></div>
<div class="ttc" id="GCS__MAVLink_8cpp_html_a720a8c1ac96dc598d2715e7f567c9376"><div class="ttname"><a href="GCS__MAVLink_8cpp.html#a720a8c1ac96dc598d2715e7f567c9376">mavlink_comm_port</a></div><div class="ttdeci">AP_HAL::UARTDriver * mavlink_comm_port[MAVLINK_COMM_NUM_BUFFERS]</div><div class="ttdoc">MAVLink stream used for uartA.</div><div class="ttdef"><b>Definition:</b> <a href="GCS__MAVLink_8cpp_source.html#l00040">GCS_MAVLink.cpp:40</a></div></div>
<div class="ttc" id="classAP__HAL_1_1HAL_html_a9337a60383f4264fa96a20dbe43a4e2e"><div class="ttname"><a href="classAP__HAL_1_1HAL.html#a9337a60383f4264fa96a20dbe43a4e2e">AP_HAL::HAL::util</a></div><div class="ttdeci">AP_HAL::Util * util</div><div class="ttdef"><b>Definition:</b> <a href="HAL_8h_source.html#l00115">HAL.h:115</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a40b0b7a81909c4ae2e14216de7c68abb"><div class="ttname"><a href="structGCS__MAVLINK.html#a40b0b7a81909c4ae2e14216de7c68abb">GCS_MAVLINK::_timesync_request</a></div><div class="ttdeci">struct GCS_MAVLINK::@174 _timesync_request</div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ac5b5b95814e90243cc47e05742146372"><div class="ttname"><a href="structGCS__MAVLINK.html#ac5b5b95814e90243cc47e05742146372">GCS_MAVLINK::get_deferred_message_index</a></div><div class="ttdeci">int8_t get_deferred_message_index(const ap_message id) const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l01381">GCS_Common.cpp:1381</a></div></div>
<div class="ttc" id="classAP__AHRS_html_a7befeb0b01e3ac4322d554fbfc624e76"><div class="ttname"><a href="classAP__AHRS.html#a7befeb0b01e3ac4322d554fbfc624e76">AP_AHRS::reset_gyro_drift</a></div><div class="ttdeci">virtual void reset_gyro_drift(void)=0</div></div>
<div class="ttc" id="classLocation_html_af494dabb88cd43e0d4efa99f04d31351a3a0bc063b6db8cae0361657958be836f"><div class="ttname"><a href="classLocation.html#af494dabb88cd43e0d4efa99f04d31351a3a0bc063b6db8cae0361657958be836f">Location::AltFrame::ABSOLUTE</a></div></div>
<div class="ttc" id="classAP__HAL_1_1UARTDriver_html"><div class="ttname"><a href="classAP__HAL_1_1UARTDriver.html">AP_HAL::UARTDriver</a></div><div class="ttdef"><b>Definition:</b> <a href="UARTDriver_8h_source.html#l00009">UARTDriver.h:9</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a67d8257d6aa089cfd08b5c6f35b7718e"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a67d8257d6aa089cfd08b5c6f35b7718e">MSG_LAST</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00099">GCS.h:99</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991acbbb4b0664daf80d9f5db9e4d5d53191"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991acbbb4b0664daf80d9f5db9e4d5d53191">MSG_ESC_TELEMETRY</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00094">GCS.h:94</a></div></div>
<div class="ttc" id="classAP__AHRS_html"><div class="ttname"><a href="classAP__AHRS.html">AP_AHRS</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__AHRS_8h_source.html#l00050">AP_AHRS.h:50</a></div></div>
<div class="ttc" id="classMissionItemProtocol_html_aec96576835fe03f45e09e07f1915f31b"><div class="ttname"><a href="classMissionItemProtocol.html#aec96576835fe03f45e09e07f1915f31b">MissionItemProtocol::replace_item</a></div><div class="ttdeci">virtual MAV_MISSION_RESULT replace_item(const mavlink_mission_item_int_t &amp;mission_item_int)=0</div></div>
<div class="ttc" id="classGCS_html_a824e538eff6cbf7c9074840600fbf6ff"><div class="ttname"><a href="classGCS.html#a824e538eff6cbf7c9074840600fbf6ff">GCS::service_statustext</a></div><div class="ttdeci">void service_statustext(void)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02189">GCS_Common.cpp:2189</a></div></div>
<div class="ttc" id="classAP__Proximity_html"><div class="ttname"><a href="classAP__Proximity.html">AP_Proximity</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__Proximity_8h_source.html#l00033">AP_Proximity.h:33</a></div></div>
<div class="ttc" id="classAP__Proximity_html_aac13aefbbaf2a0687f6fd6e8e2ea2df5a70b42f4cf131c4b75d13a194557eed6d"><div class="ttname"><a href="classAP__Proximity.html#aac13aefbbaf2a0687f6fd6e8e2ea2df5a70b42f4cf131c4b75d13a194557eed6d">AP_Proximity::Proximity_Type_RangeFinder</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__Proximity_8h_source.html#l00049">AP_Proximity.h:49</a></div></div>
<div class="ttc" id="classMissionItemProtocol_html_af312b1e6bbfbb7569d4911794987a2b3"><div class="ttname"><a href="classMissionItemProtocol.html#af312b1e6bbfbb7569d4911794987a2b3">MissionItemProtocol::request_last</a></div><div class="ttdeci">uint16_t request_last</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00176">GCS.h:176</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a083d1726ff9cb84cb42b65433fcdd216"><div class="ttname"><a href="structGCS__MAVLINK.html#a083d1726ff9cb84cb42b65433fcdd216">GCS_MAVLINK::handle_command_flash_bootloader</a></div><div class="ttdeci">MAV_RESULT handle_command_flash_bootloader(const mavlink_command_long_t &amp;packet)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l03595">GCS_Common.cpp:3595</a></div></div>
<div class="ttc" id="classQuaternion_html_aff2d2d3d1c5937523df8357deae4eeab"><div class="ttname"><a href="classQuaternion.html#aff2d2d3d1c5937523df8357deae4eeab">Quaternion::from_euler</a></div><div class="ttdeci">void from_euler(float roll, float pitch, float yaw)</div><div class="ttdef"><b>Definition:</b> <a href="quaternion_8cpp_source.html#l00130">quaternion.cpp:130</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_af48072aa21948d3d13cf660a744ce454"><div class="ttname"><a href="structGCS__MAVLINK.html#af48072aa21948d3d13cf660a744ce454">GCS_MAVLINK::handle_mission_count</a></div><div class="ttdeci">void handle_mission_count(const mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00717">GCS_Common.cpp:717</a></div></div>
<div class="ttc" id="classAP__Mount_html_a82a1a9ffb9d880f646071092769ec46d"><div class="ttname"><a href="classAP__Mount.html#a82a1a9ffb9d880f646071092769ec46d">AP_Mount::get_mode</a></div><div class="ttdeci">enum MAV_MOUNT_MODE get_mode() const</div><div class="ttdef"><b>Definition:</b> <a href="AP__Mount_8h_source.html#l00094">AP_Mount.h:94</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_af083ab3c20afaa7260b8461f1c1f6245"><div class="ttname"><a href="structGCS__MAVLINK.html#af083ab3c20afaa7260b8461f1c1f6245">GCS_MAVLINK::handle_command_mount</a></div><div class="ttdeci">virtual MAV_RESULT handle_command_mount(const mavlink_command_long_t &amp;packet)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l03851">GCS_Common.cpp:3851</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a5c5ff4ed407fd9d381c0a985e649db32"><div class="ttname"><a href="structGCS__MAVLINK.html#a5c5ff4ed407fd9d381c0a985e649db32">GCS_MAVLINK::handle_common_param_message</a></div><div class="ttdeci">void handle_common_param_message(mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Param_8cpp_source.html#l00420">GCS_Param.cpp:420</a></div></div>
<div class="ttc" id="classAP__VisualOdom_html_ab2ff3d0aeff412358c99fb0281fbad5f"><div class="ttname"><a href="classAP__VisualOdom.html#ab2ff3d0aeff412358c99fb0281fbad5f">AP_VisualOdom::handle_msg</a></div><div class="ttdeci">void handle_msg(mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="AP__VisualOdom_8cpp_source.html#l00129">AP_VisualOdom.cpp:129</a></div></div>
<div class="ttc" id="classAP__AHRS_html_a63359ca9325c63642050bcf1c3e1cd63"><div class="ttname"><a href="classAP__AHRS.html#a63359ca9325c63642050bcf1c3e1cd63">AP_AHRS::yaw</a></div><div class="ttdeci">float yaw</div><div class="ttdef"><b>Definition:</b> <a href="AP__AHRS_8h_source.html#l00222">AP_AHRS.h:222</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a208713246c44b4618dfe4e9bdd5b80ce"><div class="ttname"><a href="structGCS__MAVLINK.html#a208713246c44b4618dfe4e9bdd5b80ce">GCS_MAVLINK::handle_vision_position_delta</a></div><div class="ttdeci">void handle_vision_position_delta(mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l03132">GCS_Common.cpp:3132</a></div></div>
<div class="ttc" id="classGCS_html_a251ed0e59b370cc9f0c50d64b7a390ac"><div class="ttname"><a href="classGCS.html#a251ed0e59b370cc9f0c50d64b7a390ac">GCS::update_receive</a></div><div class="ttdeci">void update_receive()</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02272">GCS_Common.cpp:2272</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991ad022ac06a04612e3ccac40b3b1f6f15a"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991ad022ac06a04612e3ccac40b3b1f6f15a">MSG_SCALED_IMU3</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00050">GCS.h:50</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ada8b0ba8cbfa324537c1749f3e878ede"><div class="ttname"><a href="structGCS__MAVLINK.html#ada8b0ba8cbfa324537c1749f3e878ede">GCS_MAVLINK::handle_guided_request</a></div><div class="ttdeci">virtual bool handle_guided_request(AP_Mission::Mission_Command &amp;cmd)=0</div></div>
<div class="ttc" id="AP__Radio_8h_html"><div class="ttname"><a href="AP__Radio_8h.html">AP_Radio.h</a></div></div>
<div class="ttc" id="classNavEKF2_html"><div class="ttname"><a href="classNavEKF2.html">NavEKF2</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__NavEKF2_8h_source.html#l00037">AP_NavEKF2.h:37</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a08ff9403ca6fe218d0bd30d106d1aa73"><div class="ttname"><a href="structGCS__MAVLINK.html#a08ff9403ca6fe218d0bd30d106d1aa73">GCS_MAVLINK::timesync_receive_timestamp_ns</a></div><div class="ttdeci">uint64_t timesync_receive_timestamp_ns() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02894">GCS_Common.cpp:2894</a></div></div>
<div class="ttc" id="classAP__HAL_1_1Util_html_a728035ef0889404b89a7bc05ab53818ea61efbe28519285a31c90582c6a36c6b1"><div class="ttname"><a href="classAP__HAL_1_1Util.html#a728035ef0889404b89a7bc05ab53818ea61efbe28519285a31c90582c6a36c6b1">AP_HAL::Util::PC_ELAPSED</a></div><div class="ttdef"><b>Definition:</b> <a href="Util_8h_source.html#l00127">Util.h:127</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ab138669a99fc1a9d86d5aced80454dab"><div class="ttname"><a href="structGCS__MAVLINK.html#ab138669a99fc1a9d86d5aced80454dab">GCS_MAVLINK::handle_request_data_stream</a></div><div class="ttdeci">void handle_request_data_stream(mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Param_8cpp_source.html#l00128">GCS_Param.cpp:128</a></div></div>
<div class="ttc" id="classRC__Channels_html_af71de44b3d11d95c2d8bfc5d6b429c48"><div class="ttname"><a href="classRC__Channels.html#af71de44b3d11d95c2d8bfc5d6b429c48">RC_Channels::receiver_bind</a></div><div class="ttdeci">static bool receiver_bind(const int dsmMode)</div><div class="ttdef"><b>Definition:</b> <a href="RC__Channels_8cpp_source.html#l00126">RC_Channels.cpp:126</a></div></div>
<div class="ttc" id="classGCS_html"><div class="ttname"><a href="classGCS.html">GCS</a></div><div class="ttdoc">global GCS object</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00918">GCS.h:918</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a256bd83477e0d72b40300bf1d7207750"><div class="ttname"><a href="structGCS__MAVLINK.html#a256bd83477e0d72b40300bf1d7207750">GCS_MAVLINK::handle_command_get_home_position</a></div><div class="ttdeci">MAV_RESULT handle_command_get_home_position(const mavlink_command_long_t &amp;packet)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l03796">GCS_Common.cpp:3796</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a7a8e21be24155bbcdd33b9f637493e0c"><div class="ttname"><a href="structGCS__MAVLINK.html#a7a8e21be24155bbcdd33b9f637493e0c">GCS_MAVLINK::send_opticalflow</a></div><div class="ttdeci">void send_opticalflow()</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02374">GCS_Common.cpp:2374</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ad1b9e681a5c3a530e5522abfaac80a26"><div class="ttname"><a href="structGCS__MAVLINK.html#ad1b9e681a5c3a530e5522abfaac80a26">GCS_MAVLINK::handle_command_int_do_set_home</a></div><div class="ttdeci">MAV_RESULT handle_command_int_do_set_home(const mavlink_command_int_t &amp;packet)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l04084">GCS_Common.cpp:4084</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991ae245f098f5ee0ec75b4dc6331f769f8f"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991ae245f098f5ee0ec75b4dc6331f769f8f">MSG_HOME</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00096">GCS.h:96</a></div></div>
<div class="ttc" id="classMissionItemProtocol_html_ad5e2f0616260b53ffe638c67a33b6cb6"><div class="ttname"><a href="classMissionItemProtocol.html#ad5e2f0616260b53ffe638c67a33b6cb6">MissionItemProtocol::link</a></div><div class="ttdeci">GCS_MAVLINK * link</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00168">GCS.h:168</a></div></div>
<div class="ttc" id="classMissionItemProtocol_html_a16c007f154400b86f892c56eed21f4cc"><div class="ttname"><a href="classMissionItemProtocol.html#a16c007f154400b86f892c56eed21f4cc">MissionItemProtocol::timelast_request_ms</a></div><div class="ttdeci">uint32_t timelast_request_ms</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00188">GCS.h:188</a></div></div>
<div class="ttc" id="classMissionItemProtocol_html_a36a327a6e9d0bb9ea09e77e123ead57d"><div class="ttname"><a href="classMissionItemProtocol.html#a36a327a6e9d0bb9ea09e77e123ead57d">MissionItemProtocol::handle_mission_item</a></div><div class="ttdeci">void handle_mission_item(const mavlink_message_t &amp;msg, const mavlink_mission_item_int_t &amp;cmd)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l01073">GCS_Common.cpp:1073</a></div></div>
<div class="ttc" id="classAP__Mission_html_ac4c73bdc284bb26ca56cd8253d6c3cdd"><div class="ttname"><a href="classAP__Mission.html#ac4c73bdc284bb26ca56cd8253d6c3cdd">AP_Mission::add_cmd</a></div><div class="ttdeci">bool add_cmd(Mission_Command &amp;cmd)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Mission_8cpp_source.html#l00312">AP_Mission.cpp:312</a></div></div>
<div class="ttc" id="classSRV__Channels_html_a3d06352d58d90ae7934ef500505b937f"><div class="ttname"><a href="classSRV__Channels.html#a3d06352d58d90ae7934ef500505b937f">SRV_Channels::push</a></div><div class="ttdeci">static void push()</div><div class="ttdef"><b>Definition:</b> <a href="SRV__Channels_8cpp_source.html#l00234">SRV_Channels.cpp:234</a></div></div>
<div class="ttc" id="classAP__AHRS_html_ac9514f5193b6a15b16d995fd8ee0e4c4"><div class="ttname"><a href="classAP__AHRS.html#ac9514f5193b6a15b16d995fd8ee0e4c4">AP_AHRS::Log_Write_Home_And_Origin</a></div><div class="ttdeci">void Log_Write_Home_And_Origin()</div><div class="ttdef"><b>Definition:</b> <a href="AP__AHRS_8cpp_source.html#l00489">AP_AHRS.cpp:489</a></div></div>
<div class="ttc" id="classAP__AccelCal_html"><div class="ttname"><a href="classAP__AccelCal.html">AP_AccelCal</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__AccelCal_8h_source.html#l00010">AP_AccelCal.h:10</a></div></div>
<div class="ttc" id="classAP__BattMonitor_html_a6f59b8616276c17074be483664923324"><div class="ttname"><a href="classAP__BattMonitor.html#a6f59b8616276c17074be483664923324">AP_BattMonitor::has_cell_voltages</a></div><div class="ttdeci">bool has_cell_voltages()</div><div class="ttdef"><b>Definition:</b> <a href="AP__BattMonitor_8h_source.html#l00151">AP_BattMonitor.h:151</a></div></div>
<div class="ttc" id="classAP__HAL_1_1GPIO_html_ab0ea67003249493b7efc0528410b9be6"><div class="ttname"><a href="classAP__HAL_1_1GPIO.html#ab0ea67003249493b7efc0528410b9be6">AP_HAL::GPIO::usb_connected</a></div><div class="ttdeci">virtual bool usb_connected(void)=0</div></div>
<div class="ttc" id="Printf_8cpp_html_a5558580ea8d3854253a721ee58cff12d"><div class="ttname"><a href="Printf_8cpp.html#a5558580ea8d3854253a721ee58cff12d">result</a></div><div class="ttdeci">const char * result</div><div class="ttdef"><b>Definition:</b> <a href="Printf_8cpp_source.html#l00016">Printf.cpp:16</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a95af9461c6a4e8216750a1ceefa4ed27"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a95af9461c6a4e8216750a1ceefa4ed27">MSG_NAV_CONTROLLER_OUTPUT</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00041">GCS.h:41</a></div></div>
<div class="ttc" id="lobject_8c_html_a6185afb135442b229d91201b1a3c6eb2"><div class="ttname"><a href="lobject_8c.html#a6185afb135442b229d91201b1a3c6eb2">LL</a></div><div class="ttdeci">#define LL(x)</div><div class="ttdef"><b>Definition:</b> <a href="lobject_8c_source.html#l00479">lobject.c:479</a></div></div>
<div class="ttc" id="classAP__Mission_html_a2e5e9369c28e90e4fe93c0d4c3ab471c"><div class="ttname"><a href="classAP__Mission.html#a2e5e9369c28e90e4fe93c0d4c3ab471c">AP_Mission::get_current_nav_cmd</a></div><div class="ttdeci">const Mission_Command &amp; get_current_nav_cmd() const</div><div class="ttdoc">get_current_nav_cmd - returns the current &quot;navigation&quot; command</div><div class="ttdef"><b>Definition:</b> <a href="AP__Mission_8h_source.html#l00390">AP_Mission.h:390</a></div></div>
<div class="ttc" id="classAP__AdvancedFailsafe_html_ac1cf01bebffa6a670fa28f10e4a81746"><div class="ttname"><a href="classAP__AdvancedFailsafe.html#ac1cf01bebffa6a670fa28f10e4a81746">AP_AdvancedFailsafe::enabled</a></div><div class="ttdeci">bool enabled()</div><div class="ttdef"><b>Definition:</b> <a href="AP__AdvancedFailsafe_8h_source.html#l00063">AP_AdvancedFailsafe.h:63</a></div></div>
<div class="ttc" id="classMissionItemProtocol_html_ae6305563c701e1d649ff432b1fb75245"><div class="ttname"><a href="classMissionItemProtocol.html#ae6305563c701e1d649ff432b1fb75245">MissionItemProtocol::init_send_requests</a></div><div class="ttdeci">void init_send_requests(GCS_MAVLINK &amp;_link, const mavlink_message_t &amp;msg, const int16_t _request_first, const int16_t _request_last)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00736">GCS_Common.cpp:736</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a9df9a1d5d38a8a2049888714c1abbab7"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a9df9a1d5d38a8a2049888714c1abbab7">MSG_SENSOR_OFFSETS</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00054">GCS.h:54</a></div></div>
<div class="ttc" id="BusTest_8cpp_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="BusTest_8cpp.html#a8f8f80d37794cde9472343e4487ba3eb">name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="BusTest_8cpp_source.html#l00011">BusTest.cpp:11</a></div></div>
<div class="ttc" id="namespaceAP_html_a57749e493d2afa343a06ab7d7396f2af"><div class="ttname"><a href="namespaceAP.html#a57749e493d2afa343a06ab7d7396f2af">AP::rssi</a></div><div class="ttdeci">AP_RSSI * rssi()</div><div class="ttdef"><b>Definition:</b> <a href="AP__RSSI_8cpp_source.html#l00307">AP_RSSI.cpp:307</a></div></div>
<div class="ttc" id="classMissionItemProtocol_html_adb22fed2472be40ae618335d8c2c9afe"><div class="ttname"><a href="classMissionItemProtocol.html#adb22fed2472be40ae618335d8c2c9afe">MissionItemProtocol::active_link_is</a></div><div class="ttdeci">bool active_link_is(const GCS_MAVLINK *_link) const</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00160">GCS.h:160</a></div></div>
<div class="ttc" id="classAP__Radio_html_ab54ad395cb356e5ceed2d75d9b56677d"><div class="ttname"><a href="classAP__Radio.html#ab54ad395cb356e5ceed2d75d9b56677d">AP_Radio::handle_data_packet</a></div><div class="ttdeci">void handle_data_packet(mavlink_channel_t chan, const mavlink_data96_t &amp;m)</div></div>
<div class="ttc" id="classMissionItemProtocol_html_ab4042b8086fe6c2fe661ac138187d9ff"><div class="ttname"><a href="classMissionItemProtocol.html#ab4042b8086fe6c2fe661ac138187d9ff">MissionItemProtocol::item_count</a></div><div class="ttdeci">virtual uint16_t item_count() const =0</div></div>
<div class="ttc" id="classLocation_html_af494dabb88cd43e0d4efa99f04d31351a34ab8af7507092f7b3a2e41b94b9ed6a"><div class="ttname"><a href="classLocation.html#af494dabb88cd43e0d4efa99f04d31351a34ab8af7507092f7b3a2e41b94b9ed6a">Location::AltFrame::ABOVE_TERRAIN</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a582437196b32d4486ddd95fa10e31bcd"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a582437196b32d4486ddd95fa10e31bcd">MSG_MISSION_ITEM_REACHED</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00087">GCS.h:87</a></div></div>
<div class="ttc" id="classAP__Mission_html_a08f68797218b7203251b35bb0da645b9"><div class="ttname"><a href="classAP__Mission.html#a08f68797218b7203251b35bb0da645b9">AP_Mission::convert_MISSION_ITEM_to_MISSION_ITEM_INT</a></div><div class="ttdeci">static MAV_MISSION_RESULT convert_MISSION_ITEM_to_MISSION_ITEM_INT(const mavlink_mission_item_t &amp;mission_item, mavlink_mission_item_int_t &amp;mission_item_int) WARN_IF_UNUSED</div><div class="ttdef"><b>Definition:</b> <a href="AP__Mission_8cpp_source.html#l01021">AP_Mission.cpp:1021</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_acad5b4ab40c7b7486392f07193ce4190"><div class="ttname"><a href="structGCS__MAVLINK.html#acad5b4ab40c7b7486392f07193ce4190">GCS_MAVLINK::active_channel_mask</a></div><div class="ttdeci">static uint8_t active_channel_mask(void)</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00447">GCS.h:447</a></div></div>
<div class="ttc" id="classGCS_html_a7bd52c23028bb9b4f350963da5adf7d3"><div class="ttname"><a href="classGCS.html#a7bd52c23028bb9b4f350963da5adf7d3">GCS::initialised_missionitemprotocol_objects</a></div><div class="ttdeci">bool initialised_missionitemprotocol_objects</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l01030">GCS.h:1030</a></div></div>
<div class="ttc" id="rotations_8h_html_a67a250c97139a5466814a54c4aa4a681"><div class="ttname"><a href="rotations_8h.html#a67a250c97139a5466814a54c4aa4a681">Rotation</a></div><div class="ttdeci">Rotation</div><div class="ttdef"><b>Definition:</b> <a href="rotations_8h_source.html#l00027">rotations.h:27</a></div></div>
<div class="ttc" id="classAP__Logger_html_ada8172473eb14aabbf121c20ef6ad76b"><div class="ttname"><a href="classAP__Logger.html#ada8172473eb14aabbf121c20ef6ad76b">AP_Logger::WriteBlock</a></div><div class="ttdeci">void WriteBlock(const void *pBuffer, uint16_t size)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Logger_8cpp_source.html#l00578">AP_Logger.cpp:578</a></div></div>
<div class="ttc" id="classAP__SerialManager_html_af95280ba50704a8adece62755cb348e7a0e4f0e3620bdb2bf2f9e79058a3c095b"><div class="ttname"><a href="classAP__SerialManager.html#af95280ba50704a8adece62755cb348e7a0e4f0e3620bdb2bf2f9e79058a3c095b">AP_SerialManager::SerialProtocol_MAVLink2</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__SerialManager_8h_source.html#l00090">AP_SerialManager.h:90</a></div></div>
<div class="ttc" id="namespaceAP_html_a838cb6b095e282a91f90f8e39c9ef8e8"><div class="ttname"><a href="namespaceAP.html#a838cb6b095e282a91f90f8e39c9ef8e8">AP::visualodom</a></div><div class="ttdeci">AP_VisualOdom * visualodom()</div><div class="ttdef"><b>Definition:</b> <a href="AP__VisualOdom_8cpp_source.html#l00147">AP_VisualOdom.cpp:147</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_aea7f47c108dd428ecfee60334a24607d"><div class="ttname"><a href="structGCS__MAVLINK.html#aea7f47c108dd428ecfee60334a24607d">GCS_MAVLINK::log_mavlink_stats</a></div><div class="ttdeci">void log_mavlink_stats()</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l01869">GCS_Common.cpp:1869</a></div></div>
<div class="ttc" id="classAP__VisualOdom_html"><div class="ttname"><a href="classAP__VisualOdom.html">AP_VisualOdom</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__VisualOdom_8h_source.html#l00026">AP_VisualOdom.h:26</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a11bfe5a51b55db1f18f12dd5175e581e"><div class="ttname"><a href="structGCS__MAVLINK.html#a11bfe5a51b55db1f18f12dd5175e581e">GCS_MAVLINK::manual_override</a></div><div class="ttdeci">void manual_override(RC_Channel *c, int16_t value_in, uint16_t offset, float scaler, const uint32_t tnow, bool reversed=false)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l04987">GCS_Common.cpp:4987</a></div></div>
<div class="ttc" id="classAP__Proximity_html_a2e5b5c46464c7b30d83d7f6adbda7775"><div class="ttname"><a href="classAP__Proximity.html#a2e5b5c46464c7b30d83d7f6adbda7775">AP_Proximity::distance_max</a></div><div class="ttdeci">float distance_max() const</div><div class="ttdef"><b>Definition:</b> <a href="AP__Proximity_8cpp_source.html#l00435">AP_Proximity.cpp:435</a></div></div>
<div class="ttc" id="structAP__BattMonitor_1_1cells_html_a25780c82686237ebc5531d6a18df732f"><div class="ttname"><a href="structAP__BattMonitor_1_1cells.html#a25780c82686237ebc5531d6a18df732f">AP_BattMonitor::cells::cells</a></div><div class="ttdeci">uint16_t cells[MAVLINK_MSG_BATTERY_STATUS_FIELD_VOLTAGES_LEN]</div><div class="ttdef"><b>Definition:</b> <a href="AP__BattMonitor_8h_source.html#l00063">AP_BattMonitor.h:63</a></div></div>
<div class="ttc" id="classLocation_html_a25f7297551af447cf46aef3ae92c2632"><div class="ttname"><a href="classLocation.html#a25f7297551af447cf46aef3ae92c2632">Location::check_latlng</a></div><div class="ttdeci">bool check_latlng() const</div><div class="ttdef"><b>Definition:</b> <a href="Location_8cpp_source.html#l00332">Location.cpp:332</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a4c7517102745667e743de0b380d2989f"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a4c7517102745667e743de0b380d2989f">MSG_GPS_RAW</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00055">GCS.h:55</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ac22097067827164c0c26e7ead36b21e7"><div class="ttname"><a href="structGCS__MAVLINK.html#ac22097067827164c0c26e7ead36b21e7">GCS_MAVLINK::update_receive</a></div><div class="ttdeci">void update_receive(uint32_t max_time_us=1000)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l01715">GCS_Common.cpp:1715</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a38bdeec979d6dbc84c7ca09bafb5bc04"><div class="ttname"><a href="structGCS__MAVLINK.html#a38bdeec979d6dbc84c7ca09bafb5bc04">GCS_MAVLINK::get_chan</a></div><div class="ttdeci">mavlink_channel_t get_chan() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00383">GCS.h:383</a></div></div>
<div class="ttc" id="namespaceAP_html_a67bce6e94b1af5e88d027330df5d8eca"><div class="ttname"><a href="namespaceAP.html#a67bce6e94b1af5e88d027330df5d8eca">AP::mission</a></div><div class="ttdeci">AP_Mission * mission()</div><div class="ttdef"><b>Definition:</b> <a href="AP__Mission_8cpp_source.html#l01967">AP_Mission.cpp:1967</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a6051010b7ea7bbaaeb2b13c70456f1cf"><div class="ttname"><a href="structGCS__MAVLINK.html#a6051010b7ea7bbaaeb2b13c70456f1cf">GCS_MAVLINK::requesting_mission_items</a></div><div class="ttdeci">bool requesting_mission_items() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00835">GCS_Common.cpp:835</a></div></div>
<div class="ttc" id="classAP__SerialManager_html_a5e363f0274897cdcf5a427d5bbe3eb51"><div class="ttname"><a href="classAP__SerialManager.html#a5e363f0274897cdcf5a427d5bbe3eb51">AP_SerialManager::find_baudrate</a></div><div class="ttdeci">uint32_t find_baudrate(enum SerialProtocol protocol, uint8_t instance) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__SerialManager_8cpp_source.html#l00401">AP_SerialManager.cpp:401</a></div></div>
<div class="ttc" id="AP__InternalError_8cpp_html_a02ad7a50d04e0dbf28c6c90a183a0579"><div class="ttname"><a href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a></div><div class="ttdeci">static AP_InternalError instance</div><div class="ttdef"><b>Definition:</b> <a href="AP__InternalError_8cpp_source.html#l00008">AP_InternalError.cpp:8</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a700265c4d6a54364427b1ac0153e20e3"><div class="ttname"><a href="structGCS__MAVLINK.html#a700265c4d6a54364427b1ac0153e20e3">GCS_MAVLINK::handle_att_pos_mocap</a></div><div class="ttdeci">void handle_att_pos_mocap(mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l03228">GCS_Common.cpp:3228</a></div></div>
<div class="ttc" id="classAP__Mission_html_acfd61ebf8361f71fa75c9088dd8b7e3b"><div class="ttname"><a href="classAP__Mission.html#acfd61ebf8361f71fa75c9088dd8b7e3b">AP_Mission::clear</a></div><div class="ttdeci">bool clear()</div><div class="ttdoc">clear - clears out mission</div><div class="ttdef"><b>Definition:</b> <a href="AP__Mission_8cpp_source.html#l00188">AP_Mission.cpp:188</a></div></div>
<div class="ttc" id="classAP__RTC_html_af5ed0a2bd918379395e227179c7d6af3af24f5220e80acdcbe479c663b4d7c0cf"><div class="ttname"><a href="classAP__RTC.html#af5ed0a2bd918379395e227179c7d6af3af24f5220e80acdcbe479c663b4d7c0cf">AP_RTC::SOURCE_MAVLINK_SYSTEM_TIME</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__RTC_8h_source.html#l00022">AP_RTC.h:22</a></div></div>
<div class="ttc" id="classAP__Mount_html_af8f376cbf1c77af36fc4603921c5bb7a"><div class="ttname"><a href="classAP__Mount.html#af8f376cbf1c77af36fc4603921c5bb7a">AP_Mount::send_gimbal_report</a></div><div class="ttdeci">void send_gimbal_report(mavlink_channel_t chan)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Mount_8cpp_source.html#l00689">AP_Mount.cpp:689</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a3e1b87c59be0f67950cce0314ffa4c30"><div class="ttname"><a href="structGCS__MAVLINK.html#a3e1b87c59be0f67950cce0314ffa4c30">GCS_MAVLINK::handle_statustext</a></div><div class="ttdeci">void handle_statustext(mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02983">GCS_Common.cpp:2983</a></div></div>
<div class="ttc" id="classOpticalFlow_html_a77fc7eeb8ece11bee4b63d035619e02b"><div class="ttname"><a href="classOpticalFlow.html#a77fc7eeb8ece11bee4b63d035619e02b">OpticalFlow::healthy</a></div><div class="ttdeci">bool healthy() const</div><div class="ttdef"><b>Definition:</b> <a href="AP__OpticalFlow_2OpticalFlow_8h_source.html#l00063">OpticalFlow.h:63</a></div></div>
<div class="ttc" id="classAP__HAL_1_1AnalogIn_html_ab607b3cdb6819195a05f728589ffaf29"><div class="ttname"><a href="classAP__HAL_1_1AnalogIn.html#ab607b3cdb6819195a05f728589ffaf29">AP_HAL::AnalogIn::power_status_flags</a></div><div class="ttdeci">virtual uint16_t power_status_flags(void)</div><div class="ttdef"><b>Definition:</b> <a href="AnalogIn_8h_source.html#l00052">AnalogIn.h:52</a></div></div>
<div class="ttc" id="AP__RTC_8h_html"><div class="ttname"><a href="AP__RTC_8h.html">AP_RTC.h</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_afd5f5c2bef34fef841acd5f90a2d59c9"><div class="ttname"><a href="structGCS__MAVLINK.html#afd5f5c2bef34fef841acd5f90a2d59c9">GCS_MAVLINK::system_status</a></div><div class="ttdeci">virtual MAV_STATE system_status() const =0</div></div>
<div class="ttc" id="rotations_8h_html_a67a250c97139a5466814a54c4aa4a681ac96f680be7fee8f6064f26555d4de00a"><div class="ttname"><a href="rotations_8h.html#a67a250c97139a5466814a54c4aa4a681ac96f680be7fee8f6064f26555d4de00a">ROTATION_YAW_315</a></div><div class="ttdef"><b>Definition:</b> <a href="rotations_8h_source.html#l00035">rotations.h:35</a></div></div>
<div class="ttc" id="LogStructure_8h_html_aec1abc8a4fd0e25bbcf703a19b991a05a6256e259b966cfbdea5e5dddfdce7dea"><div class="ttname"><a href="LogStructure_8h.html#aec1abc8a4fd0e25bbcf703a19b991a05a6256e259b966cfbdea5e5dddfdce7dea">LOG_MAV_MSG</a></div><div class="ttdef"><b>Definition:</b> <a href="LogStructure_8h_source.html#l01694">LogStructure.h:1694</a></div></div>
<div class="ttc" id="classMissionItemProtocol__Waypoints_html_aab4e30e0915079ca9e3996024af93a9a"><div class="ttname"><a href="classMissionItemProtocol__Waypoints.html#aab4e30e0915079ca9e3996024af93a9a">MissionItemProtocol_Waypoints::mission</a></div><div class="ttdeci">AP_Mission &amp; mission</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00237">GCS.h:237</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a6f49b41ed3f9b5e11df9a4a1221e2f84"><div class="ttname"><a href="structGCS__MAVLINK.html#a6f49b41ed3f9b5e11df9a4a1221e2f84">GCS_MAVLINK::handle_common_vision_position_estimate_data</a></div><div class="ttdeci">void handle_common_vision_position_estimate_data(const uint64_t usec, const float x, const float y, const float z, const float roll, const float pitch, const float yaw, const uint16_t payload_size)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l03171">GCS_Common.cpp:3171</a></div></div>
<div class="ttc" id="classAP__BattMonitor_html_a9d4b297f1efacb5bbad0679579b384aa"><div class="ttname"><a href="classAP__BattMonitor.html#a9d4b297f1efacb5bbad0679579b384aa">AP_BattMonitor::healthy</a></div><div class="ttdeci">bool healthy(uint8_t instance) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__BattMonitor_8cpp_source.html#l00257">AP_BattMonitor.cpp:257</a></div></div>
<div class="ttc" id="classAP__AHRS__NavEKF_html_ae1df19ca0e69b1b93219865c9136ea2a"><div class="ttname"><a href="classAP__AHRS__NavEKF.html#ae1df19ca0e69b1b93219865c9136ea2a">AP_AHRS_NavEKF::get_origin</a></div><div class="ttdeci">bool get_origin(Location &amp;ret) const override</div><div class="ttdef"><b>Definition:</b> <a href="AP__AHRS__NavEKF_8cpp_source.html#l01568">AP_AHRS_NavEKF.cpp:1568</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a88dabe4da3b32dca5e34beb438f8be65"><div class="ttname"><a href="structGCS__MAVLINK.html#a88dabe4da3b32dca5e34beb438f8be65">GCS_MAVLINK::GCS_MAVLINK</a></div><div class="ttdeci">GCS_MAVLINK()</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00079">GCS_Common.cpp:79</a></div></div>
<div class="ttc" id="classAP__Mission_html_aac82471fe961e31cd0fba02ba7783aba"><div class="ttname"><a href="classAP__Mission.html#aac82471fe961e31cd0fba02ba7783aba">AP_Mission::read_cmd_from_storage</a></div><div class="ttdeci">bool read_cmd_from_storage(uint16_t index, Mission_Command &amp;cmd) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__Mission_8cpp_source.html#l00504">AP_Mission.cpp:504</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ab6f47a24d390d4a7e324a79a23d3ae28"><div class="ttname"><a href="structGCS__MAVLINK.html#ab6f47a24d390d4a7e324a79a23d3ae28">GCS_MAVLINK::send_servo_output_raw</a></div><div class="ttdeci">void send_servo_output_raw()</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02685">GCS_Common.cpp:2685</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ac747807d69da72d1d3660c8e962ecd54"><div class="ttname"><a href="structGCS__MAVLINK.html#ac747807d69da72d1d3660c8e962ecd54">GCS_MAVLINK::get_default_interval_for_ap_message</a></div><div class="ttdeci">bool get_default_interval_for_ap_message(const ap_message id, uint16_t &amp;interval) const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l04775">GCS_Common.cpp:4775</a></div></div>
<div class="ttc" id="classOpticalFlow_html_ade1670ce959d2e3429160385f466fe9a"><div class="ttname"><a href="classOpticalFlow.html#ade1670ce959d2e3429160385f466fe9a">OpticalFlow::flowRate</a></div><div class="ttdeci">const Vector2f &amp; flowRate() const</div><div class="ttdef"><b>Definition:</b> <a href="AP__OpticalFlow_2OpticalFlow_8h_source.html#l00075">OpticalFlow.h:75</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991ae4beecf8a2a68dbee2cb06e3cb96a8a3"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991ae4beecf8a2a68dbee2cb06e3cb96a8a3">MSG_DISTANCE_SENSOR</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00072">GCS.h:72</a></div></div>
<div class="ttc" id="examples_2RCOutput_2RCOutput_8cpp_html_a69a2e4606b99ee565937e4ae119bfa77"><div class="ttname"><a href="examples_2RCOutput_2RCOutput_8cpp.html#a69a2e4606b99ee565937e4ae119bfa77">delta</a></div><div class="ttdeci">static int8_t delta</div><div class="ttdef"><b>Definition:</b> <a href="examples_2RCOutput_2RCOutput_8cpp_source.html#l00034">RCOutput.cpp:34</a></div></div>
<div class="ttc" id="SITL_8h_html"><div class="ttname"><a href="SITL_8h.html">SITL.h</a></div></div>
<div class="ttc" id="AHRS__Test_8cpp_html_a4b91d1711c0d031f33f581540503bc54"><div class="ttname"><a href="AHRS__Test_8cpp.html#a4b91d1711c0d031f33f581540503bc54">ins</a></div><div class="ttdeci">static AP_InertialSensor ins</div><div class="ttdef"><b>Definition:</b> <a href="AHRS__Test_8cpp_source.html#l00021">AHRS_Test.cpp:21</a></div></div>
<div class="ttc" id="RPM__generic_8cpp_html_ab06e47b0f5828988561a78a542223be2"><div class="ttname"><a href="RPM__generic_8cpp.html#ab06e47b0f5828988561a78a542223be2">RPM</a></div><div class="ttdeci">static AP_RPM RPM</div><div class="ttdef"><b>Definition:</b> <a href="RPM__generic_8cpp_source.html#l00029">RPM_generic.cpp:29</a></div></div>
<div class="ttc" id="classGCS_html_aa7c87cc985a830a5c5ac16d5a84d1a31"><div class="ttname"><a href="classGCS.html#aa7c87cc985a830a5c5ac16d5a84d1a31">GCS::_singleton</a></div><div class="ttdeci">static GCS * _singleton</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l01009">GCS.h:1009</a></div></div>
<div class="ttc" id="classAP__Baro_html"><div class="ttname"><a href="classAP__Baro.html">AP_Baro</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__Baro_8h_source.html#l00021">AP_Baro.h:21</a></div></div>
<div class="ttc" id="GCS__MAVLink_8h_html_aff625e94451bf446bdd56f5d0e081077"><div class="ttname"><a href="GCS__MAVLink_8h.html#aff625e94451bf446bdd56f5d0e081077">MAVLINK_COMM_NUM_BUFFERS</a></div><div class="ttdeci">#define MAVLINK_COMM_NUM_BUFFERS</div><div class="ttdef"><b>Definition:</b> <a href="GCS__MAVLink_8h_source.html#l00020">GCS_MAVLink.h:20</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a3ff54982e66b2ab26ae02153da744788"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a3ff54982e66b2ab26ae02153da744788">MSG_GPS2_RAW</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00057">GCS.h:57</a></div></div>
<div class="ttc" id="namespaceAP_html_ab2991c8a02a28bf52b0aba35d9c3bc2f"><div class="ttname"><a href="namespaceAP.html#ab2991c8a02a28bf52b0aba35d9c3bc2f">AP::sitl</a></div><div class="ttdeci">SITL::SITL * sitl()</div><div class="ttdef"><b>Definition:</b> <a href="SITL_8cpp_source.html#l00280">SITL.cpp:280</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a080b5b10d6792fae80833aa9bbca2569"><div class="ttname"><a href="structGCS__MAVLINK.html#a080b5b10d6792fae80833aa9bbca2569">GCS_MAVLINK::handle_command_int</a></div><div class="ttdeci">void handle_command_int(mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l04165">GCS_Common.cpp:4165</a></div></div>
<div class="ttc" id="classAP__InertialSensor_html_a7a848d0332acb5b39d8e47fca5a1e77f"><div class="ttname"><a href="classAP__InertialSensor.html#a7a848d0332acb5b39d8e47fca5a1e77f">AP_InertialSensor::get_accel</a></div><div class="ttdeci">const Vector3f &amp; get_accel(uint8_t i) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__InertialSensor_8h_source.html#l00123">AP_InertialSensor.h:123</a></div></div>
<div class="ttc" id="classAP__Proximity_html_a9a59943103f7d5ac005096c2f0e8fc23"><div class="ttname"><a href="classAP__Proximity.html#a9a59943103f7d5ac005096c2f0e8fc23">AP_Proximity::num_sensors</a></div><div class="ttdeci">uint8_t num_sensors(void) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__Proximity_8h_source.html#l00094">AP_Proximity.h:94</a></div></div>
<div class="ttc" id="classAP__BattMonitor_html_adfb2c3beb09d00f0b2442bfe5e4f755a"><div class="ttname"><a href="classAP__BattMonitor.html#adfb2c3beb09d00f0b2442bfe5e4f755a">AP_BattMonitor::consumed_wh</a></div><div class="ttdeci">float consumed_wh(uint8_t instance) const</div><div class="ttdoc">consumed_wh - returns total energy drawn since start-up in watt.hours</div><div class="ttdef"><b>Definition:</b> <a href="AP__BattMonitor_8cpp_source.html#l00323">AP_BattMonitor.cpp:323</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_acf70ad80c7031570ae4a4cc1bd4f3c31"><div class="ttname"><a href="structGCS__MAVLINK.html#acf70ad80c7031570ae4a4cc1bd4f3c31">GCS_MAVLINK::_perf_update</a></div><div class="ttdeci">AP_HAL::Util::perf_counter_t _perf_update</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00711">GCS.h:711</a></div></div>
<div class="ttc" id="classCompass_html_a6aa543c3bd5ef2e78cefa3ffcc390767"><div class="ttname"><a href="classCompass.html#a6aa543c3bd5ef2e78cefa3ffcc390767">Compass::get_field</a></div><div class="ttdeci">const Vector3f &amp; get_field(uint8_t i) const</div><div class="ttdoc">Return the current field as a Vector3f in milligauss.</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00121">AP_Compass.h:121</a></div></div>
<div class="ttc" id="classCompass_html_ab4993a08b27d38ebb96276dc40c5f5fb"><div class="ttname"><a href="classCompass.html#ab4993a08b27d38ebb96276dc40c5f5fb">Compass::handle_mag_cal_command</a></div><div class="ttdeci">MAV_RESULT handle_mag_cal_command(const mavlink_command_long_t &amp;packet)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass__Calibration_8cpp_source.html#l00289">AP_Compass_Calibration.cpp:289</a></div></div>
<div class="ttc" id="classAP__Gripper_html_a40b0812c1f3ddefcc90bfb6d968c244c"><div class="ttname"><a href="classAP__Gripper.html#a40b0812c1f3ddefcc90bfb6d968c244c">AP_Gripper::release</a></div><div class="ttdeci">void release()</div></div>
<div class="ttc" id="classAP__Gripper_html_a0ab7a524f9fc267b0a68eb3076702936"><div class="ttname"><a href="classAP__Gripper.html#a0ab7a524f9fc267b0a68eb3076702936">AP_Gripper::grab</a></div><div class="ttdeci">void grab()</div></div>
<div class="ttc" id="Airspeed_8cpp_html_afc1d28cfbce795d6ea954ebe725241f5"><div class="ttname"><a href="Airspeed_8cpp.html#afc1d28cfbce795d6ea954ebe725241f5">temperature</a></div><div class="ttdeci">float temperature</div><div class="ttdef"><b>Definition:</b> <a href="Airspeed_8cpp_source.html#l00031">Airspeed.cpp:31</a></div></div>
<div class="ttc" id="namespaceAP_html_aa35bfac1ea2da16f110e8e72db7b3b20"><div class="ttname"><a href="namespaceAP.html#aa35bfac1ea2da16f110e8e72db7b3b20">AP::logger</a></div><div class="ttdeci">AP_Logger &amp; logger()</div><div class="ttdef"><b>Definition:</b> <a href="AP__Logger_8cpp_source.html#l01182">AP_Logger.cpp:1182</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a7868048c0aaca4e2374082d15fcc85a9"><div class="ttname"><a href="structGCS__MAVLINK.html#a7868048c0aaca4e2374082d15fcc85a9">GCS_MAVLINK::handle_mission_clear_all</a></div><div class="ttdeci">void handle_mission_clear_all(const mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00799">GCS_Common.cpp:799</a></div></div>
<div class="ttc" id="classAP__HAL_1_1Scheduler_html_ab3175e2e6223ccfe82f957e41cc12b26"><div class="ttname"><a href="classAP__HAL_1_1Scheduler.html#ab3175e2e6223ccfe82f957e41cc12b26">AP_HAL::Scheduler::delay</a></div><div class="ttdeci">virtual void delay(uint16_t ms)=0</div></div>
<div class="ttc" id="structGCS__MAVLINK_html_aa966f3ef11eb46a123a7a899053bfa73"><div class="ttname"><a href="structGCS__MAVLINK.html#aa966f3ef11eb46a123a7a899053bfa73">GCS_MAVLINK::get_reschedule_interval_ms</a></div><div class="ttdeci">uint16_t get_reschedule_interval_ms(const deferred_message_bucket_t &amp;deferred) const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l01249">GCS_Common.cpp:1249</a></div></div>
<div class="ttc" id="classAP__Logger_html_a320182e24dfaf50d436cf065c97169bb"><div class="ttname"><a href="classAP__Logger.html#a320182e24dfaf50d436cf065c97169bb">AP_Logger::Write</a></div><div class="ttdeci">void Write(const char *name, const char *labels, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Logger_8cpp_source.html#l00735">AP_Logger.cpp:735</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a60c3c7ed1d9e0a9d298fac37c688763b"><div class="ttname"><a href="structGCS__MAVLINK.html#a60c3c7ed1d9e0a9d298fac37c688763b">GCS_MAVLINK::_handle_command_preflight_calibration</a></div><div class="ttdeci">virtual MAV_RESULT _handle_command_preflight_calibration(const mavlink_command_long_t &amp;packet)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l03653">GCS_Common.cpp:3653</a></div></div>
<div class="ttc" id="structVector2_html_a6cfed8355591aa269f4dba43bd806ef9"><div class="ttname"><a href="structVector2.html#a6cfed8355591aa269f4dba43bd806ef9">Vector2::y</a></div><div class="ttdeci">T y</div><div class="ttdef"><b>Definition:</b> <a href="vector2_8h_source.html#l00037">vector2.h:37</a></div></div>
<div class="ttc" id="GCS__MAVLink_8h_html_a17ee8d1ce05b7d160ccc6a78b92b774f"><div class="ttname"><a href="GCS__MAVLink_8h.html#a17ee8d1ce05b7d160ccc6a78b92b774f">valid_channel</a></div><div class="ttdeci">static bool valid_channel(mavlink_channel_t chan)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__MAVLink_8h_source.html#l00053">GCS_MAVLink.h:53</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a7677b38b86b12d2966994a54ea5edbd4"><div class="ttname"><a href="structGCS__MAVLINK.html#a7677b38b86b12d2966994a54ea5edbd4">GCS_MAVLINK::deferred_message</a></div><div class="ttdeci">struct GCS_MAVLINK::deferred_message_t deferred_message[2]</div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a395e78088a50a0d11bb2890416033f94"><div class="ttname"><a href="structGCS__MAVLINK.html#a395e78088a50a0d11bb2890416033f94">GCS_MAVLINK::handle_change_alt_request</a></div><div class="ttdeci">virtual void handle_change_alt_request(AP_Mission::Mission_Command &amp;cmd)=0</div></div>
<div class="ttc" id="structGCS__MAVLINK_1_1stream__entries_html"><div class="ttname"><a href="structGCS__MAVLINK_1_1stream__entries.html">GCS_MAVLINK::stream_entries</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00490">GCS.h:490</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a8b947efd39ef128020f20544da6cfc25"><div class="ttname"><a href="structGCS__MAVLINK.html#a8b947efd39ef128020f20544da6cfc25">GCS_MAVLINK::mavlink_id_to_ap_message_id</a></div><div class="ttdeci">ap_message mavlink_id_to_ap_message_id(const uint32_t mavlink_id) const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l01132">GCS_Common.cpp:1132</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_abcd38f5b7a9c3895b139a7aeaa6e65da"><div class="ttname"><a href="structGCS__MAVLINK.html#abcd38f5b7a9c3895b139a7aeaa6e65da">GCS_MAVLINK::telemetry_delayed</a></div><div class="ttdeci">bool telemetry_delayed() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02666">GCS_Common.cpp:2666</a></div></div>
<div class="ttc" id="classGCS_html_a49e7272eb586b48b04d970d13ef3d95f"><div class="ttname"><a href="classGCS.html#a49e7272eb586b48b04d970d13ef3d95f">GCS::send_message</a></div><div class="ttdeci">void send_message(enum ap_message id)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02234">GCS_Common.cpp:2234</a></div></div>
<div class="ttc" id="classCompass_html_a17d18b7b6d4fd415595d63d4741d4e83"><div class="ttname"><a href="classCompass.html#a17d18b7b6d4fd415595d63d4741d4e83">Compass::send_mag_cal_report</a></div><div class="ttdeci">void send_mag_cal_report(mavlink_channel_t chan)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass__Calibration_8cpp_source.html#l00221">AP_Compass_Calibration.cpp:221</a></div></div>
<div class="ttc" id="classAP__AHRS__NavEKF_html_a9f75e1cc7913ff2b730d6fc6b3a5fa71"><div class="ttname"><a href="classAP__AHRS__NavEKF.html#a9f75e1cc7913ff2b730d6fc6b3a5fa71">AP_AHRS_NavEKF::get_relative_position_NED_home</a></div><div class="ttdeci">bool get_relative_position_NED_home(Vector3f &amp;vec) const override</div><div class="ttdef"><b>Definition:</b> <a href="AP__AHRS__NavEKF_8cpp_source.html#l00833">AP_AHRS_NavEKF.cpp:833</a></div></div>
<div class="ttc" id="classLocation_html_af494dabb88cd43e0d4efa99f04d31351"><div class="ttname"><a href="classLocation.html#af494dabb88cd43e0d4efa99f04d31351">Location::AltFrame</a></div><div class="ttdeci">AltFrame</div><div class="ttdoc">enumeration of possible altitude types</div><div class="ttdef"><b>Definition:</b> <a href="Location_8h_source.html#l00025">Location.h:25</a></div></div>
<div class="ttc" id="GCS_8h_html_a6bcce1fe6fd8b6277f4f2dd0e738aec1"><div class="ttname"><a href="GCS_8h.html#a6bcce1fe6fd8b6277f4f2dd0e738aec1">HAVE_PAYLOAD_SPACE</a></div><div class="ttdeci">#define HAVE_PAYLOAD_SPACE(chan, id)</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00025">GCS.h:25</a></div></div>
<div class="ttc" id="classMissionItemProtocol_html_a6c42049687ff033895c71c94fd9b5e74"><div class="ttname"><a href="classMissionItemProtocol.html#a6c42049687ff033895c71c94fd9b5e74">MissionItemProtocol::request_i</a></div><div class="ttdeci">uint16_t request_i</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00182">GCS.h:182</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a2377a4ec647d1a9052f654e0e899a696"><div class="ttname"><a href="structGCS__MAVLINK.html#a2377a4ec647d1a9052f654e0e899a696">GCS_MAVLINK::initialise_message_intervals_from_streamrates</a></div><div class="ttdeci">void initialise_message_intervals_from_streamrates()</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l04766">GCS_Common.cpp:4766</a></div></div>
<div class="ttc" id="classAP__Proximity_html_ab702df4ee18ddbe772209fd7ebf13060"><div class="ttname"><a href="classAP__Proximity.html#ab702df4ee18ddbe772209fd7ebf13060">AP_Proximity::get_type</a></div><div class="ttdeci">Proximity_Type get_type(uint8_t instance) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__Proximity_8cpp_source.html#l00467">AP_Proximity.cpp:467</a></div></div>
<div class="ttc" id="classAP__Avoidance_1_1Obstacle_html_a372b03e813c79eb79663cefd031646ed"><div class="ttname"><a href="classAP__Avoidance_1_1Obstacle.html#a372b03e813c79eb79663cefd031646ed">AP_Avoidance::Obstacle::closest_approach_z</a></div><div class="ttdeci">float closest_approach_z</div><div class="ttdef"><b>Definition:</b> <a href="AP__Avoidance_8h_source.html#l00056">AP_Avoidance.h:56</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a692bcb4ac40fb82572a744f263fb17e1"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a692bcb4ac40fb82572a744f263fb17e1">MSG_POSITION_TARGET_GLOBAL_INT</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00088">GCS.h:88</a></div></div>
<div class="ttc" id="DerivativeFilter_8cpp_html_a91f27329cbc70a03207bcee33e2b42fd"><div class="ttname"><a href="DerivativeFilter_8cpp.html#a91f27329cbc70a03207bcee33e2b42fd">x</a></div><div class="ttdeci">#define x(i)</div></div>
<div class="ttc" id="classAP__HAL_1_1Util_html_ac57ef0a9815cd597ad5cab5d6c31c6c8"><div class="ttname"><a href="classAP__HAL_1_1Util.html#ac57ef0a9815cd597ad5cab5d6c31c6c8">AP_HAL::Util::vsnprintf</a></div><div class="ttdeci">int vsnprintf(char *str, size_t size, const char *format, va_list ap)</div><div class="ttdef"><b>Definition:</b> <a href="Util_8cpp_source.html#l00053">Util.cpp:53</a></div></div>
<div class="ttc" id="classGCS_html_a114e9a61009d41f517a06646afe67d18"><div class="ttname"><a href="classGCS.html#a114e9a61009d41f517a06646afe67d18">GCS::setup_uarts</a></div><div class="ttdeci">virtual void setup_uarts()</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02293">GCS_Common.cpp:2293</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ad9f23c1630121a87f7deea2bb1422045"><div class="ttname"><a href="structGCS__MAVLINK.html#ad9f23c1630121a87f7deea2bb1422045">GCS_MAVLINK::set_mode</a></div><div class="ttdeci">virtual bool set_mode(uint8_t mode)=0</div></div>
<div class="ttc" id="classAP__GPS_html_a266ef4a39f7a303fc1905bf7f9e4ed09"><div class="ttname"><a href="classAP__GPS.html#a266ef4a39f7a303fc1905bf7f9e4ed09">AP_GPS::send_mavlink_gps_raw</a></div><div class="ttdeci">void send_mavlink_gps_raw(mavlink_channel_t chan)</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8cpp_source.html#l00900">AP_GPS.cpp:900</a></div></div>
<div class="ttc" id="RC__Channel_8h_html_ad8f949ef5f11f906dc35ae5a38c67179"><div class="ttname"><a href="RC__Channel_8h.html#ad8f949ef5f11f906dc35ae5a38c67179">NUM_RC_CHANNELS</a></div><div class="ttdeci">#define NUM_RC_CHANNELS</div><div class="ttdef"><b>Definition:</b> <a href="RC__Channel_8h_source.html#l00008">RC_Channel.h:8</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991af5b97ab8c9c725ebc1a437d5145a96d9"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991af5b97ab8c9c725ebc1a437d5145a96d9">MSG_ORIGIN</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00095">GCS.h:95</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a13da94a2548ade6552a5250eb3251e89"><div class="ttname"><a href="structGCS__MAVLINK.html#a13da94a2548ade6552a5250eb3251e89">GCS_MAVLINK::handle_common_message</a></div><div class="ttdeci">void handle_common_message(mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l03326">GCS_Common.cpp:3326</a></div></div>
<div class="ttc" id="classSRV__Channels_html_a650fab39dbed7c6ce33747c34e66a208"><div class="ttname"><a href="classSRV__Channels.html#a650fab39dbed7c6ce33747c34e66a208">SRV_Channels::srv_channel</a></div><div class="ttdeci">static SRV_Channel * srv_channel(uint8_t i)</div><div class="ttdef"><b>Definition:</b> <a href="SRV__Channel_8h_source.html#l00441">SRV_Channel.h:441</a></div></div>
<div class="ttc" id="GCS__MAVLink_8cpp_html_a2817de906dc695cf406a4a43be1bc724"><div class="ttname"><a href="GCS__MAVLink_8cpp.html#a2817de906dc695cf406a4a43be1bc724">comm_get_available</a></div><div class="ttdeci">uint16_t comm_get_available(mavlink_channel_t chan)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__MAVLink_8cpp_source.html#l00118">GCS_MAVLink.cpp:118</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_1_1stream__entries_html_a2a0b2f76bfa82e9c97290dc79542a0d0"><div class="ttname"><a href="structGCS__MAVLINK_1_1stream__entries.html#a2a0b2f76bfa82e9c97290dc79542a0d0">GCS_MAVLINK::stream_entries::ap_message_ids</a></div><div class="ttdeci">const ap_message * ap_message_ids</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00492">GCS.h:492</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a1e77ebaf5b0b961a589efe3fc0fef2fd"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a1e77ebaf5b0b961a589efe3fc0fef2fd">MSG_SCALED_PRESSURE3</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00053">GCS.h:53</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ad4e76e7f27bc999e806416e24aa10f26"><div class="ttname"><a href="structGCS__MAVLINK.html#ad4e76e7f27bc999e806416e24aa10f26">GCS_MAVLINK::handle_mission_set_current</a></div><div class="ttdeci">virtual void handle_mission_set_current(AP_Mission &amp;mission, mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00702">GCS_Common.cpp:702</a></div></div>
<div class="ttc" id="classMissionItemProtocol__Rally_html_a7462663682e07c367d8c00aa16ff75aa"><div class="ttname"><a href="classMissionItemProtocol__Rally.html#a7462663682e07c367d8c00aa16ff75aa">MissionItemProtocol_Rally::clear_all_items</a></div><div class="ttdeci">bool clear_all_items() override WARN_IF_UNUSED</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00820">GCS_Common.cpp:820</a></div></div>
<div class="ttc" id="classAP__HAL_1_1HAL_html"><div class="ttname"><a href="classAP__HAL_1_1HAL.html">AP_HAL::HAL</a></div><div class="ttdef"><b>Definition:</b> <a href="HAL_8h_source.html#l00021">HAL.h:21</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a0e50f472a0810b781212091a1ec7757c"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a0e50f472a0810b781212091a1ec7757c">MSG_MAG_CAL_REPORT</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00080">GCS.h:80</a></div></div>
<div class="ttc" id="classAP__InertialSensor_html"><div class="ttname"><a href="classAP__InertialSensor.html">AP_InertialSensor</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__InertialSensor_8h_source.html#l00046">AP_InertialSensor.h:46</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a9b50b969ed3f331f2cc46ff9edcad029"><div class="ttname"><a href="structGCS__MAVLINK.html#a9b50b969ed3f331f2cc46ff9edcad029">GCS_MAVLINK::handle_command_preflight_set_sensor_offsets</a></div><div class="ttdeci">MAV_RESULT handle_command_preflight_set_sensor_offsets(const mavlink_command_long_t &amp;packet)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l03609">GCS_Common.cpp:3609</a></div></div>
<div class="ttc" id="namespaceAP_html_aa01135941499a6cbb5fc30403fc24c65"><div class="ttname"><a href="namespaceAP.html#aa01135941499a6cbb5fc30403fc24c65">AP::serialmanager</a></div><div class="ttdeci">AP_SerialManager &amp; serialmanager()</div><div class="ttdef"><b>Definition:</b> <a href="AP__SerialManager_8cpp_source.html#l00561">AP_SerialManager.cpp:561</a></div></div>
<div class="ttc" id="classAP__RSSI_html_ad243edc62e00237673d7a9649fa05dd8"><div class="ttname"><a href="classAP__RSSI.html#ad243edc62e00237673d7a9649fa05dd8">AP_RSSI::read_receiver_rssi_uint8</a></div><div class="ttdeci">uint8_t read_receiver_rssi_uint8()</div><div class="ttdef"><b>Definition:</b> <a href="AP__RSSI_8cpp_source.html#l00157">AP_RSSI.cpp:157</a></div></div>
<div class="ttc" id="classJitterCorrection_html_acac0fcd86c6ed7583727e5ba00eaa008"><div class="ttname"><a href="classJitterCorrection.html#acac0fcd86c6ed7583727e5ba00eaa008">JitterCorrection::correct_offboard_timestamp_usec</a></div><div class="ttdeci">uint64_t correct_offboard_timestamp_usec(uint64_t offboard_usec, uint64_t local_usec)</div><div class="ttdef"><b>Definition:</b> <a href="JitterCorrection_8cpp_source.html#l00050">JitterCorrection.cpp:50</a></div></div>
<div class="ttc" id="classRC__Channels_html_a8c9ced1f38cf3223738e2633ef92dafa"><div class="ttname"><a href="classRC__Channels.html#a8c9ced1f38cf3223738e2633ef92dafa">RC_Channels::set_override</a></div><div class="ttdeci">static void set_override(const uint8_t chan, const int16_t value, const uint32_t timestamp_ms=0)</div><div class="ttdef"><b>Definition:</b> <a href="RC__Channels_8cpp_source.html#l00106">RC_Channels.cpp:106</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a51db13159f5a86687384c9e6739607a1"><div class="ttname"><a href="structGCS__MAVLINK.html#a51db13159f5a86687384c9e6739607a1">GCS_MAVLINK::routing</a></div><div class="ttdeci">static MAVLink_routing routing</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00806">GCS.h:806</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_1_1stream__entries_html_acf9fbc3c3086552a8d179d9b2761e1be"><div class="ttname"><a href="structGCS__MAVLINK_1_1stream__entries.html#acf9fbc3c3086552a8d179d9b2761e1be">GCS_MAVLINK::stream_entries::num_ap_message_ids</a></div><div class="ttdeci">const uint8_t num_ap_message_ids</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00493">GCS.h:493</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a5599317d7992963a65d1658e6858c73d"><div class="ttname"><a href="structGCS__MAVLINK.html#a5599317d7992963a65d1658e6858c73d">GCS_MAVLINK::bucket_message_ids_to_send</a></div><div class="ttdeci">Bitmask&lt; MSG_LAST &gt; bucket_message_ids_to_send</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00746">GCS.h:746</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_adb3b41a33f84e6f33bda6ffca0a39f46"><div class="ttname"><a href="structGCS__MAVLINK.html#adb3b41a33f84e6f33bda6ffca0a39f46">GCS_MAVLINK::vfr_hud_airspeed</a></div><div class="ttdeci">virtual float vfr_hud_airspeed() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02747">GCS_Common.cpp:2747</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a653b18d5067a9fc69367eeefd2d7663e"><div class="ttname"><a href="structGCS__MAVLINK.html#a653b18d5067a9fc69367eeefd2d7663e">GCS_MAVLINK::send_hwstatus</a></div><div class="ttdeci">void send_hwstatus()</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l04245">GCS_Common.cpp:4245</a></div></div>
<div class="ttc" id="classAP__GPS_html_ae7f097588dd863d4624f6fec1509e0e6"><div class="ttname"><a href="classAP__GPS.html#ae7f097588dd863d4624f6fec1509e0e6">AP_GPS::ground_speed</a></div><div class="ttdeci">float ground_speed(uint8_t instance) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8h_source.html#l00231">AP_GPS.h:231</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a07fa470686562809a0dedbccd1174cc4"><div class="ttname"><a href="structGCS__MAVLINK.html#a07fa470686562809a0dedbccd1174cc4">GCS_MAVLINK::send_attitude</a></div><div class="ttdeci">virtual void send_attitude() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l04321">GCS_Common.cpp:4321</a></div></div>
<div class="ttc" id="classGCS_html_a9f093f75d5a95970e1f6b09adc775d69"><div class="ttname"><a href="classGCS.html#a9f093f75d5a95970e1f6b09adc775d69">GCS::chan</a></div><div class="ttdeci">virtual GCS_MAVLINK &amp; chan(const uint8_t ofs)=0</div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a8dcfcf18e3ea3e611870669adb57f6e7"><div class="ttname"><a href="structGCS__MAVLINK.html#a8dcfcf18e3ea3e611870669adb57f6e7">GCS_MAVLINK::try_send_compass_message</a></div><div class="ttdeci">bool try_send_compass_message(enum ap_message id)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l04181">GCS_Common.cpp:4181</a></div></div>
<div class="ttc" id="classAP__AHRS_html_a862f8f1b3a5e51d23de7c6ffa04fe342"><div class="ttname"><a href="classAP__AHRS.html#a862f8f1b3a5e51d23de7c6ffa04fe342">AP_AHRS::writeExtNavData</a></div><div class="ttdeci">virtual void writeExtNavData(const Vector3f &amp;sensOffset, const Vector3f &amp;pos, const Quaternion &amp;quat, float posErr, float angErr, uint32_t timeStamp_ms, uint32_t resetTime_ms)</div><div class="ttdef"><b>Definition:</b> <a href="AP__AHRS_8h_source.html#l00573">AP_AHRS.h:573</a></div></div>
<div class="ttc" id="routing_8cpp_html_a5123629902b8b0dcf1d5cb7336558801"><div class="ttname"><a href="routing_8cpp.html#a5123629902b8b0dcf1d5cb7336558801">mavlink_system</a></div><div class="ttdeci">mavlink_system_t mavlink_system</div><div class="ttdef"><b>Definition:</b> <a href="GCS__MAVLink_8cpp_source.html#l00046">GCS_MAVLink.cpp:46</a></div></div>
<div class="ttc" id="classAP__Camera_html"><div class="ttname"><a href="classAP__Camera.html">AP_Camera</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__Camera_8h_source.html#l00022">AP_Camera.h:22</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a829fb3ed239c473047e2fa3cd58306c5"><div class="ttname"><a href="structGCS__MAVLINK.html#a829fb3ed239c473047e2fa3cd58306c5">GCS_MAVLINK::is_streaming</a></div><div class="ttdeci">bool is_streaming() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00379">GCS.h:379</a></div></div>
<div class="ttc" id="namespaceAP_html_a78a9a503c697cb3f7cee3b353686d700"><div class="ttname"><a href="namespaceAP.html#a78a9a503c697cb3f7cee3b353686d700">AP::rangefinder</a></div><div class="ttdeci">RangeFinder * rangefinder()</div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8cpp_source.html#l00700">RangeFinder.cpp:700</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_aa12f134b20fffe73a1d17a2eef834836"><div class="ttname"><a href="structGCS__MAVLINK.html#aa12f134b20fffe73a1d17a2eef834836">GCS_MAVLINK::remove_message_from_bucket</a></div><div class="ttdeci">void remove_message_from_bucket(int8_t bucket, ap_message id)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l01539">GCS_Common.cpp:1539</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a9706d56a7f8516b03b88ba7f671682cc"><div class="ttname"><a href="structGCS__MAVLINK.html#a9706d56a7f8516b03b88ba7f671682cc">GCS_MAVLINK::send_timesync</a></div><div class="ttdeci">void send_timesync()</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02973">GCS_Common.cpp:2973</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a5a232dea09ba3ec0c8459e0a7b72200b"><div class="ttname"><a href="structGCS__MAVLINK.html#a5a232dea09ba3ec0c8459e0a7b72200b">GCS_MAVLINK::handle_vicon_position_estimate</a></div><div class="ttdeci">void handle_vicon_position_estimate(mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l03159">GCS_Common.cpp:3159</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ac5e3bfc099bc405763c01f06089f1fcc"><div class="ttname"><a href="structGCS__MAVLINK.html#ac5e3bfc099bc405763c01f06089f1fcc">GCS_MAVLINK::is_active</a></div><div class="ttdeci">bool is_active() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00376">GCS.h:376</a></div></div>
<div class="ttc" id="structlog__MAV_html_a6d2d7709a16622b1064b1c72a742f713"><div class="ttname"><a href="structlog__MAV.html#a6d2d7709a16622b1064b1c72a742f713">log_MAV::time_us</a></div><div class="ttdeci">uint64_t time_us</div><div class="ttdef"><b>Definition:</b> <a href="LogStructure_8h_source.html#l00364">LogStructure.h:364</a></div></div>
<div class="ttc" id="classGCS_html_a313e604179053ea42415b1c9289f13cd"><div class="ttname"><a href="classGCS.html#a313e604179053ea42415b1c9289f13cd">GCS::send_statustext</a></div><div class="ttdeci">virtual void send_statustext(MAV_SEVERITY severity, uint8_t dest_bitmask, const char *text)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02148">GCS_Common.cpp:2148</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_aeb2afa7acf64a184d17a81270de4d054"><div class="ttname"><a href="structGCS__MAVLINK.html#aeb2afa7acf64a184d17a81270de4d054">GCS_MAVLINK::handle_command_do_send_banner</a></div><div class="ttdeci">MAV_RESULT handle_command_do_send_banner(const mavlink_command_long_t &amp;packet)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l03782">GCS_Common.cpp:3782</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a2c41f461a8bc8bddbb7ed30ce2a1f135"><div class="ttname"><a href="structGCS__MAVLINK.html#a2c41f461a8bc8bddbb7ed30ce2a1f135">GCS_MAVLINK::handle_preflight_reboot</a></div><div class="ttdeci">MAV_RESULT handle_preflight_reboot(const mavlink_command_long_t &amp;packet)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02809">GCS_Common.cpp:2809</a></div></div>
<div class="ttc" id="definitions_8h_html_aea8758bf61b23b46507902b46060ebfd"><div class="ttname"><a href="definitions_8h.html#aea8758bf61b23b46507902b46060ebfd">GRAVITY_MSS</a></div><div class="ttdeci">#define GRAVITY_MSS</div><div class="ttdef"><b>Definition:</b> <a href="definitions_8h_source.html#l00047">definitions.h:47</a></div></div>
<div class="ttc" id="classAP__Param_html_a4a86ea5356adc75cd1cf80ec01f0dfa8"><div class="ttname"><a href="classAP__Param.html#a4a86ea5356adc75cd1cf80ec01f0dfa8">AP_Param::erase_all</a></div><div class="ttdeci">static void erase_all(void)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Param_8cpp_source.html#l00116">AP_Param.cpp:116</a></div></div>
<div class="ttc" id="classAP__Proximity_html_a5828d33a5e6873d29c01d0ea377bad3a"><div class="ttname"><a href="classAP__Proximity.html#a5828d33a5e6873d29c01d0ea377bad3a">AP_Proximity::get_status</a></div><div class="ttdeci">Proximity_Status get_status(uint8_t instance) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__Proximity_8cpp_source.html#l00256">AP_Proximity.cpp:256</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ade499c2dfc150405083857afe83bf5bc"><div class="ttname"><a href="structGCS__MAVLINK.html#ade499c2dfc150405083857afe83bf5bc">GCS_MAVLINK::deferred_message_bucket</a></div><div class="ttdeci">deferred_message_bucket_t deferred_message_bucket[10]</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00742">GCS.h:742</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a67d79fd73d6a53e265fa102d508eab98"><div class="ttname"><a href="structGCS__MAVLINK.html#a67d79fd73d6a53e265fa102d508eab98">GCS_MAVLINK::handle_mission_item</a></div><div class="ttdeci">void handle_mission_item(const mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00960">GCS_Common.cpp:960</a></div></div>
<div class="ttc" id="classRC__Channel_html"><div class="ttname"><a href="classRC__Channel.html">RC_Channel</a></div><div class="ttdoc">Object managing one RC channel.</div><div class="ttdef"><b>Definition:</b> <a href="RC__Channel_8h_source.html#l00012">RC_Channel.h:12</a></div></div>
<div class="ttc" id="classAP__SerialManager_html_af95280ba50704a8adece62755cb348e7af12f66ae050fdddeb7344770948b871e"><div class="ttname"><a href="classAP__SerialManager.html#af95280ba50704a8adece62755cb348e7af12f66ae050fdddeb7344770948b871e">AP_SerialManager::SerialProtocol_MAVLink</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__SerialManager_8h_source.html#l00089">AP_SerialManager.h:89</a></div></div>
<div class="ttc" id="structlog__MAV_html_a9b0a51a9d00b6831d690ddeea5e2e6ca"><div class="ttname"><a href="structlog__MAV.html#a9b0a51a9d00b6831d690ddeea5e2e6ca">log_MAV::packet_rx_success_count</a></div><div class="ttdeci">uint16_t packet_rx_success_count</div><div class="ttdef"><b>Definition:</b> <a href="LogStructure_8h_source.html#l00367">LogStructure.h:367</a></div></div>
<div class="ttc" id="AP__Math_8h_html_a2a12cce483e9b870da70d30406d82c60"><div class="ttname"><a href="AP__Math_8h.html#a2a12cce483e9b870da70d30406d82c60">is_zero</a></div><div class="ttdeci">bool is_zero(const T fVal1)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Math_8h_source.html#l00040">AP_Math.h:40</a></div></div>
<div class="ttc" id="classAP__BattMonitor_html"><div class="ttname"><a href="classAP__BattMonitor.html">AP_BattMonitor</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__BattMonitor_8h_source.html#l00030">AP_BattMonitor.h:30</a></div></div>
<div class="ttc" id="DerivativeFilter_8cpp_html_a357394e0f6f88c8a57bd893ab28dc8f8"><div class="ttname"><a href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a></div><div class="ttdeci">#define f(i)</div></div>
<div class="ttc" id="structtype_html"><div class="ttname"><a href="structtype.html">type</a></div><div class="ttdef"><b>Definition:</b> <a href="main_8c_source.html#l00133">main.c:133</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_1_1deferred__message__bucket__t_html_a4cd3b2c48f99cf4cc912e2fee8110ab2"><div class="ttname"><a href="structGCS__MAVLINK_1_1deferred__message__bucket__t.html#a4cd3b2c48f99cf4cc912e2fee8110ab2">GCS_MAVLINK::deferred_message_bucket_t::last_sent_ms</a></div><div class="ttdeci">uint16_t last_sent_ms</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00740">GCS.h:740</a></div></div>
<div class="ttc" id="namespaceAP_html_ae87744fcd7073579dee4ddbf9d32239e"><div class="ttname"><a href="namespaceAP.html#ae87744fcd7073579dee4ddbf9d32239e">AP::rally</a></div><div class="ttdeci">AP_Rally * rally()</div><div class="ttdef"><b>Definition:</b> <a href="AP__Rally_8cpp_source.html#l00196">AP_Rally.cpp:196</a></div></div>
<div class="ttc" id="classCompass_html"><div class="ttname"><a href="classCompass.html">Compass</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00050">AP_Compass.h:50</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a43f96ca9e7b136f08224e2665556034b"><div class="ttname"><a href="structGCS__MAVLINK.html#a43f96ca9e7b136f08224e2665556034b">GCS_MAVLINK::handle_command_preflight_can</a></div><div class="ttdeci">MAV_RESULT handle_command_preflight_can(const mavlink_command_long_t &amp;packet)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l03708">GCS_Common.cpp:3708</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a5ad53d67eacf2e9ed33533b7874f34b7"><div class="ttname"><a href="structGCS__MAVLINK.html#a5ad53d67eacf2e9ed33533b7874f34b7">GCS_MAVLINK::sysid_my_gcs</a></div><div class="ttdeci">virtual uint8_t sysid_my_gcs() const =0</div></div>
<div class="ttc" id="Printf_8cpp_html_a381d684d94e6e91dee650357e8f02fa8"><div class="ttname"><a href="Printf_8cpp.html#a381d684d94e6e91dee650357e8f02fa8">fmt</a></div><div class="ttdeci">const char * fmt</div><div class="ttdef"><b>Definition:</b> <a href="Printf_8cpp_source.html#l00014">Printf.cpp:14</a></div></div>
<div class="ttc" id="classGCS_html_aacaf8dfffa2f8c3d542705a9b62206a3"><div class="ttname"><a href="classGCS.html#aacaf8dfffa2f8c3d542705a9b62206a3">GCS::get_sensor_status_flags</a></div><div class="ttdeci">void get_sensor_status_flags(uint32_t &amp;present, uint32_t &amp;enabled, uint32_t &amp;health)</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8cpp_source.html#l00011">GCS.cpp:11</a></div></div>
<div class="ttc" id="llex_8c_html_a8ab976102fb046f9974c53caaf5a1995"><div class="ttname"><a href="llex_8c.html#a8ab976102fb046f9974c53caaf5a1995">next</a></div><div class="ttdeci">#define next(ls)</div><div class="ttdef"><b>Definition:</b> <a href="llex_8c_source.html#l00032">llex.c:32</a></div></div>
<div class="ttc" id="namespaceAP_html_a281eab484336c7b9e2e34072a94895e0"><div class="ttname"><a href="namespaceAP.html#a281eab484336c7b9e2e34072a94895e0">AP::gripper</a></div><div class="ttdeci">AP_Gripper * gripper()</div><div class="ttdef"><b>Definition:</b> <a href="AP__Gripper_8cpp_source.html#l00156">AP_Gripper.cpp:156</a></div></div>
<div class="ttc" id="classAP__FWVersion_html_af21558b1bb1ccd7c242ecae3778a043e"><div class="ttname"><a href="classAP__FWVersion.html#af21558b1bb1ccd7c242ecae3778a043e">AP_FWVersion::os_hash_str</a></div><div class="ttdeci">const char * os_hash_str</div><div class="ttdef"><b>Definition:</b> <a href="AP__FWVersion_8h_source.html#l00019">AP_FWVersion.h:19</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a67fea52889ec858e710b39cf2324849c"><div class="ttname"><a href="structGCS__MAVLINK.html#a67fea52889ec858e710b39cf2324849c">GCS_MAVLINK::handle_command_request_message</a></div><div class="ttdeci">MAV_RESULT handle_command_request_message(const mavlink_command_long_t &amp;packet)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02597">GCS_Common.cpp:2597</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_af6ed021236bfe75ff8ca02e3889013bb"><div class="ttname"><a href="structGCS__MAVLINK.html#af6ed021236bfe75ff8ca02e3889013bb">GCS_MAVLINK::send_gimbal_report</a></div><div class="ttdeci">void send_gimbal_report() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l04369">GCS_Common.cpp:4369</a></div></div>
<div class="ttc" id="structVector2_html"><div class="ttname"><a href="structVector2.html">Vector2&lt; float &gt;</a></div></div>
<div class="ttc" id="AP__OpticalFlow__test_8cpp_html_a7dca3af7ddfcb79556fe4ed5660e605c"><div class="ttname"><a href="AP__OpticalFlow__test_8cpp.html#a7dca3af7ddfcb79556fe4ed5660e605c">optflow</a></div><div class="ttdeci">static OpticalFlow optflow</div><div class="ttdef"><b>Definition:</b> <a href="AP__OpticalFlow__test_8cpp_source.html#l00036">AP_OpticalFlow_test.cpp:36</a></div></div>
<div class="ttc" id="classMAVLink__routing_html_a474038c8ab695c57e23fb6fec4664947"><div class="ttname"><a href="classMAVLink__routing.html#a474038c8ab695c57e23fb6fec4664947">MAVLink_routing::check_and_forward</a></div><div class="ttdeci">bool check_and_forward(mavlink_channel_t in_channel, const mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="MAVLink__routing_8cpp_source.html#l00091">MAVLink_routing.cpp:91</a></div></div>
<div class="ttc" id="classOpticalFlow_html_a84295172176946640695786e5f521319"><div class="ttname"><a href="classOpticalFlow.html#a84295172176946640695786e5f521319">OpticalFlow::quality</a></div><div class="ttdeci">uint8_t quality() const</div><div class="ttdef"><b>Definition:</b> <a href="AP__OpticalFlow_2OpticalFlow_8h_source.html#l00072">OpticalFlow.h:72</a></div></div>
<div class="ttc" id="classAP__BattMonitor_html_a686b822215badd97a701bf3d391e95c0"><div class="ttname"><a href="classAP__BattMonitor.html#a686b822215badd97a701bf3d391e95c0">AP_BattMonitor::has_current</a></div><div class="ttdeci">bool has_current(uint8_t instance) const</div><div class="ttdoc">has_current - returns true if battery monitor instance provides current info</div><div class="ttdef"><b>Definition:</b> <a href="AP__BattMonitor_8cpp_source.html#l00273">AP_BattMonitor.cpp:273</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a6a0c1385a70ee68415e770306d6e19db"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a6a0c1385a70ee68415e770306d6e19db">MSG_AOA_SSA</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00092">GCS.h:92</a></div></div>
<div class="ttc" id="classAP__RangeFinder__Backend_html"><div class="ttname"><a href="classAP__RangeFinder__Backend.html">AP_RangeFinder_Backend</a></div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder__Backend_8h_source.html#l00021">RangeFinder_Backend.h:21</a></div></div>
<div class="ttc" id="classVector3_html_a561df88b28e106e337a25bb86554a569"><div class="ttname"><a href="classVector3.html#a561df88b28e106e337a25bb86554a569">Vector3::y</a></div><div class="ttdeci">T y</div><div class="ttdef"><b>Definition:</b> <a href="vector3_8h_source.html#l00067">vector3.h:67</a></div></div>
<div class="ttc" id="classAP__GPS_html_af0ca31342e4c693bf1ef3ec174145963"><div class="ttname"><a href="classAP__GPS.html#af0ca31342e4c693bf1ef3ec174145963">AP_GPS::send_mavlink_gps_rtk</a></div><div class="ttdeci">void send_mavlink_gps_rtk(mavlink_channel_t chan, uint8_t inst)</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8cpp_source.html#l00972">AP_GPS.cpp:972</a></div></div>
<div class="ttc" id="classAP__AHRS__NavEKF_html_ab1b53c051f37cf092ecacd57a0cf3324"><div class="ttname"><a href="classAP__AHRS__NavEKF.html#ab1b53c051f37cf092ecacd57a0cf3324">AP_AHRS_NavEKF::get_NavEKF2_const</a></div><div class="ttdeci">const NavEKF2 &amp; get_NavEKF2_const(void) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__AHRS__NavEKF_8h_source.html#l00095">AP_AHRS_NavEKF.h:95</a></div></div>
<div class="ttc" id="classAP__Mount_html_a415edaa4d8df1d4b17e3bcd49f96ea11"><div class="ttname"><a href="classAP__Mount.html#a415edaa4d8df1d4b17e3bcd49f96ea11">AP_Mount::send_mount_status</a></div><div class="ttdeci">void send_mount_status(mavlink_channel_t chan)</div><div class="ttdoc">Return mount status information.</div><div class="ttdef"><b>Definition:</b> <a href="AP__Mount_8cpp_source.html#l00629">AP_Mount.cpp:629</a></div></div>
<div class="ttc" id="classAP__HAL_1_1BetterStream_html_a915cc01273d4b418c2fb2989fb31a508"><div class="ttname"><a href="classAP__HAL_1_1BetterStream.html#a915cc01273d4b418c2fb2989fb31a508">AP_HAL::BetterStream::write</a></div><div class="ttdeci">virtual size_t write(uint8_t)=0</div></div>
<div class="ttc" id="AP__BoardConfig_8h_html"><div class="ttname"><a href="AP__BoardConfig_8h.html">AP_BoardConfig.h</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ab809e8b8607d06dc52632a31d03908b8"><div class="ttname"><a href="structGCS__MAVLINK.html#ab809e8b8607d06dc52632a31d03908b8">GCS_MAVLINK::send_rc_channels</a></div><div class="ttdeci">void send_rc_channels() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l01906">GCS_Common.cpp:1906</a></div></div>
<div class="ttc" id="structGCS_1_1statustext__t_html_afd8d53578385a9aae3a16cd89e3ebaed"><div class="ttname"><a href="structGCS_1_1statustext__t.html#afd8d53578385a9aae3a16cd89e3ebaed">GCS::statustext_t::bitmask</a></div><div class="ttdeci">uint8_t bitmask</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l01012">GCS.h:1012</a></div></div>
<div class="ttc" id="classAP__Frsky__Telem_html_aef21b9f33af863589feda48a23877380"><div class="ttname"><a href="classAP__Frsky__Telem.html#aef21b9f33af863589feda48a23877380">AP_Frsky_Telem::queue_message</a></div><div class="ttdeci">void queue_message(MAV_SEVERITY severity, const char *text)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Frsky__Telem_8cpp_source.html#l00486">AP_Frsky_Telem.cpp:486</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a348b56e82e0531e38631b87cdc6715c2"><div class="ttname"><a href="structGCS__MAVLINK.html#a348b56e82e0531e38631b87cdc6715c2">GCS_MAVLINK::landed_state</a></div><div class="ttdeci">virtual MAV_LANDED_STATE landed_state() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00519">GCS.h:519</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a6225be4d1ccb6d956f1919b062bf2e66"><div class="ttname"><a href="structGCS__MAVLINK.html#a6225be4d1ccb6d956f1919b062bf2e66">GCS_MAVLINK::get_ap_message_interval</a></div><div class="ttdeci">bool get_ap_message_interval(ap_message id, uint16_t &amp;interval_ms) const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02608">GCS_Common.cpp:2608</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a02ed33d056d9bdd44fcf806c810a2127"><div class="ttname"><a href="structGCS__MAVLINK.html#a02ed33d056d9bdd44fcf806c810a2127">GCS_MAVLINK::send_local_position</a></div><div class="ttdeci">void send_local_position() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02471">GCS_Common.cpp:2471</a></div></div>
<div class="ttc" id="classGCS_html_a1befacd5cf8990e0c0525063c8ebde8b"><div class="ttname"><a href="classGCS.html#a1befacd5cf8990e0c0525063c8ebde8b">GCS::_statustext_queue</a></div><div class="ttdeci">ObjectArray&lt; statustext_t &gt; _statustext_queue</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l01027">GCS.h:1027</a></div></div>
<div class="ttc" id="classAP__Avoidance_1_1Obstacle_html_abd8f09947f45d0ce330615176e15febb"><div class="ttname"><a href="classAP__Avoidance_1_1Obstacle.html#abd8f09947f45d0ce330615176e15febb">AP_Avoidance::Obstacle::time_to_closest_approach</a></div><div class="ttdeci">float time_to_closest_approach</div><div class="ttdef"><b>Definition:</b> <a href="AP__Avoidance_8h_source.html#l00057">AP_Avoidance.h:57</a></div></div>
<div class="ttc" id="namespaceAP__HAL_html_a77dffbb18891996280308e21316ec186"><div class="ttname"><a href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a></div><div class="ttdeci">uint32_t millis()</div><div class="ttdef"><b>Definition:</b> <a href="ChibiOS_2system_8cpp_source.html#l00157">system.cpp:157</a></div></div>
<div class="ttc" id="classCompass_html_a3bd8e59c633e5cb6d3935fcb604509fc"><div class="ttname"><a href="classCompass.html#a3bd8e59c633e5cb6d3935fcb604509fc">Compass::get_offsets</a></div><div class="ttdeci">const Vector3f &amp; get_offsets(uint8_t i) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00168">AP_Compass.h:168</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_adddef772ef98e96b764a2f173d792b32"><div class="ttname"><a href="structGCS__MAVLINK.html#adddef772ef98e96b764a2f173d792b32">GCS_MAVLINK::streams</a></div><div class="ttdeci">streams</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00358">GCS.h:358</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a47a95e0408b12f075a8ad043ac1ebcd4"><div class="ttname"><a href="structGCS__MAVLINK.html#a47a95e0408b12f075a8ad043ac1ebcd4">GCS_MAVLINK::global_position_int_relative_alt</a></div><div class="ttdeci">virtual int32_t global_position_int_relative_alt() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l04339">GCS_Common.cpp:4339</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a090c17fc4c5a599232b8a624e8d64d47"><div class="ttname"><a href="structGCS__MAVLINK.html#a090c17fc4c5a599232b8a624e8d64d47">GCS_MAVLINK::zero_rc_outputs</a></div><div class="ttdeci">void zero_rc_outputs()</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02790">GCS_Common.cpp:2790</a></div></div>
<div class="ttc" id="classAP__InertialSensor_html_a651c1448210f7fd30f09b9c1c4e0debc"><div class="ttname"><a href="classAP__InertialSensor.html#a651c1448210f7fd30f09b9c1c4e0debc">AP_InertialSensor::get_gyro_offsets</a></div><div class="ttdeci">const Vector3f &amp; get_gyro_offsets(uint8_t i) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__InertialSensor_8h_source.html#l00102">AP_InertialSensor.h:102</a></div></div>
<div class="ttc" id="classAP__Camera_html_a2ceac45cdd6c13d66052c8168fff689c"><div class="ttname"><a href="classAP__Camera.html#a2ceac45cdd6c13d66052c8168fff689c">AP_Camera::configure</a></div><div class="ttdeci">void configure(float shooting_mode, float shutter_speed, float aperture, float ISO, float exposure_type, float cmd_id, float engine_cutoff_time)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Camera_8cpp_source.html#l00209">AP_Camera.cpp:209</a></div></div>
<div class="ttc" id="classAP__AccelCal_html_a84bc8ae16571fc72c96dc89db26f94a5"><div class="ttname"><a href="classAP__AccelCal.html#a84bc8ae16571fc72c96dc89db26f94a5">AP_AccelCal::handleMessage</a></div><div class="ttdeci">void handleMessage(const mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="AP__AccelCal_8cpp_source.html#l00356">AP_AccelCal.cpp:356</a></div></div>
<div class="ttc" id="definitions_8h_html_a89e47af0449640d4f15191aba5ca24c6"><div class="ttname"><a href="definitions_8h.html#a89e47af0449640d4f15191aba5ca24c6">RAD_TO_DEG</a></div><div class="ttdeci">#define RAD_TO_DEG</div><div class="ttdef"><b>Definition:</b> <a href="definitions_8h_source.html#l00031">definitions.h:31</a></div></div>
<div class="ttc" id="classAP__Arming_html_a1760410b21c1e6183808a9f328d39007a2b45d810cc872a32caa6e524d97e1bc1"><div class="ttname"><a href="classAP__Arming.html#a1760410b21c1e6183808a9f328d39007a2b45d810cc872a32caa6e524d97e1bc1">AP_Arming::Method::MAVLINK</a></div></div>
<div class="ttc" id="classAP__Mount_html_ad8e2f48359bbe22f2e513b1845139366"><div class="ttname"><a href="classAP__Mount.html#ad8e2f48359bbe22f2e513b1845139366">AP_Mount::handle_message</a></div><div class="ttdeci">void handle_message(mavlink_channel_t chan, const mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Mount_8cpp_source.html#l00658">AP_Mount.cpp:658</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_adb754306f60222f433eaf1c9c6a0e7fd"><div class="ttname"><a href="structGCS__MAVLINK.html#adb754306f60222f433eaf1c9c6a0e7fd">GCS_MAVLINK::send_position_target_global_int</a></div><div class="ttdeci">virtual void send_position_target_global_int()</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00435">GCS.h:435</a></div></div>
<div class="ttc" id="structAP__Mission_1_1Mission__Command_html_a5afe16b2b1a93a0cf340a4199a9c6c3a"><div class="ttname"><a href="structAP__Mission_1_1Mission__Command.html#a5afe16b2b1a93a0cf340a4199a9c6c3a">AP_Mission::Mission_Command::index</a></div><div class="ttdeci">uint16_t index</div><div class="ttdef"><b>Definition:</b> <a href="AP__Mission_8h_source.html#l00265">AP_Mission.h:265</a></div></div>
<div class="ttc" id="classAP__Logger_html"><div class="ttname"><a href="classAP__Logger.html">AP_Logger</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__Logger_8h_source.html#l00169">AP_Logger.h:169</a></div></div>
<div class="ttc" id="classAP__HAL_1_1Util_html_a831bf144a4d14d413bd1c98b96dc35cb"><div class="ttname"><a href="classAP__HAL_1_1Util.html#a831bf144a4d14d413bd1c98b96dc35cb">AP_HAL::Util::perf_end</a></div><div class="ttdeci">virtual void perf_end(perf_counter_t h)</div><div class="ttdef"><b>Definition:</b> <a href="Util_8h_source.html#l00133">Util.h:133</a></div></div>
<div class="ttc" id="classAP__RPM_html"><div class="ttname"><a href="classAP__RPM.html">AP_RPM</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__RPM_8h_source.html#l00027">AP_RPM.h:27</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a271d9d2295f7d2eab79b8f23a7191542"><div class="ttname"><a href="structGCS__MAVLINK.html#a271d9d2295f7d2eab79b8f23a7191542">GCS_MAVLINK::mission_item_reached_index</a></div><div class="ttdeci">uint16_t mission_item_reached_index</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00392">GCS.h:392</a></div></div>
<div class="ttc" id="classAP__RangeFinder__Backend_html_acb4240a40844d61d3114b9f2a260754e"><div class="ttname"><a href="classAP__RangeFinder__Backend.html#acb4240a40844d61d3114b9f2a260754e">AP_RangeFinder_Backend::has_data</a></div><div class="ttdeci">bool has_data() const</div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder__Backend_8cpp_source.html#l00050">RangeFinder_Backend.cpp:50</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a19b41aa20ad8b57801f6554551e29b05"><div class="ttname"><a href="structGCS__MAVLINK.html#a19b41aa20ad8b57801f6554551e29b05">GCS_MAVLINK::handle_command_do_set_mode</a></div><div class="ttdeci">MAV_RESULT handle_command_do_set_mode(const mavlink_command_long_t &amp;packet)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l03788">GCS_Common.cpp:3788</a></div></div>
<div class="ttc" id="AP__Arming_8h_html"><div class="ttname"><a href="AP__Arming_8h.html">AP_Arming.h</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a2f1b229ecfdc51aeea284173f7ed6a61"><div class="ttname"><a href="structGCS__MAVLINK.html#a2f1b229ecfdc51aeea284173f7ed6a61">GCS_MAVLINK::vfr_hud_alt</a></div><div class="ttdeci">virtual float vfr_hud_alt() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02768">GCS_Common.cpp:2768</a></div></div>
<div class="ttc" id="classVector3_html_ab3e7f5401dd6e951978bfa746809f74f"><div class="ttname"><a href="classVector3.html#ab3e7f5401dd6e951978bfa746809f74f">Vector3::z</a></div><div class="ttdeci">T z</div><div class="ttdef"><b>Definition:</b> <a href="vector3_8h_source.html#l00067">vector3.h:67</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_1_1stream__entries_html_afdd583b4714280f482447b826c14ba83"><div class="ttname"><a href="structGCS__MAVLINK_1_1stream__entries.html#afdd583b4714280f482447b826c14ba83">GCS_MAVLINK::stream_entries::stream_id</a></div><div class="ttdeci">const streams stream_id</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00491">GCS.h:491</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a00013e2a14c47d88af2638763d82e7d3"><div class="ttname"><a href="structGCS__MAVLINK.html#a00013e2a14c47d88af2638763d82e7d3">GCS_MAVLINK::handle_common_mission_message</a></div><div class="ttdeci">void handle_common_mission_message(mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l03495">GCS_Common.cpp:3495</a></div></div>
<div class="ttc" id="classBitmask_html_ab753bfb6058f8a60e523c949802f3823"><div class="ttname"><a href="classBitmask.html#ab753bfb6058f8a60e523c949802f3823">Bitmask::clearall</a></div><div class="ttdeci">void clearall(void)</div><div class="ttdef"><b>Definition:</b> <a href="Bitmask_8h_source.html#l00073">Bitmask.h:73</a></div></div>
<div class="ttc" id="classMissionItemProtocol_html_af587be3c475064871f1a625cf3ec3587"><div class="ttname"><a href="classMissionItemProtocol.html#af587be3c475064871f1a625cf3ec3587">MissionItemProtocol::get_item</a></div><div class="ttdeci">virtual MAV_MISSION_RESULT get_item(const GCS_MAVLINK &amp;_link, const mavlink_message_t &amp;msg, const mavlink_mission_request_int_t &amp;packet, mavlink_mission_item_int_t &amp;ret_packet)=0</div></div>
<div class="ttc" id="namespaceAP__HAL_html_a7aa0ce7625c9680e30ff4a99940907a5"><div class="ttname"><a href="namespaceAP__HAL.html#a7aa0ce7625c9680e30ff4a99940907a5">AP_HAL::micros64</a></div><div class="ttdeci">uint64_t micros64()</div><div class="ttdef"><b>Definition:</b> <a href="ChibiOS_2system_8cpp_source.html#l00167">system.cpp:167</a></div></div>
<div class="ttc" id="classAP__HAL_1_1AnalogIn_html_aec5bbeb075072b2cc35d2301236c7f45"><div class="ttname"><a href="classAP__HAL_1_1AnalogIn.html#aec5bbeb075072b2cc35d2301236c7f45">AP_HAL::AnalogIn::servorail_voltage</a></div><div class="ttdeci">virtual float servorail_voltage(void)</div><div class="ttdef"><b>Definition:</b> <a href="AnalogIn_8h_source.html#l00049">AnalogIn.h:49</a></div></div>
<div class="ttc" id="classAP__Airspeed_html_afb7c91590b3efc00ee2d72cc6bcc856f"><div class="ttname"><a href="classAP__Airspeed.html#afb7c91590b3efc00ee2d72cc6bcc856f">AP_Airspeed::calibrate</a></div><div class="ttdeci">void calibrate(bool in_startup)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Airspeed_8cpp_source.html#l00317">AP_Airspeed.cpp:317</a></div></div>
<div class="ttc" id="classAP__Rally_html_af9320c7dfb7d74a430cc6b00962981ed"><div class="ttname"><a href="classAP__Rally.html#af9320c7dfb7d74a430cc6b00962981ed">AP_Rally::truncate</a></div><div class="ttdeci">void truncate(uint8_t num)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Rally_8cpp_source.html#l00081">AP_Rally.cpp:81</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a6dfd24fe06164421c8f0f936bc88f062"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a6dfd24fe06164421c8f0f936bc88f062">MSG_GPS_RTK</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00056">GCS.h:56</a></div></div>
<div class="ttc" id="location_8cpp_html_a8e3c1a8152caf33ff0ec0d96e4c79a96"><div class="ttname"><a href="location_8cpp.html#a8e3c1a8152caf33ff0ec0d96e4c79a96">check_latlng</a></div><div class="ttdeci">bool check_latlng(float lat, float lng)</div><div class="ttdef"><b>Definition:</b> <a href="location_8cpp_source.html#l00059">location.cpp:59</a></div></div>
<div class="ttc" id="structlog__MAV_html_ab7c98a381a23122c0e66cff97664f012"><div class="ttname"><a href="structlog__MAV.html#ab7c98a381a23122c0e66cff97664f012">log_MAV::packet_rx_drop_count</a></div><div class="ttdeci">uint16_t packet_rx_drop_count</div><div class="ttdef"><b>Definition:</b> <a href="LogStructure_8h_source.html#l00368">LogStructure.h:368</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a0f58691781024f0cf939e7538d99bff0"><div class="ttname"><a href="structGCS__MAVLINK.html#a0f58691781024f0cf939e7538d99bff0">GCS_MAVLINK::last_radio_status_remrssi_ms</a></div><div class="ttdeci">static uint32_t last_radio_status_remrssi_ms</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00389">GCS.h:389</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_aba66df4511a3307badb689d3768ba166"><div class="ttname"><a href="structGCS__MAVLINK.html#aba66df4511a3307badb689d3768ba166">GCS_MAVLINK::global_position_current_loc</a></div><div class="ttdeci">struct Location global_position_current_loc</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00892">GCS.h:892</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_aabad4b34ae619e84f2f10deb9ee1caca"><div class="ttname"><a href="structGCS__MAVLINK.html#aabad4b34ae619e84f2f10deb9ee1caca">GCS_MAVLINK::capabilities</a></div><div class="ttdeci">virtual uint64_t capabilities() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l04965">GCS_Common.cpp:4965</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a6a14481a31e91d7aa41f6da668fbd792"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a6a14481a31e91d7aa41f6da668fbd792">MSG_CURRENT_WAYPOINT</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00042">GCS.h:42</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ab18a4f9e78055494fc43c9665b6644a5"><div class="ttname"><a href="structGCS__MAVLINK.html#ab18a4f9e78055494fc43c9665b6644a5">GCS_MAVLINK::_handle_command_preflight_calibration_baro</a></div><div class="ttdeci">virtual MAV_RESULT _handle_command_preflight_calibration_baro()</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l03638">GCS_Common.cpp:3638</a></div></div>
<div class="ttc" id="classLocation_html_af494dabb88cd43e0d4efa99f04d31351adc2241348a103ecefcef66579c80336f"><div class="ttname"><a href="classLocation.html#af494dabb88cd43e0d4efa99f04d31351adc2241348a103ecefcef66579c80336f">Location::AltFrame::ABOVE_HOME</a></div></div>
<div class="ttc" id="classAP__FWVersion_html_a3c7cad0a5b22763d2df4e7dd67faad0f"><div class="ttname"><a href="classAP__FWVersion.html#a3c7cad0a5b22763d2df4e7dd67faad0f">AP_FWVersion::fw_hash_str</a></div><div class="ttdeci">const char * fw_hash_str</div><div class="ttdef"><b>Definition:</b> <a href="AP__FWVersion_8h_source.html#l00015">AP_FWVersion.h:15</a></div></div>
<div class="ttc" id="classAP__FWVersion_html"><div class="ttname"><a href="classAP__FWVersion.html">AP_FWVersion</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__FWVersion_8h_source.html#l00006">AP_FWVersion.h:6</a></div></div>
<div class="ttc" id="namespaceAP__HAL_html_a5a6ba28f61401b4abc39756468e9e2c9"><div class="ttname"><a href="namespaceAP__HAL.html#a5a6ba28f61401b4abc39756468e9e2c9">AP_HAL::millis16</a></div><div class="ttdeci">uint16_t millis16()</div><div class="ttdef"><b>Definition:</b> <a href="ChibiOS_2system_8cpp_source.html#l00162">system.cpp:162</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a03ff2b05cc97e31acf23019c00752388"><div class="ttname"><a href="structGCS__MAVLINK.html#a03ff2b05cc97e31acf23019c00752388">GCS_MAVLINK::handle_rc_bind</a></div><div class="ttdeci">MAV_RESULT handle_rc_bind(const mavlink_command_long_t &amp;packet)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02883">GCS_Common.cpp:2883</a></div></div>
<div class="ttc" id="AP__InertialSensor__BMI088_8cpp_html_a638e4503e0ae6ce655b7ad2e17e8f0ad"><div class="ttname"><a href="AP__InertialSensor__BMI088_8cpp.html#a638e4503e0ae6ce655b7ad2e17e8f0ad">value</a></div><div class="ttdeci">uint8_t value</div><div class="ttdef"><b>Definition:</b> <a href="AP__InertialSensor__BMI088_8cpp_source.html#l00150">AP_InertialSensor_BMI088.cpp:150</a></div></div>
<div class="ttc" id="classAP__Mission_html_ac79a188f81816b3ddfe045b6a0feb6d1"><div class="ttname"><a href="classAP__Mission.html#ac79a188f81816b3ddfe045b6a0feb6d1">AP_Mission::set_current_cmd</a></div><div class="ttdeci">bool set_current_cmd(uint16_t index)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Mission_8cpp_source.html#l00391">AP_Mission.cpp:391</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a731179362dc1cb1bbd2fd77eec523d8b"><div class="ttname"><a href="structGCS__MAVLINK.html#a731179362dc1cb1bbd2fd77eec523d8b">GCS_MAVLINK::send_power_status</a></div><div class="ttdeci">void send_power_status(void)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00263">GCS_Common.cpp:263</a></div></div>
<div class="ttc" id="classAP__HAL_1_1UARTDriver_html_ae831a0d75f4760267d444c522e1271a1"><div class="ttname"><a href="classAP__HAL_1_1UARTDriver.html#ae831a0d75f4760267d444c522e1271a1">AP_HAL::UARTDriver::set_flow_control</a></div><div class="ttdeci">virtual void set_flow_control(enum flow_control flow_control_setting)</div><div class="ttdef"><b>Definition:</b> <a href="UARTDriver_8h_source.html#l00064">UARTDriver.h:64</a></div></div>
<div class="ttc" id="classAP__AHRS__NavEKF_html_a5b5c5de012442fd1c6c2f66b5148d313"><div class="ttname"><a href="classAP__AHRS__NavEKF.html#a5b5c5de012442fd1c6c2f66b5148d313">AP_AHRS_NavEKF::get_position</a></div><div class="ttdeci">bool get_position(struct Location &amp;loc) const override</div><div class="ttdef"><b>Definition:</b> <a href="AP__AHRS__NavEKF_8cpp_source.html#l00413">AP_AHRS_NavEKF.cpp:413</a></div></div>
<div class="ttc" id="classAP__InertialSensor_html_a44b3909c69cbf40dc18fd383e4232cb7"><div class="ttname"><a href="classAP__InertialSensor.html#a44b3909c69cbf40dc18fd383e4232cb7">AP_InertialSensor::get_accel_clip_count</a></div><div class="ttdeci">uint32_t get_accel_clip_count(uint8_t instance) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__InertialSensor_8cpp_source.html#l00923">AP_InertialSensor.cpp:923</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ae9efd2f3c6bcfaa8055c75b30428d132"><div class="ttname"><a href="structGCS__MAVLINK.html#ae9efd2f3c6bcfaa8055c75b30428d132">GCS_MAVLINK::handle_data_packet</a></div><div class="ttdeci">void handle_data_packet(mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l03110">GCS_Common.cpp:3110</a></div></div>
<div class="ttc" id="classAP__BattMonitor_html_a280ff28558f03d85c6090321287bdd77"><div class="ttname"><a href="classAP__BattMonitor.html#a280ff28558f03d85c6090321287bdd77">AP_BattMonitor::current_amps</a></div><div class="ttdeci">float current_amps(uint8_t instance) const</div><div class="ttdoc">current_amps - returns the instantaneous current draw in amperes</div><div class="ttdef"><b>Definition:</b> <a href="AP__BattMonitor_8cpp_source.html#l00305">AP_BattMonitor.cpp:305</a></div></div>
<div class="ttc" id="classAP__FWVersion_html_a087a76e42563c0b848490e6119033d1c"><div class="ttname"><a href="classAP__FWVersion.html#a087a76e42563c0b848490e6119033d1c">AP_FWVersion::middleware_hash_str</a></div><div class="ttdeci">const char * middleware_hash_str</div><div class="ttdef"><b>Definition:</b> <a href="AP__FWVersion_8h_source.html#l00017">AP_FWVersion.h:17</a></div></div>
<div class="ttc" id="classAP__RSSI_html"><div class="ttname"><a href="classAP__RSSI.html">AP_RSSI</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__RSSI_8h_source.html#l00021">AP_RSSI.h:21</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_af4e400a4a17773e5a8bbae3993911bf8"><div class="ttname"><a href="structGCS__MAVLINK.html#af4e400a4a17773e5a8bbae3993911bf8">GCS_MAVLINK::send_meminfo</a></div><div class="ttdeci">void send_meminfo(void)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00255">GCS_Common.cpp:255</a></div></div>
<div class="ttc" id="classAP__HAL_1_1Util_html_a6772b40dba50acc0e81803c33f5b5860"><div class="ttname"><a href="classAP__HAL_1_1Util.html#a6772b40dba50acc0e81803c33f5b5860">AP_HAL::Util::get_system_id</a></div><div class="ttdeci">virtual bool get_system_id(char buf[40])</div><div class="ttdef"><b>Definition:</b> <a href="Util_8h_source.html#l00097">Util.h:97</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a1e7a2c19e16925a80c620505bd2a52f6"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a1e7a2c19e16925a80c620505bd2a52f6">MSG_HWSTATUS</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00069">GCS.h:69</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a55d154ed0cc60fbe500079649e71507c"><div class="ttname"><a href="structGCS__MAVLINK.html#a55d154ed0cc60fbe500079649e71507c">GCS_MAVLINK::log_vision_position_estimate_data</a></div><div class="ttdeci">void log_vision_position_estimate_data(const uint64_t usec, const float x, const float y, const float z, const float roll, const float pitch, const float yaw)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l03208">GCS_Common.cpp:3208</a></div></div>
<div class="ttc" id="classMissionItemProtocol_html_a6f29a676bf0839e2e8387c8e0baf40af"><div class="ttname"><a href="classMissionItemProtocol.html#a6f29a676bf0839e2e8387c8e0baf40af">MissionItemProtocol::next_item_ap_message_id</a></div><div class="ttdeci">virtual ap_message next_item_ap_message_id() const =0</div></div>
<div class="ttc" id="classAP__HAL_1_1RCOutput_html_a6852e3aa22747f045dc71972e97d7de6"><div class="ttname"><a href="classAP__HAL_1_1RCOutput.html#a6852e3aa22747f045dc71972e97d7de6">AP_HAL::RCOutput::force_safety_on</a></div><div class="ttdeci">virtual bool force_safety_on(void)</div><div class="ttdef"><b>Definition:</b> <a href="RCOutput_8h_source.html#l00100">RCOutput.h:100</a></div></div>
<div class="ttc" id="classGCS_html_a9866f3484283db744409e40719cef765"><div class="ttname"><a href="classGCS.html#a9866f3484283db744409e40719cef765">GCS::send_text</a></div><div class="ttdeci">void send_text(MAV_SEVERITY severity, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8cpp_source.html#l00040">GCS.cpp:40</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_aee84d7757e12e04e2a10466f4a7cdfd9"><div class="ttname"><a href="structGCS__MAVLINK.html#aee84d7757e12e04e2a10466f4a7cdfd9">GCS_MAVLINK::send_set_position_target_global_int</a></div><div class="ttdeci">void send_set_position_target_global_int(uint8_t target_system, uint8_t target_component, const Location &amp;loc)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l04387">GCS_Common.cpp:4387</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a8f3d2fd6bb03efc6d955a7304d8d541a"><div class="ttname"><a href="structGCS__MAVLINK.html#a8f3d2fd6bb03efc6d955a7304d8d541a">GCS_MAVLINK::handle_rc_channels_override</a></div><div class="ttdeci">virtual void handle_rc_channels_override(const mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l03274">GCS_Common.cpp:3274</a></div></div>
<div class="ttc" id="classRC__Channels_html_ac9cb57e508c9407c1e274cb4367b1ab5"><div class="ttname"><a href="classRC__Channels.html#ac9cb57e508c9407c1e274cb4367b1ab5">RC_Channels::get_radio_in</a></div><div class="ttdeci">static uint16_t get_radio_in(const uint8_t chan)</div><div class="ttdef"><b>Definition:</b> <a href="RC__Channel_8h_source.html#l00296">RC_Channel.h:296</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a2de5c17edcd69201f39b10feec9acbf2"><div class="ttname"><a href="structGCS__MAVLINK.html#a2de5c17edcd69201f39b10feec9acbf2">GCS_MAVLINK::handle_command_int_packet</a></div><div class="ttdeci">virtual MAV_RESULT handle_command_int_packet(const mavlink_command_int_t &amp;packet)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l04151">GCS_Common.cpp:4151</a></div></div>
<div class="ttc" id="classAP__Baro_html_a41b3c00624c78b883413b53fc5a81a32"><div class="ttname"><a href="classAP__Baro.html#a41b3c00624c78b883413b53fc5a81a32">AP_Baro::get_pressure</a></div><div class="ttdeci">float get_pressure(void) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__Baro_8h_source.html#l00059">AP_Baro.h:59</a></div></div>
<div class="ttc" id="classAP__HAL_1_1BetterStream_html_a65082ecb994170fc6d2a7ff2bcc301a7"><div class="ttname"><a href="classAP__HAL_1_1BetterStream.html#a65082ecb994170fc6d2a7ff2bcc301a7">AP_HAL::BetterStream::read</a></div><div class="ttdeci">virtual int16_t read()=0</div></div>
<div class="ttc" id="classSITL_1_1SITL_html_af31d1e43d9db3382853bda2b6f1c9e08"><div class="ttname"><a href="classSITL_1_1SITL.html#af31d1e43d9db3382853bda2b6f1c9e08">SITL::SITL::simstate_send</a></div><div class="ttdeci">void simstate_send(mavlink_channel_t chan)</div><div class="ttdef"><b>Definition:</b> <a href="SITL_8cpp_source.html#l00177">SITL.cpp:177</a></div></div>
<div class="ttc" id="classAP__Camera_html_a83895a822a9b5b5c74e62d801013ccd7"><div class="ttname"><a href="classAP__Camera.html#a83895a822a9b5b5c74e62d801013ccd7">AP_Camera::send_feedback</a></div><div class="ttdeci">void send_feedback(mavlink_channel_t chan)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Camera_8cpp_source.html#l00286">AP_Camera.cpp:286</a></div></div>
<div class="ttc" id="classAP__Avoidance_1_1Obstacle_html_aa67d9528c916fd4e828672acf8314a35"><div class="ttname"><a href="classAP__Avoidance_1_1Obstacle.html#aa67d9528c916fd4e828672acf8314a35">AP_Avoidance::Obstacle::src_id</a></div><div class="ttdeci">uint32_t src_id</div><div class="ttdef"><b>Definition:</b> <a href="AP__Avoidance_8h_source.html#l00047">AP_Avoidance.h:47</a></div></div>
<div class="ttc" id="AP__Common_8h_html_acaddc9a4164b70ff0b43ba64b3a6bd40"><div class="ttname"><a href="AP__Common_8h.html#acaddc9a4164b70ff0b43ba64b3a6bd40">UNUSED_RESULT</a></div><div class="ttdeci">#define UNUSED_RESULT(expr_)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Common_8h_source.html#l00105">AP_Common.h:105</a></div></div>
<div class="ttc" id="classOpticalFlow_html_ab48c5f0db4e8cadecf65c79ff07d3bd2"><div class="ttname"><a href="classOpticalFlow.html#ab48c5f0db4e8cadecf65c79ff07d3bd2">OpticalFlow::bodyRate</a></div><div class="ttdeci">const Vector2f &amp; bodyRate() const</div><div class="ttdef"><b>Definition:</b> <a href="AP__OpticalFlow_2OpticalFlow_8h_source.html#l00078">OpticalFlow.h:78</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_af8c46f04ef8c384de8d23c3651c1eef1"><div class="ttname"><a href="structGCS__MAVLINK.html#af8c46f04ef8c384de8d23c3651c1eef1">GCS_MAVLINK::handle_command_do_set_roi</a></div><div class="ttdeci">MAV_RESULT handle_command_do_set_roi(const mavlink_command_int_t &amp;packet)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l04114">GCS_Common.cpp:4114</a></div></div>
<div class="ttc" id="AHRS__Test_8cpp_html_a58b8e143b1d5e3b2c1048c94ffa16ee2"><div class="ttname"><a href="AHRS__Test_8cpp.html#a58b8e143b1d5e3b2c1048c94ffa16ee2">compass</a></div><div class="ttdeci">static Compass compass</div><div class="ttdef"><b>Definition:</b> <a href="AHRS__Test_8cpp_source.html#l00023">AHRS_Test.cpp:23</a></div></div>
<div class="ttc" id="AP__GPS_8h_html"><div class="ttname"><a href="AP__GPS_8h.html">AP_GPS.h</a></div></div>
<div class="ttc" id="namespaceAP_html_ad5986df034b9156395fea23c11cb2210"><div class="ttname"><a href="namespaceAP.html#ad5986df034b9156395fea23c11cb2210">AP::rpm</a></div><div class="ttdeci">AP_RPM * rpm()</div><div class="ttdef"><b>Definition:</b> <a href="AP__RPM_8cpp_source.html#l00187">AP_RPM.cpp:187</a></div></div>
<div class="ttc" id="classGCS_html_aef0051fb119f32631310ac40f6e11ddf"><div class="ttname"><a href="classGCS.html#aef0051fb119f32631310ac40f6e11ddf">GCS::enabled</a></div><div class="ttdeci">bool enabled</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l01034">GCS.h:1034</a></div></div>
<div class="ttc" id="AP__Common_8h_html_a121caf32c5b5d704ef3453f0885a9ea5"><div class="ttname"><a href="AP__Common_8h.html#a121caf32c5b5d704ef3453f0885a9ea5">ARRAY_SIZE</a></div><div class="ttdeci">#define ARRAY_SIZE(_arr)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Common_8h_source.html#l00082">AP_Common.h:82</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a1a4eddd46f85698c5200084589fd302d"><div class="ttname"><a href="structGCS__MAVLINK.html#a1a4eddd46f85698c5200084589fd302d">GCS_MAVLINK::handle_serial_control</a></div><div class="ttdeci">void handle_serial_control(const mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__serial__control_8cpp_source.html#l00031">GCS_serial_control.cpp:31</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_abce184e0c95af7aa285ce28d050fe792"><div class="ttname"><a href="structGCS__MAVLINK.html#abce184e0c95af7aa285ce28d050fe792">GCS_MAVLINK::stream_slowdown_ms</a></div><div class="ttdeci">uint16_t stream_slowdown_ms</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00707">GCS.h:707</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a153ea3cf1e1e1d0e8d8d8753d3915091"><div class="ttname"><a href="structGCS__MAVLINK.html#a153ea3cf1e1e1d0e8d8d8753d3915091">GCS_MAVLINK::vfr_hud_throttle</a></div><div class="ttdeci">virtual int16_t vfr_hud_throttle() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00656">GCS.h:656</a></div></div>
<div class="ttc" id="classMissionItemProtocol_html_a80ae9862a352375154b98922c8c64bd5"><div class="ttname"><a href="classMissionItemProtocol.html#a80ae9862a352375154b98922c8c64bd5">MissionItemProtocol::receiving</a></div><div class="ttdeci">bool receiving</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00164">GCS.h:164</a></div></div>
<div class="ttc" id="classAP__AHRS_html_ab45359e5c71751e421577e6a2d85625e"><div class="ttname"><a href="classAP__AHRS.html#ab45359e5c71751e421577e6a2d85625e">AP_AHRS::set_trim</a></div><div class="ttdeci">void set_trim(const Vector3f &amp;new_trim)</div><div class="ttdef"><b>Definition:</b> <a href="AP__AHRS_8cpp_source.html#l00203">AP_AHRS.cpp:203</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991aca4b6be3d7289e59f079ff0a82963fe0"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991aca4b6be3d7289e59f079ff0a82963fe0">MSG_EKF_STATUS_REPORT</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00081">GCS.h:81</a></div></div>
<div class="ttc" id="ToshibaLED__test_8cpp_html_a1e113a9d02dfe1bd93e9190d10c45cad"><div class="ttname"><a href="ToshibaLED__test_8cpp.html#a1e113a9d02dfe1bd93e9190d10c45cad">notify</a></div><div class="ttdeci">AP_Notify notify</div><div class="ttdef"><b>Definition:</b> <a href="ToshibaLED__test_8cpp_source.html#l00012">ToshibaLED_test.cpp:12</a></div></div>
<div class="ttc" id="AP__BLHeli_8h_html"><div class="ttname"><a href="AP__BLHeli_8h.html">AP_BLHeli.h</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a508b2da2af9a77f175c60cac467cec70"><div class="ttname"><a href="structGCS__MAVLINK.html#a508b2da2af9a77f175c60cac467cec70">GCS_MAVLINK::queued_param_send</a></div><div class="ttdeci">void queued_param_send()</div><div class="ttdoc">Send the next pending parameter, called from deferred message handling code.</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Param_8cpp_source.html#l00037">GCS_Param.cpp:37</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a709ce1a4676bcc73b7668ebe3ce1266b"><div class="ttname"><a href="structGCS__MAVLINK.html#a709ce1a4676bcc73b7668ebe3ce1266b">GCS_MAVLINK::no_bucket_to_send</a></div><div class="ttdeci">static const uint8_t no_bucket_to_send</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00743">GCS.h:743</a></div></div>
<div class="ttc" id="classMissionItemProtocol__Waypoints_html_ac55fa04b8a2cbcd80c0a67c90033f9f9"><div class="ttname"><a href="classMissionItemProtocol__Waypoints.html#ac55fa04b8a2cbcd80c0a67c90033f9f9">MissionItemProtocol_Waypoints::clear_all_items</a></div><div class="ttdeci">bool clear_all_items() override WARN_IF_UNUSED</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00815">GCS_Common.cpp:815</a></div></div>
<div class="ttc" id="structAP__BattMonitor_1_1cells_html"><div class="ttname"><a href="structAP__BattMonitor_1_1cells.html">AP_BattMonitor::cells</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__BattMonitor_8h_source.html#l00062">AP_BattMonitor.h:62</a></div></div>
<div class="ttc" id="classAP__InertialSensor_html_abde1abead9e4ff8875808e49ad6e551f"><div class="ttname"><a href="classAP__InertialSensor.html#abde1abead9e4ff8875808e49ad6e551f">AP_InertialSensor::simple_accel_cal</a></div><div class="ttdeci">MAV_RESULT simple_accel_cal()</div><div class="ttdef"><b>Definition:</b> <a href="AP__InertialSensor_8cpp_source.html#l01878">AP_InertialSensor.cpp:1878</a></div></div>
<div class="ttc" id="classAP__Notify_html_a8aecf8b30f7963e09c569d42f6fe89e2"><div class="ttname"><a href="classAP__Notify.html#a8aecf8b30f7963e09c569d42f6fe89e2">AP_Notify::handle_play_tune</a></div><div class="ttdeci">static void handle_play_tune(mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Notify_8cpp_source.html#l00344">AP_Notify.cpp:344</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991ae9a7c633e107e9cea381665f0c0a93d5"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991ae9a7c633e107e9cea381665f0c0a93d5">MSG_FENCE_STATUS</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00064">GCS.h:64</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_1_1deferred__message__bucket__t_html_ab9e7ae8495102a2d21a67ada970d0b0d"><div class="ttname"><a href="structGCS__MAVLINK_1_1deferred__message__bucket__t.html#ab9e7ae8495102a2d21a67ada970d0b0d">GCS_MAVLINK::deferred_message_bucket_t::interval_ms</a></div><div class="ttdeci">uint16_t interval_ms</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00739">GCS.h:739</a></div></div>
<div class="ttc" id="classAP__Airspeed_html_ae49f4cf8da709c27d7a713eaa7f1eefa"><div class="ttname"><a href="classAP__Airspeed.html#ae49f4cf8da709c27d7a713eaa7f1eefa">AP_Airspeed::get_differential_pressure</a></div><div class="ttdeci">float get_differential_pressure(uint8_t i) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__Airspeed_8h_source.html#l00099">AP_Airspeed.h:99</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a2fe9f2a656864441f72ad43382ec28e7"><div class="ttname"><a href="structGCS__MAVLINK.html#a2fe9f2a656864441f72ad43382ec28e7">GCS_MAVLINK::is_private</a></div><div class="ttdeci">bool is_private(void) const</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00462">GCS.h:462</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a8e9655385616fad0e7000838554e517a"><div class="ttname"><a href="structGCS__MAVLINK.html#a8e9655385616fad0e7000838554e517a">GCS_MAVLINK::send_simstate</a></div><div class="ttdeci">virtual void send_simstate() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l03584">GCS_Common.cpp:3584</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991ac4581ddf59eacccb739fe968d8ccdeb1"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991ac4581ddf59eacccb739fe968d8ccdeb1">MSG_RAW_IMU</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00047">GCS.h:47</a></div></div>
<div class="ttc" id="classMissionItemProtocol__Waypoints_html"><div class="ttname"><a href="classMissionItemProtocol__Waypoints.html">MissionItemProtocol_Waypoints</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00218">GCS.h:218</a></div></div>
<div class="ttc" id="classAP__Proximity_html_a9a5196c465fcce6e3a0c38b77b2f4d28"><div class="ttname"><a href="classAP__Proximity.html#a9a5196c465fcce6e3a0c38b77b2f4d28">AP_Proximity::get_singleton</a></div><div class="ttdeci">static AP_Proximity * get_singleton(void)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Proximity_8h_source.html#l00152">AP_Proximity.h:152</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_af2b3c835201e0ceef2479f320721e1a2"><div class="ttname"><a href="structGCS__MAVLINK.html#af2b3c835201e0ceef2479f320721e1a2">GCS_MAVLINK::send_named_float</a></div><div class="ttdeci">void send_named_float(const char *name, float value) const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02513">GCS_Common.cpp:2513</a></div></div>
<div class="ttc" id="classMissionItemProtocol__Waypoints_html_aba26f751829c91dd7c6f0eeaa67ee437"><div class="ttname"><a href="classMissionItemProtocol__Waypoints.html#aba26f751829c91dd7c6f0eeaa67ee437">MissionItemProtocol_Waypoints::complete</a></div><div class="ttdeci">void complete(const GCS_MAVLINK &amp;_link) override</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l01063">GCS_Common.cpp:1063</a></div></div>
<div class="ttc" id="AP__AHRS_8h_html"><div class="ttname"><a href="AP__AHRS_8h.html">AP_AHRS.h</a></div></div>
<div class="ttc" id="namespaceAP_html_aac3bcb68bcccad29cc493b878aef055e"><div class="ttname"><a href="namespaceAP.html#aac3bcb68bcccad29cc493b878aef055e">AP::battery</a></div><div class="ttdeci">AP_BattMonitor &amp; battery()</div><div class="ttdef"><b>Definition:</b> <a href="AP__BattMonitor_8cpp_source.html#l00526">AP_BattMonitor.cpp:526</a></div></div>
<div class="ttc" id="AP__Vehicle_8h_html"><div class="ttname"><a href="AP__Vehicle_8h.html">AP_Vehicle.h</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ab1a181db52459069be4b570f2cdd83c7"><div class="ttname"><a href="structGCS__MAVLINK.html#ab1a181db52459069be4b570f2cdd83c7">GCS_MAVLINK::send_mount_status</a></div><div class="ttdeci">void send_mount_status() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l04378">GCS_Common.cpp:4378</a></div></div>
<div class="ttc" id="classAP__FWVersion_html_aa6406b7e3a5807f5288a59e588b1ee3a"><div class="ttname"><a href="classAP__FWVersion.html#aa6406b7e3a5807f5288a59e588b1ee3a">AP_FWVersion::minor</a></div><div class="ttdeci">uint8_t minor</div><div class="ttdef"><b>Definition:</b> <a href="AP__FWVersion_8h_source.html#l00011">AP_FWVersion.h:11</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a7da5040cb1f3aa7345502156ec6852b4"><div class="ttname"><a href="structGCS__MAVLINK.html#a7da5040cb1f3aa7345502156ec6852b4">GCS_MAVLINK::send_pid_tuning</a></div><div class="ttdeci">virtual void send_pid_tuning()=0</div></div>
<div class="ttc" id="classGCS_html_ab62d515a8882b21f2e7d4da2c9172f06"><div class="ttname"><a href="classGCS.html#ab62d515a8882b21f2e7d4da2c9172f06">GCS::_missionitemprotocol_rally</a></div><div class="ttdeci">static MissionItemProtocol_Rally * _missionitemprotocol_rally</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00961">GCS.h:961</a></div></div>
<div class="ttc" id="classGCS_html_a0dac7247d56a541ab5d7c499db414821"><div class="ttname"><a href="classGCS.html#a0dac7247d56a541ab5d7c499db414821">GCS::_statustext_sem</a></div><div class="ttdeci">HAL_Semaphore _statustext_sem</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l01024">GCS.h:1024</a></div></div>
<div class="ttc" id="classBitmask_html_a55ccc426e20a9bf4d5e9fc7a593985e8"><div class="ttname"><a href="classBitmask.html#a55ccc426e20a9bf4d5e9fc7a593985e8">Bitmask::clear</a></div><div class="ttdeci">void clear(uint16_t bit)</div><div class="ttdef"><b>Definition:</b> <a href="Bitmask_8h_source.html#l00066">Bitmask.h:66</a></div></div>
<div class="ttc" id="classAP__Airspeed_html_a6bfb2eababf55852b35bdff810ca86d1"><div class="ttname"><a href="classAP__Airspeed.html#a6bfb2eababf55852b35bdff810ca86d1">AP_Airspeed::get_singleton</a></div><div class="ttdeci">static AP_Airspeed * get_singleton()</div><div class="ttdef"><b>Definition:</b> <a href="AP__Airspeed_8h_source.html#l00150">AP_Airspeed.h:150</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_af8df6e1b26c07af92493cb8e4761824f"><div class="ttname"><a href="structGCS__MAVLINK.html#af8df6e1b26c07af92493cb8e4761824f">GCS_MAVLINK::get_stream_slowdown_ms</a></div><div class="ttdeci">uint8_t get_stream_slowdown_ms() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00499">GCS.h:499</a></div></div>
<div class="ttc" id="classMissionItemProtocol_html_a4985b68aa93fa710429ad8ec9dde1984"><div class="ttname"><a href="classMissionItemProtocol.html#a4985b68aa93fa710429ad8ec9dde1984">MissionItemProtocol::dest_sysid</a></div><div class="ttdeci">uint8_t dest_sysid</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00185">GCS.h:185</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991ad6d3d1976c7c297320d0a22fb827017a"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991ad6d3d1976c7c297320d0a22fb827017a">MSG_SYS_STATUS</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00038">GCS.h:38</a></div></div>
<div class="ttc" id="LogStructure_8h_html_ab36c838093e3699b68977ecfff272bc8a5f73dc8b4696c3114bbc7015b24103fd"><div class="ttname"><a href="LogStructure_8h.html#ab36c838093e3699b68977ecfff272bc8a5f73dc8b4696c3114bbc7015b24103fd">ekf_origin</a></div><div class="ttdef"><b>Definition:</b> <a href="LogStructure_8h_source.html#l01706">LogStructure.h:1706</a></div></div>
<div class="ttc" id="classAP__Proximity_html_acd6596edd8f65dea41aa89730343f9a3"><div class="ttname"><a href="classAP__Proximity.html#acd6596edd8f65dea41aa89730343f9a3">AP_Proximity::get_horizontal_distances</a></div><div class="ttdeci">bool get_horizontal_distances(Proximity_Distance_Array &amp;prx_dist_array) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__Proximity_8cpp_source.html#l00356">AP_Proximity.cpp:356</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a1d5ca2d41c5912a2b2d745603598e06b"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a1d5ca2d41c5912a2b2d745603598e06b">MSG_NEXT_PARAM</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00063">GCS.h:63</a></div></div>
<div class="ttc" id="classMissionItemProtocol_html_a5755d38a2d4438d7b3f108dc4aea3aeb"><div class="ttname"><a href="classMissionItemProtocol.html#a5755d38a2d4438d7b3f108dc4aea3aeb">MissionItemProtocol::handle_mission_write_partial_list</a></div><div class="ttdeci">void handle_mission_write_partial_list(GCS_MAVLINK &amp;link, const mavlink_message_t &amp;msg, const mavlink_mission_write_partial_list_t &amp;packet)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00860">GCS_Common.cpp:860</a></div></div>
<div class="ttc" id="classAP__Logger_html_a7dfeda4dc3df2edc8531110c9d7252dc"><div class="ttname"><a href="classAP__Logger.html#a7dfeda4dc3df2edc8531110c9d7252dc">AP_Logger::get_singleton</a></div><div class="ttdeci">static AP_Logger * get_singleton(void)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Logger_8h_source.html#l00183">AP_Logger.h:183</a></div></div>
<div class="ttc" id="classMissionItemProtocol_html_a9f034118a8749c649fcf3c9aec0c75a9"><div class="ttname"><a href="classMissionItemProtocol.html#a9f034118a8749c649fcf3c9aec0c75a9">MissionItemProtocol::handle_mission_count</a></div><div class="ttdeci">void handle_mission_count(class GCS_MAVLINK &amp;link, const mavlink_mission_count_t &amp;packet, const mavlink_message_t &amp;msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00756">GCS_Common.cpp:756</a></div></div>
<div class="ttc" id="classAP__DEVO__Telem_html_a718089a830a3916942d5399e039ad4f1"><div class="ttname"><a href="classAP__DEVO__Telem.html#a718089a830a3916942d5399e039ad4f1">AP_DEVO_Telem::init</a></div><div class="ttdeci">void init()</div><div class="ttdef"><b>Definition:</b> <a href="AP__Devo__Telem_8cpp_source.html#l00036">AP_Devo_Telem.cpp:36</a></div></div>
<div class="ttc" id="classAP__ToshibaCAN_html"><div class="ttname"><a href="classAP__ToshibaCAN.html">AP_ToshibaCAN</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__ToshibaCAN_8h_source.html#l00023">AP_ToshibaCAN.h:23</a></div></div>
<div class="ttc" id="classCompass_html_aab02220a8209d664f89f2be9050cf283"><div class="ttname"><a href="classCompass.html#aab02220a8209d664f89f2be9050cf283">Compass::get_count</a></div><div class="ttdeci">uint8_t get_count(void) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass_8h_source.html#l00118">AP_Compass.h:118</a></div></div>
<div class="ttc" id="AP__Common_8h_html"><div class="ttname"><a href="AP__Common_8h.html">AP_Common.h</a></div><div class="ttdoc">Common definitions and utility routines for the ArduPilot libraries.</div></div>
<div class="ttc" id="structAP__Proximity_1_1Proximity__Distance__Array_html_a29f5e1a33b9b07dadf963f320091ca22"><div class="ttname"><a href="structAP__Proximity_1_1Proximity__Distance__Array.html#a29f5e1a33b9b07dadf963f320091ca22">AP_Proximity::Proximity_Distance_Array::orientation</a></div><div class="ttdeci">uint8_t orientation[PROXIMITY_MAX_DIRECTION]</div><div class="ttdef"><b>Definition:</b> <a href="AP__Proximity_8h_source.html#l00064">AP_Proximity.h:64</a></div></div>
<div class="ttc" id="GCS_8h_html_a9f9bd054f58892da86c64ad06c6b2179"><div class="ttname"><a href="GCS_8h.html#a9f9bd054f58892da86c64ad06c6b2179">PAYLOAD_SIZE</a></div><div class="ttdeci">#define PAYLOAD_SIZE(chan, id)</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00024">GCS.h:24</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a817773171d33c6e3c664d8f408d3e2fa"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a817773171d33c6e3c664d8f408d3e2fa">MSG_SERVO_OUTPUT_RAW</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00044">GCS.h:44</a></div></div>
<div class="ttc" id="classLocation_html_a5831f0aca9e51a15adb96fad465f72f8"><div class="ttname"><a href="classLocation.html#a5831f0aca9e51a15adb96fad465f72f8">Location::lng</a></div><div class="ttdeci">int32_t lng</div><div class="ttdef"><b>Definition:</b> <a href="Location_8h_source.html#l00022">Location.h:22</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a465cc8bb7530784d28105720cdd90786"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a465cc8bb7530784d28105720cdd90786">MSG_VIBRATION</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00084">GCS.h:84</a></div></div>
<div class="ttc" id="classAP__HAL_1_1Scheduler_html_ac2c4230957d5dbd3c2fd104af2794b4f"><div class="ttname"><a href="classAP__HAL_1_1Scheduler.html#ac2c4230957d5dbd3c2fd104af2794b4f">AP_HAL::Scheduler::register_timer_process</a></div><div class="ttdeci">virtual void register_timer_process(AP_HAL::MemberProc)=0</div></div>
<div class="ttc" id="Airspeed_8cpp_html_abfed87a61c42e885ee14d5222b47583f"><div class="ttname"><a href="Airspeed_8cpp.html#abfed87a61c42e885ee14d5222b47583f">airspeed</a></div><div class="ttdeci">AP_Airspeed airspeed</div><div class="ttdef"><b>Definition:</b> <a href="Airspeed_8cpp_source.html#l00034">Airspeed.cpp:34</a></div></div>
<div class="ttc" id="classMissionItemProtocol_html_ae3c5ae2eab1f1bb8832379f6c9e67700"><div class="ttname"><a href="classMissionItemProtocol.html#ae3c5ae2eab1f1bb8832379f6c9e67700">MissionItemProtocol::convert_MISSION_REQUEST_to_MISSION_REQUEST_INT</a></div><div class="ttdeci">void convert_MISSION_REQUEST_to_MISSION_REQUEST_INT(const mavlink_mission_request_t &amp;request, mavlink_mission_request_int_t &amp;request_int)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00659">GCS_Common.cpp:659</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a4759d8aac0540ff1bb3bff473f9a91f2"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a4759d8aac0540ff1bb3bff473f9a91f2">MSG_POWER_STATUS</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00039">GCS.h:39</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a76abb6bc896aa981fc4cefb99251f131"><div class="ttname"><a href="structGCS__MAVLINK.html#a76abb6bc896aa981fc4cefb99251f131">GCS_MAVLINK::sending_bucket_id</a></div><div class="ttdeci">uint8_t sending_bucket_id</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00745">GCS.h:745</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a670942393e2610f590949912ed3d1df8"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a670942393e2610f590949912ed3d1df8">MSG_SCALED_IMU2</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00049">GCS.h:49</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a641f77057c3054842e46a835425e07e4"><div class="ttname"><a href="structGCS__MAVLINK.html#a641f77057c3054842e46a835425e07e4">GCS_MAVLINK::handle_setup_signing</a></div><div class="ttdeci">void handle_setup_signing(const mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Signing_8cpp_source.html#l00066">GCS_Signing.cpp:66</a></div></div>
<div class="ttc" id="classAP__Radio_html"><div class="ttname"><a href="classAP__Radio.html">AP_Radio</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__Radio_8h_source.html#l00027">AP_Radio.h:27</a></div></div>
<div class="ttc" id="AP__KDECAN_8h_html"><div class="ttname"><a href="AP__KDECAN_8h.html">AP_KDECAN.h</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a117f9a72fc1d3be064cded650cf311e8"><div class="ttname"><a href="structGCS__MAVLINK.html#a117f9a72fc1d3be064cded650cf311e8">GCS_MAVLINK::base_mode</a></div><div class="ttdeci">virtual MAV_MODE base_mode() const =0</div></div>
<div class="ttc" id="structGCS__MAVLINK_html_aacd08f30831b2bda3f5b9d150d3ab26a"><div class="ttname"><a href="structGCS__MAVLINK.html#aacd08f30831b2bda3f5b9d150d3ab26a">GCS_MAVLINK::send_raw_imu</a></div><div class="ttdeci">void send_raw_imu()</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l01977">GCS_Common.cpp:1977</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991ac9d2569c7978f2114127f70ca50c2e9d"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991ac9d2569c7978f2114127f70ca50c2e9d">MSG_VFR_HUD</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00043">GCS.h:43</a></div></div>
<div class="ttc" id="stdio_8h_html"><div class="ttname"><a href="stdio_8h.html">stdio.h</a></div></div>
<div class="ttc" id="structVector2_html_a78fa1f2ed5e261c7fbeb8f3536a1ee34"><div class="ttname"><a href="structVector2.html#a78fa1f2ed5e261c7fbeb8f3536a1ee34">Vector2::x</a></div><div class="ttdeci">T x</div><div class="ttdef"><b>Definition:</b> <a href="vector2_8h_source.html#l00037">vector2.h:37</a></div></div>
<div class="ttc" id="RC__Channel_8h_html_acb66f35c4fe350096704f48e4c651948"><div class="ttname"><a href="RC__Channel_8h.html#acb66f35c4fe350096704f48e4c651948">rc</a></div><div class="ttdeci">RC_Channels &amp; rc()</div><div class="ttdef"><b>Definition:</b> <a href="RC__Channels_8cpp_source.html#l00209">RC_Channels.cpp:209</a></div></div>
<div class="ttc" id="namespaceAP_html_a99432cfdb696952c9b7146f155a815aa"><div class="ttname"><a href="namespaceAP.html#a99432cfdb696952c9b7146f155a815aa">AP::ahrs</a></div><div class="ttdeci">AP_AHRS &amp; ahrs()</div><div class="ttdef"><b>Definition:</b> <a href="AP__AHRS_8cpp_source.html#l00526">AP_AHRS.cpp:526</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a71817cd4dcabb501c2198d6d481a9691"><div class="ttname"><a href="structGCS__MAVLINK.html#a71817cd4dcabb501c2198d6d481a9691">GCS_MAVLINK::var_info</a></div><div class="ttdeci">static const struct AP_Param::GroupInfo var_info[]</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00350">GCS.h:350</a></div></div>
<div class="ttc" id="classAP__HAL_1_1Scheduler_html_a9fc1cebafebb6588842f4f0e18c7a996"><div class="ttname"><a href="classAP__HAL_1_1Scheduler.html#a9fc1cebafebb6588842f4f0e18c7a996">AP_HAL::Scheduler::reboot</a></div><div class="ttdeci">virtual void reboot(bool hold_in_bootloader)=0</div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a5e7cf1f9924831f616bcba8f884d38e4"><div class="ttname"><a href="structGCS__MAVLINK.html#a5e7cf1f9924831f616bcba8f884d38e4">GCS_MAVLINK::global_position_int_alt</a></div><div class="ttdeci">virtual int32_t global_position_int_alt() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l04336">GCS_Common.cpp:4336</a></div></div>
<div class="ttc" id="AP__OpticalFlow_8h_html"><div class="ttname"><a href="AP__OpticalFlow_8h.html">AP_OpticalFlow.h</a></div><div class="ttdoc">Catch-all header that defines all supported optical flow classes.</div></div>
<div class="ttc" id="structAP__Proximity_1_1Proximity__Distance__Array_html_abf7a0d187d87d3ff82265d7d10bb48cf"><div class="ttname"><a href="structAP__Proximity_1_1Proximity__Distance__Array.html#abf7a0d187d87d3ff82265d7d10bb48cf">AP_Proximity::Proximity_Distance_Array::distance</a></div><div class="ttdeci">float distance[PROXIMITY_MAX_DIRECTION]</div><div class="ttdef"><b>Definition:</b> <a href="AP__Proximity_8h_source.html#l00065">AP_Proximity.h:65</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a63cc99e4439d7e8b3db0fac35badc452"><div class="ttname"><a href="structGCS__MAVLINK.html#a63cc99e4439d7e8b3db0fac35badc452">GCS_MAVLINK::lag_correction</a></div><div class="ttdeci">JitterCorrection lag_correction</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00888">GCS.h:888</a></div></div>
<div class="ttc" id="classAP__RangeFinder__Backend_html_a70be857a438f361f455e925362dc3640"><div class="ttname"><a href="classAP__RangeFinder__Backend.html#a70be857a438f361f455e925362dc3640">AP_RangeFinder_Backend::get_mav_distance_sensor_type</a></div><div class="ttdeci">MAV_DISTANCE_SENSOR get_mav_distance_sensor_type() const</div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder__Backend_8cpp_source.html#l00034">RangeFinder_Backend.cpp:34</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991aea3f04b4eb41ef0bab298c196c69e5c6"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991aea3f04b4eb41ef0bab298c196c69e5c6">MSG_GIMBAL_REPORT</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00078">GCS.h:78</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a721836da33de06f2dc29f5331dd8157a"><div class="ttname"><a href="structGCS__MAVLINK.html#a721836da33de06f2dc29f5331dd8157a">GCS_MAVLINK::send_distance_sensor</a></div><div class="ttdeci">void send_distance_sensor() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00354">GCS_Common.cpp:354</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_aa9b11773cc5658b43662adcbbf07a3b2"><div class="ttname"><a href="structGCS__MAVLINK.html#aa9b11773cc5658b43662adcbbf07a3b2">GCS_MAVLINK::send_fence_status</a></div><div class="ttdeci">void send_fence_status() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Fence_8cpp_source.html#l00045">GCS_Fence.cpp:45</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a534b55e4a0350601fbdc54818a6dedbe"><div class="ttname"><a href="structGCS__MAVLINK.html#a534b55e4a0350601fbdc54818a6dedbe">GCS_MAVLINK::_port</a></div><div class="ttdeci">AP_HAL::UARTDriver * _port</div><div class="ttdoc">The stream we are communicating over.</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00679">GCS.h:679</a></div></div>
<div class="ttc" id="classAP__Camera_html_a4a39e7eb5e1df8b95ef260b0638c6fc7"><div class="ttname"><a href="classAP__Camera.html#a4a39e7eb5e1df8b95ef260b0638c6fc7">AP_Camera::set_trigger_distance</a></div><div class="ttdeci">void set_trigger_distance(uint32_t distance_m)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Camera_8h_source.html#l00053">AP_Camera.h:53</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a8712f50cee60529cc3c31aec2633391b"><div class="ttname"><a href="structGCS__MAVLINK.html#a8712f50cee60529cc3c31aec2633391b">GCS_MAVLINK::send_text</a></div><div class="ttdeci">void send_text(MAV_SEVERITY severity, const char *fmt,...) const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00908">GCS_Common.cpp:908</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a505f72ae2d47e4be47ddd1a8dcda3c14"><div class="ttname"><a href="structGCS__MAVLINK.html#a505f72ae2d47e4be47ddd1a8dcda3c14">GCS_MAVLINK::send_ahrs2</a></div><div class="ttdeci">void send_ahrs2()</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00459">GCS_Common.cpp:459</a></div></div>
<div class="ttc" id="classMissionItemProtocol_html_acc1492c720e16c7768373029616af2da"><div class="ttname"><a href="classMissionItemProtocol.html#acc1492c720e16c7768373029616af2da">MissionItemProtocol::handle_mission_request_list</a></div><div class="ttdeci">void handle_mission_request_list(const GCS_MAVLINK &amp;link, const mavlink_mission_request_list_t &amp;packet, const mavlink_message_t &amp;msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00532">GCS_Common.cpp:532</a></div></div>
<div class="ttc" id="classAP__HAL_1_1UARTDriver_html_a050efe232fa3e0106e5576ccc2538bd3"><div class="ttname"><a href="classAP__HAL_1_1UARTDriver.html#a050efe232fa3e0106e5576ccc2538bd3">AP_HAL::UARTDriver::receive_time_constraint_us</a></div><div class="ttdeci">virtual uint64_t receive_time_constraint_us(uint16_t nbytes)</div><div class="ttdef"><b>Definition:</b> <a href="UARTDriver_8h_source.html#l00101">UARTDriver.h:101</a></div></div>
<div class="ttc" id="classGCS_html_a3cab10e6191aa7c29f5ae5d13e264800"><div class="ttname"><a href="classGCS.html#a3cab10e6191aa7c29f5ae5d13e264800">GCS::_status_capacity</a></div><div class="ttdeci">static const uint8_t _status_capacity</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l01017">GCS.h:1017</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a272f1bc1b83c115d1447c95d965a8184"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a272f1bc1b83c115d1447c95d965a8184">MSG_MEMINFO</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00040">GCS.h:40</a></div></div>
<div class="ttc" id="classOpticalFlow_html"><div class="ttname"><a href="classOpticalFlow.html">OpticalFlow</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__OpticalFlow_2OpticalFlow_8h_source.html#l00029">OpticalFlow.h:29</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a76ce47aa6ba6b03708dc5632bc9785f3"><div class="ttname"><a href="structGCS__MAVLINK.html#a76ce47aa6ba6b03708dc5632bc9785f3">GCS_MAVLINK::send_scaled_pressure2</a></div><div class="ttdeci">void send_scaled_pressure2()</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02086">GCS_Common.cpp:2086</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a8b912ea526309ec8db54265d320b3d2a"><div class="ttname"><a href="structGCS__MAVLINK.html#a8b912ea526309ec8db54265d320b3d2a">GCS_MAVLINK::last_mavlink_stats_logged</a></div><div class="ttdeci">uint32_t last_mavlink_stats_logged</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00913">GCS.h:913</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_af6329e3fc9d20ee11c8a160bb8359e7f"><div class="ttname"><a href="structGCS__MAVLINK.html#af6329e3fc9d20ee11c8a160bb8359e7f">GCS_MAVLINK::_perf_update_name</a></div><div class="ttdeci">char _perf_update_name[16]</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00713">GCS.h:713</a></div></div>
<div class="ttc" id="classSRV__Channel_html_abd494c5e7f0400992d9b898071c1b992"><div class="ttname"><a href="classSRV__Channel.html#abd494c5e7f0400992d9b898071c1b992">SRV_Channel::get_output_pwm</a></div><div class="ttdeci">uint16_t get_output_pwm(void) const</div><div class="ttdef"><b>Definition:</b> <a href="SRV__Channel_8h_source.html#l00161">SRV_Channel.h:161</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_af4c7fce15464d8ff4a13eb30a0d7d8d5"><div class="ttname"><a href="structGCS__MAVLINK.html#af4c7fce15464d8ff4a13eb30a0d7d8d5">GCS_MAVLINK::send_vfr_hud</a></div><div class="ttdeci">void send_vfr_hud()</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02773">GCS_Common.cpp:2773</a></div></div>
<div class="ttc" id="classAP__Avoidance_1_1Obstacle_html_a8b5a48daccfe4c510b81d6731b896add"><div class="ttname"><a href="classAP__Avoidance_1_1Obstacle.html#a8b5a48daccfe4c510b81d6731b896add">AP_Avoidance::Obstacle::threat_level</a></div><div class="ttdeci">MAV_COLLISION_THREAT_LEVEL threat_level</div><div class="ttdef"><b>Definition:</b> <a href="AP__Avoidance_8h_source.html#l00054">AP_Avoidance.h:54</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_af2d72850e10bc8cdf005fbe901b3e704"><div class="ttname"><a href="structGCS__MAVLINK.html#af2d72850e10bc8cdf005fbe901b3e704">GCS_MAVLINK::next_deferred_bucket_message_to_send</a></div><div class="ttdeci">ap_message next_deferred_bucket_message_to_send()</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l01320">GCS_Common.cpp:1320</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a67db83a562c4e59da239aadbe2591209"><div class="ttname"><a href="structGCS__MAVLINK.html#a67db83a562c4e59da239aadbe2591209">GCS_MAVLINK::no_message_to_send</a></div><div class="ttdeci">static const ap_message no_message_to_send</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00744">GCS.h:744</a></div></div>
<div class="ttc" id="classAP__HAL_1_1Util_html_adead79890b223f40eaf092fda231c2f2"><div class="ttname"><a href="classAP__HAL_1_1Util.html#adead79890b223f40eaf092fda231c2f2">AP_HAL::Util::snprintf</a></div><div class="ttdeci">int snprintf(char *str, size_t size, const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="Util_8cpp_source.html#l00044">Util.cpp:44</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_acac9b00eb3bd1cd6685f3b4e5db51b26"><div class="ttname"><a href="structGCS__MAVLINK.html#acac9b00eb3bd1cd6685f3b4e5db51b26">GCS_MAVLINK::send_rpm</a></div><div class="ttdeci">void send_rpm() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l04253">GCS_Common.cpp:4253</a></div></div>
<div class="ttc" id="AP__Math_8cpp_html_accbd9f8bbc0adacd51efa66fad490c24"><div class="ttname"><a href="AP__Math_8cpp.html#accbd9f8bbc0adacd51efa66fad490c24">is_equal</a></div><div class="ttdeci">std::enable_if&lt; std::is_integral&lt; typename std::common_type&lt; Arithmetic1, Arithmetic2 &gt;::type &gt;::value,bool &gt;::type is_equal(const Arithmetic1 v_1, const Arithmetic2 v_2)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Math_8cpp_source.html#l00014">AP_Math.cpp:14</a></div></div>
<div class="ttc" id="classAP__HAL_1_1Util_html_a8ee016bee7e471240be5a2c648015a1d"><div class="ttname"><a href="classAP__HAL_1_1Util.html#a8ee016bee7e471240be5a2c648015a1d">AP_HAL::Util::perf_begin</a></div><div class="ttdeci">virtual void perf_begin(perf_counter_t h)</div><div class="ttdef"><b>Definition:</b> <a href="Util_8h_source.html#l00132">Util.h:132</a></div></div>
<div class="ttc" id="classBitmask_html_abc5a24c44cdda315d2f22809f5299f5f"><div class="ttname"><a href="classBitmask.html#abc5a24c44cdda315d2f22809f5299f5f">Bitmask::first_set</a></div><div class="ttdeci">int16_t first_set() const</div><div class="ttdef"><b>Definition:</b> <a href="Bitmask_8h_source.html#l00116">Bitmask.h:116</a></div></div>
<div class="ttc" id="classAP__Logger_html_a31ce2427fbda32a2f7373efa27576117"><div class="ttname"><a href="classAP__Logger.html#a31ce2427fbda32a2f7373efa27576117">AP_Logger::Write_EntireMission</a></div><div class="ttdeci">void Write_EntireMission()</div><div class="ttdef"><b>Definition:</b> <a href="AP__Logger_8cpp_source.html#l00685">AP_Logger.cpp:685</a></div></div>
<div class="ttc" id="stdio_8h_html_a37c1e8ce8a2b411fa666dc33972a2cec"><div class="ttname"><a href="stdio_8h.html#a37c1e8ce8a2b411fa666dc33972a2cec">snprintf</a></div><div class="ttdeci">int snprintf(char *str, size_t size, const char *fmt,...)</div></div>
<div class="ttc" id="structGCS__MAVLINK_1_1deferred__message__bucket__t_html"><div class="ttname"><a href="structGCS__MAVLINK_1_1deferred__message__bucket__t.html">GCS_MAVLINK::deferred_message_bucket_t</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00737">GCS.h:737</a></div></div>
<div class="ttc" id="classAP__Notify_html_a724dd074a094de26e17c72c38ac499e9"><div class="ttname"><a href="classAP__Notify.html#a724dd074a094de26e17c72c38ac499e9">AP_Notify::flags</a></div><div class="ttdeci">static struct notify_flags_and_values_type flags</div><div class="ttdef"><b>Definition:</b> <a href="AP__Notify_8h_source.html#l00128">AP_Notify.h:128</a></div></div>
<div class="ttc" id="classAP__HAL_1_1UARTDriver_html_acb3d1e747568bdfdd996f06974b53aeb"><div class="ttname"><a href="classAP__HAL_1_1UARTDriver.html#acb3d1e747568bdfdd996f06974b53aeb">AP_HAL::UARTDriver::get_flow_control</a></div><div class="ttdeci">virtual enum flow_control get_flow_control(void)</div><div class="ttdef"><b>Definition:</b> <a href="UARTDriver_8h_source.html#l00065">UARTDriver.h:65</a></div></div>
<div class="ttc" id="structlog__MAV_html_a925dfc1804792da387422d7efb875b72"><div class="ttname"><a href="structlog__MAV.html#a925dfc1804792da387422d7efb875b72">log_MAV::packet_tx_count</a></div><div class="ttdeci">uint16_t packet_tx_count</div><div class="ttdef"><b>Definition:</b> <a href="LogStructure_8h_source.html#l00366">LogStructure.h:366</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_1_1deferred__message__t_html_a1aed6ec6ca91364e195c5a7c1c219ace"><div class="ttname"><a href="structGCS__MAVLINK_1_1deferred__message__t.html#a1aed6ec6ca91364e195c5a7c1c219ace">GCS_MAVLINK::deferred_message_t::interval_ms</a></div><div class="ttdeci">uint16_t interval_ms</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00723">GCS.h:723</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a0a2d68b0712655adc9d43369639949a1"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a0a2d68b0712655adc9d43369639949a1">MSG_AHRS2</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00067">GCS.h:67</a></div></div>
<div class="ttc" id="classAP__Avoidance_1_1Obstacle_html_a70a3af409629cad3737c25003937f7fc"><div class="ttname"><a href="classAP__Avoidance_1_1Obstacle.html#a70a3af409629cad3737c25003937f7fc">AP_Avoidance::Obstacle::closest_approach_xy</a></div><div class="ttdeci">float closest_approach_xy</div><div class="ttdef"><b>Definition:</b> <a href="AP__Avoidance_8h_source.html#l00055">AP_Avoidance.h:55</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a7ff42b90dc344d26bf27e7ed3f21c656"><div class="ttname"><a href="structGCS__MAVLINK.html#a7ff42b90dc344d26bf27e7ed3f21c656">GCS_MAVLINK::_set_mode_common</a></div><div class="ttdeci">MAV_RESULT _set_mode_common(const MAV_MODE base_mode, const uint32_t custom_mode)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02346">GCS_Common.cpp:2346</a></div></div>
<div class="ttc" id="classMissionItemProtocol_html_a8b9f877cd987606c65875254387f892c"><div class="ttname"><a href="classMissionItemProtocol.html#a8b9f877cd987606c65875254387f892c">MissionItemProtocol::upload_timeout_ms</a></div><div class="ttdeci">const uint16_t upload_timeout_ms</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00189">GCS.h:189</a></div></div>
<div class="ttc" id="classAP__Mount_html_a9e00880d3945a9629aacaad5abf856b3"><div class="ttname"><a href="classAP__Mount.html#a9e00880d3945a9629aacaad5abf856b3">AP_Mount::handle_command_long</a></div><div class="ttdeci">MAV_RESULT handle_command_long(const mavlink_command_long_t &amp;packet)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Mount_8cpp_source.html#l00588">AP_Mount.cpp:588</a></div></div>
<div class="ttc" id="classMissionItemProtocol_html_a67284962b370e99cdde2e8b3a141f9d4"><div class="ttname"><a href="classMissionItemProtocol.html#a67284962b370e99cdde2e8b3a141f9d4">MissionItemProtocol::update</a></div><div class="ttdeci">void update()</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00209">GCS_Common.cpp:209</a></div></div>
<div class="ttc" id="classAP__RTC_html_ae0d5b4d97863ac93a71ea325cd632d90"><div class="ttname"><a href="classAP__RTC.html#ae0d5b4d97863ac93a71ea325cd632d90">AP_RTC::get_utc_usec</a></div><div class="ttdeci">bool get_utc_usec(uint64_t &amp;usec) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__RTC_8cpp_source.html#l00066">AP_RTC.cpp:66</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a42faf948a4e2db64769dbbbbd9989d2f"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a42faf948a4e2db64769dbbbbd9989d2f">MSG_AHRS3</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00068">GCS.h:68</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a74172861552ab8de0c825190508f38ff"><div class="ttname"><a href="structGCS__MAVLINK.html#a74172861552ab8de0c825190508f38ff">GCS_MAVLINK::handle_command_battery_reset</a></div><div class="ttdeci">MAV_RESULT handle_command_battery_reset(const mavlink_command_long_t &amp;packet)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l03755">GCS_Common.cpp:3755</a></div></div>
<div class="ttc" id="RangeFinder__Backend_8h_html"><div class="ttname"><a href="RangeFinder__Backend_8h.html">RangeFinder_Backend.h</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a194d4de4298dca0fb2d7f5d4fb20a404"><div class="ttname"><a href="structGCS__MAVLINK.html#a194d4de4298dca0fb2d7f5d4fb20a404">GCS_MAVLINK::send_system_time</a></div><div class="ttdeci">void send_system_time()</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l01891">GCS_Common.cpp:1891</a></div></div>
<div class="ttc" id="classAP__GPS_html_a3074764330bd4dfd9da851b59a6df2ed"><div class="ttname"><a href="classAP__GPS.html#a3074764330bd4dfd9da851b59a6df2ed">AP_GPS::handle_msg</a></div><div class="ttdeci">void handle_msg(const mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8cpp_source.html#l00791">AP_GPS.cpp:791</a></div></div>
<div class="ttc" id="examples_2AnalogIn_2AnalogIn_8cpp_html_a130f3ebe4c1bb6993e1094760227ad6a"><div class="ttname"><a href="examples_2AnalogIn_2AnalogIn_8cpp.html#a130f3ebe4c1bb6993e1094760227ad6a">chan</a></div><div class="ttdeci">AP_HAL::AnalogSource * chan</div><div class="ttdef"><b>Definition:</b> <a href="examples_2AnalogIn_2AnalogIn_8cpp_source.html#l00008">AnalogIn.cpp:8</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a272283e2882b1fe0dd3672e9d28853c3"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a272283e2882b1fe0dd3672e9d28853c3">MSG_LOCAL_POSITION</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00082">GCS.h:82</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_af948c4a65f98679941885e2c7cc12ac5"><div class="ttname"><a href="structGCS__MAVLINK.html#af948c4a65f98679941885e2c7cc12ac5">GCS_MAVLINK::streaming_channel_mask</a></div><div class="ttdeci">static uint8_t streaming_channel_mask(void)</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00450">GCS.h:450</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a45867a6e13476ac2f00b73cdeea93fce"><div class="ttname"><a href="structGCS__MAVLINK.html#a45867a6e13476ac2f00b73cdeea93fce">GCS_MAVLINK::send_proximity</a></div><div class="ttdeci">void send_proximity() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00408">GCS_Common.cpp:408</a></div></div>
<div class="ttc" id="classAP__HAL_1_1HAL_html_a13ed800ad745085097f4d6dce9070eb0"><div class="ttname"><a href="classAP__HAL_1_1HAL.html#a13ed800ad745085097f4d6dce9070eb0">AP_HAL::HAL::gpio</a></div><div class="ttdeci">AP_HAL::GPIO * gpio</div><div class="ttdef"><b>Definition:</b> <a href="HAL_8h_source.html#l00111">HAL.h:111</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a340da8d68074e768a3cb0c1517544d7f"><div class="ttname"><a href="structGCS__MAVLINK.html#a340da8d68074e768a3cb0c1517544d7f">GCS_MAVLINK::supported_mission_types</a></div><div class="ttdeci">static const MAV_MISSION_TYPE supported_mission_types[2]</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00320">GCS.h:320</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991aec6be05f52859e4bbaf957e598699333"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991aec6be05f52859e4bbaf957e598699333">MSG_OPTICAL_FLOW</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00077">GCS.h:77</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_aa9db7093c9f7f44f6f2e8d4443d7778d"><div class="ttname"><a href="structGCS__MAVLINK.html#aa9db7093c9f7f44f6f2e8d4443d7778d">GCS_MAVLINK::load_signing_key</a></div><div class="ttdeci">void load_signing_key(void)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Signing_8cpp_source.html#l00123">GCS_Signing.cpp:123</a></div></div>
<div class="ttc" id="classRangeFinder_html"><div class="ttname"><a href="classRangeFinder.html">RangeFinder</a></div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8h_source.html#l00035">RangeFinder.h:35</a></div></div>
<div class="ttc" id="AP__BoardConfig__CAN_8h_html"><div class="ttname"><a href="AP__BoardConfig__CAN_8h.html">AP_BoardConfig_CAN.h</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_af1c0fd653d5f1fd10dadfb22f41dd865"><div class="ttname"><a href="structGCS__MAVLINK.html#af1c0fd653d5f1fd10dadfb22f41dd865">GCS_MAVLINK::set_home</a></div><div class="ttdeci">virtual bool set_home(const Location &amp;loc, bool lock)=0</div></div>
<div class="ttc" id="classRC__Channel_html_a186bd6c744701bce1755f836d44d5f96"><div class="ttname"><a href="classRC__Channel.html#a186bd6c744701bce1755f836d44d5f96">RC_Channel::get_radio_min</a></div><div class="ttdeci">int16_t get_radio_min() const</div><div class="ttdef"><b>Definition:</b> <a href="RC__Channel_8h_source.html#l00079">RC_Channel.h:79</a></div></div>
<div class="ttc" id="classRC__Channel_html_aa056e3c3b15ca3e44aee9f97b7ca7855"><div class="ttname"><a href="classRC__Channel.html#aa056e3c3b15ca3e44aee9f97b7ca7855">RC_Channel::get_radio_max</a></div><div class="ttdeci">int16_t get_radio_max() const</div><div class="ttdef"><b>Definition:</b> <a href="RC__Channel_8h_source.html#l00082">RC_Channel.h:82</a></div></div>
<div class="ttc" id="classAP__Mission_html_a80b09bc9fa20ca29268f08f51de9050e"><div class="ttname"><a href="classAP__Mission.html#a80b09bc9fa20ca29268f08f51de9050e">AP_Mission::mavlink_int_to_mission_cmd</a></div><div class="ttdeci">static MAV_MISSION_RESULT mavlink_int_to_mission_cmd(const mavlink_mission_item_int_t &amp;packet, AP_Mission::Mission_Command &amp;cmd)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Mission_8cpp_source.html#l00696">AP_Mission.cpp:696</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a6f54574c93c3fac75f233979803d8a6a"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a6f54574c93c3fac75f233979803d8a6a">MSG_RC_CHANNELS</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00045">GCS.h:45</a></div></div>
<div class="ttc" id="classMissionItemProtocol_html_a0f57a2ceddc8d639f51e138c266179b8"><div class="ttname"><a href="classMissionItemProtocol.html#a0f57a2ceddc8d639f51e138c266179b8">MissionItemProtocol::send_mission_ack</a></div><div class="ttdeci">void send_mission_ack(const mavlink_message_t &amp;msg, MAV_MISSION_RESULT result) const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00235">GCS_Common.cpp:235</a></div></div>
<div class="ttc" id="classMissionItemProtocol__Waypoints_html_ab76f98403886621360a5bb32a108e6bb"><div class="ttname"><a href="classMissionItemProtocol__Waypoints.html#ab76f98403886621360a5bb32a108e6bb">MissionItemProtocol_Waypoints::truncate</a></div><div class="ttdeci">void truncate(const mavlink_mission_count_t &amp;packet) override</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00790">GCS_Common.cpp:790</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a557b471724d4f126458757e0c4f54e78"><div class="ttname"><a href="structGCS__MAVLINK.html#a557b471724d4f126458757e0c4f54e78">GCS_MAVLINK::save_signing_timestamp</a></div><div class="ttdeci">static void save_signing_timestamp(bool force_save_now)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Signing_8cpp_source.html#l00200">GCS_Signing.cpp:200</a></div></div>
<div class="ttc" id="classAP__KDECAN_html"><div class="ttname"><a href="classAP__KDECAN.html">AP_KDECAN</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__KDECAN_8h_source.html#l00033">AP_KDECAN.h:33</a></div></div>
<div class="ttc" id="classMissionItemProtocol_html_a0f218f2ef1da3f5ddf4cd9c06d5e6373"><div class="ttname"><a href="classMissionItemProtocol.html#a0f218f2ef1da3f5ddf4cd9c06d5e6373">MissionItemProtocol::handle_mission_request_int</a></div><div class="ttdeci">void handle_mission_request_int(const GCS_MAVLINK &amp;link, const mavlink_mission_request_int_t &amp;packet, const mavlink_message_t &amp;msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00553">GCS_Common.cpp:553</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a735b4b8b692fa6985a7f7b99c6b4d58c"><div class="ttname"><a href="structGCS__MAVLINK.html#a735b4b8b692fa6985a7f7b99c6b4d58c">GCS_MAVLINK::handle_command_camera</a></div><div class="ttdeci">MAV_RESULT handle_command_camera(const mavlink_command_long_t &amp;packet)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l03019">GCS_Common.cpp:3019</a></div></div>
<div class="ttc" id="classAP__InertialSensor_html_a2dc43f0372ce70538ecb27f97c0c820c"><div class="ttname"><a href="classAP__InertialSensor.html#a2dc43f0372ce70538ecb27f97c0c820c">AP_InertialSensor::get_acal</a></div><div class="ttdeci">AP_AccelCal * get_acal() const</div><div class="ttdef"><b>Definition:</b> <a href="AP__InertialSensor_8h_source.html#l00251">AP_InertialSensor.h:251</a></div></div>
<div class="ttc" id="AP__BattMonitor__Bebop_8cpp_html_a47061fcae597f83f8a0a99d4b7b5a5c1"><div class="ttname"><a href="AP__BattMonitor__Bebop_8cpp.html#a47061fcae597f83f8a0a99d4b7b5a5c1">voltage</a></div><div class="ttdeci">float voltage</div><div class="ttdef"><b>Definition:</b> <a href="AP__BattMonitor__Bebop_8cpp_source.html#l00044">AP_BattMonitor_Bebop.cpp:44</a></div></div>
<div class="ttc" id="classAP__Mount_html_a7aca3ae2c2c2bca127366adeb0825ea5"><div class="ttname"><a href="classAP__Mount.html#a7aca3ae2c2c2bca127366adeb0825ea5">AP_Mount::handle_param_value</a></div><div class="ttdeci">void handle_param_value(const mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Mount_8cpp_source.html#l00679">AP_Mount.cpp:679</a></div></div>
<div class="ttc" id="classLocation_html_a89e532f5bcc13db2f51ff9eed667c2b6"><div class="ttname"><a href="classLocation.html#a89e532f5bcc13db2f51ff9eed667c2b6">Location::alt</a></div><div class="ttdeci">int32_t alt</div><div class="ttdef"><b>Definition:</b> <a href="Location_8h_source.html#l00020">Location.h:20</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_adc1ed7d077ebd18897573ce66762c1c0"><div class="ttname"><a href="structGCS__MAVLINK.html#adc1ed7d077ebd18897573ce66762c1c0">GCS_MAVLINK::should_zero_rc_outputs_on_reboot</a></div><div class="ttdeci">virtual bool should_zero_rc_outputs_on_reboot() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00573">GCS.h:573</a></div></div>
<div class="ttc" id="classAP__HAL_1_1Scheduler_html_a48df2daefcd2301361d1637ba61cc211"><div class="ttname"><a href="classAP__HAL_1_1Scheduler.html#a48df2daefcd2301361d1637ba61cc211">AP_HAL::Scheduler::restore_interrupts</a></div><div class="ttdeci">virtual void restore_interrupts(void *)</div><div class="ttdef"><b>Definition:</b> <a href="Scheduler_8h_source.html#l00086">Scheduler.h:86</a></div></div>
<div class="ttc" id="GCS__MAVLink_8cpp_html_a0757a9df823da0368303c5e9ea47969d"><div class="ttname"><a href="GCS__MAVLink_8cpp.html#a0757a9df823da0368303c5e9ea47969d">gcs_alternative_active</a></div><div class="ttdeci">bool gcs_alternative_active[MAVLINK_COMM_NUM_BUFFERS]</div><div class="ttdef"><b>Definition:</b> <a href="GCS__MAVLink_8cpp_source.html#l00041">GCS_MAVLink.cpp:41</a></div></div>
<div class="ttc" id="classAP__HAL_1_1HAL_html_aa6daf2df3dfc0b9f0f503db64a52b0cc"><div class="ttname"><a href="classAP__HAL_1_1HAL.html#aa6daf2df3dfc0b9f0f503db64a52b0cc">AP_HAL::HAL::rcout</a></div><div class="ttdeci">AP_HAL::RCOutput * rcout</div><div class="ttdef"><b>Definition:</b> <a href="HAL_8h_source.html#l00113">HAL.h:113</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991af867b3847c7b81984f0479271acc306e"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991af867b3847c7b81984f0479271acc306e">MSG_SYSTEM_TIME</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00059">GCS.h:59</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991aadb1c1b31dc09b85abc9355c8a06a5a4"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991aadb1c1b31dc09b85abc9355c8a06a5a4">MSG_SIMSTATE</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00066">GCS.h:66</a></div></div>
<div class="ttc" id="classMissionItemProtocol_html_a632d88c290e33ebb14d4f0bed33ae638"><div class="ttname"><a href="classMissionItemProtocol.html#a632d88c290e33ebb14d4f0bed33ae638">MissionItemProtocol::complete</a></div><div class="ttdeci">virtual void complete(const GCS_MAVLINK &amp;_link)</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00211">GCS.h:211</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ac8b61d6ff34dbae1be71540cf87b15ee"><div class="ttname"><a href="structGCS__MAVLINK.html#ac8b61d6ff34dbae1be71540cf87b15ee">GCS_MAVLINK::handle_set_mode</a></div><div class="ttdeci">void handle_set_mode(mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02329">GCS_Common.cpp:2329</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a08e5a22c8915300128e6d1b4ade7687a"><div class="ttname"><a href="structGCS__MAVLINK.html#a08e5a22c8915300128e6d1b4ade7687a">GCS_MAVLINK::initialise_message_intervals_for_stream</a></div><div class="ttdeci">void initialise_message_intervals_for_stream(GCS_MAVLINK::streams id)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l04750">GCS_Common.cpp:4750</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ac9c6e86aff8fb7affad6c3b50461c361"><div class="ttname"><a href="structGCS__MAVLINK.html#ac9c6e86aff8fb7affad6c3b50461c361">GCS_MAVLINK::send_rangefinder</a></div><div class="ttdeci">virtual void send_rangefinder() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00392">GCS_Common.cpp:392</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_af11dfe83778a867387d79356d417a6a7"><div class="ttname"><a href="structGCS__MAVLINK.html#af11dfe83778a867387d79356d417a6a7">GCS_MAVLINK::deferred_messages_initialised</a></div><div class="ttdeci">bool deferred_messages_initialised</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00785">GCS.h:785</a></div></div>
<div class="ttc" id="classAP__Mount_html"><div class="ttname"><a href="classAP__Mount.html">AP_Mount</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__Mount_8h_source.html#l00044">AP_Mount.h:44</a></div></div>
<div class="ttc" id="classAP__ToshibaCAN_html_a6284c53e57725273772f90f0491e5d66"><div class="ttname"><a href="classAP__ToshibaCAN.html#a6284c53e57725273772f90f0491e5d66">AP_ToshibaCAN::get_tcan</a></div><div class="ttdeci">static AP_ToshibaCAN * get_tcan(uint8_t driver_index)</div></div>
<div class="ttc" id="classAP__InertialSensor_html_a7cf20c4bbe7ee0d96edff2cafb567f0d"><div class="ttname"><a href="classAP__InertialSensor.html#a7cf20c4bbe7ee0d96edff2cafb567f0d">AP_InertialSensor::get_accel_offsets</a></div><div class="ttdeci">const Vector3f &amp; get_accel_offsets(uint8_t i) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__InertialSensor_8h_source.html#l00151">AP_InertialSensor.h:151</a></div></div>
<div class="ttc" id="classMissionItemProtocol_html_a6d0d1f12eb58204423ff0d80e4ceb21e"><div class="ttname"><a href="classMissionItemProtocol.html#a6d0d1f12eb58204423ff0d80e4ceb21e">MissionItemProtocol::clear_all_items</a></div><div class="ttdeci">virtual bool clear_all_items()=0</div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a37e07887edf8f4f5c8ee0cd38ddc9a11"><div class="ttname"><a href="structGCS__MAVLINK.html#a37e07887edf8f4f5c8ee0cd38ddc9a11">GCS_MAVLINK::handle_mount_message</a></div><div class="ttdeci">virtual void handle_mount_message(const mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00881">GCS_Common.cpp:881</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a9ad8ab4104e517668d23b4b08129ee7a"><div class="ttname"><a href="structGCS__MAVLINK.html#a9ad8ab4104e517668d23b4b08129ee7a">GCS_MAVLINK::send_sensor_offsets</a></div><div class="ttdeci">void send_sensor_offsets()</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02096">GCS_Common.cpp:2096</a></div></div>
<div class="ttc" id="classAP__InternalError_html_a72019dd8c7db64b58a862f01ee8cbcf9a2eadaff2ad87b51c04f7af77a5fbb7e2"><div class="ttname"><a href="classAP__InternalError.html#a72019dd8c7db64b58a862f01ee8cbcf9a2eadaff2ad87b51c04f7af77a5fbb7e2">AP_InternalError::error_t::gcs_bad_missionprotocol_link</a></div></div>
<div class="ttc" id="classGCS_html_ac858f9d69829e5dbf535d1cb75d041af"><div class="ttname"><a href="classGCS.html#ac858f9d69829e5dbf535d1cb75d041af">GCS::_passthru</a></div><div class="ttdeci">struct GCS::@176 _passthru</div></div>
<div class="ttc" id="classSRV__Channels_html_a6bdc435846b87498670af6018e094f64"><div class="ttname"><a href="classSRV__Channels.html#a6bdc435846b87498670af6018e094f64">SRV_Channels::cork</a></div><div class="ttdeci">static void cork()</div><div class="ttdef"><b>Definition:</b> <a href="SRV__Channels_8cpp_source.html#l00226">SRV_Channels.cpp:226</a></div></div>
<div class="ttc" id="classVector3_html"><div class="ttname"><a href="classVector3.html">Vector3&lt; float &gt;</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a57a3874a62f431ac3dee427fe2b53117"><div class="ttname"><a href="structGCS__MAVLINK.html#a57a3874a62f431ac3dee427fe2b53117">GCS_MAVLINK::handle_command_do_fence_enable</a></div><div class="ttdeci">MAV_RESULT handle_command_do_fence_enable(const mavlink_command_long_t &amp;packet)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Fence_8cpp_source.html#l00005">GCS_Fence.cpp:5</a></div></div>
<div class="ttc" id="classAP__HAL_1_1Util_html_a64273fdab59825cea305a403054c25bf"><div class="ttname"><a href="classAP__HAL_1_1Util.html#a64273fdab59825cea305a403054c25bf">AP_HAL::Util::persistent_data</a></div><div class="ttdeci">struct PersistentData persistent_data</div><div class="ttdef"><b>Definition:</b> <a href="Util_8h_source.html#l00070">Util.h:70</a></div></div>
<div class="ttc" id="AP__FWVersion_8h_html"><div class="ttname"><a href="AP__FWVersion_8h.html">AP_FWVersion.h</a></div></div>
<div class="ttc" id="classAP__FWVersion_html_acd2a312aaf5245d24ce72fdae803c4a4"><div class="ttname"><a href="classAP__FWVersion.html#acd2a312aaf5245d24ce72fdae803c4a4">AP_FWVersion::fw_type</a></div><div class="ttdeci">FIRMWARE_VERSION_TYPE fw_type</div><div class="ttdef"><b>Definition:</b> <a href="AP__FWVersion_8h_source.html#l00013">AP_FWVersion.h:13</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a29f1b5bdb21d1e135278aa29d8c55e65"><div class="ttname"><a href="structGCS__MAVLINK.html#a29f1b5bdb21d1e135278aa29d8c55e65">GCS_MAVLINK::accept_packet</a></div><div class="ttdeci">bool accept_packet(const mavlink_status_t &amp;status, mavlink_message_t &amp;msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l04832">GCS_Common.cpp:4832</a></div></div>
<div class="ttc" id="classAP__BattMonitor_html_ab75700ea712e5b083186925f233624bd"><div class="ttname"><a href="classAP__BattMonitor.html#ab75700ea712e5b083186925f233624bd">AP_BattMonitor::get_temperature</a></div><div class="ttdeci">bool get_temperature(float &amp;temperature) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__BattMonitor_8h_source.html#l00157">AP_BattMonitor.h:157</a></div></div>
<div class="ttc" id="classAP__AHRS_html_a11efcc2b48256bf736f33ac26063ae16"><div class="ttname"><a href="classAP__AHRS.html#a11efcc2b48256bf736f33ac26063ae16">AP_AHRS::groundspeed</a></div><div class="ttdeci">float groundspeed(void)</div><div class="ttdef"><b>Definition:</b> <a href="AP__AHRS_8h_source.html#l00364">AP_AHRS.h:364</a></div></div>
<div class="ttc" id="classAP__Frsky__Telem_html_adf5f82d6eff07cf44565ca062d13a75d"><div class="ttname"><a href="classAP__Frsky__Telem.html#adf5f82d6eff07cf44565ca062d13a75d">AP_Frsky_Telem::init</a></div><div class="ttdeci">bool init()</div><div class="ttdef"><b>Definition:</b> <a href="AP__Frsky__Telem_8cpp_source.html#l00044">AP_Frsky_Telem.cpp:44</a></div></div>
<div class="ttc" id="classAP__SerialManager_html_af95280ba50704a8adece62755cb348e7"><div class="ttname"><a href="classAP__SerialManager.html#af95280ba50704a8adece62755cb348e7">AP_SerialManager::SerialProtocol</a></div><div class="ttdeci">SerialProtocol</div><div class="ttdef"><b>Definition:</b> <a href="AP__SerialManager_8h_source.html#l00086">AP_SerialManager.h:86</a></div></div>
<div class="ttc" id="namespaceAP_html_a13852d97b041687ca5df7d76e7207a3d"><div class="ttname"><a href="namespaceAP.html#a13852d97b041687ca5df7d76e7207a3d">AP::arming</a></div><div class="ttdeci">AP_Arming &amp; arming()</div><div class="ttdef"><b>Definition:</b> <a href="AP__Arming_8cpp_source.html#l00931">AP_Arming.cpp:931</a></div></div>
<div class="ttc" id="classCompass_html_aa81dfaba861a7072aac805e6cbae25d4"><div class="ttname"><a href="classCompass.html#aa81dfaba861a7072aac805e6cbae25d4">Compass::send_mag_cal_progress</a></div><div class="ttdeci">void send_mag_cal_progress(mavlink_channel_t chan)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Compass__Calibration_8cpp_source.html#l00190">AP_Compass_Calibration.cpp:190</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a007e2acbb02611a68d30d68ed140b0fe"><div class="ttname"><a href="structGCS__MAVLINK.html#a007e2acbb02611a68d30d68ed140b0fe">GCS_MAVLINK::send_collision_all</a></div><div class="ttdeci">static void send_collision_all(const AP_Avoidance::Obstacle &amp;threat, MAV_COLLISION_ACTION behaviour)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02711">GCS_Common.cpp:2711</a></div></div>
<div class="ttc" id="AP__Scheduler_8h_html"><div class="ttname"><a href="AP__Scheduler_8h.html">AP_Scheduler.h</a></div></div>
<div class="ttc" id="namespaceAP_html_ac571aa5a2ef71b7f4b4b2bfa09143fb9"><div class="ttname"><a href="namespaceAP.html#ac571aa5a2ef71b7f4b4b2bfa09143fb9">AP::ins</a></div><div class="ttdeci">AP_InertialSensor &amp; ins()</div><div class="ttdef"><b>Definition:</b> <a href="AP__InertialSensor_8cpp_source.html#l02076">AP_InertialSensor.cpp:2076</a></div></div>
<div class="ttc" id="namespaceAP_html_ae6eeec356455220f913e47e323057cd5"><div class="ttname"><a href="namespaceAP.html#ae6eeec356455220f913e47e323057cd5">AP::gps</a></div><div class="ttdeci">AP_GPS &amp; gps()</div><div class="ttdef"><b>Definition:</b> <a href="AP__GPS_8cpp_source.html#l01574">AP_GPS.cpp:1574</a></div></div>
<div class="ttc" id="functor_8h_html_a00e5874203cecc310017f9166f2c0e36"><div class="ttname"><a href="functor_8h.html#a00e5874203cecc310017f9166f2c0e36">FUNCTOR_BIND_MEMBER</a></div><div class="ttdeci">#define FUNCTOR_BIND_MEMBER(func, rettype,...)</div><div class="ttdef"><b>Definition:</b> <a href="functor_8h_source.html#l00031">functor.h:31</a></div></div>
<div class="ttc" id="AP__OpticalFlow_2OpticalFlow_8h_html"><div class="ttname"><a href="AP__OpticalFlow_2OpticalFlow_8h.html">OpticalFlow.h</a></div></div>
<div class="ttc" id="classAP__Mount_html_a68a94bbf6ab531daa66ff6e3b17a0104"><div class="ttname"><a href="classAP__Mount.html#a68a94bbf6ab531daa66ff6e3b17a0104">AP_Mount::set_mode_to_default</a></div><div class="ttdeci">void set_mode_to_default()</div><div class="ttdef"><b>Definition:</b> <a href="AP__Mount_8h_source.html#l00104">AP_Mount.h:104</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_affbf86ced2958539d0ccc372f9fba3d6"><div class="ttname"><a href="structGCS__MAVLINK.html#affbf86ced2958539d0ccc372f9fba3d6">GCS_MAVLINK::mavlink_private</a></div><div class="ttdeci">static uint8_t mavlink_private</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00800">GCS.h:800</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ad9986225f7a93470e169576a38f3dd71"><div class="ttname"><a href="structGCS__MAVLINK.html#ad9986225f7a93470e169576a38f3dd71">GCS_MAVLINK::initialised</a></div><div class="ttdeci">bool initialised</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00353">GCS.h:353</a></div></div>
<div class="ttc" id="classAP__HAL_1_1RCOutput_html_a636fcf1b8ebc6b591a15fbc917f83f4f"><div class="ttname"><a href="classAP__HAL_1_1RCOutput.html#a636fcf1b8ebc6b591a15fbc917f83f4f">AP_HAL::RCOutput::read</a></div><div class="ttdeci">virtual uint16_t read(uint8_t chan)=0</div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ac884c17f3ec097c8dba8d8b960ce007b"><div class="ttname"><a href="structGCS__MAVLINK.html#ac884c17f3ec097c8dba8d8b960ce007b">GCS_MAVLINK::find_next_bucket_to_send</a></div><div class="ttdeci">void find_next_bucket_to_send()</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l01274">GCS_Common.cpp:1274</a></div></div>
<div class="ttc" id="classAP__Notify_html_af0f7003f65d99efcffa33d7060c56ac9"><div class="ttname"><a href="classAP__Notify.html#af0f7003f65d99efcffa33d7060c56ac9">AP_Notify::update</a></div><div class="ttdeci">void update(void)</div><div class="ttdoc">update - allow updates of leds that cannot be updated during a timed interrupt</div><div class="ttdef"><b>Definition:</b> <a href="AP__Notify_8cpp_source.html#l00321">AP_Notify.cpp:321</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a085f9cede300d1fd4b58aa8b1719274f"><div class="ttname"><a href="structGCS__MAVLINK.html#a085f9cede300d1fd4b58aa8b1719274f">GCS_MAVLINK::get_advanced_failsafe</a></div><div class="ttdeci">virtual AP_AdvancedFailsafe * get_advanced_failsafe() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00511">GCS.h:511</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_af4a0693c948bab93b5337be3c651e499"><div class="ttname"><a href="structGCS__MAVLINK.html#af4a0693c948bab93b5337be3c651e499">GCS_MAVLINK::send_gps_global_origin</a></div><div class="ttdeci">void send_gps_global_origin() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02540">GCS_Common.cpp:2540</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ad02c83895334e008e3c2f454a616893e"><div class="ttname"><a href="structGCS__MAVLINK.html#ad02c83895334e008e3c2f454a616893e">GCS_MAVLINK::handle_set_gps_global_origin</a></div><div class="ttdeci">void handle_set_gps_global_origin(const mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l03089">GCS_Common.cpp:3089</a></div></div>
<div class="ttc" id="classAP__Notify_html_a0f38b9b4be211e200675dd048c81f500"><div class="ttname"><a href="classAP__Notify.html#a0f38b9b4be211e200675dd048c81f500">AP_Notify::send_text</a></div><div class="ttdeci">void send_text(const char *str)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Notify_8cpp_source.html#l00369">AP_Notify.cpp:369</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_aabf8eb6ddc5987a67d80ba3100531b25"><div class="ttname"><a href="structGCS__MAVLINK.html#aabf8eb6ddc5987a67d80ba3100531b25">GCS_MAVLINK::packetReceived</a></div><div class="ttdeci">virtual void packetReceived(const mavlink_status_t &amp;status, mavlink_message_t &amp;msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l01681">GCS_Common.cpp:1681</a></div></div>
<div class="ttc" id="classAP__RangeFinder__Backend_html_a581dc555bf71bc982ba0ce21063574f8"><div class="ttname"><a href="classAP__RangeFinder__Backend.html#a581dc555bf71bc982ba0ce21063574f8">AP_RangeFinder_Backend::min_distance_cm</a></div><div class="ttdeci">int16_t min_distance_cm() const</div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder__Backend_8h_source.html#l00040">RangeFinder_Backend.h:40</a></div></div>
<div class="ttc" id="classAP__Proximity_html_aea4d7efc1060984c34896eeff8e82d4d"><div class="ttname"><a href="classAP__Proximity.html#aea4d7efc1060984c34896eeff8e82d4d">AP_Proximity::distance_min</a></div><div class="ttdeci">float distance_min() const</div><div class="ttdef"><b>Definition:</b> <a href="AP__Proximity_8cpp_source.html#l00443">AP_Proximity.cpp:443</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a0b018c3d69c6d87c62e73e88fad1e27d"><div class="ttname"><a href="structGCS__MAVLINK.html#a0b018c3d69c6d87c62e73e88fad1e27d">GCS_MAVLINK::sysid_enforce</a></div><div class="ttdeci">virtual bool sysid_enforce() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00348">GCS.h:348</a></div></div>
<div class="ttc" id="namespaceAP_html_a8aec57eb0b7a79044cbc1f0ca4b75bcf"><div class="ttname"><a href="namespaceAP.html#a8aec57eb0b7a79044cbc1f0ca4b75bcf">AP::baro</a></div><div class="ttdeci">AP_Baro &amp; baro()</div><div class="ttdef"><b>Definition:</b> <a href="AP__Baro_8cpp_source.html#l00860">AP_Baro.cpp:860</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_af9bb82ea69a50e86660dfc8d0076153c"><div class="ttname"><a href="structGCS__MAVLINK.html#af9bb82ea69a50e86660dfc8d0076153c">GCS_MAVLINK::send_scaled_pressure</a></div><div class="ttdeci">void send_scaled_pressure()</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02081">GCS_Common.cpp:2081</a></div></div>
<div class="ttc" id="namespaceAP_html_a0ecc5d8af819e985ee88fea6c8b59b12"><div class="ttname"><a href="namespaceAP.html#a0ecc5d8af819e985ee88fea6c8b59b12">AP::camera</a></div><div class="ttdeci">AP_Camera * camera()</div><div class="ttdef"><b>Definition:</b> <a href="AP__Camera_8cpp_source.html#l00474">AP_Camera.cpp:474</a></div></div>
<div class="ttc" id="classLocation_html"><div class="ttname"><a href="classLocation.html">Location</a></div><div class="ttdef"><b>Definition:</b> <a href="Location_8h_source.html#l00009">Location.h:9</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_aeb3b60569c945ad118e7da420f19d67e"><div class="ttname"><a href="structGCS__MAVLINK.html#aeb3b60569c945ad118e7da420f19d67e">GCS_MAVLINK::magic_force_arm_value</a></div><div class="ttdeci">static constexpr const float magic_force_arm_value</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00659">GCS.h:659</a></div></div>
<div class="ttc" id="classRC__Channel_html_ac3a80b19d42df06b06744464a5643f8f"><div class="ttname"><a href="classRC__Channel.html#ac3a80b19d42df06b06744464a5643f8f">RC_Channel::set_override</a></div><div class="ttdeci">void set_override(const uint16_t v, const uint32_t timestamp_us)</div><div class="ttdef"><b>Definition:</b> <a href="RC__Channel_8cpp_source.html#l00332">RC_Channel.cpp:332</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a27ba0086b1a7777605c001ec7e450427"><div class="ttname"><a href="structGCS__MAVLINK.html#a27ba0086b1a7777605c001ec7e450427">GCS_MAVLINK::_perf_packet_name</a></div><div class="ttdeci">char _perf_packet_name[16]</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00712">GCS.h:712</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a54799f0dccf195b8bdf6d095db0e59ad"><div class="ttname"><a href="structGCS__MAVLINK.html#a54799f0dccf195b8bdf6d095db0e59ad">GCS_MAVLINK::send_global_position_int</a></div><div class="ttdeci">virtual void send_global_position_int()</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l04345">GCS_Common.cpp:4345</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a4902306dab46ff02b2296f99eb1f1c9c"><div class="ttname"><a href="structGCS__MAVLINK.html#a4902306dab46ff02b2296f99eb1f1c9c">GCS_MAVLINK::send_message</a></div><div class="ttdeci">void send_message(enum ap_message id)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l01666">GCS_Common.cpp:1666</a></div></div>
<div class="ttc" id="namespaceAP__HAL_html_a71832f03d849a0c088f04fc98d3c8143"><div class="ttname"><a href="namespaceAP__HAL.html#a71832f03d849a0c088f04fc98d3c8143">AP_HAL::panic</a></div><div class="ttdeci">void panic(const char *errormsg,...) FMT_PRINTF(1</div><div class="ttdef"><b>Definition:</b> <a href="ChibiOS_2system_8cpp_source.html#l00140">system.cpp:140</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_abc79cdd8393234b66f2e8217a527f8f9"><div class="ttname"><a href="structGCS__MAVLINK.html#abc79cdd8393234b66f2e8217a527f8f9">GCS_MAVLINK::handle_command_long</a></div><div class="ttdeci">void handle_command_long(mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l04044">GCS_Common.cpp:4044</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_aa266a88726e518b6c613f0f02252f41c"><div class="ttname"><a href="structGCS__MAVLINK.html#aa266a88726e518b6c613f0f02252f41c">GCS_MAVLINK::handle_command_ack</a></div><div class="ttdeci">virtual void handle_command_ack(const mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l03264">GCS_Common.cpp:3264</a></div></div>
<div class="ttc" id="classMissionItemProtocol_html_af1281432f3f97242df8821a79548b211"><div class="ttname"><a href="classMissionItemProtocol.html#af1281432f3f97242df8821a79548b211">MissionItemProtocol::dest_compid</a></div><div class="ttdeci">uint8_t dest_compid</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00186">GCS.h:186</a></div></div>
<div class="ttc" id="classLocation_html_a0b8a5317ad6b631a7a82c52b258fec1f"><div class="ttname"><a href="classLocation.html#a0b8a5317ad6b631a7a82c52b258fec1f">Location::get_alt_cm</a></div><div class="ttdeci">bool get_alt_cm(AltFrame desired_frame, int32_t &amp;ret_alt_cm) const WARN_IF_UNUSED</div><div class="ttdoc">get altitude in desired frame</div><div class="ttdef"><b>Definition:</b> <a href="Location_8cpp_source.html#l00103">Location.cpp:103</a></div></div>
<div class="ttc" id="namespaceAP_html_a47655f5b6fe937b02c57d7c314ca3587"><div class="ttname"><a href="namespaceAP.html#a47655f5b6fe937b02c57d7c314ca3587">AP::fwversion</a></div><div class="ttdeci">const AP_FWVersion &amp; fwversion()</div><div class="ttdef"><b>Definition:</b> <a href="AP__FWVersion_8cpp_source.html#l00005">AP_FWVersion.cpp:5</a></div></div>
<div class="ttc" id="classAP__BattMonitor_html_a09a8835686a6b936c4240e8a88a38978"><div class="ttname"><a href="classAP__BattMonitor.html#a09a8835686a6b936c4240e8a88a38978">AP_BattMonitor::has_consumed_energy</a></div><div class="ttdeci">bool has_consumed_energy(uint8_t instance) const</div><div class="ttdoc">has_consumed_energy - returns true if battery monitor instance provides consumed energy info</div><div class="ttdef"><b>Definition:</b> <a href="AP__BattMonitor_8cpp_source.html#l00262">AP_BattMonitor.cpp:262</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a562b2955a49da7d782d3f55ed8e021c9"><div class="ttname"><a href="structGCS__MAVLINK.html#a562b2955a49da7d782d3f55ed8e021c9">GCS_MAVLINK::handle_command_preflight_calibration</a></div><div class="ttdeci">virtual MAV_RESULT handle_command_preflight_calibration(const mavlink_command_long_t &amp;packet)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l03698">GCS_Common.cpp:3698</a></div></div>
<div class="ttc" id="classAP__Mission_html_a98d8e4c2901421b06794b6afae94770d"><div class="ttname"><a href="classAP__Mission.html#a98d8e4c2901421b06794b6afae94770d">AP_Mission::convert_MISSION_ITEM_INT_to_MISSION_ITEM</a></div><div class="ttdeci">static MAV_MISSION_RESULT convert_MISSION_ITEM_INT_to_MISSION_ITEM(const mavlink_mission_item_int_t &amp;mission_item_int, mavlink_mission_item_t &amp;mission_item) WARN_IF_UNUSED</div><div class="ttdef"><b>Definition:</b> <a href="AP__Mission_8cpp_source.html#l01071">AP_Mission.cpp:1071</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a54a9bfe37e3928d9145e37cb0a4eb86b"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a54a9bfe37e3928d9145e37cb0a4eb86b">MSG_RC_CHANNELS_RAW</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00046">GCS.h:46</a></div></div>
<div class="ttc" id="classAP__Camera_html_a7c7aa23d1a71db5345bb11899bbb8f31"><div class="ttname"><a href="classAP__Camera.html#a7c7aa23d1a71db5345bb11899bbb8f31">AP_Camera::control</a></div><div class="ttdeci">void control(float session, float zoom_pos, float zoom_step, float focus_lock, float shooting_cmd, float cmd_id)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Camera_8cpp_source.html#l00257">AP_Camera.cpp:257</a></div></div>
<div class="ttc" id="AP__RSSI_8h_html"><div class="ttname"><a href="AP__RSSI_8h.html">AP_RSSI.h</a></div></div>
<div class="ttc" id="classAP__BattMonitor_html_a919b4b473883ce5282efa1e126b2b7ff"><div class="ttname"><a href="classAP__BattMonitor.html#a919b4b473883ce5282efa1e126b2b7ff">AP_BattMonitor::num_instances</a></div><div class="ttdeci">uint8_t num_instances(void) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__BattMonitor_8h_source.html#l00087">AP_BattMonitor.h:87</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a9b46604132c167947d25d2df08e048fe"><div class="ttname"><a href="structGCS__MAVLINK.html#a9b46604132c167947d25d2df08e048fe">GCS_MAVLINK::in_hil_mode</a></div><div class="ttdeci">virtual bool in_hil_mode() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00503">GCS.h:503</a></div></div>
<div class="ttc" id="classAP__HAL_1_1Scheduler_html_a12be479c359367d294348e70efd43e6b"><div class="ttname"><a href="classAP__HAL_1_1Scheduler.html#a12be479c359367d294348e70efd43e6b">AP_HAL::Scheduler::disable_interrupts_save</a></div><div class="ttdeci">virtual void * disable_interrupts_save(void)</div><div class="ttdef"><b>Definition:</b> <a href="Scheduler_8h_source.html#l00081">Scheduler.h:81</a></div></div>
<div class="ttc" id="classAP__BattMonitor_html_a03394a700753687bbb87632743cc2bb3"><div class="ttname"><a href="classAP__BattMonitor.html#a03394a700753687bbb87632743cc2bb3">AP_BattMonitor::voltage</a></div><div class="ttdeci">float voltage(uint8_t instance) const</div><div class="ttdoc">voltage - returns battery voltage in millivolts</div><div class="ttdef"><b>Definition:</b> <a href="AP__BattMonitor_8cpp_source.html#l00284">AP_BattMonitor.cpp:284</a></div></div>
<div class="ttc" id="classAP__HAL_1_1Util_html_a04d41b2013106a8395744b3cf90568f0"><div class="ttname"><a href="classAP__HAL_1_1Util.html#a04d41b2013106a8395744b3cf90568f0">AP_HAL::Util::flash_bootloader</a></div><div class="ttdeci">virtual bool flash_bootloader()</div><div class="ttdef"><b>Definition:</b> <a href="Util_8h_source.html#l00088">Util.h:88</a></div></div>
<div class="ttc" id="classAP__BattMonitor_html_a77b0a6dab6949d6c861811bc29ed7b0b"><div class="ttname"><a href="classAP__BattMonitor.html#a77b0a6dab6949d6c861811bc29ed7b0b">AP_BattMonitor::consumed_mah</a></div><div class="ttdeci">float consumed_mah(uint8_t instance) const</div><div class="ttdoc">consumed_mah - returns total current drawn since start-up in milliampere.hours</div><div class="ttdef"><b>Definition:</b> <a href="AP__BattMonitor_8cpp_source.html#l00314">AP_BattMonitor.cpp:314</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a9f865aa584f4a3bae9946a80367d658e"><div class="ttname"><a href="structGCS__MAVLINK.html#a9f865aa584f4a3bae9946a80367d658e">GCS_MAVLINK::send_textv</a></div><div class="ttdeci">void send_textv(MAV_SEVERITY severity, const char *fmt, va_list arg_list) const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00902">GCS_Common.cpp:902</a></div></div>
<div class="ttc" id="classAP__KDECAN_html_a6b79837c29e1c5d3cf7bc22f7ba4bec5"><div class="ttname"><a href="classAP__KDECAN.html#a6b79837c29e1c5d3cf7bc22f7ba4bec5">AP_KDECAN::run_enumeration</a></div><div class="ttdeci">bool run_enumeration(bool start_stop)</div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a0c78458a0addc976857a39563deab6a7"><div class="ttname"><a href="structGCS__MAVLINK.html#a0c78458a0addc976857a39563deab6a7">GCS_MAVLINK::send_accelcal_vehicle_position</a></div><div class="ttdeci">void send_accelcal_vehicle_position(uint32_t position)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02732">GCS_Common.cpp:2732</a></div></div>
<div class="ttc" id="classAP__InertialSensor_html_ae32fc128098640c8a2592f1e377e274b"><div class="ttname"><a href="classAP__InertialSensor.html#ae32fc128098640c8a2592f1e377e274b">AP_InertialSensor::get_vibration_levels</a></div><div class="ttdeci">Vector3f get_vibration_levels() const</div><div class="ttdef"><b>Definition:</b> <a href="AP__InertialSensor_8h_source.html#l00221">AP_InertialSensor.h:221</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a0f37af5b7e1f3c292add18a81b77f5c1"><div class="ttname"><a href="structGCS__MAVLINK.html#a0f37af5b7e1f3c292add18a81b77f5c1">GCS_MAVLINK::send_scaled_imu</a></div><div class="ttdeci">void send_scaled_imu(uint8_t instance, void(*send_fn)(mavlink_channel_t chan, uint32_t time_ms, int16_t xacc, int16_t yacc, int16_t zacc, int16_t xgyro, int16_t ygyro, int16_t zgyro, int16_t xmag, int16_t ymag, int16_t zmag))</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02005">GCS_Common.cpp:2005</a></div></div>
<div class="ttc" id="structAP__HAL_1_1Util_1_1PersistentData_html_aad66d8d6bbb9ff51d10c38b84fa74824"><div class="ttname"><a href="structAP__HAL_1_1Util_1_1PersistentData.html#aad66d8d6bbb9ff51d10c38b84fa74824">AP_HAL::Util::PersistentData::last_mavlink_cmd</a></div><div class="ttdeci">uint16_t last_mavlink_cmd</div><div class="ttdef"><b>Definition:</b> <a href="Util_8h_source.html#l00065">Util.h:65</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ac70cb2b36ea28b838c8b4cafa3a3f2c7"><div class="ttname"><a href="structGCS__MAVLINK.html#ac70cb2b36ea28b838c8b4cafa3a3f2c7">GCS_MAVLINK::handle_command_get_message_interval</a></div><div class="ttdeci">MAV_RESULT handle_command_get_message_interval(const mavlink_command_long_t &amp;packet)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02629">GCS_Common.cpp:2629</a></div></div>
<div class="ttc" id="classMissionItemProtocol__Waypoints_html_a52f39d336a1735dd0be1fef51b822aca"><div class="ttname"><a href="classMissionItemProtocol__Waypoints.html#a52f39d336a1735dd0be1fef51b822aca">MissionItemProtocol_Waypoints::append_item</a></div><div class="ttdeci">MAV_MISSION_RESULT append_item(const mavlink_mission_item_int_t &amp;) override WARN_IF_UNUSED</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l01041">GCS_Common.cpp:1041</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991aaf685040f895290768639de8386f0f75"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991aaf685040f895290768639de8386f0f75">MSG_HEARTBEAT</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00035">GCS.h:35</a></div></div>
<div class="ttc" id="classAP__AHRS_html_a8a160130dd99016a19abab9d85917261"><div class="ttname"><a href="classAP__AHRS.html#a8a160130dd99016a19abab9d85917261">AP_AHRS::yaw_sensor</a></div><div class="ttdeci">int32_t yaw_sensor</div><div class="ttdef"><b>Definition:</b> <a href="AP__AHRS_8h_source.html#l00227">AP_AHRS.h:227</a></div></div>
<div class="ttc" id="classAP__Airspeed_html_a1f93ae84c30efc1375765b835004e7a9"><div class="ttname"><a href="classAP__Airspeed.html#a1f93ae84c30efc1375765b835004e7a9">AP_Airspeed::healthy</a></div><div class="ttdeci">bool healthy(uint8_t i) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__Airspeed_8h_source.html#l00108">AP_Airspeed.h:108</a></div></div>
<div class="ttc" id="LogStructure_8h_html_abca6b52da10346c72b10dd04698e4420"><div class="ttname"><a href="LogStructure_8h.html#abca6b52da10346c72b10dd04698e4420">LOG_PACKET_HEADER_INIT</a></div><div class="ttdeci">#define LOG_PACKET_HEADER_INIT(id)</div><div class="ttdef"><b>Definition:</b> <a href="LogStructure_8h_source.html#l00110">LogStructure.h:110</a></div></div>
<div class="ttc" id="classAP__AHRS__NavEKF_html_a908ee6995ad1a06f8c9c88d8f185c1af"><div class="ttname"><a href="classAP__AHRS__NavEKF.html#a908ee6995ad1a06f8c9c88d8f185c1af">AP_AHRS_NavEKF::get_velocity_NED</a></div><div class="ttdeci">bool get_velocity_NED(Vector3f &amp;vec) const override</div><div class="ttdef"><b>Definition:</b> <a href="AP__AHRS__NavEKF_8cpp_source.html#l00649">AP_AHRS_NavEKF.cpp:649</a></div></div>
<div class="ttc" id="AP__Gripper_8h_html"><div class="ttname"><a href="AP__Gripper_8h.html">AP_Gripper.h</a></div></div>
<div class="ttc" id="AHRS__Test_8cpp_html_a9fede12aaeb5750bcb131cae0430647c"><div class="ttname"><a href="AHRS__Test_8cpp.html#a9fede12aaeb5750bcb131cae0430647c">logger</a></div><div class="ttdeci">static AP_Logger logger</div><div class="ttdef"><b>Definition:</b> <a href="AHRS__Test_8cpp_source.html#l00029">AHRS_Test.cpp:29</a></div></div>
<div class="ttc" id="namespaceAP_html_acdeafe5406efd2650ba54d24d3aecb7c"><div class="ttname"><a href="namespaceAP.html#acdeafe5406efd2650ba54d24d3aecb7c">AP::scheduler</a></div><div class="ttdeci">AP_Scheduler &amp; scheduler()</div><div class="ttdef"><b>Definition:</b> <a href="AP__Scheduler_8cpp_source.html#l00314">AP_Scheduler.cpp:314</a></div></div>
<div class="ttc" id="classGCS_html_a087d7e22cbeaf19adc59c3057970335a"><div class="ttname"><a href="classGCS.html#a087d7e22cbeaf19adc59c3057970335a">GCS::passthru_timer</a></div><div class="ttdeci">void passthru_timer()</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l04896">GCS_Common.cpp:4896</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a30034cdbd89bcfb86392411f9b5935db"><div class="ttname"><a href="structGCS__MAVLINK.html#a30034cdbd89bcfb86392411f9b5935db">GCS_MAVLINK::try_send_message</a></div><div class="ttdeci">virtual bool try_send_message(enum ap_message id)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l04415">GCS_Common.cpp:4415</a></div></div>
<div class="ttc" id="structAP__Mission_1_1Mission__Command_html_a41a7d992648b468243195e1e0af22f10"><div class="ttname"><a href="structAP__Mission_1_1Mission__Command.html#a41a7d992648b468243195e1e0af22f10">AP_Mission::Mission_Command::content</a></div><div class="ttdeci">Content content</div><div class="ttdef"><b>Definition:</b> <a href="AP__Mission_8h_source.html#l00268">AP_Mission.h:268</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a98e33d770e491a2a3629c547e17d153b"><div class="ttname"><a href="structGCS__MAVLINK.html#a98e33d770e491a2a3629c547e17d153b">GCS_MAVLINK::handle_command_accelcal_vehicle_pos</a></div><div class="ttdeci">MAV_RESULT handle_command_accelcal_vehicle_pos(const mavlink_command_long_t &amp;packet)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l03843">GCS_Common.cpp:3843</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a7a1eccc78139fabd82ca8496ae66f072"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a7a1eccc78139fabd82ca8496ae66f072">MSG_LOCATION</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00037">GCS.h:37</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a053f8e893a061490a9c1fe6c2ae10157"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a053f8e893a061490a9c1fe6c2ae10157">MSG_BATTERY2</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00074">GCS.h:74</a></div></div>
<div class="ttc" id="classAP__AccelCal_html_a5a1f3f9b0c46aa6f245440c0a1a358d7"><div class="ttname"><a href="classAP__AccelCal.html#a5a1f3f9b0c46aa6f245440c0a1a358d7">AP_AccelCal::start</a></div><div class="ttdeci">void start(GCS_MAVLINK *gcs)</div><div class="ttdef"><b>Definition:</b> <a href="AP__AccelCal_8cpp_source.html#l00177">AP_AccelCal.cpp:177</a></div></div>
<div class="ttc" id="classOpticalFlow_html_a4b88fcf8bf529d5250faf5570df1d507"><div class="ttname"><a href="classOpticalFlow.html#a4b88fcf8bf529d5250faf5570df1d507">OpticalFlow::handle_msg</a></div><div class="ttdeci">void handle_msg(const mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="OpticalFlow_8cpp_source.html#l00167">OpticalFlow.cpp:167</a></div></div>
<div class="ttc" id="classGCS_html_adc7c302e95484e1e69d31469263d5cc6"><div class="ttname"><a href="classGCS.html#adc7c302e95484e1e69d31469263d5cc6">GCS::update_passthru</a></div><div class="ttdeci">void update_passthru()</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l04860">GCS_Common.cpp:4860</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ab0f4f231edafcfbbb297a32923ccd3b1"><div class="ttname"><a href="structGCS__MAVLINK.html#ab0f4f231edafcfbbb297a32923ccd3b1">GCS_MAVLINK::send_ahrs</a></div><div class="ttdeci">void send_ahrs()</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02130">GCS_Common.cpp:2130</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a0cddddd51bc5ea4c137c1927d2e34d97"><div class="ttname"><a href="structGCS__MAVLINK.html#a0cddddd51bc5ea4c137c1927d2e34d97">GCS_MAVLINK::handle_common_rally_message</a></div><div class="ttdeci">void handle_common_rally_message(mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Rally_8cpp_source.html#l00088">GCS_Rally.cpp:88</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a5ef68d042e48054de048216ca97475f8"><div class="ttname"><a href="structGCS__MAVLINK.html#a5ef68d042e48054de048216ca97475f8">GCS_MAVLINK::send_ahrs3</a></div><div class="ttdeci">void send_ahrs3()</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00478">GCS_Common.cpp:478</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991ae759c992f698fa86600e959b3358ae9b"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991ae759c992f698fa86600e959b3358ae9b">MSG_GPS2_RTK</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00058">GCS.h:58</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a46d9c40617930f05170da56d37229f42"><div class="ttname"><a href="structGCS__MAVLINK.html#a46d9c40617930f05170da56d37229f42">GCS_MAVLINK::magic_force_disarm_value</a></div><div class="ttdeci">static constexpr const float magic_force_disarm_value</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00660">GCS.h:660</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a9d41c619b9282f98439533324050c99c"><div class="ttname"><a href="structGCS__MAVLINK.html#a9d41c619b9282f98439533324050c99c">GCS_MAVLINK::mavlink_active</a></div><div class="ttdeci">static uint8_t mavlink_active</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00797">GCS.h:797</a></div></div>
<div class="ttc" id="classAP__AHRS_html_a6573f5db06887fb66661ecb18e03ec3f"><div class="ttname"><a href="classAP__AHRS.html#a6573f5db06887fb66661ecb18e03ec3f">AP_AHRS::get_relative_position_D_home</a></div><div class="ttdeci">virtual void get_relative_position_D_home(float &amp;posD) const =0</div></div>
<div class="ttc" id="AP__Camera_8h_html"><div class="ttname"><a href="AP__Camera_8h.html">AP_Camera.h</a></div><div class="ttdoc">Photo or video camera manager, with EEPROM-backed storage of constants.</div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991ad4eedc6e33f030259108cd91c0f33f0a"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991ad4eedc6e33f030259108cd91c0f33f0a">MSG_ATTITUDE</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00036">GCS.h:36</a></div></div>
<div class="ttc" id="namespaceAP_html_ac357c38b6638140c5510e6ba566b998b"><div class="ttname"><a href="namespaceAP.html#ac357c38b6638140c5510e6ba566b998b">AP::rtc</a></div><div class="ttdeci">AP_RTC &amp; rtc()</div><div class="ttdef"><b>Definition:</b> <a href="AP__RTC_8cpp_source.html#l00166">AP_RTC.cpp:166</a></div></div>
<div class="ttc" id="namespaceAP__HAL_html_a8293355e35887733b1fd151aef08a787"><div class="ttname"><a href="namespaceAP__HAL.html#a8293355e35887733b1fd151aef08a787">AP_HAL::micros</a></div><div class="ttdeci">uint32_t micros()</div><div class="ttdef"><b>Definition:</b> <a href="ChibiOS_2system_8cpp_source.html#l00152">system.cpp:152</a></div></div>
<div class="ttc" id="classAP__Param_html_a148701a80b7a045d03afe890265fcbfd"><div class="ttname"><a href="classAP__Param.html#a148701a80b7a045d03afe890265fcbfd">AP_Param::flush</a></div><div class="ttdeci">static void flush(void)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Param_8cpp_source.html#l01117">AP_Param.cpp:1117</a></div></div>
<div class="ttc" id="classNavEKF2_html_aa34de594f36fe0305260e7d98a0a52d1"><div class="ttname"><a href="classNavEKF2.html#aa34de594f36fe0305260e7d98a0a52d1">NavEKF2::getLLH</a></div><div class="ttdeci">bool getLLH(struct Location &amp;loc) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__NavEKF2_8cpp_source.html#l01072">AP_NavEKF2.cpp:1072</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_afe1ee2ae1b71e301868876d261b42a3c"><div class="ttname"><a href="structGCS__MAVLINK.html#afe1ee2ae1b71e301868876d261b42a3c">GCS_MAVLINK::handle_fence_message</a></div><div class="ttdeci">void handle_fence_message(mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Fence_8cpp_source.html#l00024">GCS_Fence.cpp:24</a></div></div>
<div class="ttc" id="structAP__HAL_1_1Util_1_1PersistentData_html_a5affb7c7e7783e0f6aa2fac03231bfc9"><div class="ttname"><a href="structAP__HAL_1_1Util_1_1PersistentData.html#a5affb7c7e7783e0f6aa2fac03231bfc9">AP_HAL::Util::PersistentData::last_mavlink_msgid</a></div><div class="ttdeci">uint16_t last_mavlink_msgid</div><div class="ttdef"><b>Definition:</b> <a href="Util_8h_source.html#l00064">Util.h:64</a></div></div>
<div class="ttc" id="classGCS_html_ae64fa32af9663333bc2477fa5bf7b490"><div class="ttname"><a href="classGCS.html#ae64fa32af9663333bc2477fa5bf7b490">GCS::try_send_queued_message_for_type</a></div><div class="ttdeci">void try_send_queued_message_for_type(MAV_MISSION_TYPE type)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l04201">GCS_Common.cpp:4201</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a69c4fd4a93baf6a354289b08253ca974"><div class="ttname"><a href="structGCS__MAVLINK.html#a69c4fd4a93baf6a354289b08253ca974">GCS_MAVLINK::handle_command_do_gripper</a></div><div class="ttdeci">MAV_RESULT handle_command_do_gripper(const mavlink_command_long_t &amp;packet)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l03813">GCS_Common.cpp:3813</a></div></div>
<div class="ttc" id="GCS__MAVLink_8cpp_html_a2a0fd455fd37f642e9eb67373a14b7d9"><div class="ttname"><a href="GCS__MAVLink_8cpp.html#a2a0fd455fd37f642e9eb67373a14b7d9">comm_get_txspace</a></div><div class="ttdeci">uint16_t comm_get_txspace(mavlink_channel_t chan)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__MAVLink_8cpp_source.html#l00099">GCS_MAVLink.cpp:99</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a3f74dcfb77af6c36c0a56e87959fded3"><div class="ttname"><a href="structGCS__MAVLINK.html#a3f74dcfb77af6c36c0a56e87959fded3">GCS_MAVLINK::handle_vision_position_estimate</a></div><div class="ttdeci">void handle_vision_position_estimate(mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l03141">GCS_Common.cpp:3141</a></div></div>
<div class="ttc" id="namespaceAP_html_aa6f0d760efc796d0ad5345d3acc377b8"><div class="ttname"><a href="namespaceAP.html#aa6f0d760efc796d0ad5345d3acc377b8">AP::mount</a></div><div class="ttdeci">AP_Mount * mount()</div><div class="ttdef"><b>Definition:</b> <a href="AP__Mount_8cpp_source.html#l00704">AP_Mount.cpp:704</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a97b3a94ebc165ee34ee93b26e2dee23d"><div class="ttname"><a href="structGCS__MAVLINK.html#a97b3a94ebc165ee34ee93b26e2dee23d">GCS_MAVLINK::update_send</a></div><div class="ttdeci">void update_send()</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l01430">GCS_Common.cpp:1430</a></div></div>
<div class="ttc" id="rotations_8h_html_a67a250c97139a5466814a54c4aa4a681a5f54415721db8e9248e3f5ec5a89b3cf"><div class="ttname"><a href="rotations_8h.html#a67a250c97139a5466814a54c4aa4a681a5f54415721db8e9248e3f5ec5a89b3cf">ROTATION_PITCH_90</a></div><div class="ttdef"><b>Definition:</b> <a href="rotations_8h_source.html#l00052">rotations.h:52</a></div></div>
<div class="ttc" id="classBitmask_html_a66fc0bea945004ad5a928d3eb31fc628"><div class="ttname"><a href="classBitmask.html#a66fc0bea945004ad5a928d3eb31fc628">Bitmask::count</a></div><div class="ttdeci">uint16_t count() const</div><div class="ttdef"><b>Definition:</b> <a href="Bitmask_8h_source.html#l00101">Bitmask.h:101</a></div></div>
<div class="ttc" id="classMissionItemProtocol_html_a5610350178de3d189f4fa7cda9d61b1d"><div class="ttname"><a href="classMissionItemProtocol.html#a5610350178de3d189f4fa7cda9d61b1d">MissionItemProtocol::handle_mission_clear_all</a></div><div class="ttdeci">void handle_mission_clear_all(const GCS_MAVLINK &amp;link, const mavlink_message_t &amp;msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00826">GCS_Common.cpp:826</a></div></div>
<div class="ttc" id="classAP__Frsky__Telem_html"><div class="ttname"><a href="classAP__Frsky__Telem.html">AP_Frsky_Telem</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__Frsky__Telem_8h_source.html#l00113">AP_Frsky_Telem.h:113</a></div></div>
<div class="ttc" id="classMissionItemProtocol__Waypoints_html_ad4dbe9ab0d79e7c7282cfa13b83b7ade"><div class="ttname"><a href="classMissionItemProtocol__Waypoints.html#ad4dbe9ab0d79e7c7282cfa13b83b7ade">MissionItemProtocol_Waypoints::timeout</a></div><div class="ttdeci">void timeout() override</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l01068">GCS_Common.cpp:1068</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a7fca0791c3a7bcd42e0185784d67c0f3"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a7fca0791c3a7bcd42e0185784d67c0f3">MSG_SCALED_IMU</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00048">GCS.h:48</a></div></div>
<div class="ttc" id="classMissionItemProtocol_html_a9122e2c065e836cac2ca356ef9897590"><div class="ttname"><a href="classMissionItemProtocol.html#a9122e2c065e836cac2ca356ef9897590">MissionItemProtocol::max_items</a></div><div class="ttdeci">virtual uint16_t max_items() const =0</div></div>
<div class="ttc" id="classLocation_html_ae51548c2cf32311043ca19b94b9a9223"><div class="ttname"><a href="classLocation.html#ae51548c2cf32311043ca19b94b9a9223">Location::lat</a></div><div class="ttdeci">int32_t lat</div><div class="ttdef"><b>Definition:</b> <a href="Location_8h_source.html#l00021">Location.h:21</a></div></div>
<div class="ttc" id="classGCS_html_ae29389deb4a918ef036ee5001a5f6797"><div class="ttname"><a href="classGCS.html#ae29389deb4a918ef036ee5001a5f6797">GCS::devo_telemetry</a></div><div class="ttdeci">AP_DEVO_Telem devo_telemetry</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00982">GCS.h:982</a></div></div>
<div class="ttc" id="classVector3_html_adf1769d5ee5df2f8585df2f540fa5efe"><div class="ttname"><a href="classVector3.html#adf1769d5ee5df2f8585df2f540fa5efe">Vector3::zero</a></div><div class="ttdeci">void zero()</div><div class="ttdef"><b>Definition:</b> <a href="vector3_8h_source.html#l00188">vector3.h:188</a></div></div>
<div class="ttc" id="classAP__HAL_1_1Scheduler_html_a19f18a35fab1e36be78b20c6f7bf77d5"><div class="ttname"><a href="classAP__HAL_1_1Scheduler.html#a19f18a35fab1e36be78b20c6f7bf77d5">AP_HAL::Scheduler::in_delay_callback</a></div><div class="ttdeci">virtual bool in_delay_callback() const</div><div class="ttdef"><b>Definition:</b> <a href="Scheduler_8h_source.html#l00052">Scheduler.h:52</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a5c4409683ad502ab3e94b382673a0141"><div class="ttname"><a href="structGCS__MAVLINK.html#a5c4409683ad502ab3e94b382673a0141">GCS_MAVLINK::streamRates</a></div><div class="ttdeci">AP_Int16 streamRates[NUM_STREAMS]</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00527">GCS.h:527</a></div></div>
<div class="ttc" id="classAP__HAL_1_1HAL_html_a94ab41309b1ff10b8b862b826e59c882"><div class="ttname"><a href="classAP__HAL_1_1HAL.html#a94ab41309b1ff10b8b862b826e59c882">AP_HAL::HAL::scheduler</a></div><div class="ttdeci">AP_HAL::Scheduler * scheduler</div><div class="ttdef"><b>Definition:</b> <a href="HAL_8h_source.html#l00114">HAL.h:114</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a3c88ebe543de65cbff2cda10622c016f"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a3c88ebe543de65cbff2cda10622c016f">MSG_MAG_CAL_PROGRESS</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00079">GCS.h:79</a></div></div>
<div class="ttc" id="structAP__Mission_1_1Mission__Command_html_a272ab59936fd9d78bb5898b4b53ba688"><div class="ttname"><a href="structAP__Mission_1_1Mission__Command.html#a272ab59936fd9d78bb5898b4b53ba688">AP_Mission::Mission_Command::id</a></div><div class="ttdeci">uint16_t id</div><div class="ttdef"><b>Definition:</b> <a href="AP__Mission_8h_source.html#l00266">AP_Mission.h:266</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a4aa7860d644a9d699bc80cb6c9bd76e4"><div class="ttname"><a href="structGCS__MAVLINK.html#a4aa7860d644a9d699bc80cb6c9bd76e4">GCS_MAVLINK::timesync_timestamp_ns</a></div><div class="ttdeci">uint64_t timesync_timestamp_ns() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02903">GCS_Common.cpp:2903</a></div></div>
<div class="ttc" id="classBitmask_html_a6d942e61abc55c452b001b11dadf8a18"><div class="ttname"><a href="classBitmask.html#a6d942e61abc55c452b001b11dadf8a18">Bitmask::set</a></div><div class="ttdeci">void set(uint16_t bit)</div><div class="ttdef"><b>Definition:</b> <a href="Bitmask_8h_source.html#l00043">Bitmask.h:43</a></div></div>
<div class="ttc" id="classAP__Logger_html_ab72f6a6fdb1a23d793e37725f68b98c2"><div class="ttname"><a href="classAP__Logger.html#ab72f6a6fdb1a23d793e37725f68b98c2">AP_Logger::Write_Message</a></div><div class="ttdeci">void Write_Message(const char *message)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Logger_8cpp_source.html#l00690">AP_Logger.cpp:690</a></div></div>
<div class="ttc" id="classAP__Mission_html_a74f49ceedab01ca1503d6532370298fa"><div class="ttname"><a href="classAP__Mission.html#a74f49ceedab01ca1503d6532370298fa">AP_Mission::replace_cmd</a></div><div class="ttdeci">bool replace_cmd(uint16_t index, const Mission_Command &amp;cmd)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Mission_8cpp_source.html#l00330">AP_Mission.cpp:330</a></div></div>
<div class="ttc" id="classVector3_html_a1a0f7e168c71ca798099f0ba8a444244"><div class="ttname"><a href="classVector3.html#a1a0f7e168c71ca798099f0ba8a444244">Vector3::x</a></div><div class="ttdeci">T x</div><div class="ttdef"><b>Definition:</b> <a href="vector3_8h_source.html#l00067">vector3.h:67</a></div></div>
<div class="ttc" id="classAP__SerialManager_html_abba6683a5a75d7ff52584586755237dc"><div class="ttname"><a href="classAP__SerialManager.html#abba6683a5a75d7ff52584586755237dc">AP_SerialManager::disable_passthru</a></div><div class="ttdeci">void disable_passthru(void)</div><div class="ttdef"><b>Definition:</b> <a href="AP__SerialManager_8cpp_source.html#l00553">AP_SerialManager.cpp:553</a></div></div>
<div class="ttc" id="classAP__InertialSensor_html_a8ca2cbf528de2276d1be01c00243db0d"><div class="ttname"><a href="classAP__InertialSensor.html#a8ca2cbf528de2276d1be01c00243db0d">AP_InertialSensor::get_accel_count</a></div><div class="ttdeci">uint8_t get_accel_count(void) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__InertialSensor_8h_source.html#l00142">AP_InertialSensor.h:142</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_ae94077536892270b4a40e5bcddb1c2f9"><div class="ttname"><a href="structGCS__MAVLINK.html#ae94077536892270b4a40e5bcddb1c2f9">GCS_MAVLINK::do_try_send_message</a></div><div class="ttdeci">bool do_try_send_message(const ap_message id)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l01349">GCS_Common.cpp:1349</a></div></div>
<div class="ttc" id="classAP__SerialManager_html_a58cb32ebb77d9fc18e4756d0270d1970"><div class="ttname"><a href="classAP__SerialManager.html#a58cb32ebb77d9fc18e4756d0270d1970">AP_SerialManager::find_serial</a></div><div class="ttdeci">AP_HAL::UARTDriver * find_serial(enum SerialProtocol protocol, uint8_t instance) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__SerialManager_8cpp_source.html#l00389">AP_SerialManager.cpp:389</a></div></div>
<div class="ttc" id="classAP__RangeFinder__Backend_html_ab0fd7bcbd2b19332aef770b80045fd53"><div class="ttname"><a href="classAP__RangeFinder__Backend.html#ab0fd7bcbd2b19332aef770b80045fd53">AP_RangeFinder_Backend::max_distance_cm</a></div><div class="ttdeci">int16_t max_distance_cm() const</div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder__Backend_8h_source.html#l00039">RangeFinder_Backend.h:39</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a0c4a10cdb6c785e8466a81afe1f32cdd"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a0c4a10cdb6c785e8466a81afe1f32cdd">MSG_TERRAIN</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00073">GCS.h:73</a></div></div>
<div class="ttc" id="classAP__AHRS__NavEKF_html_a355d8890ddfaadaa9d8f694f780afbe6"><div class="ttname"><a href="classAP__AHRS__NavEKF.html#a355d8890ddfaadaa9d8f694f780afbe6">AP_AHRS_NavEKF::get_gyro_drift</a></div><div class="ttdeci">const Vector3f &amp; get_gyro_drift(void) const override</div><div class="ttdef"><b>Definition:</b> <a href="AP__AHRS__NavEKF_8cpp_source.html#l00066">AP_AHRS_NavEKF.cpp:66</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a747e5080afc71eee57f6c2fc58754004"><div class="ttname"><a href="structGCS__MAVLINK.html#a747e5080afc71eee57f6c2fc58754004">GCS_MAVLINK::send_home_position</a></div><div class="ttdeci">void send_home_position() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02520">GCS_Common.cpp:2520</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a2d81f25058bd85a4f7e75634050c4cb1"><div class="ttname"><a href="structGCS__MAVLINK.html#a2d81f25058bd85a4f7e75634050c4cb1">GCS_MAVLINK::vfr_hud_climbrate</a></div><div class="ttdeci">virtual float vfr_hud_climbrate() const</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02759">GCS_Common.cpp:2759</a></div></div>
<div class="ttc" id="classAP__BattMonitor_html_aea31203d084bf8a2e1c4e65c2598e6b7"><div class="ttname"><a href="classAP__BattMonitor.html#aea31203d084bf8a2e1c4e65c2598e6b7">AP_BattMonitor::get_cell_voltages</a></div><div class="ttdeci">const cells &amp; get_cell_voltages() const</div><div class="ttdef"><b>Definition:</b> <a href="AP__BattMonitor_8h_source.html#l00153">AP_BattMonitor.h:153</a></div></div>
<div class="ttc" id="classAP__Param_html_a5f6dcfce1c0a79cf5bd81283e22f3201"><div class="ttname"><a href="classAP__Param.html#a5f6dcfce1c0a79cf5bd81283e22f3201">AP_Param::setup_object_defaults</a></div><div class="ttdeci">static void setup_object_defaults(const void *object_pointer, const struct GroupInfo *group_info)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Param_8cpp_source.html#l01265">AP_Param.cpp:1265</a></div></div>
<div class="ttc" id="classAP__InternalError_html_a4396aa49ba2d14f80df61bfbd9c17de3"><div class="ttname"><a href="classAP__InternalError.html#a4396aa49ba2d14f80df61bfbd9c17de3">AP_InternalError::errors</a></div><div class="ttdeci">uint32_t errors() const</div><div class="ttdef"><b>Definition:</b> <a href="AP__InternalError_8h_source.html#l00061">AP_InternalError.h:61</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_aa5be0175cd3488cff905d41913f8fd3f"><div class="ttname"><a href="structGCS__MAVLINK.html#aa5be0175cd3488cff905d41913f8fd3f">GCS_MAVLINK::send_sys_status</a></div><div class="ttdeci">void send_sys_status()</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l04270">GCS_Common.cpp:4270</a></div></div>
<div class="ttc" id="classAP__FWVersion_html_a174b8a0cb51d52f229d9796059c01f0b"><div class="ttname"><a href="classAP__FWVersion.html#a174b8a0cb51d52f229d9796059c01f0b">AP_FWVersion::os_sw_version</a></div><div class="ttdeci">const uint32_t os_sw_version</div><div class="ttdef"><b>Definition:</b> <a href="AP__FWVersion_8h_source.html#l00020">AP_FWVersion.h:20</a></div></div>
<div class="ttc" id="classAP__KDECAN_html_a8d99a9dbc51b39edc73b1a1d3689826e"><div class="ttname"><a href="classAP__KDECAN.html#a8d99a9dbc51b39edc73b1a1d3689826e">AP_KDECAN::send_mavlink</a></div><div class="ttdeci">void send_mavlink(uint8_t chan)</div></div>
<div class="ttc" id="classAP__HAL_1_1HAL_html_a48a758dbd587c916aa4f5ea5ae9521e4"><div class="ttname"><a href="classAP__HAL_1_1HAL.html#a48a758dbd587c916aa4f5ea5ae9521e4">AP_HAL::HAL::analogin</a></div><div class="ttdeci">AP_HAL::AnalogIn * analogin</div><div class="ttdef"><b>Definition:</b> <a href="HAL_8h_source.html#l00108">HAL.h:108</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_acfc1187142442967f8373970d0d5f408"><div class="ttname"><a href="structGCS__MAVLINK.html#acfc1187142442967f8373970d0d5f408">GCS_MAVLINK::handle_flight_termination</a></div><div class="ttdeci">virtual MAV_RESULT handle_flight_termination(const mavlink_command_long_t &amp;packet)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l02865">GCS_Common.cpp:2865</a></div></div>
<div class="ttc" id="GCS__Common_8cpp_html_ae08c3ca4ba26b63cda0bb3e3c6c02785"><div class="ttname"><a href="GCS__Common_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a></div><div class="ttdeci">const AP_HAL::HAL &amp; hal</div><div class="ttdef"><b>Definition:</b> <a href="AC__PID__test_8cpp_source.html#l00021">AC_PID_test.cpp:21</a></div></div>
<div class="ttc" id="GCS_8h_html_abeccfcc1b97df359517df10fa4209991a9e75afa34cdb7e71a4f6069d53e84b27"><div class="ttname"><a href="GCS_8h.html#abeccfcc1b97df359517df10fa4209991a9e75afa34cdb7e71a4f6069d53e84b27">MSG_NEXT_MISSION_REQUEST_RALLY</a></div><div class="ttdef"><b>Definition:</b> <a href="GCS_8h_source.html#l00062">GCS.h:62</a></div></div>
<div class="ttc" id="structGCS__MAVLINK_html_a77d0ba68a753475e530318db583575a4"><div class="ttname"><a href="structGCS__MAVLINK.html#a77d0ba68a753475e530318db583575a4">GCS_MAVLINK::handle_mission_request_list</a></div><div class="ttdeci">void handle_mission_request_list(const mavlink_message_t *msg)</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l00513">GCS_Common.cpp:513</a></div></div>
<div class="ttc" id="structAP__Mission_1_1Jump__Command_html_a76ee1d372eb1fc2bf12b1f6daf661bd7"><div class="ttname"><a href="structAP__Mission_1_1Jump__Command.html#a76ee1d372eb1fc2bf12b1f6daf661bd7">AP_Mission::Jump_Command::target</a></div><div class="ttdeci">uint16_t target</div><div class="ttdef"><b>Definition:</b> <a href="AP__Mission_8h_source.html#l00050">AP_Mission.h:50</a></div></div>
<div class="ttc" id="classMissionItemProtocol_html_a6fbc4c50f6d6dc42d4ca7bae23a39bf4"><div class="ttname"><a href="classMissionItemProtocol.html#a6fbc4c50f6d6dc42d4ca7bae23a39bf4">MissionItemProtocol::mission_type</a></div><div class="ttdeci">virtual MAV_MISSION_TYPE mission_type() const =0</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Jul 11 2019 14:17:37 for APM:Libraries by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
