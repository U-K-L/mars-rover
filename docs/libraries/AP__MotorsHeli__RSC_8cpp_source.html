<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>APM:Libraries: libraries/AP_Motors/AP_MotorsHeli_RSC.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">APM:Libraries
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_bc0718b08fb2015b8e59c47b2805f60c.html">libraries</a></li><li class="navelem"><a class="el" href="dir_e2208a4dfd218f697a2a26cf1e819f73.html">AP_Motors</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">AP_MotorsHeli_RSC.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="AP__MotorsHeli__RSC_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">   This program is free software: you can redistribute it and/or modify</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">   it under the terms of the GNU General Public License as published by</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">   the Free Software Foundation, either version 3 of the License, or</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">   (at your option) any later version.</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">   This program is distributed in the hope that it will be useful,</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">   GNU General Public License for more details.</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">   You should have received a copy of the GNU General Public License</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">   along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="AP__HAL_8h.html">AP_HAL/AP_HAL.h</a>&gt;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AP__MotorsHeli__RSC_8h.html">AP_MotorsHeli_RSC.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> <a class="code" href="classAP__HAL_1_1HAL.html">AP_HAL::HAL</a>&amp; <a class="code" href="AP__MotorsHeli__RSC_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>;</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="keyword">const</span> <a class="code" href="structAP__Param_1_1GroupInfo.html">AP_Param::GroupInfo</a> <a class="code" href="classRSCThrCrvParam.html#ab75a8e85bd9d121fbb87727bf290ad88">RSCThrCrvParam::var_info</a>[] = {</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    <span class="comment">// @Param: ENABLE</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    <span class="comment">// @DisplayName: Enable settings for RSC Setpoint</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    <span class="comment">// @Description: Automatically set when RSC Setpoint mode is selected. Should not be set manually.</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <span class="comment">// @Values: 0:Disabled,1:Enabled</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    <span class="comment">// @User: Advanced</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <a class="code" href="AP__Param_8h.html#ac24e2eb16c2194e975d27e47ddcb7f1c">AP_GROUPINFO_FLAGS</a>(<span class="stringliteral">&quot;ENABLE&quot;</span>, 1, <a class="code" href="classRSCThrCrvParam.html">RSCThrCrvParam</a>, enable, 0, <a class="code" href="AP__Param_8h.html#ae25c1c7495435989f8be5781c86be078">AP_PARAM_FLAG_ENABLE</a>),</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <span class="comment">// @Param: 000</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <span class="comment">// @DisplayName: Throttle Servo Position in percent for 0 percent collective</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <span class="comment">// @Description: Throttle Servo Position in percent for 0 percent collective. This is on a scale from 0 to 100, where 100 is full throttle and 0 is zero throttle. Actual PWM values are controlled by SERVOX_MIN and SERVOX_MAX. The 0 percent collective is defined by H_COL_MIN and 100 percent collective is defined by H_COL_MAX.</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <span class="comment">// @Range: 0 100</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="comment">// @Increment: 1</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="comment">// @User: Standard</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <a class="code" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;000&quot;</span>, 2, <a class="code" href="classRSCThrCrvParam.html">RSCThrCrvParam</a>, thrcrv[0], <a class="code" href="AP__MotorsHeli__RSC_8h.html#a572f1a478ae3f785f932bf412fddf83a">AP_MOTORS_HELI_RSC_THRCRV_0_DEFAULT</a>),</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="comment">// @Param: 025</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="comment">// @DisplayName: Throttle Servo Position in percent for 25 percent collective</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="comment">// @Description: Throttle Servo Position in percent for 25 percent collective. This is on a scale from 0 to 100, where 100 is full throttle and 0 is zero throttle. Actual PWM values are controlled by SERVOX_MIN and SERVOX_MAX. The 0 percent collective is defined by H_COL_MIN and 100 percent collective is defined by H_COL_MAX.</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="comment">// @Range: 0 100</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="comment">// @Increment: 1</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="comment">// @User: Standard</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <a class="code" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;025&quot;</span>, 3, <a class="code" href="classRSCThrCrvParam.html">RSCThrCrvParam</a>, thrcrv[1], <a class="code" href="AP__MotorsHeli__RSC_8h.html#a721ed001a96e0fcdd8fe494f21bf3961">AP_MOTORS_HELI_RSC_THRCRV_25_DEFAULT</a>),</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="comment">// @Param: 050</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="comment">// @DisplayName: Throttle Servo Position in percent for 50 percent collective</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="comment">// @Description: Throttle Servo Position in percent for 50 percent collective. This is on a scale from 0 to 100, where 100 is full throttle and 0 is zero throttle. Actual PWM values are controlled by SERVOX_MIN and SERVOX_MAX. The 0 percent collective is defined by H_COL_MIN and 100 percent collective is defined by H_COL_MAX.</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="comment">// @Range: 0 100</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="comment">// @Increment: 1</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="comment">// @User: Standard</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <a class="code" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;050&quot;</span>, 4, <a class="code" href="classRSCThrCrvParam.html">RSCThrCrvParam</a>, thrcrv[2], <a class="code" href="AP__MotorsHeli__RSC_8h.html#a43090dc67863b008bfca29ebcea483eb">AP_MOTORS_HELI_RSC_THRCRV_50_DEFAULT</a>),</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="comment">// @Param: 075</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="comment">// @DisplayName: Throttle Servo Position in percent for 75 percent collective</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="comment">// @Description: Throttle Servo Position in percent for 75 percent collective. This is on a scale from 0 to 100, where 100 is full throttle and 0 is zero throttle. Actual PWM values are controlled by SERVOX_MIN and SERVOX_MAX. The 0 percent collective is defined by H_COL_MIN and 100 percent collective is defined by H_COL_MAX.</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="comment">// @Range: 0 100</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="comment">// @Increment: 1</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="comment">// @User: Standard</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <a class="code" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;075&quot;</span>, 5, <a class="code" href="classRSCThrCrvParam.html">RSCThrCrvParam</a>, thrcrv[3], <a class="code" href="AP__MotorsHeli__RSC_8h.html#af43ed21e778cfd1c1d117a96aac4749f">AP_MOTORS_HELI_RSC_THRCRV_75_DEFAULT</a>),</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="comment">// @Param: 100</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="comment">// @DisplayName: Throttle Servo Position in percent for 100 percent collective</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="comment">// @Description: Throttle Servo Position in percent for 100 percent collective. This is on a scale from 0 to 100, where 100 is full throttle and 0 is zero throttle. Actual PWM values are controlled by SERVOX_MIN and SERVOX_MAX. The 0 percent collective is defined by H_COL_MIN and 100 percent collective is defined by H_COL_MAX.</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="comment">// @Range: 0 100</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="comment">// @Increment: 1</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="comment">// @User: Standard</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <a class="code" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;100&quot;</span>, 6, <a class="code" href="classRSCThrCrvParam.html">RSCThrCrvParam</a>, thrcrv[4], <a class="code" href="AP__MotorsHeli__RSC_8h.html#af1dcf4d30e56da103805c431bf42c466">AP_MOTORS_HELI_RSC_THRCRV_100_DEFAULT</a>),</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <a class="code" href="AP__Param_8h.html#a0f9acb038a5283b964b862aea8cc5051">AP_GROUPEND</a></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;};</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="keyword">const</span> <a class="code" href="structAP__Param_1_1GroupInfo.html">AP_Param::GroupInfo</a> <a class="code" href="classRSCGovParam.html#ae69ba5cf833fb8eaa27b32c06a16d739">RSCGovParam::var_info</a>[] = {</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="comment">// @Param: ENABLE</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="comment">// @DisplayName: Enable settings for RSC Governor</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="comment">// @Description: Automatically set when RSC Governor mode is selected. Should not be set manually.</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="comment">// @Values: 0:Disabled,1:Enabled</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="comment">// @User: Advanced</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <a class="code" href="AP__Param_8h.html#ac24e2eb16c2194e975d27e47ddcb7f1c">AP_GROUPINFO_FLAGS</a>(<span class="stringliteral">&quot;ENABLE&quot;</span>, 1, <a class="code" href="classRSCGovParam.html">RSCGovParam</a>, enable, 0, <a class="code" href="AP__Param_8h.html#ae25c1c7495435989f8be5781c86be078">AP_PARAM_FLAG_ENABLE</a>),</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="comment">// @Param: SETPNT</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="comment">// @DisplayName: Governor RPM Reference Setting</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="comment">// @Description: Main rotor rpm setting that governor maintains when engaged</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="comment">// @Range: 800 3500</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="comment">// @Increment: 10</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="comment">// @User: Standard</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <a class="code" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;SETPNT&quot;</span>, 2, <a class="code" href="classRSCGovParam.html">RSCGovParam</a>, reference, <a class="code" href="AP__MotorsHeli__RSC_8h.html#a2f64b3e40bb67c38d9147f477976f6c0">AP_MOTORS_HELI_RSC_GOVERNOR_SETPNT_DEFAULT</a>),</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="comment">// @Param: DISGAG</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="comment">// @DisplayName: Throttle Percentage for Governor Disengage</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="comment">// @Description: Percentage of throttle where the governor will disenage to allow return to flight idle power</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="comment">// @Range: 0 50</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="comment">// @Increment: 1</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="comment">// @User: Standard</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <a class="code" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;DISGAG&quot;</span>, 3, <a class="code" href="classRSCGovParam.html">RSCGovParam</a>, disengage, <a class="code" href="AP__MotorsHeli__RSC_8h.html#ad7f80174508128e686513a0058b7b5bc">AP_MOTORS_HELI_RSC_GOVERNOR_DISENGAGE_DEFAULT</a>),</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="comment">// @Param: DROOP</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="comment">// @DisplayName: Governor Droop Response Setting</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="comment">// @Description: Governor droop response under load, 0-100%. Higher value is quicker response but may cause surging</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="comment">// @Range: 0 100</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="comment">// @Increment: 1</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="comment">// @User: Standard</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <a class="code" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;DROOP&quot;</span>, 4, <a class="code" href="classRSCGovParam.html">RSCGovParam</a>, droop_response, <a class="code" href="AP__MotorsHeli__RSC_8h.html#a48c3244a3e5ecae4ea8285e28204d36f">AP_MOTORS_HELI_RSC_GOVERNOR_DROOP_DEFAULT</a>),</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="comment">// @Param: THRCURVE</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="comment">// @DisplayName: Governor Throttle Curve Gain</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="comment">// @Description: Percentage of throttle curve gain in governor output</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="comment">// @Range: 50 100</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="comment">// @Increment: 1</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="comment">// @User: Standard</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;THRCURVE&quot;</span>, 5, <a class="code" href="classRSCGovParam.html">RSCGovParam</a>, thrcurve, <a class="code" href="AP__MotorsHeli__RSC_8h.html#a270819e2404c50c4844e0f832809eb73">AP_MOTORS_HELI_RSC_GOVERNOR_THRCURVE_DEFAULT</a>),</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    </div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="comment">// @Param: RANGE</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="comment">// @DisplayName: Governor Operational Range</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="comment">// @Description: RPM range +/- governor rpm reference setting where governor is operational. If speed sensor fails or rpm falls outside of this range, the governor will disengage and return to throttle curve. Recommended range is 100</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="comment">// @Range: 50 200</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="comment">// @Increment: 10</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="comment">// @User: Standard</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <a class="code" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;RANGE&quot;</span>, 6, <a class="code" href="classRSCGovParam.html">RSCGovParam</a>, <a class="code" href="structrange.html">range</a>, <a class="code" href="AP__MotorsHeli__RSC_8h.html#a8d261bf00472436e2b0793ae95f28b58">AP_MOTORS_HELI_RSC_GOVERNOR_RANGE_DEFAULT</a>),</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <a class="code" href="AP__Param_8h.html#a0f9acb038a5283b964b862aea8cc5051">AP_GROUPEND</a></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;};</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="classRSCThrCrvParam.html#a12be3c0e38ac22f6e0c0b5b2d9e486c6">  127</a></span>&#160;<a class="code" href="classRSCThrCrvParam.html#a12be3c0e38ac22f6e0c0b5b2d9e486c6">RSCThrCrvParam::RSCThrCrvParam</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;{</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <a class="code" href="classAP__Param.html#a5f6dcfce1c0a79cf5bd81283e22f3201">AP_Param::setup_object_defaults</a>(<span class="keyword">this</span>, <a class="code" href="classRSCThrCrvParam.html#ab75a8e85bd9d121fbb87727bf290ad88">var_info</a>);</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;}</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="classRSCGovParam.html#a0ba4ae6752f5e648a5958f8df38b1386">  132</a></span>&#160;<a class="code" href="classRSCGovParam.html#a0ba4ae6752f5e648a5958f8df38b1386">RSCGovParam::RSCGovParam</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;{</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <a class="code" href="classAP__Param.html#a5f6dcfce1c0a79cf5bd81283e22f3201">AP_Param::setup_object_defaults</a>(<span class="keyword">this</span>, <a class="code" href="classRSCGovParam.html#ae69ba5cf833fb8eaa27b32c06a16d739">var_info</a>);</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;}</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">// init_servo - servo initialization on start-up</span></div><div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="classAP__MotorsHeli__RSC.html#aeb6143de2bc88e0540acd68349f61c73">  138</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classAP__MotorsHeli__RSC.html#aeb6143de2bc88e0540acd68349f61c73">AP_MotorsHeli_RSC::init_servo</a>()</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;{</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="comment">// setup RSC on specified channel by default</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <a class="code" href="classSRV__Channels.html#a97577ca02c12e3b851cd5d563d32b640">SRV_Channels::set_aux_channel_default</a>(<a class="code" href="classAP__MotorsHeli__RSC.html#a07de7f2e07bedcff45425018318ee372">_aux_fn</a>, <a class="code" href="classAP__MotorsHeli__RSC.html#a51c1e6ae10202b68f11b9da049406808">_default_channel</a>);</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="comment">// set servo range </span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <a class="code" href="classSRV__Channels.html#adba039e2df3bb2c744f8b8590581827f">SRV_Channels::set_range</a>(<a class="code" href="classSRV__Channels.html#acab9e1aba9fcbde6e598169af5b3181f">SRV_Channels::get_motor_function</a>(<a class="code" href="classAP__MotorsHeli__RSC.html#a07de7f2e07bedcff45425018318ee372">_aux_fn</a>), 1000);</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;}</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">// set_power_output_range</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">// TODO: Look at possibly calling this at a slower rate.  Doesn&#39;t need to be called every cycle.</span></div><div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="classAP__MotorsHeli__RSC.html#a58cc58b687e1a3fd1b2ddc6f96cdd2c8">  150</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classAP__MotorsHeli__RSC.html#a58cc58b687e1a3fd1b2ddc6f96cdd2c8">AP_MotorsHeli_RSC::set_throttle_curve</a>(<span class="keywordtype">float</span> thrcrv[5])</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;{</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="comment">// Ensure user inputs are within parameter limits</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; 5; i++) {</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        thrcrv[i] = <a class="code" href="AP__Math_8h.html#ad525609d9dba6ffa556a0fbf08a3f9b4">constrain_float</a>(thrcrv[i], 0.0<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>, 1.0<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>);</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    }</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="comment">// Calculate the spline polynomials for the throttle curve</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <a class="code" href="spline5_8cpp.html#a612a0aade79b929f0031b3167ebedf9b">splinterp5</a>(thrcrv,<a class="code" href="classAP__MotorsHeli__RSC.html#a57f0b28d6a1b23c02c4fa8b26766f532">_thrcrv_poly</a>);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;}</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">// output - update value to send to ESC/Servo</span></div><div class="line"><a name="l00163"></a><span class="lineno"><a class="line" href="classAP__MotorsHeli__RSC.html#ab23a1aebfd83a9e76acf076a2f15841b">  163</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classAP__MotorsHeli__RSC.html#ab23a1aebfd83a9e76acf076a2f15841b">AP_MotorsHeli_RSC::output</a>(<a class="code" href="AP__MotorsHeli__RSC_8h.html#a844404bedbaf4aa206880965cd7610f7">RotorControlState</a> <a class="code" href="main_8c.html#a8d04d02fe8bb190484bba202fee18f5c">state</a>)</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;{</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordtype">float</span> dt;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    uint64_t now = <a class="code" href="namespaceAP__HAL.html#a7aa0ce7625c9680e30ff4a99940907a5">AP_HAL::micros64</a>();</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keywordtype">float</span> last_control_output = <a class="code" href="classAP__MotorsHeli__RSC.html#a06b4a8eb3f3c0c9ab5b4069a4c17e574">_control_output</a>;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classAP__MotorsHeli__RSC.html#a3a15dfa9030fc0761bb2b71c9167ed33">_last_update_us</a> == 0) {</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <a class="code" href="classAP__MotorsHeli__RSC.html#a3a15dfa9030fc0761bb2b71c9167ed33">_last_update_us</a> = now;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        dt = 0.001f;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        dt = 1.0e-6<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a> * (now - <a class="code" href="classAP__MotorsHeli__RSC.html#a3a15dfa9030fc0761bb2b71c9167ed33">_last_update_us</a>);</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <a class="code" href="classAP__MotorsHeli__RSC.html#a3a15dfa9030fc0761bb2b71c9167ed33">_last_update_us</a> = now;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    }</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="main_8c.html#a8d04d02fe8bb190484bba202fee18f5c">state</a>){</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="AP__MotorsHeli__RSC_8h.html#a844404bedbaf4aa206880965cd7610f7a2b2787ba5059cf8f33966685149a5407">ROTOR_CONTROL_STOP</a>:</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            <span class="comment">// set rotor ramp to decrease speed to zero, this happens instantly inside update_rotor_ramp()</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            <a class="code" href="classAP__MotorsHeli__RSC.html#a8c338a29acf0a61d814af3a298f89594">update_rotor_ramp</a>(0.0<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>, dt);</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            <span class="comment">// control output forced to zero</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            <a class="code" href="classAP__MotorsHeli__RSC.html#a06b4a8eb3f3c0c9ab5b4069a4c17e574">_control_output</a> = 0.0f;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="AP__MotorsHeli__RSC_8h.html#a844404bedbaf4aa206880965cd7610f7a9bc857733cdb5b5956b9c23faff15db9">ROTOR_CONTROL_IDLE</a>:</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            <span class="comment">// set rotor ramp to decrease speed to zero</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            <a class="code" href="classAP__MotorsHeli__RSC.html#a8c338a29acf0a61d814af3a298f89594">update_rotor_ramp</a>(0.0<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>, dt);</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            <span class="comment">// set rotor control speed to idle speed parameter, this happens instantly and ignore ramping</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            <a class="code" href="classAP__MotorsHeli__RSC.html#a06b4a8eb3f3c0c9ab5b4069a4c17e574">_control_output</a> = <a class="code" href="classAP__MotorsHeli__RSC.html#a8995396a1ba103a94eae256280e83178">_idle_output</a>;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="AP__MotorsHeli__RSC_8h.html#a844404bedbaf4aa206880965cd7610f7a9459be5b23c6dd7c9fab0d75e89673ec">ROTOR_CONTROL_ACTIVE</a>:</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            <span class="comment">// set main rotor ramp to increase to full speed</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            <a class="code" href="classAP__MotorsHeli__RSC.html#a8c338a29acf0a61d814af3a298f89594">update_rotor_ramp</a>(1.0<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>, dt);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            <span class="keywordflow">if</span> ((<a class="code" href="classAP__MotorsHeli__RSC.html#a3d10c147436ec37bff6f60308cd5903c">_control_mode</a> == <a class="code" href="AP__MotorsHeli__RSC_8h.html#a36de13430db64e7068d0522f9dc24b96a54c5cd5bd58f29be4b0bec3305fdddd0">ROTOR_CONTROL_MODE_SPEED_PASSTHROUGH</a>) || (<a class="code" href="classAP__MotorsHeli__RSC.html#a3d10c147436ec37bff6f60308cd5903c">_control_mode</a> == <a class="code" href="AP__MotorsHeli__RSC_8h.html#a36de13430db64e7068d0522f9dc24b96ae275a6c86c99cd83beeeca5a0d82e535">ROTOR_CONTROL_MODE_SPEED_SETPOINT</a>)) {</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                <span class="comment">// set control rotor speed to ramp slewed value between idle and desired speed</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                <a class="code" href="classAP__MotorsHeli__RSC.html#a06b4a8eb3f3c0c9ab5b4069a4c17e574">_control_output</a> = <a class="code" href="classAP__MotorsHeli__RSC.html#a8995396a1ba103a94eae256280e83178">_idle_output</a> + (<a class="code" href="classAP__MotorsHeli__RSC.html#a438d0f3ab3ec2f11b8beedf05d72dbb4">_rotor_ramp_output</a> * (<a class="code" href="classAP__MotorsHeli__RSC.html#a30a21afe8ee1690d2a60e81c0b82df4c">_desired_speed</a> - <a class="code" href="classAP__MotorsHeli__RSC.html#a8995396a1ba103a94eae256280e83178">_idle_output</a>));</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classAP__MotorsHeli__RSC.html#a3d10c147436ec37bff6f60308cd5903c">_control_mode</a> == <a class="code" href="AP__MotorsHeli__RSC_8h.html#a36de13430db64e7068d0522f9dc24b96a7cd1d8a1939b3214f58d196a6ac5ff2a">ROTOR_CONTROL_MODE_OPEN_LOOP_POWER_OUTPUT</a>) {</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                <span class="comment">// throttle output from throttle curve based on collective position</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                <span class="keywordtype">float</span> desired_throttle = <a class="code" href="classAP__MotorsHeli__RSC.html#ad6a10fa435961788ec2791a661c5d2f7">calculate_desired_throttle</a>(<a class="code" href="classAP__MotorsHeli__RSC.html#a96030fe9edba894c9b2cb2ed39c00ac7">_collective_in</a>);</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                <a class="code" href="classAP__MotorsHeli__RSC.html#a06b4a8eb3f3c0c9ab5b4069a4c17e574">_control_output</a> = <a class="code" href="classAP__MotorsHeli__RSC.html#a8995396a1ba103a94eae256280e83178">_idle_output</a> + (<a class="code" href="classAP__MotorsHeli__RSC.html#a438d0f3ab3ec2f11b8beedf05d72dbb4">_rotor_ramp_output</a> * (desired_throttle - <a class="code" href="classAP__MotorsHeli__RSC.html#a8995396a1ba103a94eae256280e83178">_idle_output</a>));</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classAP__MotorsHeli__RSC.html#a3d10c147436ec37bff6f60308cd5903c">_control_mode</a> == <a class="code" href="AP__MotorsHeli__RSC_8h.html#a36de13430db64e7068d0522f9dc24b96ad8044bfca2b2026a3c091dd563d9a0d4">ROTOR_CONTROL_MODE_CLOSED_LOOP_POWER_OUTPUT</a>) {</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                <span class="comment">// governor provides two modes of throttle control - governor engaged</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                <span class="comment">// or throttle curve if governor is out of range or sensor failed</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                <span class="keywordtype">float</span> desired_throttle = <a class="code" href="classAP__MotorsHeli__RSC.html#ad6a10fa435961788ec2791a661c5d2f7">calculate_desired_throttle</a>(<a class="code" href="classAP__MotorsHeli__RSC.html#a96030fe9edba894c9b2cb2ed39c00ac7">_collective_in</a>);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                <span class="comment">// governor is active if within user-set range from reference speed</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                <span class="keywordflow">if</span> ((<a class="code" href="classAP__MotorsHeli__RSC.html#a44aaa05623e15100d45ec0d6ba5d89d9">_rotor_rpm</a> &gt;= (<a class="code" href="classAP__MotorsHeli__RSC.html#a35997f2c36575fc5f7e314ad4afc5fe0">_governor_reference</a> - <a class="code" href="classAP__MotorsHeli__RSC.html#a3c65d9db6d33a8726fe5b8ace782b756">_governor_range</a>)) &amp;&amp; (<a class="code" href="classAP__MotorsHeli__RSC.html#a44aaa05623e15100d45ec0d6ba5d89d9">_rotor_rpm</a> &lt;= (<a class="code" href="classAP__MotorsHeli__RSC.html#a35997f2c36575fc5f7e314ad4afc5fe0">_governor_reference</a> + <a class="code" href="classAP__MotorsHeli__RSC.html#a3c65d9db6d33a8726fe5b8ace782b756">_governor_range</a>))) {</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                    <span class="keywordtype">float</span> governor_droop = <a class="code" href="AP__Math_8h.html#ad525609d9dba6ffa556a0fbf08a3f9b4">constrain_float</a>(<a class="code" href="classAP__MotorsHeli__RSC.html#a35997f2c36575fc5f7e314ad4afc5fe0">_governor_reference</a> - <a class="code" href="classAP__MotorsHeli__RSC.html#a44aaa05623e15100d45ec0d6ba5d89d9">_rotor_rpm</a>,0.0<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>,<a class="code" href="classAP__MotorsHeli__RSC.html#a3c65d9db6d33a8726fe5b8ace782b756">_governor_range</a>);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                    <span class="comment">// if rpm has not reached 40% of the operational range from reference speed, governor</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                    <span class="comment">// remains in pre-engage status, no reference speed compensation due to droop</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                    <span class="comment">// this provides a soft-start function that engages the governor less aggressively</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="classAP__MotorsHeli__RSC.html#ac82842d7cf52e991362c090181a50ef2">_governor_engage</a> &amp;&amp; <a class="code" href="classAP__MotorsHeli__RSC.html#a44aaa05623e15100d45ec0d6ba5d89d9">_rotor_rpm</a> &lt; (<a class="code" href="classAP__MotorsHeli__RSC.html#a35997f2c36575fc5f7e314ad4afc5fe0">_governor_reference</a> - (<a class="code" href="classAP__MotorsHeli__RSC.html#a3c65d9db6d33a8726fe5b8ace782b756">_governor_range</a> * 0.4<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>))) {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                        <a class="code" href="classAP__MotorsHeli__RSC.html#a87cfae6a8e1787eb74a0ea5f48b9cb4f">_governor_output</a> = ((<a class="code" href="classAP__MotorsHeli__RSC.html#a44aaa05623e15100d45ec0d6ba5d89d9">_rotor_rpm</a> - <a class="code" href="classAP__MotorsHeli__RSC.html#a35997f2c36575fc5f7e314ad4afc5fe0">_governor_reference</a>) * desired_throttle) * <a class="code" href="classAP__MotorsHeli__RSC.html#a840bba899bf55af62380583172d5e864">_governor_droop_response</a> * -0.01f;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                        <span class="comment">// normal flight status, governor fully engaged with reference speed compensation for droop</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                        <a class="code" href="classAP__MotorsHeli__RSC.html#ac82842d7cf52e991362c090181a50ef2">_governor_engage</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                        <a class="code" href="classAP__MotorsHeli__RSC.html#a87cfae6a8e1787eb74a0ea5f48b9cb4f">_governor_output</a> = ((<a class="code" href="classAP__MotorsHeli__RSC.html#a44aaa05623e15100d45ec0d6ba5d89d9">_rotor_rpm</a> - (<a class="code" href="classAP__MotorsHeli__RSC.html#a35997f2c36575fc5f7e314ad4afc5fe0">_governor_reference</a> + governor_droop)) * desired_throttle) * <a class="code" href="classAP__MotorsHeli__RSC.html#a840bba899bf55af62380583172d5e864">_governor_droop_response</a> * -0.01<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                    }</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                    <span class="comment">// check for governor disengage for return to flight idle power</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                    <span class="keywordflow">if</span> (desired_throttle &lt;= <a class="code" href="classAP__MotorsHeli__RSC.html#a21d88d44de2cee9d9dc3e809cca4cea7">_governor_disengage</a>) {</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                        <a class="code" href="classAP__MotorsHeli__RSC.html#a87cfae6a8e1787eb74a0ea5f48b9cb4f">_governor_output</a> = 0.0f;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                        <a class="code" href="classAP__MotorsHeli__RSC.html#ac82842d7cf52e991362c090181a50ef2">_governor_engage</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                    }</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                    <span class="comment">// throttle output with governor on is constrained from minimum called for from throttle curve</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                    <span class="comment">// to maximum WOT. This prevents outliers on rpm signal from closing the throttle in flight due</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                    <span class="comment">// to rpm sensor failure or bad signal quality</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                    <a class="code" href="classAP__MotorsHeli__RSC.html#a06b4a8eb3f3c0c9ab5b4069a4c17e574">_control_output</a> = <a class="code" href="AP__Math_8h.html#ad525609d9dba6ffa556a0fbf08a3f9b4">constrain_float</a>(<a class="code" href="classAP__MotorsHeli__RSC.html#a8995396a1ba103a94eae256280e83178">_idle_output</a> + (<a class="code" href="classAP__MotorsHeli__RSC.html#a438d0f3ab3ec2f11b8beedf05d72dbb4">_rotor_ramp_output</a> * (((desired_throttle * <a class="code" href="classAP__MotorsHeli__RSC.html#ad8d1ae4ac2f3e3cbdefee7d153892f0d">_governor_thrcurve</a>) + <a class="code" href="classAP__MotorsHeli__RSC.html#a87cfae6a8e1787eb74a0ea5f48b9cb4f">_governor_output</a>) - <a class="code" href="classAP__MotorsHeli__RSC.html#a8995396a1ba103a94eae256280e83178">_idle_output</a>)), <a class="code" href="classAP__MotorsHeli__RSC.html#a8995396a1ba103a94eae256280e83178">_idle_output</a> + (<a class="code" href="classAP__MotorsHeli__RSC.html#a438d0f3ab3ec2f11b8beedf05d72dbb4">_rotor_ramp_output</a> * ((desired_throttle * <a class="code" href="classAP__MotorsHeli__RSC.html#ad8d1ae4ac2f3e3cbdefee7d153892f0d">_governor_thrcurve</a>)) - <a class="code" href="classAP__MotorsHeli__RSC.html#a8995396a1ba103a94eae256280e83178">_idle_output</a>), 1.0<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>);</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                    <span class="comment">// hold governor output at zero, engage status is false and use the throttle curve</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                    <span class="comment">// this is failover for in-flight failure of the speed sensor</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                    <a class="code" href="classAP__MotorsHeli__RSC.html#a87cfae6a8e1787eb74a0ea5f48b9cb4f">_governor_output</a> = 0.0f;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                    <a class="code" href="classAP__MotorsHeli__RSC.html#ac82842d7cf52e991362c090181a50ef2">_governor_engage</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                    <a class="code" href="classAP__MotorsHeli__RSC.html#a06b4a8eb3f3c0c9ab5b4069a4c17e574">_control_output</a> = <a class="code" href="classAP__MotorsHeli__RSC.html#a8995396a1ba103a94eae256280e83178">_idle_output</a> + (<a class="code" href="classAP__MotorsHeli__RSC.html#a438d0f3ab3ec2f11b8beedf05d72dbb4">_rotor_ramp_output</a> * (desired_throttle - <a class="code" href="classAP__MotorsHeli__RSC.html#a8995396a1ba103a94eae256280e83178">_idle_output</a>));</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                }</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            }</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    }</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="comment">// update rotor speed run-up estimate</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <a class="code" href="classAP__MotorsHeli__RSC.html#a8f17785d86c9527b3a3d868a7dd21f42">update_rotor_runup</a>(dt);</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classAP__MotorsHeli__RSC.html#a1300ad2790f357c6b85560e36e976c09">_power_slewrate</a> &gt; 0) {</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="comment">// implement slew rate for throttle</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <span class="keywordtype">float</span> max_delta = dt * <a class="code" href="classAP__MotorsHeli__RSC.html#a1300ad2790f357c6b85560e36e976c09">_power_slewrate</a> * 0.01f;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <a class="code" href="classAP__MotorsHeli__RSC.html#a06b4a8eb3f3c0c9ab5b4069a4c17e574">_control_output</a> = <a class="code" href="AP__Math_8h.html#ad525609d9dba6ffa556a0fbf08a3f9b4">constrain_float</a>(<a class="code" href="classAP__MotorsHeli__RSC.html#a06b4a8eb3f3c0c9ab5b4069a4c17e574">_control_output</a>, last_control_output-max_delta, last_control_output+max_delta);</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    }</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="comment">// output to rsc servo</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <a class="code" href="classAP__MotorsHeli__RSC.html#a15973f14ea1331c8def95e6cde3ad1db">write_rsc</a>(<a class="code" href="classAP__MotorsHeli__RSC.html#a06b4a8eb3f3c0c9ab5b4069a4c17e574">_control_output</a>);</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;}</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">// update_rotor_ramp - slews rotor output scalar between 0 and 1, outputs float scalar to _rotor_ramp_output</span></div><div class="line"><a name="l00256"></a><span class="lineno"><a class="line" href="classAP__MotorsHeli__RSC.html#a8c338a29acf0a61d814af3a298f89594">  256</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classAP__MotorsHeli__RSC.html#a8c338a29acf0a61d814af3a298f89594">AP_MotorsHeli_RSC::update_rotor_ramp</a>(<span class="keywordtype">float</span> rotor_ramp_input, <span class="keywordtype">float</span> dt)</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;{</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="comment">// sanity check ramp time</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classAP__MotorsHeli__RSC.html#ab24b57b746f3490339037a22c7ad32fc">_ramp_time</a> &lt;= 0) {</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <a class="code" href="classAP__MotorsHeli__RSC.html#ab24b57b746f3490339037a22c7ad32fc">_ramp_time</a> = 1;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    }</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="comment">// ramp output upwards towards target</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classAP__MotorsHeli__RSC.html#a438d0f3ab3ec2f11b8beedf05d72dbb4">_rotor_ramp_output</a> &lt; rotor_ramp_input) {</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <span class="comment">// allow control output to jump to estimated speed</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classAP__MotorsHeli__RSC.html#a438d0f3ab3ec2f11b8beedf05d72dbb4">_rotor_ramp_output</a> &lt; <a class="code" href="classAP__MotorsHeli__RSC.html#a94c896094d9b49bfc77e341b536b46f1">_rotor_runup_output</a>) {</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            <a class="code" href="classAP__MotorsHeli__RSC.html#a438d0f3ab3ec2f11b8beedf05d72dbb4">_rotor_ramp_output</a> = <a class="code" href="classAP__MotorsHeli__RSC.html#a94c896094d9b49bfc77e341b536b46f1">_rotor_runup_output</a>;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        }</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <span class="comment">// ramp up slowly to target</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <a class="code" href="classAP__MotorsHeli__RSC.html#a438d0f3ab3ec2f11b8beedf05d72dbb4">_rotor_ramp_output</a> += (dt / <a class="code" href="classAP__MotorsHeli__RSC.html#ab24b57b746f3490339037a22c7ad32fc">_ramp_time</a>);</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classAP__MotorsHeli__RSC.html#a438d0f3ab3ec2f11b8beedf05d72dbb4">_rotor_ramp_output</a> &gt; rotor_ramp_input) {</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            <a class="code" href="classAP__MotorsHeli__RSC.html#a438d0f3ab3ec2f11b8beedf05d72dbb4">_rotor_ramp_output</a> = rotor_ramp_input;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        }</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    }<span class="keywordflow">else</span>{</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="comment">// ramping down happens instantly</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <a class="code" href="classAP__MotorsHeli__RSC.html#a438d0f3ab3ec2f11b8beedf05d72dbb4">_rotor_ramp_output</a> = rotor_ramp_input;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    }</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;}</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">// update_rotor_runup - function to slew rotor runup scalar, outputs float scalar to _rotor_runup_ouptut</span></div><div class="line"><a name="l00281"></a><span class="lineno"><a class="line" href="classAP__MotorsHeli__RSC.html#a8f17785d86c9527b3a3d868a7dd21f42">  281</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classAP__MotorsHeli__RSC.html#a8f17785d86c9527b3a3d868a7dd21f42">AP_MotorsHeli_RSC::update_rotor_runup</a>(<span class="keywordtype">float</span> dt)</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;{</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="comment">// sanity check runup time</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classAP__MotorsHeli__RSC.html#a16988d0a63ee2fbbcd015600705129cf">_runup_time</a> &lt; <a class="code" href="classAP__MotorsHeli__RSC.html#ab24b57b746f3490339037a22c7ad32fc">_ramp_time</a>) {</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <a class="code" href="classAP__MotorsHeli__RSC.html#a16988d0a63ee2fbbcd015600705129cf">_runup_time</a> = <a class="code" href="classAP__MotorsHeli__RSC.html#ab24b57b746f3490339037a22c7ad32fc">_ramp_time</a>;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    }</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classAP__MotorsHeli__RSC.html#a16988d0a63ee2fbbcd015600705129cf">_runup_time</a> &lt;= 0 ) {</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <a class="code" href="classAP__MotorsHeli__RSC.html#a16988d0a63ee2fbbcd015600705129cf">_runup_time</a> = 1;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    }</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="comment">// ramp speed estimate towards control out</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordtype">float</span> runup_increment = dt / <a class="code" href="classAP__MotorsHeli__RSC.html#a16988d0a63ee2fbbcd015600705129cf">_runup_time</a>;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classAP__MotorsHeli__RSC.html#a94c896094d9b49bfc77e341b536b46f1">_rotor_runup_output</a> &lt; <a class="code" href="classAP__MotorsHeli__RSC.html#a438d0f3ab3ec2f11b8beedf05d72dbb4">_rotor_ramp_output</a>) {</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <a class="code" href="classAP__MotorsHeli__RSC.html#a94c896094d9b49bfc77e341b536b46f1">_rotor_runup_output</a> += runup_increment;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classAP__MotorsHeli__RSC.html#a94c896094d9b49bfc77e341b536b46f1">_rotor_runup_output</a> &gt; <a class="code" href="classAP__MotorsHeli__RSC.html#a438d0f3ab3ec2f11b8beedf05d72dbb4">_rotor_ramp_output</a>) {</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            <a class="code" href="classAP__MotorsHeli__RSC.html#a94c896094d9b49bfc77e341b536b46f1">_rotor_runup_output</a> = <a class="code" href="classAP__MotorsHeli__RSC.html#a438d0f3ab3ec2f11b8beedf05d72dbb4">_rotor_ramp_output</a>;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        }</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    }<span class="keywordflow">else</span>{</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <a class="code" href="classAP__MotorsHeli__RSC.html#a94c896094d9b49bfc77e341b536b46f1">_rotor_runup_output</a> -= runup_increment;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classAP__MotorsHeli__RSC.html#a94c896094d9b49bfc77e341b536b46f1">_rotor_runup_output</a> &lt; <a class="code" href="classAP__MotorsHeli__RSC.html#a438d0f3ab3ec2f11b8beedf05d72dbb4">_rotor_ramp_output</a>) {</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            <a class="code" href="classAP__MotorsHeli__RSC.html#a94c896094d9b49bfc77e341b536b46f1">_rotor_runup_output</a> = <a class="code" href="classAP__MotorsHeli__RSC.html#a438d0f3ab3ec2f11b8beedf05d72dbb4">_rotor_ramp_output</a>;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        }</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    }</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="comment">// update run-up complete flag</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="comment">// if control mode is disabled, then run-up complete always returns true</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="classAP__MotorsHeli__RSC.html#a3d10c147436ec37bff6f60308cd5903c">_control_mode</a> == <a class="code" href="AP__MotorsHeli__RSC_8h.html#a36de13430db64e7068d0522f9dc24b96a8ac5d4e5f2ced1033f42e77703c03d82">ROTOR_CONTROL_MODE_DISABLED</a> ){</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <a class="code" href="classAP__MotorsHeli__RSC.html#ad14034f3abef523b48d016aef5f3fe6a">_runup_complete</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    }</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="comment">// if rotor ramp and runup are both at full speed, then run-up has been completed</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classAP__MotorsHeli__RSC.html#ad14034f3abef523b48d016aef5f3fe6a">_runup_complete</a> &amp;&amp; (<a class="code" href="classAP__MotorsHeli__RSC.html#a438d0f3ab3ec2f11b8beedf05d72dbb4">_rotor_ramp_output</a> &gt;= 1.0<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>) &amp;&amp; (<a class="code" href="classAP__MotorsHeli__RSC.html#a94c896094d9b49bfc77e341b536b46f1">_rotor_runup_output</a> &gt;= 1.0<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>)) {</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <a class="code" href="classAP__MotorsHeli__RSC.html#ad14034f3abef523b48d016aef5f3fe6a">_runup_complete</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    }</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="comment">// if rotor speed is less than critical speed, then run-up is not complete</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="comment">// this will prevent the case where the target rotor speed is less than critical speed</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classAP__MotorsHeli__RSC.html#ad14034f3abef523b48d016aef5f3fe6a">_runup_complete</a> &amp;&amp; (<a class="code" href="classAP__MotorsHeli__RSC.html#afcadabdd0a897bed905a1f178011d094">get_rotor_speed</a>() &lt;= <a class="code" href="classAP__MotorsHeli__RSC.html#ada68385131b3f4a7064cd97dfe56ce39">_critical_speed</a>)) {</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <a class="code" href="classAP__MotorsHeli__RSC.html#ad14034f3abef523b48d016aef5f3fe6a">_runup_complete</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    }</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;}</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment">// get_rotor_speed - gets rotor speed either as an estimate, or (ToDO) a measured value</span></div><div class="line"><a name="l00325"></a><span class="lineno"><a class="line" href="classAP__MotorsHeli__RSC.html#afcadabdd0a897bed905a1f178011d094">  325</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="classAP__MotorsHeli__RSC.html#afcadabdd0a897bed905a1f178011d094">AP_MotorsHeli_RSC::get_rotor_speed</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="comment">// if no actual measured rotor speed is available, estimate speed based on rotor runup scalar.</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classAP__MotorsHeli__RSC.html#a94c896094d9b49bfc77e341b536b46f1">_rotor_runup_output</a>;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;}</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment">// write_rsc - outputs pwm onto output rsc channel</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment">// servo_out parameter is of the range 0 ~ 1</span></div><div class="line"><a name="l00333"></a><span class="lineno"><a class="line" href="classAP__MotorsHeli__RSC.html#a15973f14ea1331c8def95e6cde3ad1db">  333</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classAP__MotorsHeli__RSC.html#a15973f14ea1331c8def95e6cde3ad1db">AP_MotorsHeli_RSC::write_rsc</a>(<span class="keywordtype">float</span> servo_out)</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;{</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classAP__MotorsHeli__RSC.html#a3d10c147436ec37bff6f60308cd5903c">_control_mode</a> == <a class="code" href="AP__MotorsHeli__RSC_8h.html#a36de13430db64e7068d0522f9dc24b96a8ac5d4e5f2ced1033f42e77703c03d82">ROTOR_CONTROL_MODE_DISABLED</a>){</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <span class="comment">// do not do servo output to avoid conflicting with other output on the channel</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <span class="comment">// ToDo: We should probably use RC_Channel_Aux to avoid this problem</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        <a class="code" href="classSRV__Channels.html#a61d6f8b037aa79f789a11e872f50e220">SRV_Channels::set_output_scaled</a>(<a class="code" href="classAP__MotorsHeli__RSC.html#a07de7f2e07bedcff45425018318ee372">_aux_fn</a>, (uint16_t) (servo_out * 1000));</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    }</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;}</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="comment">// calculate_desired_throttle - uses throttle curve and collective input to determine throttle setting</span></div><div class="line"><a name="l00345"></a><span class="lineno"><a class="line" href="classAP__MotorsHeli__RSC.html#ad6a10fa435961788ec2791a661c5d2f7">  345</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="classAP__MotorsHeli__RSC.html#ad6a10fa435961788ec2791a661c5d2f7">AP_MotorsHeli_RSC::calculate_desired_throttle</a>(<span class="keywordtype">float</span> collective_in)</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;{</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> inpt = collective_in * 4.0f + 1.0f;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    uint8_t <a class="code" href="structAP__Param_1_1GroupInfo.html#a06b35095a2367f24a17376f49abbb117">idx</a> = <a class="code" href="AP__Math_8h.html#a68558c4f79a8582543daefde13c64abc">constrain_int16</a>(int8_t(collective_in * 4), 0, 3);</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> a = inpt - (<a class="code" href="structAP__Param_1_1GroupInfo.html#a06b35095a2367f24a17376f49abbb117">idx</a> + 1.0f);</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> b = (<a class="code" href="structAP__Param_1_1GroupInfo.html#a06b35095a2367f24a17376f49abbb117">idx</a> + 1.0f) - inpt + 1.0<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordtype">float</span> throttle = <a class="code" href="classAP__MotorsHeli__RSC.html#a57f0b28d6a1b23c02c4fa8b26766f532">_thrcrv_poly</a>[<a class="code" href="structAP__Param_1_1GroupInfo.html#a06b35095a2367f24a17376f49abbb117">idx</a>][0] * a + <a class="code" href="classAP__MotorsHeli__RSC.html#a57f0b28d6a1b23c02c4fa8b26766f532">_thrcrv_poly</a>[<a class="code" href="structAP__Param_1_1GroupInfo.html#a06b35095a2367f24a17376f49abbb117">idx</a>][1] * b + <a class="code" href="classAP__MotorsHeli__RSC.html#a57f0b28d6a1b23c02c4fa8b26766f532">_thrcrv_poly</a>[<a class="code" href="structAP__Param_1_1GroupInfo.html#a06b35095a2367f24a17376f49abbb117">idx</a>][2] * (powf(a,3.0<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>) - a) / 6.0<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a> + <a class="code" href="classAP__MotorsHeli__RSC.html#a57f0b28d6a1b23c02c4fa8b26766f532">_thrcrv_poly</a>[<a class="code" href="structAP__Param_1_1GroupInfo.html#a06b35095a2367f24a17376f49abbb117">idx</a>][3] * (powf(b,3.0<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>) - b) / 6.0<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    throttle = <a class="code" href="AP__Math_8h.html#ad525609d9dba6ffa556a0fbf08a3f9b4">constrain_float</a>(throttle, 0.0<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>, 1.0<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>);</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordflow">return</span> throttle;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;}</div><div class="ttc" id="classAP__MotorsHeli__RSC_html_a87cfae6a8e1787eb74a0ea5f48b9cb4f"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a87cfae6a8e1787eb74a0ea5f48b9cb4f">AP_MotorsHeli_RSC::_governor_output</a></div><div class="ttdeci">float _governor_output</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00136">AP_MotorsHeli_RSC.h:136</a></div></div>
<div class="ttc" id="classSRV__Channels_html_acab9e1aba9fcbde6e598169af5b3181f"><div class="ttname"><a href="classSRV__Channels.html#acab9e1aba9fcbde6e598169af5b3181f">SRV_Channels::get_motor_function</a></div><div class="ttdeci">static SRV_Channel::Aux_servo_function_t get_motor_function(uint8_t channel)</div><div class="ttdef"><b>Definition:</b> <a href="SRV__Channel_8h_source.html#l00450">SRV_Channel.h:450</a></div></div>
<div class="ttc" id="AP__MotorsHeli__RSC_8cpp_html_ae08c3ca4ba26b63cda0bb3e3c6c02785"><div class="ttname"><a href="AP__MotorsHeli__RSC_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a></div><div class="ttdeci">const AP_HAL::HAL &amp; hal</div><div class="ttdef"><b>Definition:</b> <a href="AC__PID__test_8cpp_source.html#l00021">AC_PID_test.cpp:21</a></div></div>
<div class="ttc" id="classAP__MotorsHeli__RSC_html_a44aaa05623e15100d45ec0d6ba5d89d9"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a44aaa05623e15100d45ec0d6ba5d89d9">AP_MotorsHeli_RSC::_rotor_rpm</a></div><div class="ttdeci">float _rotor_rpm</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00134">AP_MotorsHeli_RSC.h:134</a></div></div>
<div class="ttc" id="AP__MotorsHeli__RSC_8h_html_ad7f80174508128e686513a0058b7b5bc"><div class="ttname"><a href="AP__MotorsHeli__RSC_8h.html#ad7f80174508128e686513a0058b7b5bc">AP_MOTORS_HELI_RSC_GOVERNOR_DISENGAGE_DEFAULT</a></div><div class="ttdeci">#define AP_MOTORS_HELI_RSC_GOVERNOR_DISENGAGE_DEFAULT</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00017">AP_MotorsHeli_RSC.h:17</a></div></div>
<div class="ttc" id="classAP__MotorsHeli__RSC_html_a21d88d44de2cee9d9dc3e809cca4cea7"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a21d88d44de2cee9d9dc3e809cca4cea7">AP_MotorsHeli_RSC::_governor_disengage</a></div><div class="ttdeci">float _governor_disengage</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00135">AP_MotorsHeli_RSC.h:135</a></div></div>
<div class="ttc" id="AP__Param_8h_html_ae25c1c7495435989f8be5781c86be078"><div class="ttname"><a href="AP__Param_8h.html#ae25c1c7495435989f8be5781c86be078">AP_PARAM_FLAG_ENABLE</a></div><div class="ttdeci">#define AP_PARAM_FLAG_ENABLE</div><div class="ttdef"><b>Definition:</b> <a href="AP__Param_8h_source.html#l00057">AP_Param.h:57</a></div></div>
<div class="ttc" id="classAP__MotorsHeli__RSC_html_aeb6143de2bc88e0540acd68349f61c73"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#aeb6143de2bc88e0540acd68349f61c73">AP_MotorsHeli_RSC::init_servo</a></div><div class="ttdeci">void init_servo()</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8cpp_source.html#l00138">AP_MotorsHeli_RSC.cpp:138</a></div></div>
<div class="ttc" id="AP__Math_8h_html_a68558c4f79a8582543daefde13c64abc"><div class="ttname"><a href="AP__Math_8h.html#a68558c4f79a8582543daefde13c64abc">constrain_int16</a></div><div class="ttdeci">int16_t constrain_int16(const int16_t amt, const int16_t low, const int16_t high)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Math_8h_source.html#l00147">AP_Math.h:147</a></div></div>
<div class="ttc" id="classAP__MotorsHeli__RSC_html_a1300ad2790f357c6b85560e36e976c09"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a1300ad2790f357c6b85560e36e976c09">AP_MotorsHeli_RSC::_power_slewrate</a></div><div class="ttdeci">uint16_t _power_slewrate</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00132">AP_MotorsHeli_RSC.h:132</a></div></div>
<div class="ttc" id="AP__MotorsHeli__RSC_8h_html_af1dcf4d30e56da103805c431bf42c466"><div class="ttname"><a href="AP__MotorsHeli__RSC_8h.html#af1dcf4d30e56da103805c431bf42c466">AP_MOTORS_HELI_RSC_THRCRV_100_DEFAULT</a></div><div class="ttdeci">#define AP_MOTORS_HELI_RSC_THRCRV_100_DEFAULT</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00013">AP_MotorsHeli_RSC.h:13</a></div></div>
<div class="ttc" id="classAP__MotorsHeli__RSC_html_a3c65d9db6d33a8726fe5b8ace782b756"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a3c65d9db6d33a8726fe5b8ace782b756">AP_MotorsHeli_RSC::_governor_range</a></div><div class="ttdeci">float _governor_range</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00137">AP_MotorsHeli_RSC.h:137</a></div></div>
<div class="ttc" id="AP__HAL_8h_html"><div class="ttname"><a href="AP__HAL_8h.html">AP_HAL.h</a></div></div>
<div class="ttc" id="classAP__MotorsHeli__RSC_html_a3d10c147436ec37bff6f60308cd5903c"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a3d10c147436ec37bff6f60308cd5903c">AP_MotorsHeli_RSC::_control_mode</a></div><div class="ttdeci">RotorControlMode _control_mode</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00121">AP_MotorsHeli_RSC.h:121</a></div></div>
<div class="ttc" id="classAP__MotorsHeli__RSC_html_a8995396a1ba103a94eae256280e83178"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a8995396a1ba103a94eae256280e83178">AP_MotorsHeli_RSC::_idle_output</a></div><div class="ttdeci">float _idle_output</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00123">AP_MotorsHeli_RSC.h:123</a></div></div>
<div class="ttc" id="classSRV__Channels_html_a97577ca02c12e3b851cd5d563d32b640"><div class="ttname"><a href="classSRV__Channels.html#a97577ca02c12e3b851cd5d563d32b640">SRV_Channels::set_aux_channel_default</a></div><div class="ttdeci">static bool set_aux_channel_default(SRV_Channel::Aux_servo_function_t function, uint8_t channel)</div><div class="ttdef"><b>Definition:</b> <a href="SRV__Channel__aux_8cpp_source.html#l00432">SRV_Channel_aux.cpp:432</a></div></div>
<div class="ttc" id="AP__MotorsHeli__RSC_8h_html_a572f1a478ae3f785f932bf412fddf83a"><div class="ttname"><a href="AP__MotorsHeli__RSC_8h.html#a572f1a478ae3f785f932bf412fddf83a">AP_MOTORS_HELI_RSC_THRCRV_0_DEFAULT</a></div><div class="ttdeci">#define AP_MOTORS_HELI_RSC_THRCRV_0_DEFAULT</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00009">AP_MotorsHeli_RSC.h:9</a></div></div>
<div class="ttc" id="AP__MotorsHeli__RSC_8h_html_a43090dc67863b008bfca29ebcea483eb"><div class="ttname"><a href="AP__MotorsHeli__RSC_8h.html#a43090dc67863b008bfca29ebcea483eb">AP_MOTORS_HELI_RSC_THRCRV_50_DEFAULT</a></div><div class="ttdeci">#define AP_MOTORS_HELI_RSC_THRCRV_50_DEFAULT</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00011">AP_MotorsHeli_RSC.h:11</a></div></div>
<div class="ttc" id="AP__MotorsHeli__RSC_8h_html_a36de13430db64e7068d0522f9dc24b96a8ac5d4e5f2ced1033f42e77703c03d82"><div class="ttname"><a href="AP__MotorsHeli__RSC_8h.html#a36de13430db64e7068d0522f9dc24b96a8ac5d4e5f2ced1033f42e77703c03d82">ROTOR_CONTROL_MODE_DISABLED</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00031">AP_MotorsHeli_RSC.h:31</a></div></div>
<div class="ttc" id="AP__MotorsHeli__RSC_8h_html_a8d261bf00472436e2b0793ae95f28b58"><div class="ttname"><a href="AP__MotorsHeli__RSC_8h.html#a8d261bf00472436e2b0793ae95f28b58">AP_MOTORS_HELI_RSC_GOVERNOR_RANGE_DEFAULT</a></div><div class="ttdeci">#define AP_MOTORS_HELI_RSC_GOVERNOR_RANGE_DEFAULT</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00020">AP_MotorsHeli_RSC.h:20</a></div></div>
<div class="ttc" id="AP__Param_8h_html_a78a408c84f2a1bafde256ac650142e4d"><div class="ttname"><a href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a></div><div class="ttdeci">#define AP_GROUPINFO(name, idx, clazz, element, def)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Param_8h_source.html#l00100">AP_Param.h:100</a></div></div>
<div class="ttc" id="classSRV__Channels_html_adba039e2df3bb2c744f8b8590581827f"><div class="ttname"><a href="classSRV__Channels.html#adba039e2df3bb2c744f8b8590581827f">SRV_Channels::set_range</a></div><div class="ttdeci">static void set_range(SRV_Channel::Aux_servo_function_t function, uint16_t range)</div><div class="ttdef"><b>Definition:</b> <a href="SRV__Channel__aux_8cpp_source.html#l00682">SRV_Channel_aux.cpp:682</a></div></div>
<div class="ttc" id="classAP__MotorsHeli__RSC_html_a8f17785d86c9527b3a3d868a7dd21f42"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a8f17785d86c9527b3a3d868a7dd21f42">AP_MotorsHeli_RSC::update_rotor_runup</a></div><div class="ttdeci">void update_rotor_runup(float dt)</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8cpp_source.html#l00281">AP_MotorsHeli_RSC.cpp:281</a></div></div>
<div class="ttc" id="classAP__MotorsHeli__RSC_html_a51c1e6ae10202b68f11b9da049406808"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a51c1e6ae10202b68f11b9da049406808">AP_MotorsHeli_RSC::_default_channel</a></div><div class="ttdeci">uint8_t _default_channel</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00118">AP_MotorsHeli_RSC.h:118</a></div></div>
<div class="ttc" id="AP__MotorsHeli__RSC_8h_html_a721ed001a96e0fcdd8fe494f21bf3961"><div class="ttname"><a href="AP__MotorsHeli__RSC_8h.html#a721ed001a96e0fcdd8fe494f21bf3961">AP_MOTORS_HELI_RSC_THRCRV_25_DEFAULT</a></div><div class="ttdeci">#define AP_MOTORS_HELI_RSC_THRCRV_25_DEFAULT</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00010">AP_MotorsHeli_RSC.h:10</a></div></div>
<div class="ttc" id="AP__MotorsHeli__RSC_8h_html_a36de13430db64e7068d0522f9dc24b96ae275a6c86c99cd83beeeca5a0d82e535"><div class="ttname"><a href="AP__MotorsHeli__RSC_8h.html#a36de13430db64e7068d0522f9dc24b96ae275a6c86c99cd83beeeca5a0d82e535">ROTOR_CONTROL_MODE_SPEED_SETPOINT</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00033">AP_MotorsHeli_RSC.h:33</a></div></div>
<div class="ttc" id="classAP__MotorsHeli__RSC_html_ad8d1ae4ac2f3e3cbdefee7d153892f0d"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#ad8d1ae4ac2f3e3cbdefee7d153892f0d">AP_MotorsHeli_RSC::_governor_thrcurve</a></div><div class="ttdeci">float _governor_thrcurve</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00141">AP_MotorsHeli_RSC.h:141</a></div></div>
<div class="ttc" id="classAP__MotorsHeli__RSC_html_a57f0b28d6a1b23c02c4fa8b26766f532"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a57f0b28d6a1b23c02c4fa8b26766f532">AP_MotorsHeli_RSC::_thrcrv_poly</a></div><div class="ttdeci">float _thrcrv_poly[4][4]</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00131">AP_MotorsHeli_RSC.h:131</a></div></div>
<div class="ttc" id="AP__MotorsHeli__RSC_8h_html_a844404bedbaf4aa206880965cd7610f7"><div class="ttname"><a href="AP__MotorsHeli__RSC_8h.html#a844404bedbaf4aa206880965cd7610f7">RotorControlState</a></div><div class="ttdeci">RotorControlState</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00023">AP_MotorsHeli_RSC.h:23</a></div></div>
<div class="ttc" id="classAP__MotorsHeli__RSC_html_ad6a10fa435961788ec2791a661c5d2f7"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#ad6a10fa435961788ec2791a661c5d2f7">AP_MotorsHeli_RSC::calculate_desired_throttle</a></div><div class="ttdeci">float calculate_desired_throttle(float collective_in)</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8cpp_source.html#l00345">AP_MotorsHeli_RSC.cpp:345</a></div></div>
<div class="ttc" id="classAP__MotorsHeli__RSC_html_a30a21afe8ee1690d2a60e81c0b82df4c"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a30a21afe8ee1690d2a60e81c0b82df4c">AP_MotorsHeli_RSC::_desired_speed</a></div><div class="ttdeci">float _desired_speed</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00124">AP_MotorsHeli_RSC.h:124</a></div></div>
<div class="ttc" id="classRSCGovParam_html_a0ba4ae6752f5e648a5958f8df38b1386"><div class="ttname"><a href="classRSCGovParam.html#a0ba4ae6752f5e648a5958f8df38b1386">RSCGovParam::RSCGovParam</a></div><div class="ttdeci">RSCGovParam(void)</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8cpp_source.html#l00132">AP_MotorsHeli_RSC.cpp:132</a></div></div>
<div class="ttc" id="classAP__MotorsHeli__RSC_html_ad14034f3abef523b48d016aef5f3fe6a"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#ad14034f3abef523b48d016aef5f3fe6a">AP_MotorsHeli_RSC::_runup_complete</a></div><div class="ttdeci">bool _runup_complete</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00130">AP_MotorsHeli_RSC.h:130</a></div></div>
<div class="ttc" id="AP__MotorsHeli__RSC_8h_html_a36de13430db64e7068d0522f9dc24b96ad8044bfca2b2026a3c091dd563d9a0d4"><div class="ttname"><a href="AP__MotorsHeli__RSC_8h.html#a36de13430db64e7068d0522f9dc24b96ad8044bfca2b2026a3c091dd563d9a0d4">ROTOR_CONTROL_MODE_CLOSED_LOOP_POWER_OUTPUT</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00035">AP_MotorsHeli_RSC.h:35</a></div></div>
<div class="ttc" id="classAP__MotorsHeli__RSC_html_a438d0f3ab3ec2f11b8beedf05d72dbb4"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a438d0f3ab3ec2f11b8beedf05d72dbb4">AP_MotorsHeli_RSC::_rotor_ramp_output</a></div><div class="ttdeci">float _rotor_ramp_output</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00126">AP_MotorsHeli_RSC.h:126</a></div></div>
<div class="ttc" id="AP__MotorsHeli__RSC_8h_html_a844404bedbaf4aa206880965cd7610f7a2b2787ba5059cf8f33966685149a5407"><div class="ttname"><a href="AP__MotorsHeli__RSC_8h.html#a844404bedbaf4aa206880965cd7610f7a2b2787ba5059cf8f33966685149a5407">ROTOR_CONTROL_STOP</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00024">AP_MotorsHeli_RSC.h:24</a></div></div>
<div class="ttc" id="classAP__MotorsHeli__RSC_html_a07de7f2e07bedcff45425018318ee372"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a07de7f2e07bedcff45425018318ee372">AP_MotorsHeli_RSC::_aux_fn</a></div><div class="ttdeci">SRV_Channel::Aux_servo_function_t _aux_fn</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00117">AP_MotorsHeli_RSC.h:117</a></div></div>
<div class="ttc" id="AP__Param_8h_html_ac24e2eb16c2194e975d27e47ddcb7f1c"><div class="ttname"><a href="AP__Param_8h.html#ac24e2eb16c2194e975d27e47ddcb7f1c">AP_GROUPINFO_FLAGS</a></div><div class="ttdeci">#define AP_GROUPINFO_FLAGS(name, idx, clazz, element, def, flags)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Param_8h_source.html#l00091">AP_Param.h:91</a></div></div>
<div class="ttc" id="classAP__MotorsHeli__RSC_html_a35997f2c36575fc5f7e314ad4afc5fe0"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a35997f2c36575fc5f7e314ad4afc5fe0">AP_MotorsHeli_RSC::_governor_reference</a></div><div class="ttdeci">float _governor_reference</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00138">AP_MotorsHeli_RSC.h:138</a></div></div>
<div class="ttc" id="AP__MotorsHeli__RSC_8h_html_a270819e2404c50c4844e0f832809eb73"><div class="ttname"><a href="AP__MotorsHeli__RSC_8h.html#a270819e2404c50c4844e0f832809eb73">AP_MOTORS_HELI_RSC_GOVERNOR_THRCURVE_DEFAULT</a></div><div class="ttdeci">#define AP_MOTORS_HELI_RSC_GOVERNOR_THRCURVE_DEFAULT</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00019">AP_MotorsHeli_RSC.h:19</a></div></div>
<div class="ttc" id="classAP__MotorsHeli__RSC_html_a8c338a29acf0a61d814af3a298f89594"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a8c338a29acf0a61d814af3a298f89594">AP_MotorsHeli_RSC::update_rotor_ramp</a></div><div class="ttdeci">void update_rotor_ramp(float rotor_ramp_input, float dt)</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8cpp_source.html#l00256">AP_MotorsHeli_RSC.cpp:256</a></div></div>
<div class="ttc" id="classAP__HAL_1_1HAL_html"><div class="ttname"><a href="classAP__HAL_1_1HAL.html">AP_HAL::HAL</a></div><div class="ttdef"><b>Definition:</b> <a href="HAL_8h_source.html#l00021">HAL.h:21</a></div></div>
<div class="ttc" id="classSRV__Channels_html_a61d6f8b037aa79f789a11e872f50e220"><div class="ttname"><a href="classSRV__Channels.html#a61d6f8b037aa79f789a11e872f50e220">SRV_Channels::set_output_scaled</a></div><div class="ttdeci">static void set_output_scaled(SRV_Channel::Aux_servo_function_t function, int16_t value)</div><div class="ttdef"><b>Definition:</b> <a href="SRV__Channel__aux_8cpp_source.html#l00491">SRV_Channel_aux.cpp:491</a></div></div>
<div class="ttc" id="classAP__MotorsHeli__RSC_html_ab24b57b746f3490339037a22c7ad32fc"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#ab24b57b746f3490339037a22c7ad32fc">AP_MotorsHeli_RSC::_ramp_time</a></div><div class="ttdeci">int8_t _ramp_time</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00128">AP_MotorsHeli_RSC.h:128</a></div></div>
<div class="ttc" id="classAP__MotorsHeli__RSC_html_ac82842d7cf52e991362c090181a50ef2"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#ac82842d7cf52e991362c090181a50ef2">AP_MotorsHeli_RSC::_governor_engage</a></div><div class="ttdeci">bool _governor_engage</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00140">AP_MotorsHeli_RSC.h:140</a></div></div>
<div class="ttc" id="DerivativeFilter_8cpp_html_a357394e0f6f88c8a57bd893ab28dc8f8"><div class="ttname"><a href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a></div><div class="ttdeci">#define f(i)</div></div>
<div class="ttc" id="AP__MotorsHeli__RSC_8h_html_a2f64b3e40bb67c38d9147f477976f6c0"><div class="ttname"><a href="AP__MotorsHeli__RSC_8h.html#a2f64b3e40bb67c38d9147f477976f6c0">AP_MOTORS_HELI_RSC_GOVERNOR_SETPNT_DEFAULT</a></div><div class="ttdeci">#define AP_MOTORS_HELI_RSC_GOVERNOR_SETPNT_DEFAULT</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00016">AP_MotorsHeli_RSC.h:16</a></div></div>
<div class="ttc" id="classAP__MotorsHeli__RSC_html_a06b4a8eb3f3c0c9ab5b4069a4c17e574"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a06b4a8eb3f3c0c9ab5b4069a4c17e574">AP_MotorsHeli_RSC::_control_output</a></div><div class="ttdeci">float _control_output</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00125">AP_MotorsHeli_RSC.h:125</a></div></div>
<div class="ttc" id="classRSCThrCrvParam_html"><div class="ttname"><a href="classRSCThrCrvParam.html">RSCThrCrvParam</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00156">AP_MotorsHeli_RSC.h:156</a></div></div>
<div class="ttc" id="classRSCThrCrvParam_html_a12be3c0e38ac22f6e0c0b5b2d9e486c6"><div class="ttname"><a href="classRSCThrCrvParam.html#a12be3c0e38ac22f6e0c0b5b2d9e486c6">RSCThrCrvParam::RSCThrCrvParam</a></div><div class="ttdeci">RSCThrCrvParam(void)</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8cpp_source.html#l00127">AP_MotorsHeli_RSC.cpp:127</a></div></div>
<div class="ttc" id="structAP__Param_1_1GroupInfo_html"><div class="ttname"><a href="structAP__Param_1_1GroupInfo.html">AP_Param::GroupInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__Param_8h_source.html#l00142">AP_Param.h:142</a></div></div>
<div class="ttc" id="structrange_html"><div class="ttname"><a href="structrange.html">range</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__RangeFinder__BBB__PRU_8h_source.html#l00015">AP_RangeFinder_BBB_PRU.h:15</a></div></div>
<div class="ttc" id="namespaceAP__HAL_html_a7aa0ce7625c9680e30ff4a99940907a5"><div class="ttname"><a href="namespaceAP__HAL.html#a7aa0ce7625c9680e30ff4a99940907a5">AP_HAL::micros64</a></div><div class="ttdeci">uint64_t micros64()</div><div class="ttdef"><b>Definition:</b> <a href="ChibiOS_2system_8cpp_source.html#l00167">system.cpp:167</a></div></div>
<div class="ttc" id="spline5_8cpp_html_a612a0aade79b929f0031b3167ebedf9b"><div class="ttname"><a href="spline5_8cpp.html#a612a0aade79b929f0031b3167ebedf9b">splinterp5</a></div><div class="ttdeci">void splinterp5(const float x[5], float out[4][4])</div><div class="ttdef"><b>Definition:</b> <a href="spline5_8cpp_source.html#l00027">spline5.cpp:27</a></div></div>
<div class="ttc" id="classAP__MotorsHeli__RSC_html_a96030fe9edba894c9b2cb2ed39c00ac7"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a96030fe9edba894c9b2cb2ed39c00ac7">AP_MotorsHeli_RSC::_collective_in</a></div><div class="ttdeci">float _collective_in</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00133">AP_MotorsHeli_RSC.h:133</a></div></div>
<div class="ttc" id="classAP__MotorsHeli__RSC_html_afcadabdd0a897bed905a1f178011d094"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#afcadabdd0a897bed905a1f178011d094">AP_MotorsHeli_RSC::get_rotor_speed</a></div><div class="ttdeci">float get_rotor_speed() const</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8cpp_source.html#l00325">AP_MotorsHeli_RSC.cpp:325</a></div></div>
<div class="ttc" id="structAP__Param_1_1GroupInfo_html_a06b35095a2367f24a17376f49abbb117"><div class="ttname"><a href="structAP__Param_1_1GroupInfo.html#a06b35095a2367f24a17376f49abbb117">AP_Param::GroupInfo::idx</a></div><div class="ttdeci">uint8_t idx</div><div class="ttdef"><b>Definition:</b> <a href="AP__Param_8h_source.html#l00144">AP_Param.h:144</a></div></div>
<div class="ttc" id="AP__MotorsHeli__RSC_8h_html_a48c3244a3e5ecae4ea8285e28204d36f"><div class="ttname"><a href="AP__MotorsHeli__RSC_8h.html#a48c3244a3e5ecae4ea8285e28204d36f">AP_MOTORS_HELI_RSC_GOVERNOR_DROOP_DEFAULT</a></div><div class="ttdeci">#define AP_MOTORS_HELI_RSC_GOVERNOR_DROOP_DEFAULT</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00018">AP_MotorsHeli_RSC.h:18</a></div></div>
<div class="ttc" id="classAP__MotorsHeli__RSC_html_ab23a1aebfd83a9e76acf076a2f15841b"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#ab23a1aebfd83a9e76acf076a2f15841b">AP_MotorsHeli_RSC::output</a></div><div class="ttdeci">void output(RotorControlState state)</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8cpp_source.html#l00163">AP_MotorsHeli_RSC.cpp:163</a></div></div>
<div class="ttc" id="classAP__MotorsHeli__RSC_html_a58cc58b687e1a3fd1b2ddc6f96cdd2c8"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a58cc58b687e1a3fd1b2ddc6f96cdd2c8">AP_MotorsHeli_RSC::set_throttle_curve</a></div><div class="ttdeci">void set_throttle_curve(float thrcrv[5])</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8cpp_source.html#l00150">AP_MotorsHeli_RSC.cpp:150</a></div></div>
<div class="ttc" id="AP__Math_8h_html_ad525609d9dba6ffa556a0fbf08a3f9b4"><div class="ttname"><a href="AP__Math_8h.html#ad525609d9dba6ffa556a0fbf08a3f9b4">constrain_float</a></div><div class="ttdeci">float constrain_float(const float amt, const float low, const float high)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Math_8h_source.html#l00142">AP_Math.h:142</a></div></div>
<div class="ttc" id="classAP__MotorsHeli__RSC_html_a15973f14ea1331c8def95e6cde3ad1db"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a15973f14ea1331c8def95e6cde3ad1db">AP_MotorsHeli_RSC::write_rsc</a></div><div class="ttdeci">void write_rsc(float servo_out)</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8cpp_source.html#l00333">AP_MotorsHeli_RSC.cpp:333</a></div></div>
<div class="ttc" id="classAP__MotorsHeli__RSC_html_a3a15dfa9030fc0761bb2b71c9167ed33"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a3a15dfa9030fc0761bb2b71c9167ed33">AP_MotorsHeli_RSC::_last_update_us</a></div><div class="ttdeci">uint64_t _last_update_us</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00114">AP_MotorsHeli_RSC.h:114</a></div></div>
<div class="ttc" id="AP__MotorsHeli__RSC_8h_html"><div class="ttname"><a href="AP__MotorsHeli__RSC_8h.html">AP_MotorsHeli_RSC.h</a></div></div>
<div class="ttc" id="classRSCGovParam_html_ae69ba5cf833fb8eaa27b32c06a16d739"><div class="ttname"><a href="classRSCGovParam.html#ae69ba5cf833fb8eaa27b32c06a16d739">RSCGovParam::var_info</a></div><div class="ttdeci">static const struct AP_Param::GroupInfo var_info[]</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00181">AP_MotorsHeli_RSC.h:181</a></div></div>
<div class="ttc" id="classRSCGovParam_html"><div class="ttname"><a href="classRSCGovParam.html">RSCGovParam</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00177">AP_MotorsHeli_RSC.h:177</a></div></div>
<div class="ttc" id="main_8c_html_a8d04d02fe8bb190484bba202fee18f5c"><div class="ttname"><a href="main_8c.html#a8d04d02fe8bb190484bba202fee18f5c">state</a></div><div class="ttdeci">static struct generator_state state</div><div class="ttdef"><b>Definition:</b> <a href="main_8c_source.html#l00064">main.c:64</a></div></div>
<div class="ttc" id="AP__MotorsHeli__RSC_8h_html_a36de13430db64e7068d0522f9dc24b96a54c5cd5bd58f29be4b0bec3305fdddd0"><div class="ttname"><a href="AP__MotorsHeli__RSC_8h.html#a36de13430db64e7068d0522f9dc24b96a54c5cd5bd58f29be4b0bec3305fdddd0">ROTOR_CONTROL_MODE_SPEED_PASSTHROUGH</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00032">AP_MotorsHeli_RSC.h:32</a></div></div>
<div class="ttc" id="AP__MotorsHeli__RSC_8h_html_af43ed21e778cfd1c1d117a96aac4749f"><div class="ttname"><a href="AP__MotorsHeli__RSC_8h.html#af43ed21e778cfd1c1d117a96aac4749f">AP_MOTORS_HELI_RSC_THRCRV_75_DEFAULT</a></div><div class="ttdeci">#define AP_MOTORS_HELI_RSC_THRCRV_75_DEFAULT</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00012">AP_MotorsHeli_RSC.h:12</a></div></div>
<div class="ttc" id="classRSCThrCrvParam_html_ab75a8e85bd9d121fbb87727bf290ad88"><div class="ttname"><a href="classRSCThrCrvParam.html#ab75a8e85bd9d121fbb87727bf290ad88">RSCThrCrvParam::var_info</a></div><div class="ttdeci">static const struct AP_Param::GroupInfo var_info[]</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00160">AP_MotorsHeli_RSC.h:160</a></div></div>
<div class="ttc" id="AP__MotorsHeli__RSC_8h_html_a36de13430db64e7068d0522f9dc24b96a7cd1d8a1939b3214f58d196a6ac5ff2a"><div class="ttname"><a href="AP__MotorsHeli__RSC_8h.html#a36de13430db64e7068d0522f9dc24b96a7cd1d8a1939b3214f58d196a6ac5ff2a">ROTOR_CONTROL_MODE_OPEN_LOOP_POWER_OUTPUT</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00034">AP_MotorsHeli_RSC.h:34</a></div></div>
<div class="ttc" id="AP__MotorsHeli__RSC_8h_html_a844404bedbaf4aa206880965cd7610f7a9bc857733cdb5b5956b9c23faff15db9"><div class="ttname"><a href="AP__MotorsHeli__RSC_8h.html#a844404bedbaf4aa206880965cd7610f7a9bc857733cdb5b5956b9c23faff15db9">ROTOR_CONTROL_IDLE</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00025">AP_MotorsHeli_RSC.h:25</a></div></div>
<div class="ttc" id="classAP__MotorsHeli__RSC_html_a94c896094d9b49bfc77e341b536b46f1"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a94c896094d9b49bfc77e341b536b46f1">AP_MotorsHeli_RSC::_rotor_runup_output</a></div><div class="ttdeci">float _rotor_runup_output</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00127">AP_MotorsHeli_RSC.h:127</a></div></div>
<div class="ttc" id="AP__Param_8h_html_a0f9acb038a5283b964b862aea8cc5051"><div class="ttname"><a href="AP__Param_8h.html#a0f9acb038a5283b964b862aea8cc5051">AP_GROUPEND</a></div><div class="ttdeci">#define AP_GROUPEND</div><div class="ttdef"><b>Definition:</b> <a href="AP__Param_8h_source.html#l00118">AP_Param.h:118</a></div></div>
<div class="ttc" id="classAP__MotorsHeli__RSC_html_a16988d0a63ee2fbbcd015600705129cf"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a16988d0a63ee2fbbcd015600705129cf">AP_MotorsHeli_RSC::_runup_time</a></div><div class="ttdeci">int8_t _runup_time</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00129">AP_MotorsHeli_RSC.h:129</a></div></div>
<div class="ttc" id="classAP__MotorsHeli__RSC_html_ada68385131b3f4a7064cd97dfe56ce39"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#ada68385131b3f4a7064cd97dfe56ce39">AP_MotorsHeli_RSC::_critical_speed</a></div><div class="ttdeci">float _critical_speed</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00122">AP_MotorsHeli_RSC.h:122</a></div></div>
<div class="ttc" id="classAP__Param_html_a5f6dcfce1c0a79cf5bd81283e22f3201"><div class="ttname"><a href="classAP__Param.html#a5f6dcfce1c0a79cf5bd81283e22f3201">AP_Param::setup_object_defaults</a></div><div class="ttdeci">static void setup_object_defaults(const void *object_pointer, const struct GroupInfo *group_info)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Param_8cpp_source.html#l01265">AP_Param.cpp:1265</a></div></div>
<div class="ttc" id="classAP__MotorsHeli__RSC_html_a840bba899bf55af62380583172d5e864"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a840bba899bf55af62380583172d5e864">AP_MotorsHeli_RSC::_governor_droop_response</a></div><div class="ttdeci">float _governor_droop_response</div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00139">AP_MotorsHeli_RSC.h:139</a></div></div>
<div class="ttc" id="AP__MotorsHeli__RSC_8h_html_a844404bedbaf4aa206880965cd7610f7a9459be5b23c6dd7c9fab0d75e89673ec"><div class="ttname"><a href="AP__MotorsHeli__RSC_8h.html#a844404bedbaf4aa206880965cd7610f7a9459be5b23c6dd7c9fab0d75e89673ec">ROTOR_CONTROL_ACTIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00026">AP_MotorsHeli_RSC.h:26</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Jul 11 2019 14:17:31 for APM:Libraries by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
