<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>APM:Libraries: libraries/AP_WindVane/AP_WindVane.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">APM:Libraries
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_bc0718b08fb2015b8e59c47b2805f60c.html">libraries</a></li><li class="navelem"><a class="el" href="dir_d042a8d8e57d50fd0fd500efb5685156.html">AP_WindVane</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">AP_WindVane.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="AP__WindVane_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">   This program is free software: you can redistribute it and/or modify</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">   it under the terms of the GNU General Public License as published by</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">   the Free Software Foundation, either version 3 of the License, or</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">   (at your option) any later version.</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">   This program is distributed in the hope that it will be useful,</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">   GNU General Public License for more details.</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">   You should have received a copy of the GNU General Public License</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">   along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AP__WindVane_8h.html">AP_WindVane.h</a>&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AP__WindVane__Home_8h.html">AP_WindVane_Home.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AP__WindVane__Analog_8h.html">AP_WindVane_Analog.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AP__WindVane__ModernDevice_8h.html">AP_WindVane_ModernDevice.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AP__WindVane__Airspeed_8h.html">AP_WindVane_Airspeed.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AP__WindVane__RPM_8h.html">AP_WindVane_RPM.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AP__WindVane__SITL_8h.html">AP_WindVane_SITL.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AP__WindVane__NMEA_8h.html">AP_WindVane_NMEA.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="AP__WindVane_8cpp.html#aa87f226b51753f8b59d691d84f0771cb">   26</a></span>&#160;<span class="preprocessor">#define WINDVANE_DEFAULT_PIN 15                     // default wind vane sensor analog pin</span></div><div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="AP__WindVane_8cpp.html#aa54bb5638fc00450b70ee86c1618a17b">   27</a></span>&#160;<span class="preprocessor">#define WINDSPEED_DEFAULT_SPEED_PIN 14              // default pin for reading speed from ModernDevice rev p wind sensor</span></div><div class="line"><a name="l00028"></a><span class="lineno"><a class="line" href="AP__WindVane_8cpp.html#ad183da7c6b0d8b5eee19cfe12300349c">   28</a></span>&#160;<span class="preprocessor">#define WINDSPEED_DEFAULT_TEMP_PIN 13               // default pin for reading temperature from ModernDevice rev p wind sensor</span></div><div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="AP__WindVane_8cpp.html#ac258ff7a3e6d13ff04d930d680cb8d14">   29</a></span>&#160;<span class="preprocessor">#define WINDSPEED_DEFAULT_VOLT_OFFSET 1.346         // default voltage offset between speed and temp pins from ModernDevice rev p wind sensor</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="keyword">const</span> <a class="code" href="structAP__Param_1_1GroupInfo.html">AP_Param::GroupInfo</a> <a class="code" href="classAP__WindVane.html#a7fe5da9d9a94378622fed263f2da65da">AP_WindVane::var_info</a>[] = {</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <span class="comment">// @Param: TYPE</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <span class="comment">// @DisplayName: Wind Vane Type</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <span class="comment">// @Description: Wind Vane type</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="comment">// @Values: 0:None,1:Heading when armed,2:RC input offset heading when armed,3:Analog,4:NMEA,10:SITL</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="comment">// @User: Standard</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="comment">// @RebootRequired: True</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <a class="code" href="AP__Param_8h.html#ac24e2eb16c2194e975d27e47ddcb7f1c">AP_GROUPINFO_FLAGS</a>(<span class="stringliteral">&quot;TYPE&quot;</span>, 1, <a class="code" href="classAP__WindVane.html">AP_WindVane</a>, _direction_type, 0, <a class="code" href="AP__Param_8h.html#ae25c1c7495435989f8be5781c86be078">AP_PARAM_FLAG_ENABLE</a>),</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="comment">// @Param: RC_IN_NO</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="comment">// @DisplayName: Wind vane sensor RC Input Channel</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="comment">// @Description: RC Input Channel to use as wind angle value</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="comment">// @Range: 0 16</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="comment">// @Increment: 1</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="comment">// @User: Standard</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <a class="code" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;RC_IN_NO&quot;</span>, 2, <a class="code" href="classAP__WindVane.html">AP_WindVane</a>, _rc_in_no, 0),</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="comment">// @Param: DIR_PIN</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="comment">// @DisplayName: Wind vane analog voltage pin for direction</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="comment">// @Description: Analog input pin to read as wind vane direction</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="comment">// @Values: 11:Pixracer,13:Pixhawk ADC4,14:Pixhawk ADC3,15:Pixhawk ADC6,15:Pixhawk2 ADC,50:PixhawkAUX1,51:PixhawkAUX2,52:PixhawkAUX3,53:PixhawkAUX4,54:PixhawkAUX5,55:PixhawkAUX6,103:Pixhawk SBUS</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="comment">// @User: Standard</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <a class="code" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;DIR_PIN&quot;</span>, 3, <a class="code" href="classAP__WindVane.html">AP_WindVane</a>, _dir_analog_pin, <a class="code" href="AP__WindVane_8cpp.html#aa87f226b51753f8b59d691d84f0771cb">WINDVANE_DEFAULT_PIN</a>),</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="comment">// @Param: DIR_V_MIN</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="comment">// @DisplayName: Wind vane voltage minimum</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="comment">// @Description: Minimum voltage supplied by analog wind vane</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="comment">// @Units: V</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="comment">// @Increment: 0.01</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="comment">// @Range: 0 5.0</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="comment">// @User: Standard</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <a class="code" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;DIR_V_MIN&quot;</span>, 4, <a class="code" href="classAP__WindVane.html">AP_WindVane</a>, _dir_analog_volt_min, 0.0<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>),</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="comment">// @Param: DIR_V_MAX</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="comment">// @DisplayName: Wind vane voltage maximum</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="comment">// @Description: Maximum voltage supplied by analog wind vane</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="comment">// @Units: V</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="comment">// @Increment: 0.01</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="comment">// @Range: 0 5.0</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="comment">// @User: Standard</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <a class="code" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;DIR_V_MAX&quot;</span>, 5, <a class="code" href="classAP__WindVane.html">AP_WindVane</a>, _dir_analog_volt_max, 3.3<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>),</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="comment">// @Param: DIR_OFS</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="comment">// @DisplayName: Wind vane headwind offset</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="comment">// @Description: Angle offset when analog windvane is indicating a headwind, ie 0 degress relative to vehicle</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="comment">// @Units: deg</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="comment">// @Increment: 1</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="comment">// @Range: 0 360</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="comment">// @User: Standard</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <a class="code" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;DIR_OFS&quot;</span>, 6, <a class="code" href="classAP__WindVane.html">AP_WindVane</a>, _dir_analog_bearing_offset, 0.0<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>),</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="comment">// @Param: DIR_FILT</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="comment">// @DisplayName: Wind vane direction low pass filter frequency</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="comment">// @Description: Wind vane direction low pass filter frequency, a value of -1 disables filter</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="comment">// @Units: Hz</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="comment">// @User: Standard</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <a class="code" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;DIR_FILT&quot;</span>, 7, <a class="code" href="classAP__WindVane.html">AP_WindVane</a>, _dir_filt_hz, 0.5<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>),</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="comment">// @Param: CAL</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="comment">// @DisplayName: Wind vane calibration start</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="comment">// @Description: Start wind vane calibration by setting this to 1 or 2</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="comment">// @Values: 0:None, 1:Calibrate direction, 2:Calibrate speed</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="comment">// @User: Standard</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <a class="code" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;CAL&quot;</span>, 8, <a class="code" href="classAP__WindVane.html">AP_WindVane</a>, _calibration, 0),</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="comment">// @Param: DIR_DZ</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="comment">// @DisplayName: Wind vane deadzone when using analog sensor</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="comment">// @Description: Wind vane deadzone when using analog sensor</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="comment">// @Units: deg</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="comment">// @Increment: 1</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="comment">// @Range: 0 360</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="comment">// @User: Standard</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <a class="code" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;DIR_DZ&quot;</span>, 9, <a class="code" href="classAP__WindVane.html">AP_WindVane</a>, _dir_analog_deadzone, 0),</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="comment">// @Param: SPEED_MIN</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="comment">// @DisplayName: Wind vane cut off wind speed</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="comment">// @Description: Wind vane direction will be ignored when apparent wind speeds are below this value (if wind speed sensor is present).  If the apparent wind is consistently below this value the vane will not work</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="comment">// @Units: m/s</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="comment">// @Increment: 0.1</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="comment">// @Range: 0 5</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="comment">// @User: Standard</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <a class="code" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;SPEED_MIN&quot;</span>, 10, <a class="code" href="classAP__WindVane.html">AP_WindVane</a>, _dir_speed_cutoff, 0),</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="comment">// @Param: SPEED_TYPE</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="comment">// @DisplayName: Wind speed sensor Type</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="comment">// @Description: Wind speed sensor type</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="comment">// @Values: 0:None,1:Airspeed library,2:Modern Devices Wind Sensor,3:RPM library,4:NMEA,10:SITL</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="comment">// @User: Standard</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="comment">// @RebootRequired: True</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <a class="code" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;SPEED_TYPE&quot;</span>, 11, <a class="code" href="classAP__WindVane.html">AP_WindVane</a>, _speed_sensor_type,  0),</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="comment">// @Param: SPEED_PIN</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="comment">// @DisplayName: Wind vane speed sensor analog pin</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="comment">// @Description: Wind speed analog speed input pin for Modern Devices Wind Sensor rev. p</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="comment">// @Values: 11:Pixracer,13:Pixhawk ADC4,14:Pixhawk ADC3,15:Pixhawk ADC6,15:Pixhawk2 ADC,50:PixhawkAUX1,51:PixhawkAUX2,52:PixhawkAUX3,53:PixhawkAUX4,54:PixhawkAUX5,55:PixhawkAUX6,103:Pixhawk SBUS</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="comment">// @User: Standard</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <a class="code" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;SPEED_PIN&quot;</span>, 12, <a class="code" href="classAP__WindVane.html">AP_WindVane</a>, _speed_sensor_speed_pin,  <a class="code" href="AP__WindVane_8cpp.html#aa54bb5638fc00450b70ee86c1618a17b">WINDSPEED_DEFAULT_SPEED_PIN</a>),</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="comment">// @Param: TEMP_PIN</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="comment">// @DisplayName: Wind vane speed sensor analog temp pin</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="comment">// @Description: Wind speed sensor analog temp input pin for Modern Devices Wind Sensor rev. p, set to -1 to diasble temp readings</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="comment">// @Values: 11:Pixracer,13:Pixhawk ADC4,14:Pixhawk ADC3,15:Pixhawk ADC6,15:Pixhawk2 ADC,50:PixhawkAUX1,51:PixhawkAUX2,52:PixhawkAUX3,53:PixhawkAUX4,54:PixhawkAUX5,55:PixhawkAUX6,103:Pixhawk SBUS</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="comment">// @User: Standard</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <a class="code" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;TEMP_PIN&quot;</span>, 13, <a class="code" href="classAP__WindVane.html">AP_WindVane</a>, _speed_sensor_temp_pin,  <a class="code" href="AP__WindVane_8cpp.html#ad183da7c6b0d8b5eee19cfe12300349c">WINDSPEED_DEFAULT_TEMP_PIN</a>),</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="comment">// @Param: SPEED_OFS</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="comment">// @DisplayName: Wind speed sensor analog voltage offset</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="comment">// @Description: Wind sensor analog voltage offset at zero wind speed</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="comment">// @Units: V</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="comment">// @Increment: 0.01</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="comment">// @Range: 0 3.3</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="comment">// @User: Standard</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <a class="code" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;SPEED_OFS&quot;</span>, 14, <a class="code" href="classAP__WindVane.html">AP_WindVane</a>, _speed_sensor_voltage_offset, <a class="code" href="AP__WindVane_8cpp.html#ac258ff7a3e6d13ff04d930d680cb8d14">WINDSPEED_DEFAULT_VOLT_OFFSET</a>),</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="comment">// @Param: SPEED_FILT</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="comment">// @DisplayName: Wind speed low pass filter frequency</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="comment">// @Description: Wind speed low pass filter frequency, a value of -1 disables filter</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="comment">// @Units: Hz</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="comment">// @User: Standard</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <a class="code" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;SPEED_FILT&quot;</span>, 15, <a class="code" href="classAP__WindVane.html">AP_WindVane</a>, _speed_filt_hz, 0.5<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>),</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <a class="code" href="AP__Param_8h.html#a0f9acb038a5283b964b862aea8cc5051">AP_GROUPEND</a></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;};</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">// constructor</span></div><div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="classAP__WindVane.html#aaa76bf3a703e3ca433dbe546c657763d">  157</a></span>&#160;<a class="code" href="classAP__WindVane.html#aaa76bf3a703e3ca433dbe546c657763d">AP_WindVane::AP_WindVane</a>()</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;{</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <a class="code" href="classAP__Param.html#a5f6dcfce1c0a79cf5bd81283e22f3201">AP_Param::setup_object_defaults</a>(<span class="keyword">this</span>, <a class="code" href="classAP__WindVane.html#a7fe5da9d9a94378622fed263f2da65da">var_info</a>);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="preprocessor">#if CONFIG_HAL_BOARD == HAL_BOARD_SITL</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classAP__WindVane.html#ad560e462671bcd766df9341093ecf690">_singleton</a>) {</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <a class="code" href="namespaceAP__HAL.html#a71832f03d849a0c088f04fc98d3c8143">AP_HAL::panic</a>(<span class="stringliteral">&quot;Too many Wind Vane sensors&quot;</span>);</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    }</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <a class="code" href="classAP__WindVane.html#ad560e462671bcd766df9341093ecf690">_singleton</a> = <span class="keyword">this</span>;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;}</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment"> * Get the AP_WindVane singleton</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="classAP__WindVane.html#aecc10d6ca30f2e930621539edc4e89df">  171</a></span>&#160;<a class="code" href="classAP__WindVane.html">AP_WindVane</a> *<a class="code" href="classAP__WindVane.html#aecc10d6ca30f2e930621539edc4e89df">AP_WindVane::get_singleton</a>()</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;{</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classAP__WindVane.html#ad560e462671bcd766df9341093ecf690">_singleton</a>;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;}</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">// return true if wind vane is enabled</span></div><div class="line"><a name="l00177"></a><span class="lineno"><a class="line" href="classAP__WindVane.html#a7500cd6e7d98b4e7960d4858beb23b59">  177</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classAP__WindVane.html#a7500cd6e7d98b4e7960d4858beb23b59">AP_WindVane::enabled</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classAP__WindVane.html#a354bce01ac6cbf0454fe0de02b7edf5f">_direction_type</a> != <a class="code" href="classAP__WindVane.html#a4a050c1989398f484b95f3385fefebe2a222f8bb5d85359fe72a876208943a776">WINDVANE_NONE</a>;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;}</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">// Initialize the Wind Vane object and prepare it for use</span></div><div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="classAP__WindVane.html#ab7f769ebd4786220b1ed376d6b5b1294">  183</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classAP__WindVane.html#ab7f769ebd4786220b1ed376d6b5b1294">AP_WindVane::init</a>(<span class="keyword">const</span> <a class="code" href="classAP__SerialManager.html">AP_SerialManager</a>&amp; <a class="code" href="AHRS__Test_8cpp.html#a90ddf96040cbf0429052dafd4fa64c12">serial_manager</a>)</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;{</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="comment">// don&#39;t construct twice</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classAP__WindVane.html#ab7df6bd2aeb23b16c1dce4ce4e80234b">_direction_driver</a> != <span class="keyword">nullptr</span> || <a class="code" href="classAP__WindVane.html#a04b4310af778ab0f8ac058e257d66f20">_speed_driver</a> != <span class="keyword">nullptr</span> ) {</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    }</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="comment">// wind direction</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="classAP__WindVane.html#a354bce01ac6cbf0454fe0de02b7edf5f">_direction_type</a>) {</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="keywordflow">case</span> WindVaneType::WINDVANE_NONE:</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            <span class="comment">// WindVane disabled</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <span class="keywordflow">case</span> WindVaneType::WINDVANE_HOME_HEADING:</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="keywordflow">case</span> WindVaneType::WINDVANE_PWM_PIN:</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            <a class="code" href="classAP__WindVane.html#ab7df6bd2aeb23b16c1dce4ce4e80234b">_direction_driver</a> = <span class="keyword">new</span> <a class="code" href="classAP__WindVane.html#ac935719dfcc4a870aaac39c0154b1200">AP_WindVane_Home</a>(*<span class="keyword">this</span>);</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="keywordflow">case</span> WindVaneType::WINDVANE_ANALOG_PIN:</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            <a class="code" href="classAP__WindVane.html#ab7df6bd2aeb23b16c1dce4ce4e80234b">_direction_driver</a> = <span class="keyword">new</span> <a class="code" href="classAP__WindVane.html#a619cfaf982b4dcffdbc6788ffc914338">AP_WindVane_Analog</a>(*<span class="keyword">this</span>);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <span class="keywordflow">case</span> WindVaneType::WINDVANE_SITL:</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="preprocessor">#if CONFIG_HAL_BOARD == HAL_BOARD_SITL</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            <a class="code" href="classAP__WindVane.html#ab7df6bd2aeb23b16c1dce4ce4e80234b">_direction_driver</a> = <span class="keyword">new</span> <a class="code" href="classAP__WindVane.html#a0e3858f7f56c708791c429500517bc04">AP_WindVane_SITL</a>(*<span class="keyword">this</span>);</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <span class="keywordflow">case</span> WindVaneType::WINDVANE_NMEA:</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            <a class="code" href="classAP__WindVane.html#ab7df6bd2aeb23b16c1dce4ce4e80234b">_direction_driver</a> = <span class="keyword">new</span> <a class="code" href="classAP__WindVane.html#a1171940b945e737b201b66d8852bd2a6">AP_WindVane_NMEA</a>(*<span class="keyword">this</span>);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            <a class="code" href="classAP__WindVane.html#ab7df6bd2aeb23b16c1dce4ce4e80234b">_direction_driver</a>-&gt;<a class="code" href="classAP__WindVane__Backend.html#ac49e769e439171bdf74b13ffd928bd7e">init</a>(<a class="code" href="AHRS__Test_8cpp.html#a90ddf96040cbf0429052dafd4fa64c12">serial_manager</a>);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    }</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="comment">// wind speed</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="classAP__WindVane.html#ab6e4b38ce9ba31b2ee1be06c978eb5db">_speed_sensor_type</a>) {</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <span class="keywordflow">case</span> Speed_type::WINDSPEED_NONE:</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <span class="keywordflow">case</span> Speed_type::WINDSPEED_AIRSPEED:</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            <a class="code" href="classAP__WindVane.html#a04b4310af778ab0f8ac058e257d66f20">_speed_driver</a> = <span class="keyword">new</span> <a class="code" href="classAP__WindVane.html#a41472688357a9cc2a3a1e8c0a8c2fb70">AP_WindVane_Airspeed</a>(*<span class="keyword">this</span>);</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <span class="keywordflow">case</span> Speed_type::WINDVANE_WIND_SENSOR_REV_P:</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            <a class="code" href="classAP__WindVane.html#a04b4310af778ab0f8ac058e257d66f20">_speed_driver</a> = <span class="keyword">new</span> <a class="code" href="classAP__WindVane.html#a4f44693a270b770cf3a432c48bd4cb1f">AP_WindVane_ModernDevice</a>(*<span class="keyword">this</span>);</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <span class="keywordflow">case</span> Speed_type::WINDSPEED_SITL:</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="preprocessor">#if CONFIG_HAL_BOARD == HAL_BOARD_SITL</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            <span class="comment">// single driver does both speed and direction</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classAP__WindVane.html#a354bce01ac6cbf0454fe0de02b7edf5f">_direction_type</a> != WindVaneType::WINDVANE_SITL) {</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                <a class="code" href="classAP__WindVane.html#a04b4310af778ab0f8ac058e257d66f20">_speed_driver</a> = <span class="keyword">new</span> <a class="code" href="classAP__WindVane.html#a0e3858f7f56c708791c429500517bc04">AP_WindVane_SITL</a>(*<span class="keyword">this</span>);</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                <a class="code" href="classAP__WindVane.html#a04b4310af778ab0f8ac058e257d66f20">_speed_driver</a> = <a class="code" href="classAP__WindVane.html#ab7df6bd2aeb23b16c1dce4ce4e80234b">_direction_driver</a>;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;            }</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="keywordflow">case</span> Speed_type::WINDSPEED_NMEA:</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            <span class="comment">// single driver does both speed and direction</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classAP__WindVane.html#a354bce01ac6cbf0454fe0de02b7edf5f">_direction_type</a> != WindVaneType::WINDVANE_NMEA) {</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                <a class="code" href="classAP__WindVane.html#a04b4310af778ab0f8ac058e257d66f20">_speed_driver</a> = <span class="keyword">new</span> <a class="code" href="classAP__WindVane.html#a1171940b945e737b201b66d8852bd2a6">AP_WindVane_NMEA</a>(*<span class="keyword">this</span>);</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                <a class="code" href="classAP__WindVane.html#a04b4310af778ab0f8ac058e257d66f20">_speed_driver</a>-&gt;<a class="code" href="classAP__WindVane__Backend.html#ac49e769e439171bdf74b13ffd928bd7e">init</a>(<a class="code" href="AHRS__Test_8cpp.html#a90ddf96040cbf0429052dafd4fa64c12">serial_manager</a>);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                <a class="code" href="classAP__WindVane.html#a04b4310af778ab0f8ac058e257d66f20">_speed_driver</a> = <a class="code" href="classAP__WindVane.html#ab7df6bd2aeb23b16c1dce4ce4e80234b">_direction_driver</a>;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            }</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <span class="keywordflow">case</span> Speed_type::WINDSPEED_RPM:</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            <a class="code" href="classAP__WindVane.html#a04b4310af778ab0f8ac058e257d66f20">_speed_driver</a> = <span class="keyword">new</span> <a class="code" href="classAP__WindVane.html#a0b98c68e6983862da0331e1c4779437e">AP_WindVane_RPM</a>(*<span class="keyword">this</span>);</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    }</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;}</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">// update wind vane, expected to be called at 20hz</span></div><div class="line"><a name="l00249"></a><span class="lineno"><a class="line" href="classAP__WindVane.html#a4be87cdbcdac2f146d3b9b1b09aa1e8a">  249</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classAP__WindVane.html#a4be87cdbcdac2f146d3b9b1b09aa1e8a">AP_WindVane::update</a>()</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;{</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordtype">bool</span> have_speed = <a class="code" href="classAP__WindVane.html#a04b4310af778ab0f8ac058e257d66f20">_speed_driver</a> != <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordtype">bool</span> have_direciton = <a class="code" href="classAP__WindVane.html#ab7df6bd2aeb23b16c1dce4ce4e80234b">_direction_driver</a> != <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="comment">// exit immediately if not enabled</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classAP__WindVane.html#a7500cd6e7d98b4e7960d4858beb23b59">enabled</a>() || (!have_speed &amp;&amp; !have_direciton)) {</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    }</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="comment">// calibrate if booted and disarmed</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="AC__AttitudeControl_8cpp.html#a240c1a4ae2a70d1855f91e4a0b1ac938">hal</a>.<a class="code" href="classAP__HAL_1_1HAL.html#a9337a60383f4264fa96a20dbe43a4e2e">util</a>-&gt;<a class="code" href="classAP__HAL_1_1Util.html#a287a2b82fa30b92c8d52aad61d4d27b7">get_soft_armed</a>()) {</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classAP__WindVane.html#acab97955a9626e216d3577fe3598b572">_calibration</a> == 1 &amp;&amp; have_direciton) {</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            <a class="code" href="classAP__WindVane.html#ab7df6bd2aeb23b16c1dce4ce4e80234b">_direction_driver</a>-&gt;<a class="code" href="classAP__WindVane__Backend.html#a2ff5418cb8acb0643a010bf0b0f3e5fb">calibrate</a>();</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classAP__WindVane.html#acab97955a9626e216d3577fe3598b572">_calibration</a> == 2 &amp;&amp; have_speed) {</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            <a class="code" href="classAP__WindVane.html#a04b4310af778ab0f8ac058e257d66f20">_speed_driver</a>-&gt;<a class="code" href="classAP__WindVane__Backend.html#a2ff5418cb8acb0643a010bf0b0f3e5fb">calibrate</a>();</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classAP__WindVane.html#acab97955a9626e216d3577fe3598b572">_calibration</a> != 0) {</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            <a class="code" href="GCS_8h.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a>().<a class="code" href="classGCS.html#a9866f3484283db744409e40719cef765">send_text</a>(MAV_SEVERITY_INFO, <span class="stringliteral">&quot;WindVane: driver not found&quot;</span>);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            <a class="code" href="classAP__WindVane.html#acab97955a9626e216d3577fe3598b572">_calibration</a>.set_and_save(0);</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        }</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classAP__WindVane.html#acab97955a9626e216d3577fe3598b572">_calibration</a> != 0) {</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <a class="code" href="GCS_8h.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a>().<a class="code" href="classGCS.html#a9866f3484283db744409e40719cef765">send_text</a>(MAV_SEVERITY_INFO, <span class="stringliteral">&quot;WindVane: disarm for cal&quot;</span>);</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <a class="code" href="classAP__WindVane.html#acab97955a9626e216d3577fe3598b572">_calibration</a>.set_and_save(0);</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    }</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="comment">// read apparent wind speed</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keywordflow">if</span> (have_speed) {</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <a class="code" href="classAP__WindVane.html#a04b4310af778ab0f8ac058e257d66f20">_speed_driver</a>-&gt;<a class="code" href="classAP__WindVane__Backend.html#a85cda608160fc801fe294168f1058b24">update_speed</a>();</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    }</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="comment">// read apparent wind direction</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classAP__WindVane.html#a725fbdffe6a6354f85bd317dc4b05127">_speed_apparent</a> &gt;= <a class="code" href="classAP__WindVane.html#a610204f0facddb725a4d172b7c2cc7bd">_dir_speed_cutoff</a> &amp;&amp; have_direciton) {</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <span class="comment">// only update if enough wind to move vane</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <a class="code" href="classAP__WindVane.html#ab7df6bd2aeb23b16c1dce4ce4e80234b">_direction_driver</a>-&gt;<a class="code" href="classAP__WindVane__Backend.html#a4730159bc96e7396e07d7d1528ce6178">update_direction</a>();</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    }</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="comment">// calculate true wind speed and direction from apparent wind</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordflow">if</span> (have_speed &amp;&amp; have_direciton) {</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <a class="code" href="classAP__WindVane.html#a15e29db6e47037c162e78f11b935df9f">update_true_wind_speed_and_direction</a>();</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <span class="comment">// no wind speed sensor, so can&#39;t do true wind calcs</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <a class="code" href="classAP__WindVane.html#a8f2e4bbafdf6373efc909b3bddbc1cda">_direction_absolute</a> = <a class="code" href="classAP__WindVane.html#a19c04d46abf56f19e5b0e64ba5163aa7">_direction_apparent_ef</a>;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <a class="code" href="classAP__WindVane.html#a3fcc0365f7daa8d235a5c8a576c03576">_speed_true</a> = 0.0f;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    }</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;}</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment">// to start direction calibration from mavlink or other</span></div><div class="line"><a name="l00298"></a><span class="lineno"><a class="line" href="classAP__WindVane.html#afab02f6ab69e882c2f9aa7e33b39c00f">  298</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classAP__WindVane.html#afab02f6ab69e882c2f9aa7e33b39c00f">AP_WindVane::start_direction_calibration</a>()</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;{</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classAP__WindVane.html#a7500cd6e7d98b4e7960d4858beb23b59">enabled</a>() &amp;&amp; (<a class="code" href="classAP__WindVane.html#acab97955a9626e216d3577fe3598b572">_calibration</a> == 0)) {</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <a class="code" href="classAP__WindVane.html#acab97955a9626e216d3577fe3598b572">_calibration</a> = 1;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    }</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;}</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment">// to start speed calibration from mavlink or other</span></div><div class="line"><a name="l00308"></a><span class="lineno"><a class="line" href="classAP__WindVane.html#a37da59f3d4c3ff297451eb64e86f31ce">  308</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classAP__WindVane.html#a37da59f3d4c3ff297451eb64e86f31ce">AP_WindVane::start_speed_calibration</a>()</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;{</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classAP__WindVane.html#a7500cd6e7d98b4e7960d4858beb23b59">enabled</a>() &amp;&amp; (<a class="code" href="classAP__WindVane.html#acab97955a9626e216d3577fe3598b572">_calibration</a> == 0)) {</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <a class="code" href="classAP__WindVane.html#acab97955a9626e216d3577fe3598b572">_calibration</a> = 2;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    }</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;}</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment">// send mavlink wind message</span></div><div class="line"><a name="l00318"></a><span class="lineno"><a class="line" href="classAP__WindVane.html#a4b42585b1f1d10f5717d663b491aa88b">  318</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classAP__WindVane.html#a4b42585b1f1d10f5717d663b491aa88b">AP_WindVane::send_wind</a>(mavlink_channel_t <a class="code" href="examples_2AnalogIn_2AnalogIn_8cpp.html#a130f3ebe4c1bb6993e1094760227ad6a">chan</a>)</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;{</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="comment">// exit immediately if not enabled</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classAP__WindVane.html#a7500cd6e7d98b4e7960d4858beb23b59">enabled</a>()) {</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    }</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="comment">// send wind</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    mavlink_msg_wind_send(</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <a class="code" href="examples_2AnalogIn_2AnalogIn_8cpp.html#a130f3ebe4c1bb6993e1094760227ad6a">chan</a>,</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <a class="code" href="AP__Math_8cpp.html#aac44349f9b159f31fc43fe924d52f7fc">wrap_360</a>(<a class="code" href="moduletest_8c.html#a903c4797a4c2860e3b9a6a978f98a44d">degrees</a>(<a class="code" href="classAP__WindVane.html#ad8198b5b4e8c38420a9ff6f843cc3050">get_absolute_wind_direction_rad</a>())),</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <a class="code" href="classAP__WindVane.html#aef84f518c8e7274881d338af8698fca0">get_true_wind_speed</a>(),</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        0);</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;}</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment">// calculate true wind speed and direction from apparent wind</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment">// https://en.wikipedia.org/wiki/Apparent_wind</span></div><div class="line"><a name="l00335"></a><span class="lineno"><a class="line" href="classAP__WindVane.html#a15e29db6e47037c162e78f11b935df9f">  335</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classAP__WindVane.html#a15e29db6e47037c162e78f11b935df9f">AP_WindVane::update_true_wind_speed_and_direction</a>()</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;{</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="comment">// if no vehicle speed, can&#39;t do calcs</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <a class="code" href="classVector3.html">Vector3f</a> veh_velocity;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespaceAP.html#a99432cfdb696952c9b7146f155a815aa">AP::ahrs</a>().get_velocity_NED(veh_velocity)) {</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        <span class="comment">// if no vehicle speed use apparent speed and direction directly</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <a class="code" href="classAP__WindVane.html#a8f2e4bbafdf6373efc909b3bddbc1cda">_direction_absolute</a> = <a class="code" href="classAP__WindVane.html#a19c04d46abf56f19e5b0e64ba5163aa7">_direction_apparent_ef</a>;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <a class="code" href="classAP__WindVane.html#a3fcc0365f7daa8d235a5c8a576c03576">_speed_true</a> = <a class="code" href="classAP__WindVane.html#a725fbdffe6a6354f85bd317dc4b05127">_speed_apparent</a>;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    }</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="comment">// convert apparent wind speed and direction to 2D vector in same frame as vehicle velocity</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> wind_dir_180 = <a class="code" href="AP__Math_8cpp.html#a21d0562d7b23dd9f04bc30a3611cc577">wrap_PI</a>(<a class="code" href="classAP__WindVane.html#a19c04d46abf56f19e5b0e64ba5163aa7">_direction_apparent_ef</a> + <a class="code" href="AP__Math_8h.html#a37d7c62a8231d9d22826261297b99da4">radians</a>(180));</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keyword">const</span> <a class="code" href="structVector2.html">Vector2f</a> wind_apparent_vec(cosf(wind_dir_180) * <a class="code" href="classAP__WindVane.html#a725fbdffe6a6354f85bd317dc4b05127">_speed_apparent</a>, sinf(wind_dir_180) * <a class="code" href="classAP__WindVane.html#a725fbdffe6a6354f85bd317dc4b05127">_speed_apparent</a>);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="comment">// add vehicle velocity</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <a class="code" href="structVector2.html">Vector2f</a> wind_true_vec = <a class="code" href="vector2_8h.html#a9f3739462b0605dcb64299fa289b6afe">Vector2f</a>(wind_apparent_vec.<a class="code" href="structVector2.html#a78fa1f2ed5e261c7fbeb8f3536a1ee34">x</a> + veh_velocity.<a class="code" href="classVector3.html#a1a0f7e168c71ca798099f0ba8a444244">x</a>, wind_apparent_vec.<a class="code" href="structVector2.html#a6cfed8355591aa269f4dba43bd806ef9">y</a> + veh_velocity.<a class="code" href="classVector3.html#a561df88b28e106e337a25bb86554a569">y</a>);</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="comment">// calculate true speed and direction</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <a class="code" href="classAP__WindVane.html#a8f2e4bbafdf6373efc909b3bddbc1cda">_direction_absolute</a> = <a class="code" href="AP__Math_8cpp.html#a21d0562d7b23dd9f04bc30a3611cc577">wrap_PI</a>(atan2f(wind_true_vec.<a class="code" href="structVector2.html#a6cfed8355591aa269f4dba43bd806ef9">y</a>, wind_true_vec.<a class="code" href="structVector2.html#a78fa1f2ed5e261c7fbeb8f3536a1ee34">x</a>) - <a class="code" href="AP__Math_8h.html#a37d7c62a8231d9d22826261297b99da4">radians</a>(180));</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <a class="code" href="classAP__WindVane.html#a3fcc0365f7daa8d235a5c8a576c03576">_speed_true</a> = wind_true_vec.<a class="code" href="structVector2.html#a671d712528ea3b2cc21fd4616eea8f98">length</a>();</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;}</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<a class="code" href="classAP__WindVane.html">AP_WindVane</a> *<a class="code" href="classAP__WindVane.html#ad560e462671bcd766df9341093ecf690">AP_WindVane::_singleton</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespaceAP.html">AP</a> {</div><div class="line"><a name="l00361"></a><span class="lineno"><a class="line" href="namespaceAP.html#a3d234397344391a215f01f280bed7035">  361</a></span>&#160;    <a class="code" href="classAP__WindVane.html">AP_WindVane</a> *<a class="code" href="namespaceAP.html#a3d234397344391a215f01f280bed7035">windvane</a>()</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    {</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classAP__WindVane.html#aecc10d6ca30f2e930621539edc4e89df">AP_WindVane::get_singleton</a>();</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    }</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;};</div><div class="ttc" id="classAP__HAL_1_1Util_html_a287a2b82fa30b92c8d52aad61d4d27b7"><div class="ttname"><a href="classAP__HAL_1_1Util.html#a287a2b82fa30b92c8d52aad61d4d27b7">AP_HAL::Util::get_soft_armed</a></div><div class="ttdeci">bool get_soft_armed() const</div><div class="ttdef"><b>Definition:</b> <a href="Util_8h_source.html#l00015">Util.h:15</a></div></div>
<div class="ttc" id="vector2_8h_html_a9f3739462b0605dcb64299fa289b6afe"><div class="ttname"><a href="vector2_8h.html#a9f3739462b0605dcb64299fa289b6afe">Vector2f</a></div><div class="ttdeci">Vector2&lt; float &gt; Vector2f</div><div class="ttdef"><b>Definition:</b> <a href="vector2_8h_source.html#l00260">vector2.h:260</a></div></div>
<div class="ttc" id="AHRS__Test_8cpp_html_a90ddf96040cbf0429052dafd4fa64c12"><div class="ttname"><a href="AHRS__Test_8cpp.html#a90ddf96040cbf0429052dafd4fa64c12">serial_manager</a></div><div class="ttdeci">static AP_SerialManager serial_manager</div><div class="ttdef"><b>Definition:</b> <a href="AHRS__Test_8cpp_source.html#l00027">AHRS_Test.cpp:27</a></div></div>
<div class="ttc" id="classAP__WindVane_html_ab6e4b38ce9ba31b2ee1be06c978eb5db"><div class="ttname"><a href="classAP__WindVane.html#ab6e4b38ce9ba31b2ee1be06c978eb5db">AP_WindVane::_speed_sensor_type</a></div><div class="ttdeci">AP_Int8 _speed_sensor_type</div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane_8h_source.html#l00092">AP_WindVane.h:92</a></div></div>
<div class="ttc" id="classAP__WindVane_html_ab7df6bd2aeb23b16c1dce4ce4e80234b"><div class="ttname"><a href="classAP__WindVane.html#ab7df6bd2aeb23b16c1dce4ce4e80234b">AP_WindVane::_direction_driver</a></div><div class="ttdeci">AP_WindVane_Backend * _direction_driver</div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane_8h_source.html#l00098">AP_WindVane.h:98</a></div></div>
<div class="ttc" id="AP__Param_8h_html_ae25c1c7495435989f8be5781c86be078"><div class="ttname"><a href="AP__Param_8h.html#ae25c1c7495435989f8be5781c86be078">AP_PARAM_FLAG_ENABLE</a></div><div class="ttdeci">#define AP_PARAM_FLAG_ENABLE</div><div class="ttdef"><b>Definition:</b> <a href="AP__Param_8h_source.html#l00057">AP_Param.h:57</a></div></div>
<div class="ttc" id="AP__WindVane__ModernDevice_8h_html"><div class="ttname"><a href="AP__WindVane__ModernDevice_8h.html">AP_WindVane_ModernDevice.h</a></div></div>
<div class="ttc" id="classAP__WindVane_html_a4f44693a270b770cf3a432c48bd4cb1f"><div class="ttname"><a href="classAP__WindVane.html#a4f44693a270b770cf3a432c48bd4cb1f">AP_WindVane::AP_WindVane_ModernDevice</a></div><div class="ttdeci">friend class AP_WindVane_ModernDevice</div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane_8h_source.html#l00029">AP_WindVane.h:29</a></div></div>
<div class="ttc" id="classAP__SerialManager_html"><div class="ttname"><a href="classAP__SerialManager.html">AP_SerialManager</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__SerialManager_8h_source.html#l00078">AP_SerialManager.h:78</a></div></div>
<div class="ttc" id="classAP__WindVane_html_aef84f518c8e7274881d338af8698fca0"><div class="ttname"><a href="classAP__WindVane.html#aef84f518c8e7274881d338af8698fca0">AP_WindVane::get_true_wind_speed</a></div><div class="ttdeci">float get_true_wind_speed() const</div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane_8h_source.html#l00064">AP_WindVane.h:64</a></div></div>
<div class="ttc" id="AP__Param_8h_html_a78a408c84f2a1bafde256ac650142e4d"><div class="ttname"><a href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a></div><div class="ttdeci">#define AP_GROUPINFO(name, idx, clazz, element, def)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Param_8h_source.html#l00100">AP_Param.h:100</a></div></div>
<div class="ttc" id="classAP__WindVane_html_a354bce01ac6cbf0454fe0de02b7edf5f"><div class="ttname"><a href="classAP__WindVane.html#a354bce01ac6cbf0454fe0de02b7edf5f">AP_WindVane::_direction_type</a></div><div class="ttdeci">AP_Int8 _direction_type</div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane_8h_source.html#l00082">AP_WindVane.h:82</a></div></div>
<div class="ttc" id="classAP__WindVane__Backend_html_ac49e769e439171bdf74b13ffd928bd7e"><div class="ttname"><a href="classAP__WindVane__Backend.html#ac49e769e439171bdf74b13ffd928bd7e">AP_WindVane_Backend::init</a></div><div class="ttdeci">virtual void init(const AP_SerialManager &amp;serial_manager)</div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane__Backend_8h_source.html#l00033">AP_WindVane_Backend.h:33</a></div></div>
<div class="ttc" id="classAP__HAL_1_1HAL_html_a9337a60383f4264fa96a20dbe43a4e2e"><div class="ttname"><a href="classAP__HAL_1_1HAL.html#a9337a60383f4264fa96a20dbe43a4e2e">AP_HAL::HAL::util</a></div><div class="ttdeci">AP_HAL::Util * util</div><div class="ttdef"><b>Definition:</b> <a href="HAL_8h_source.html#l00115">HAL.h:115</a></div></div>
<div class="ttc" id="classAP__WindVane_html_a7500cd6e7d98b4e7960d4858beb23b59"><div class="ttname"><a href="classAP__WindVane.html#a7500cd6e7d98b4e7960d4858beb23b59">AP_WindVane::enabled</a></div><div class="ttdeci">bool enabled() const</div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane_8cpp_source.html#l00177">AP_WindVane.cpp:177</a></div></div>
<div class="ttc" id="GCS_8h_html_a1d3cc361b864ddf64a44c12ab3bd044e"><div class="ttname"><a href="GCS_8h.html#a1d3cc361b864ddf64a44c12ab3bd044e">gcs</a></div><div class="ttdeci">GCS &amp; gcs()</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Common_8cpp_source.html#l05004">GCS_Common.cpp:5004</a></div></div>
<div class="ttc" id="namespaceAP_html_a3d234397344391a215f01f280bed7035"><div class="ttname"><a href="namespaceAP.html#a3d234397344391a215f01f280bed7035">AP::windvane</a></div><div class="ttdeci">AP_WindVane * windvane()</div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane_8cpp_source.html#l00361">AP_WindVane.cpp:361</a></div></div>
<div class="ttc" id="classAP__WindVane_html_a4be87cdbcdac2f146d3b9b1b09aa1e8a"><div class="ttname"><a href="classAP__WindVane.html#a4be87cdbcdac2f146d3b9b1b09aa1e8a">AP_WindVane::update</a></div><div class="ttdeci">void update()</div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane_8cpp_source.html#l00249">AP_WindVane.cpp:249</a></div></div>
<div class="ttc" id="classAP__WindVane_html"><div class="ttname"><a href="classAP__WindVane.html">AP_WindVane</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane_8h_source.html#l00023">AP_WindVane.h:23</a></div></div>
<div class="ttc" id="classAP__WindVane_html_a37da59f3d4c3ff297451eb64e86f31ce"><div class="ttname"><a href="classAP__WindVane.html#a37da59f3d4c3ff297451eb64e86f31ce">AP_WindVane::start_speed_calibration</a></div><div class="ttdeci">bool start_speed_calibration()</div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane_8cpp_source.html#l00308">AP_WindVane.cpp:308</a></div></div>
<div class="ttc" id="AP__WindVane__Analog_8h_html"><div class="ttname"><a href="AP__WindVane__Analog_8h.html">AP_WindVane_Analog.h</a></div></div>
<div class="ttc" id="AP__WindVane_8cpp_html_aa87f226b51753f8b59d691d84f0771cb"><div class="ttname"><a href="AP__WindVane_8cpp.html#aa87f226b51753f8b59d691d84f0771cb">WINDVANE_DEFAULT_PIN</a></div><div class="ttdeci">#define WINDVANE_DEFAULT_PIN</div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane_8cpp_source.html#l00026">AP_WindVane.cpp:26</a></div></div>
<div class="ttc" id="AP__WindVane_8cpp_html_ad183da7c6b0d8b5eee19cfe12300349c"><div class="ttname"><a href="AP__WindVane_8cpp.html#ad183da7c6b0d8b5eee19cfe12300349c">WINDSPEED_DEFAULT_TEMP_PIN</a></div><div class="ttdeci">#define WINDSPEED_DEFAULT_TEMP_PIN</div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane_8cpp_source.html#l00028">AP_WindVane.cpp:28</a></div></div>
<div class="ttc" id="AP__WindVane__RPM_8h_html"><div class="ttname"><a href="AP__WindVane__RPM_8h.html">AP_WindVane_RPM.h</a></div></div>
<div class="ttc" id="structVector2_html_a6cfed8355591aa269f4dba43bd806ef9"><div class="ttname"><a href="structVector2.html#a6cfed8355591aa269f4dba43bd806ef9">Vector2::y</a></div><div class="ttdeci">T y</div><div class="ttdef"><b>Definition:</b> <a href="vector2_8h_source.html#l00037">vector2.h:37</a></div></div>
<div class="ttc" id="AP__Param_8h_html_ac24e2eb16c2194e975d27e47ddcb7f1c"><div class="ttname"><a href="AP__Param_8h.html#ac24e2eb16c2194e975d27e47ddcb7f1c">AP_GROUPINFO_FLAGS</a></div><div class="ttdeci">#define AP_GROUPINFO_FLAGS(name, idx, clazz, element, def, flags)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Param_8h_source.html#l00091">AP_Param.h:91</a></div></div>
<div class="ttc" id="classAP__WindVane_html_ab7f769ebd4786220b1ed376d6b5b1294"><div class="ttname"><a href="classAP__WindVane.html#ab7f769ebd4786220b1ed376d6b5b1294">AP_WindVane::init</a></div><div class="ttdeci">void init(const AP_SerialManager &amp;serial_manager)</div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane_8cpp_source.html#l00183">AP_WindVane.cpp:183</a></div></div>
<div class="ttc" id="classAP__WindVane__Backend_html_a4730159bc96e7396e07d7d1528ce6178"><div class="ttname"><a href="classAP__WindVane__Backend.html#a4730159bc96e7396e07d7d1528ce6178">AP_WindVane_Backend::update_direction</a></div><div class="ttdeci">virtual void update_direction()</div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane__Backend_8h_source.html#l00037">AP_WindVane_Backend.h:37</a></div></div>
<div class="ttc" id="classAP__WindVane_html_a619cfaf982b4dcffdbc6788ffc914338"><div class="ttname"><a href="classAP__WindVane.html#a619cfaf982b4dcffdbc6788ffc914338">AP_WindVane::AP_WindVane_Analog</a></div><div class="ttdeci">friend class AP_WindVane_Analog</div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane_8h_source.html#l00027">AP_WindVane.h:27</a></div></div>
<div class="ttc" id="AP__Math_8cpp_html_aac44349f9b159f31fc43fe924d52f7fc"><div class="ttname"><a href="AP__Math_8cpp.html#aac44349f9b159f31fc43fe924d52f7fc">wrap_360</a></div><div class="ttdeci">float wrap_360(const T angle, float unit_mod)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Math_8cpp_source.html#l00154">AP_Math.cpp:154</a></div></div>
<div class="ttc" id="AP__WindVane_8cpp_html_aa54bb5638fc00450b70ee86c1618a17b"><div class="ttname"><a href="AP__WindVane_8cpp.html#aa54bb5638fc00450b70ee86c1618a17b">WINDSPEED_DEFAULT_SPEED_PIN</a></div><div class="ttdeci">#define WINDSPEED_DEFAULT_SPEED_PIN</div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane_8cpp_source.html#l00027">AP_WindVane.cpp:27</a></div></div>
<div class="ttc" id="namespaceAP_html"><div class="ttname"><a href="namespaceAP.html">AP</a></div><div class="ttdef"><b>Definition:</b> <a href="AC__Avoid_8cpp_source.html#l00655">AC_Avoid.cpp:655</a></div></div>
<div class="ttc" id="AP__Math_8cpp_html_a21d0562d7b23dd9f04bc30a3611cc577"><div class="ttname"><a href="AP__Math_8cpp.html#a21d0562d7b23dd9f04bc30a3611cc577">wrap_PI</a></div><div class="ttdeci">float wrap_PI(const T radian)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Math_8cpp_source.html#l00183">AP_Math.cpp:183</a></div></div>
<div class="ttc" id="AP__WindVane_8cpp_html_ac258ff7a3e6d13ff04d930d680cb8d14"><div class="ttname"><a href="AP__WindVane_8cpp.html#ac258ff7a3e6d13ff04d930d680cb8d14">WINDSPEED_DEFAULT_VOLT_OFFSET</a></div><div class="ttdeci">#define WINDSPEED_DEFAULT_VOLT_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane_8cpp_source.html#l00029">AP_WindVane.cpp:29</a></div></div>
<div class="ttc" id="classAP__WindVane_html_a0e3858f7f56c708791c429500517bc04"><div class="ttname"><a href="classAP__WindVane.html#a0e3858f7f56c708791c429500517bc04">AP_WindVane::AP_WindVane_SITL</a></div><div class="ttdeci">friend class AP_WindVane_SITL</div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane_8h_source.html#l00028">AP_WindVane.h:28</a></div></div>
<div class="ttc" id="DerivativeFilter_8cpp_html_a357394e0f6f88c8a57bd893ab28dc8f8"><div class="ttname"><a href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a></div><div class="ttdeci">#define f(i)</div></div>
<div class="ttc" id="classAP__WindVane_html_a725fbdffe6a6354f85bd317dc4b05127"><div class="ttname"><a href="classAP__WindVane.html#a725fbdffe6a6354f85bd317dc4b05127">AP_WindVane::_speed_apparent</a></div><div class="ttdeci">float _speed_apparent</div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane_8h_source.html#l00115">AP_WindVane.h:115</a></div></div>
<div class="ttc" id="structVector2_html"><div class="ttname"><a href="structVector2.html">Vector2&lt; float &gt;</a></div></div>
<div class="ttc" id="AC__AttitudeControl_8cpp_html_a240c1a4ae2a70d1855f91e4a0b1ac938"><div class="ttname"><a href="AC__AttitudeControl_8cpp.html#a240c1a4ae2a70d1855f91e4a0b1ac938">hal</a></div><div class="ttdeci">const AP_HAL::HAL &amp; hal</div><div class="ttdef"><b>Definition:</b> <a href="iofirmware_8cpp_source.html#l00042">iofirmware.cpp:42</a></div></div>
<div class="ttc" id="classVector3_html_a561df88b28e106e337a25bb86554a569"><div class="ttname"><a href="classVector3.html#a561df88b28e106e337a25bb86554a569">Vector3::y</a></div><div class="ttdeci">T y</div><div class="ttdef"><b>Definition:</b> <a href="vector3_8h_source.html#l00067">vector3.h:67</a></div></div>
<div class="ttc" id="classAP__WindVane_html_a8f2e4bbafdf6373efc909b3bddbc1cda"><div class="ttname"><a href="classAP__WindVane.html#a8f2e4bbafdf6373efc909b3bddbc1cda">AP_WindVane::_direction_absolute</a></div><div class="ttdeci">float _direction_absolute</div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane_8h_source.html#l00112">AP_WindVane.h:112</a></div></div>
<div class="ttc" id="classAP__WindVane_html_a4a050c1989398f484b95f3385fefebe2a222f8bb5d85359fe72a876208943a776"><div class="ttname"><a href="classAP__WindVane.html#a4a050c1989398f484b95f3385fefebe2a222f8bb5d85359fe72a876208943a776">AP_WindVane::WINDVANE_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane_8h_source.html#l00122">AP_WindVane.h:122</a></div></div>
<div class="ttc" id="classAP__WindVane_html_a15e29db6e47037c162e78f11b935df9f"><div class="ttname"><a href="classAP__WindVane.html#a15e29db6e47037c162e78f11b935df9f">AP_WindVane::update_true_wind_speed_and_direction</a></div><div class="ttdeci">void update_true_wind_speed_and_direction()</div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane_8cpp_source.html#l00335">AP_WindVane.cpp:335</a></div></div>
<div class="ttc" id="structAP__Param_1_1GroupInfo_html"><div class="ttname"><a href="structAP__Param_1_1GroupInfo.html">AP_Param::GroupInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__Param_8h_source.html#l00142">AP_Param.h:142</a></div></div>
<div class="ttc" id="AP__WindVane__Airspeed_8h_html"><div class="ttname"><a href="AP__WindVane__Airspeed_8h.html">AP_WindVane_Airspeed.h</a></div></div>
<div class="ttc" id="classAP__WindVane_html_a610204f0facddb725a4d172b7c2cc7bd"><div class="ttname"><a href="classAP__WindVane.html#a610204f0facddb725a4d172b7c2cc7bd">AP_WindVane::_dir_speed_cutoff</a></div><div class="ttdeci">AP_Float _dir_speed_cutoff</div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane_8h_source.html#l00091">AP_WindVane.h:91</a></div></div>
<div class="ttc" id="classAP__WindVane_html_ad8198b5b4e8c38420a9ff6f843cc3050"><div class="ttname"><a href="classAP__WindVane.html#ad8198b5b4e8c38420a9ff6f843cc3050">AP_WindVane::get_absolute_wind_direction_rad</a></div><div class="ttdeci">float get_absolute_wind_direction_rad() const</div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane_8h_source.html#l00058">AP_WindVane.h:58</a></div></div>
<div class="ttc" id="AP__WindVane__NMEA_8h_html"><div class="ttname"><a href="AP__WindVane__NMEA_8h.html">AP_WindVane_NMEA.h</a></div></div>
<div class="ttc" id="classAP__WindVane_html_ac935719dfcc4a870aaac39c0154b1200"><div class="ttname"><a href="classAP__WindVane.html#ac935719dfcc4a870aaac39c0154b1200">AP_WindVane::AP_WindVane_Home</a></div><div class="ttdeci">friend class AP_WindVane_Home</div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane_8h_source.html#l00026">AP_WindVane.h:26</a></div></div>
<div class="ttc" id="classGCS_html_a9866f3484283db744409e40719cef765"><div class="ttname"><a href="classGCS.html#a9866f3484283db744409e40719cef765">GCS::send_text</a></div><div class="ttdeci">void send_text(MAV_SEVERITY severity, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="GCS_8cpp_source.html#l00040">GCS.cpp:40</a></div></div>
<div class="ttc" id="classAP__WindVane_html_a04b4310af778ab0f8ac058e257d66f20"><div class="ttname"><a href="classAP__WindVane.html#a04b4310af778ab0f8ac058e257d66f20">AP_WindVane::_speed_driver</a></div><div class="ttdeci">AP_WindVane_Backend * _speed_driver</div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane_8h_source.html#l00099">AP_WindVane.h:99</a></div></div>
<div class="ttc" id="structVector2_html_a671d712528ea3b2cc21fd4616eea8f98"><div class="ttname"><a href="structVector2.html#a671d712528ea3b2cc21fd4616eea8f98">Vector2::length</a></div><div class="ttdeci">float length(void) const</div><div class="ttdef"><b>Definition:</b> <a href="vector2_8cpp_source.html#l00030">vector2.cpp:30</a></div></div>
<div class="ttc" id="classAP__WindVane_html_acab97955a9626e216d3577fe3598b572"><div class="ttname"><a href="classAP__WindVane.html#acab97955a9626e216d3577fe3598b572">AP_WindVane::_calibration</a></div><div class="ttdeci">AP_Int8 _calibration</div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane_8h_source.html#l00090">AP_WindVane.h:90</a></div></div>
<div class="ttc" id="classAP__WindVane_html_a7fe5da9d9a94378622fed263f2da65da"><div class="ttname"><a href="classAP__WindVane.html#a7fe5da9d9a94378622fed263f2da65da">AP_WindVane::var_info</a></div><div class="ttdeci">static const struct AP_Param::GroupInfo var_info[]</div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane_8h_source.html#l00077">AP_WindVane.h:77</a></div></div>
<div class="ttc" id="structVector2_html_a78fa1f2ed5e261c7fbeb8f3536a1ee34"><div class="ttname"><a href="structVector2.html#a78fa1f2ed5e261c7fbeb8f3536a1ee34">Vector2::x</a></div><div class="ttdeci">T x</div><div class="ttdef"><b>Definition:</b> <a href="vector2_8h_source.html#l00037">vector2.h:37</a></div></div>
<div class="ttc" id="namespaceAP_html_a99432cfdb696952c9b7146f155a815aa"><div class="ttname"><a href="namespaceAP.html#a99432cfdb696952c9b7146f155a815aa">AP::ahrs</a></div><div class="ttdeci">AP_AHRS &amp; ahrs()</div><div class="ttdef"><b>Definition:</b> <a href="AP__AHRS_8cpp_source.html#l00526">AP_AHRS.cpp:526</a></div></div>
<div class="ttc" id="classAP__WindVane_html_afab02f6ab69e882c2f9aa7e33b39c00f"><div class="ttname"><a href="classAP__WindVane.html#afab02f6ab69e882c2f9aa7e33b39c00f">AP_WindVane::start_direction_calibration</a></div><div class="ttdeci">bool start_direction_calibration()</div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane_8cpp_source.html#l00298">AP_WindVane.cpp:298</a></div></div>
<div class="ttc" id="AP__Math_8h_html_a37d7c62a8231d9d22826261297b99da4"><div class="ttname"><a href="AP__Math_8h.html#a37d7c62a8231d9d22826261297b99da4">radians</a></div><div class="ttdeci">static constexpr float radians(float deg)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Math_8h_source.html#l00163">AP_Math.h:163</a></div></div>
<div class="ttc" id="classAP__WindVane_html_a0b98c68e6983862da0331e1c4779437e"><div class="ttname"><a href="classAP__WindVane.html#a0b98c68e6983862da0331e1c4779437e">AP_WindVane::AP_WindVane_RPM</a></div><div class="ttdeci">friend class AP_WindVane_RPM</div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane_8h_source.html#l00031">AP_WindVane.h:31</a></div></div>
<div class="ttc" id="examples_2AnalogIn_2AnalogIn_8cpp_html_a130f3ebe4c1bb6993e1094760227ad6a"><div class="ttname"><a href="examples_2AnalogIn_2AnalogIn_8cpp.html#a130f3ebe4c1bb6993e1094760227ad6a">chan</a></div><div class="ttdeci">AP_HAL::AnalogSource * chan</div><div class="ttdef"><b>Definition:</b> <a href="examples_2AnalogIn_2AnalogIn_8cpp_source.html#l00008">AnalogIn.cpp:8</a></div></div>
<div class="ttc" id="AP__WindVane__SITL_8h_html"><div class="ttname"><a href="AP__WindVane__SITL_8h.html">AP_WindVane_SITL.h</a></div></div>
<div class="ttc" id="classAP__WindVane__Backend_html_a2ff5418cb8acb0643a010bf0b0f3e5fb"><div class="ttname"><a href="classAP__WindVane__Backend.html#a2ff5418cb8acb0643a010bf0b0f3e5fb">AP_WindVane_Backend::calibrate</a></div><div class="ttdeci">virtual void calibrate()</div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane__Backend_8cpp_source.html#l00057">AP_WindVane_Backend.cpp:57</a></div></div>
<div class="ttc" id="classAP__WindVane_html_ad560e462671bcd766df9341093ecf690"><div class="ttname"><a href="classAP__WindVane.html#ad560e462671bcd766df9341093ecf690">AP_WindVane::_singleton</a></div><div class="ttdeci">static AP_WindVane * _singleton</div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane_8h_source.html#l00139">AP_WindVane.h:139</a></div></div>
<div class="ttc" id="classVector3_html"><div class="ttname"><a href="classVector3.html">Vector3&lt; float &gt;</a></div></div>
<div class="ttc" id="classAP__WindVane_html_a19c04d46abf56f19e5b0e64ba5163aa7"><div class="ttname"><a href="classAP__WindVane.html#a19c04d46abf56f19e5b0e64ba5163aa7">AP_WindVane::_direction_apparent_ef</a></div><div class="ttdeci">float _direction_apparent_ef</div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane_8h_source.html#l00111">AP_WindVane.h:111</a></div></div>
<div class="ttc" id="AP__WindVane__Home_8h_html"><div class="ttname"><a href="AP__WindVane__Home_8h.html">AP_WindVane_Home.h</a></div></div>
<div class="ttc" id="classAP__WindVane_html_a41472688357a9cc2a3a1e8c0a8c2fb70"><div class="ttname"><a href="classAP__WindVane.html#a41472688357a9cc2a3a1e8c0a8c2fb70">AP_WindVane::AP_WindVane_Airspeed</a></div><div class="ttdeci">friend class AP_WindVane_Airspeed</div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane_8h_source.html#l00030">AP_WindVane.h:30</a></div></div>
<div class="ttc" id="AP__WindVane_8h_html"><div class="ttname"><a href="AP__WindVane_8h.html">AP_WindVane.h</a></div></div>
<div class="ttc" id="classAP__WindVane_html_a1171940b945e737b201b66d8852bd2a6"><div class="ttname"><a href="classAP__WindVane.html#a1171940b945e737b201b66d8852bd2a6">AP_WindVane::AP_WindVane_NMEA</a></div><div class="ttdeci">friend class AP_WindVane_NMEA</div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane_8h_source.html#l00032">AP_WindVane.h:32</a></div></div>
<div class="ttc" id="classAP__WindVane_html_a4b42585b1f1d10f5717d663b491aa88b"><div class="ttname"><a href="classAP__WindVane.html#a4b42585b1f1d10f5717d663b491aa88b">AP_WindVane::send_wind</a></div><div class="ttdeci">void send_wind(mavlink_channel_t chan)</div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane_8cpp_source.html#l00318">AP_WindVane.cpp:318</a></div></div>
<div class="ttc" id="classAP__WindVane_html_aecc10d6ca30f2e930621539edc4e89df"><div class="ttname"><a href="classAP__WindVane.html#aecc10d6ca30f2e930621539edc4e89df">AP_WindVane::get_singleton</a></div><div class="ttdeci">static AP_WindVane * get_singleton()</div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane_8cpp_source.html#l00171">AP_WindVane.cpp:171</a></div></div>
<div class="ttc" id="moduletest_8c_html_a903c4797a4c2860e3b9a6a978f98a44d"><div class="ttname"><a href="moduletest_8c.html#a903c4797a4c2860e3b9a6a978f98a44d">degrees</a></div><div class="ttdeci">#define degrees(x)</div><div class="ttdef"><b>Definition:</b> <a href="moduletest_8c_source.html#l00023">moduletest.c:23</a></div></div>
<div class="ttc" id="classAP__WindVane_html_aaa76bf3a703e3ca433dbe546c657763d"><div class="ttname"><a href="classAP__WindVane.html#aaa76bf3a703e3ca433dbe546c657763d">AP_WindVane::AP_WindVane</a></div><div class="ttdeci">AP_WindVane()</div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane_8cpp_source.html#l00157">AP_WindVane.cpp:157</a></div></div>
<div class="ttc" id="namespaceAP__HAL_html_a71832f03d849a0c088f04fc98d3c8143"><div class="ttname"><a href="namespaceAP__HAL.html#a71832f03d849a0c088f04fc98d3c8143">AP_HAL::panic</a></div><div class="ttdeci">void panic(const char *errormsg,...) FMT_PRINTF(1</div><div class="ttdef"><b>Definition:</b> <a href="ChibiOS_2system_8cpp_source.html#l00140">system.cpp:140</a></div></div>
<div class="ttc" id="classAP__WindVane_html_a3fcc0365f7daa8d235a5c8a576c03576"><div class="ttname"><a href="classAP__WindVane.html#a3fcc0365f7daa8d235a5c8a576c03576">AP_WindVane::_speed_true</a></div><div class="ttdeci">float _speed_true</div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane_8h_source.html#l00116">AP_WindVane.h:116</a></div></div>
<div class="ttc" id="AP__Param_8h_html_a0f9acb038a5283b964b862aea8cc5051"><div class="ttname"><a href="AP__Param_8h.html#a0f9acb038a5283b964b862aea8cc5051">AP_GROUPEND</a></div><div class="ttdeci">#define AP_GROUPEND</div><div class="ttdef"><b>Definition:</b> <a href="AP__Param_8h_source.html#l00118">AP_Param.h:118</a></div></div>
<div class="ttc" id="classVector3_html_a1a0f7e168c71ca798099f0ba8a444244"><div class="ttname"><a href="classVector3.html#a1a0f7e168c71ca798099f0ba8a444244">Vector3::x</a></div><div class="ttdeci">T x</div><div class="ttdef"><b>Definition:</b> <a href="vector3_8h_source.html#l00067">vector3.h:67</a></div></div>
<div class="ttc" id="classAP__Param_html_a5f6dcfce1c0a79cf5bd81283e22f3201"><div class="ttname"><a href="classAP__Param.html#a5f6dcfce1c0a79cf5bd81283e22f3201">AP_Param::setup_object_defaults</a></div><div class="ttdeci">static void setup_object_defaults(const void *object_pointer, const struct GroupInfo *group_info)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Param_8cpp_source.html#l01265">AP_Param.cpp:1265</a></div></div>
<div class="ttc" id="classAP__WindVane__Backend_html_a85cda608160fc801fe294168f1058b24"><div class="ttname"><a href="classAP__WindVane__Backend.html#a85cda608160fc801fe294168f1058b24">AP_WindVane_Backend::update_speed</a></div><div class="ttdeci">virtual void update_speed()</div><div class="ttdef"><b>Definition:</b> <a href="AP__WindVane__Backend_8h_source.html#l00036">AP_WindVane_Backend.h:36</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Jul 11 2019 14:17:37 for APM:Libraries by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
