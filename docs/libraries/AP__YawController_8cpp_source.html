<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>APM:Libraries: libraries/APM_Control/AP_YawController.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">APM:Libraries
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_bc0718b08fb2015b8e59c47b2805f60c.html">libraries</a></li><li class="navelem"><a class="el" href="dir_50866fe7c3a898cfa96b79f21ec45884.html">APM_Control</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">AP_YawController.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="AP__YawController_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">   This program is free software: you can redistribute it and/or modify</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">   it under the terms of the GNU General Public License as published by</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">   the Free Software Foundation, either version 3 of the License, or</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">   (at your option) any later version.</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">   </span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">   This program is distributed in the hope that it will be useful,</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">   GNU General Public License for more details.</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">   </span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">   You should have received a copy of the GNU General Public License</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">   along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">//  Code by Jon Challinger</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">//  Modified by Paul Riseborough to implement a three loop autopilot</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">//  topology</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="AP__HAL_8h.html">AP_HAL/AP_HAL.h</a>&gt;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AP__YawController_8h.html">AP_YawController.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> <a class="code" href="classAP__HAL_1_1HAL.html">AP_HAL::HAL</a>&amp; <a class="code" href="AP__YawController_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="keyword">const</span> <a class="code" href="structAP__Param_1_1GroupInfo.html">AP_Param::GroupInfo</a> <a class="code" href="classAP__YawController.html#aedc549b2477796ba6fc2aa3b7671644b">AP_YawController::var_info</a>[] = {</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    <span class="comment">// @Param: SLIP</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <span class="comment">// @DisplayName: Sideslip control gain</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    <span class="comment">// @Description: Gain from lateral acceleration to demanded yaw rate for aircraft with enough fuselage area to detect lateral acceleration and sideslips. Do not enable for flying wings and gliders. Actively coordinates flight more than just yaw damping. Set after YAW2SRV_DAMP and YAW2SRV_INT are tuned.</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <span class="comment">// @Range: 0 4</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <span class="comment">// @Increment: 0.25</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <span class="comment">// @User: Advanced</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <a class="code" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;SLIP&quot;</span>,    0, <a class="code" href="classAP__YawController.html">AP_YawController</a>, _K_A,    0),</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <span class="comment">// @Param: INT</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="comment">// @DisplayName: Sideslip control integrator</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="comment">// @Description: Integral gain from lateral acceleration error. Effectively trims rudder to eliminate long-term sideslip.</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="comment">// @Range: 0 2</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="comment">// @Increment: 0.25</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="comment">// @User: Advanced</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <a class="code" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;INT&quot;</span>,    1, <a class="code" href="classAP__YawController.html">AP_YawController</a>, _K_I,    0),</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="comment">// @Param: DAMP</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="comment">// @DisplayName: Yaw damping</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="comment">// @Description: Gain from yaw rate to rudder. Most effective at yaw damping and should be tuned after KFF_RDDRMIX. Also disables YAW2SRV_INT if set to 0.</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="comment">// @Range: 0 2</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="comment">// @Increment: 0.25</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="comment">// @User: Advanced</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <a class="code" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;DAMP&quot;</span>,   2, <a class="code" href="classAP__YawController.html">AP_YawController</a>, _K_D,    0),</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="comment">// @Param: RLL</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="comment">// @DisplayName: Yaw coordination gain</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="comment">// @Description: Gain to the yaw rate required to keep it consistent with the turn rate in a coordinated turn. Corrects for yaw tendencies after the turn is established. Increase yaw into the turn by raising. Increase yaw out of the turn by decreasing. Values outside of 0.9-1.1 range indicate airspeed calibration problems.</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="comment">// @Range: 0.8 1.2</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="comment">// @Increment: 0.05</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="comment">// @User: Advanced</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <a class="code" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;RLL&quot;</span>,   3, <a class="code" href="classAP__YawController.html">AP_YawController</a>, _K_FF,   1),</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">      Note: index 4 should not be used - it was used for an incorrect</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">      AP_Int8 version of the IMAX in the 2.74 release</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="comment">// @Param: IMAX</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="comment">// @DisplayName: Integrator limit</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="comment">// @Description: Limit of yaw integrator gain in centi-degrees of servo travel. Servos are assumed to have +/- 4500 centi-degrees of travel, so a value of 1500 allows trim of up to 1/3 of servo travel range.</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="comment">// @Range: 0 4500</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="comment">// @Increment: 1</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="comment">// @User: Advanced</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <a class="code" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;IMAX&quot;</span>,  5, <a class="code" href="classAP__YawController.html">AP_YawController</a>, _imax,        1500),</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <a class="code" href="AP__Param_8h.html#a0f9acb038a5283b964b862aea8cc5051">AP_GROUPEND</a></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;};</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="classAP__YawController.html#a0cff30a9e52de0ba04dd26661a1f4506">   76</a></span>&#160;int32_t <a class="code" href="classAP__YawController.html#a0cff30a9e52de0ba04dd26661a1f4506">AP_YawController::get_servo_out</a>(<span class="keywordtype">float</span> scaler, <span class="keywordtype">bool</span> disable_integrator)</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;{</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    uint32_t tnow = <a class="code" href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a>();</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    uint32_t dt = tnow - <a class="code" href="classAP__YawController.html#a15e613276e64fdfbfe12af182664ff0a">_last_t</a>;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classAP__YawController.html#a15e613276e64fdfbfe12af182664ff0a">_last_t</a> == 0 || dt &gt; 1000) {</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        dt = 0;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    }</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <a class="code" href="classAP__YawController.html#a15e613276e64fdfbfe12af182664ff0a">_last_t</a> = tnow;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    </div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    int16_t aspd_min = <a class="code" href="classAP__YawController.html#a4cf5eae67f5c443c83c4eac9e69cac60">aparm</a>.<a class="code" href="structAP__Vehicle_1_1FixedWing.html#a88300cf5dda0e0f3cb5669c564756039">airspeed_min</a>;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keywordflow">if</span> (aspd_min &lt; 1) {</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        aspd_min = 1;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    }</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    </div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordtype">float</span> delta_time = (float) dt / 1000.0<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    </div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="comment">// Calculate yaw rate required to keep up with a constant height coordinated turn</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordtype">float</span> aspeed;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keywordtype">float</span> rate_offset;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordtype">float</span> bank_angle = <a class="code" href="classAP__YawController.html#adcee1d3920028499828837e01be5f669">_ahrs</a>.<a class="code" href="classAP__AHRS.html#a384a23e205126cf43e91bec9668b7ed0">roll</a>;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="comment">// limit bank angle between +- 80 deg if right way up</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordflow">if</span> (fabsf(bank_angle) &lt; 1.5707964f) {</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        bank_angle = <a class="code" href="AP__Math_8h.html#ad525609d9dba6ffa556a0fbf08a3f9b4">constrain_float</a>(bank_angle,-1.3962634<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>,1.3962634<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>);</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    }</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classAP__YawController.html#adcee1d3920028499828837e01be5f669">_ahrs</a>.<a class="code" href="classAP__AHRS.html#aba88eab2ab7bb6f525934fb06d30e780">airspeed_estimate</a>(&amp;aspeed)) {</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <span class="comment">// If no airspeed available use average of min and max</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        aspeed = 0.5f*(float(aspd_min) + float(<a class="code" href="classAP__YawController.html#a4cf5eae67f5c443c83c4eac9e69cac60">aparm</a>.<a class="code" href="structAP__Vehicle_1_1FixedWing.html#ab774cbd438b0d68da5250de61dca6262">airspeed_max</a>));</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    }</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    rate_offset = (<a class="code" href="definitions_8h.html#aea8758bf61b23b46507902b46060ebfd">GRAVITY_MSS</a> / <a class="code" href="AP__Math_8h.html#a5abc8871f1e7781a55afe9bf299f0a39">MAX</a>(aspeed , <span class="keywordtype">float</span>(aspd_min))) * sinf(bank_angle) * <a class="code" href="classAP__YawController.html#a7f8cfd727482b8013f2e7c39336f9e92">_K_FF</a>;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="comment">// Get body rate vector (radians/sec)</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordtype">float</span> omega_z = <a class="code" href="classAP__YawController.html#adcee1d3920028499828837e01be5f669">_ahrs</a>.<a class="code" href="classAP__AHRS.html#a73669ea2a3cea5b5348915f7a333f840">get_gyro</a>().<a class="code" href="classVector3.html#ab3e7f5401dd6e951978bfa746809f74f">z</a>;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    </div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="comment">// Get the accln vector (m/s^2)</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordtype">float</span> accel_y = <a class="code" href="namespaceAP.html#ac571aa5a2ef71b7f4b4b2bfa09143fb9">AP::ins</a>().<a class="code" href="classAP__InertialSensor.html#a7a848d0332acb5b39d8e47fca5a1e77f">get_accel</a>().<a class="code" href="classVector3.html#a561df88b28e106e337a25bb86554a569">y</a>;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="comment">// Subtract the steady turn component of rate from the measured rate</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="comment">// to calculate the rate relative to the turn requirement in degrees/sec</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordtype">float</span> rate_hp_in = <a class="code" href="AP__Common_8h.html#a3c9d151923236c7e8ccccf86f131e550">ToDeg</a>(omega_z - rate_offset);</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    </div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="comment">// Apply a high-pass filter to the rate to washout any steady state error</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="comment">// due to bias errors in rate_offset</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="comment">// Use a cut-off frequency of omega = 0.2 rad/sec</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="comment">// Could make this adjustable by replacing 0.9960080 with (1 - omega * dt)</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keywordtype">float</span> rate_hp_out = 0.9960080f * <a class="code" href="classAP__YawController.html#ae9a6fa81a5d03ec2004395263b8d982a">_last_rate_hp_out</a> + rate_hp_in - <a class="code" href="classAP__YawController.html#a791e8f1670bff960d11ce6833ac95b70">_last_rate_hp_in</a>;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <a class="code" href="classAP__YawController.html#ae9a6fa81a5d03ec2004395263b8d982a">_last_rate_hp_out</a> = rate_hp_out;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <a class="code" href="classAP__YawController.html#a791e8f1670bff960d11ce6833ac95b70">_last_rate_hp_in</a> = rate_hp_in;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="comment">//Calculate input to integrator</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordtype">float</span> integ_in = - <a class="code" href="classAP__YawController.html#aa3d9da5107ac95438cc1f72711f35245">_K_I</a> * (<a class="code" href="classAP__YawController.html#ae7c466406f0b764ff7a286b12c7ed692">_K_A</a> * accel_y + rate_hp_out);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    </div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="comment">// Apply integrator, but clamp input to prevent control saturation and freeze integrator below min FBW speed</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="comment">// Don&#39;t integrate if in stabilise mode as the integrator will wind up against the pilots inputs</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="comment">// Don&#39;t integrate if _K_D is zero as integrator will keep winding up</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keywordflow">if</span> (!disable_integrator &amp;&amp; <a class="code" href="classAP__YawController.html#a2c952c6b3ca322f50a05d67109e4a8cc">_K_D</a> &gt; 0) {</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <span class="comment">//only integrate if airspeed above min value</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <span class="keywordflow">if</span> (aspeed &gt; <span class="keywordtype">float</span>(aspd_min))</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        {</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            <span class="comment">// prevent the integrator from increasing if surface defln demand is above the upper limit</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classAP__YawController.html#aeaf0a914e33b15bb6835281f0d4ea20a">_last_out</a> &lt; -45) {</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                <a class="code" href="classAP__YawController.html#a4946b771049ef64727419a6267ff8126">_integrator</a> += <a class="code" href="AP__Math_8h.html#a5abc8871f1e7781a55afe9bf299f0a39">MAX</a>(integ_in * delta_time , 0);</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classAP__YawController.html#aeaf0a914e33b15bb6835281f0d4ea20a">_last_out</a> &gt; 45) {</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                <span class="comment">// prevent the integrator from decreasing if surface defln demand  is below the lower limit</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                <a class="code" href="classAP__YawController.html#a4946b771049ef64727419a6267ff8126">_integrator</a> += <a class="code" href="AP__Math_8h.html#a321a91de43cfb2e95d40cde314d0a80f">MIN</a>(integ_in * delta_time , 0);</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                <a class="code" href="classAP__YawController.html#a4946b771049ef64727419a6267ff8126">_integrator</a> += integ_in * delta_time;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            }</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        }</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <a class="code" href="classAP__YawController.html#a4946b771049ef64727419a6267ff8126">_integrator</a> = 0;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    }</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classAP__YawController.html#a2c952c6b3ca322f50a05d67109e4a8cc">_K_D</a> &lt; 0.0001<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>) {</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="comment">// yaw damping is disabled, and the integrator is scaled by damping, so return 0</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    }</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    </div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="comment">// Scale the integration limit</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordtype">float</span> intLimScaled = <a class="code" href="classAP__YawController.html#ab755683ca6cb4b24fdc10a3a608432c2">_imax</a> * 0.01f / (<a class="code" href="classAP__YawController.html#a2c952c6b3ca322f50a05d67109e4a8cc">_K_D</a> * scaler * scaler);</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="comment">// Constrain the integrator state</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <a class="code" href="classAP__YawController.html#a4946b771049ef64727419a6267ff8126">_integrator</a> = <a class="code" href="AP__Math_8h.html#ad525609d9dba6ffa556a0fbf08a3f9b4">constrain_float</a>(<a class="code" href="classAP__YawController.html#a4946b771049ef64727419a6267ff8126">_integrator</a>, -intLimScaled, intLimScaled);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    </div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="comment">// Protect against increases to _K_D during in-flight tuning from creating large control transients</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="comment">// due to stored integrator values</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classAP__YawController.html#a2c952c6b3ca322f50a05d67109e4a8cc">_K_D</a> &gt; <a class="code" href="classAP__YawController.html#a0c62e7d3e3ccfc34a09aec717b049145">_K_D_last</a> &amp;&amp; <a class="code" href="classAP__YawController.html#a2c952c6b3ca322f50a05d67109e4a8cc">_K_D</a> &gt; 0) {</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <a class="code" href="classAP__YawController.html#a4946b771049ef64727419a6267ff8126">_integrator</a> = <a class="code" href="classAP__YawController.html#a0c62e7d3e3ccfc34a09aec717b049145">_K_D_last</a>/<a class="code" href="classAP__YawController.html#a2c952c6b3ca322f50a05d67109e4a8cc">_K_D</a> * <a class="code" href="classAP__YawController.html#a4946b771049ef64727419a6267ff8126">_integrator</a>;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    }</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <a class="code" href="classAP__YawController.html#a0c62e7d3e3ccfc34a09aec717b049145">_K_D_last</a> = <a class="code" href="classAP__YawController.html#a2c952c6b3ca322f50a05d67109e4a8cc">_K_D</a>;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    </div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="comment">// Calculate demanded rudder deflection, +Ve deflection yaws nose right</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="comment">// Save to last value before application of limiter so that integrator limiting</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="comment">// can detect exceedance next frame</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="comment">// Scale using inverse dynamic pressure (1/V^2)</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <a class="code" href="classAP__YawController.html#a89963205afb5a3d8b3ae103524e4ea64">_pid_info</a>.<a class="code" href="structAP__Logger_1_1PID__Info.html#a2e80ba418458b0539635e0bc4e67776e">I</a> = <a class="code" href="classAP__YawController.html#a2c952c6b3ca322f50a05d67109e4a8cc">_K_D</a> * <a class="code" href="classAP__YawController.html#a4946b771049ef64727419a6267ff8126">_integrator</a> * scaler * scaler;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <a class="code" href="classAP__YawController.html#a89963205afb5a3d8b3ae103524e4ea64">_pid_info</a>.<a class="code" href="structAP__Logger_1_1PID__Info.html#ae09c23e48617d6306d6e9129bb875460">D</a> = <a class="code" href="classAP__YawController.html#a2c952c6b3ca322f50a05d67109e4a8cc">_K_D</a> * (-rate_hp_out) * scaler * scaler;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <a class="code" href="classAP__YawController.html#aeaf0a914e33b15bb6835281f0d4ea20a">_last_out</a> =  <a class="code" href="classAP__YawController.html#a89963205afb5a3d8b3ae103524e4ea64">_pid_info</a>.<a class="code" href="structAP__Logger_1_1PID__Info.html#a2e80ba418458b0539635e0bc4e67776e">I</a> + <a class="code" href="classAP__YawController.html#a89963205afb5a3d8b3ae103524e4ea64">_pid_info</a>.<a class="code" href="structAP__Logger_1_1PID__Info.html#ae09c23e48617d6306d6e9129bb875460">D</a>;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="comment">// Convert to centi-degrees and constrain</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AP__Math_8h.html#ad525609d9dba6ffa556a0fbf08a3f9b4">constrain_float</a>(<a class="code" href="classAP__YawController.html#aeaf0a914e33b15bb6835281f0d4ea20a">_last_out</a> * 100, -4500, 4500);</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;}</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="classAP__YawController.html#abf4cc6cb7a66a7878aae20961be9f82a">  179</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classAP__YawController.html#abf4cc6cb7a66a7878aae20961be9f82a">AP_YawController::reset_I</a>()</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;{</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <a class="code" href="classAP__YawController.html#a4946b771049ef64727419a6267ff8126">_integrator</a> = 0;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;}</div><div class="ttc" id="classAP__AHRS_html_a384a23e205126cf43e91bec9668b7ed0"><div class="ttname"><a href="classAP__AHRS.html#a384a23e205126cf43e91bec9668b7ed0">AP_AHRS::roll</a></div><div class="ttdeci">float roll</div><div class="ttdef"><b>Definition:</b> <a href="AP__AHRS_8h_source.html#l00220">AP_AHRS.h:220</a></div></div>
<div class="ttc" id="classAP__YawController_html_a791e8f1670bff960d11ce6833ac95b70"><div class="ttname"><a href="classAP__YawController.html#a791e8f1670bff960d11ce6833ac95b70">AP_YawController::_last_rate_hp_in</a></div><div class="ttdeci">float _last_rate_hp_in</div><div class="ttdef"><b>Definition:</b> <a href="AP__YawController_8h_source.html#l00051">AP_YawController.h:51</a></div></div>
<div class="ttc" id="classAP__AHRS_html_a73669ea2a3cea5b5348915f7a333f840"><div class="ttname"><a href="classAP__AHRS.html#a73669ea2a3cea5b5348915f7a333f840">AP_AHRS::get_gyro</a></div><div class="ttdeci">virtual const Vector3f &amp; get_gyro(void) const =0</div></div>
<div class="ttc" id="classAP__YawController_html_ae9a6fa81a5d03ec2004395263b8d982a"><div class="ttname"><a href="classAP__YawController.html#ae9a6fa81a5d03ec2004395263b8d982a">AP_YawController::_last_rate_hp_out</a></div><div class="ttdeci">float _last_rate_hp_out</div><div class="ttdef"><b>Definition:</b> <a href="AP__YawController_8h_source.html#l00050">AP_YawController.h:50</a></div></div>
<div class="ttc" id="AP__HAL_8h_html"><div class="ttname"><a href="AP__HAL_8h.html">AP_HAL.h</a></div></div>
<div class="ttc" id="classAP__YawController_html_aedc549b2477796ba6fc2aa3b7671644b"><div class="ttname"><a href="classAP__YawController.html#aedc549b2477796ba6fc2aa3b7671644b">AP_YawController::var_info</a></div><div class="ttdeci">static const struct AP_Param::GroupInfo var_info[]</div><div class="ttdef"><b>Definition:</b> <a href="AP__YawController_8h_source.html#l00039">AP_YawController.h:39</a></div></div>
<div class="ttc" id="classAP__YawController_html_a0c62e7d3e3ccfc34a09aec717b049145"><div class="ttname"><a href="classAP__YawController.html#a0c62e7d3e3ccfc34a09aec717b049145">AP_YawController::_K_D_last</a></div><div class="ttdeci">float _K_D_last</div><div class="ttdef"><b>Definition:</b> <a href="AP__YawController_8h_source.html#l00052">AP_YawController.h:52</a></div></div>
<div class="ttc" id="AP__Math_8h_html_a321a91de43cfb2e95d40cde314d0a80f"><div class="ttname"><a href="AP__Math_8h.html#a321a91de43cfb2e95d40cde314d0a80f">MIN</a></div><div class="ttdeci">static auto MIN(const A &amp;one, const B &amp;two) -&gt; decltype(one&lt; two ? one :two)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Math_8h_source.html#l00202">AP_Math.h:202</a></div></div>
<div class="ttc" id="structAP__Logger_1_1PID__Info_html_a2e80ba418458b0539635e0bc4e67776e"><div class="ttname"><a href="structAP__Logger_1_1PID__Info.html#a2e80ba418458b0539635e0bc4e67776e">AP_Logger::PID_Info::I</a></div><div class="ttdeci">float I</div><div class="ttdef"><b>Definition:</b> <a href="AP__Logger_8h_source.html#l00289">AP_Logger.h:289</a></div></div>
<div class="ttc" id="AP__Param_8h_html_a78a408c84f2a1bafde256ac650142e4d"><div class="ttname"><a href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a></div><div class="ttdeci">#define AP_GROUPINFO(name, idx, clazz, element, def)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Param_8h_source.html#l00100">AP_Param.h:100</a></div></div>
<div class="ttc" id="classAP__YawController_html_abf4cc6cb7a66a7878aae20961be9f82a"><div class="ttname"><a href="classAP__YawController.html#abf4cc6cb7a66a7878aae20961be9f82a">AP_YawController::reset_I</a></div><div class="ttdeci">void reset_I()</div><div class="ttdef"><b>Definition:</b> <a href="AP__YawController_8cpp_source.html#l00179">AP_YawController.cpp:179</a></div></div>
<div class="ttc" id="structAP__Vehicle_1_1FixedWing_html_ab774cbd438b0d68da5250de61dca6262"><div class="ttname"><a href="structAP__Vehicle_1_1FixedWing.html#ab774cbd438b0d68da5250de61dca6262">AP_Vehicle::FixedWing::airspeed_max</a></div><div class="ttdeci">AP_Int16 airspeed_max</div><div class="ttdef"><b>Definition:</b> <a href="AP__Vehicle_8h_source.html#l00037">AP_Vehicle.h:37</a></div></div>
<div class="ttc" id="classAP__YawController_html_adcee1d3920028499828837e01be5f669"><div class="ttname"><a href="classAP__YawController.html#adcee1d3920028499828837e01be5f669">AP_YawController::_ahrs</a></div><div class="ttdeci">AP_AHRS &amp; _ahrs</div><div class="ttdef"><b>Definition:</b> <a href="AP__YawController_8h_source.html#l00058">AP_YawController.h:58</a></div></div>
<div class="ttc" id="classAP__YawController_html_a89963205afb5a3d8b3ae103524e4ea64"><div class="ttname"><a href="classAP__YawController.html#a89963205afb5a3d8b3ae103524e4ea64">AP_YawController::_pid_info</a></div><div class="ttdeci">AP_Logger::PID_Info _pid_info</div><div class="ttdef"><b>Definition:</b> <a href="AP__YawController_8h_source.html#l00056">AP_YawController.h:56</a></div></div>
<div class="ttc" id="classAP__YawController_html_a0cff30a9e52de0ba04dd26661a1f4506"><div class="ttname"><a href="classAP__YawController.html#a0cff30a9e52de0ba04dd26661a1f4506">AP_YawController::get_servo_out</a></div><div class="ttdeci">int32_t get_servo_out(float scaler, bool disable_integrator)</div><div class="ttdef"><b>Definition:</b> <a href="AP__YawController_8cpp_source.html#l00076">AP_YawController.cpp:76</a></div></div>
<div class="ttc" id="AP__Common_8h_html_a3c9d151923236c7e8ccccf86f131e550"><div class="ttname"><a href="AP__Common_8h.html#a3c9d151923236c7e8ccccf86f131e550">ToDeg</a></div><div class="ttdeci">#define ToDeg(x)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Common_8h_source.html#l00064">AP_Common.h:64</a></div></div>
<div class="ttc" id="AP__YawController_8h_html"><div class="ttname"><a href="AP__YawController_8h.html">AP_YawController.h</a></div></div>
<div class="ttc" id="AP__Math_8h_html_a5abc8871f1e7781a55afe9bf299f0a39"><div class="ttname"><a href="AP__Math_8h.html#a5abc8871f1e7781a55afe9bf299f0a39">MAX</a></div><div class="ttdeci">static auto MAX(const A &amp;one, const B &amp;two) -&gt; decltype(one &gt; two ? one :two)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Math_8h_source.html#l00208">AP_Math.h:208</a></div></div>
<div class="ttc" id="classAP__YawController_html_a4cf5eae67f5c443c83c4eac9e69cac60"><div class="ttname"><a href="classAP__YawController.html#a4cf5eae67f5c443c83c4eac9e69cac60">AP_YawController::aparm</a></div><div class="ttdeci">const AP_Vehicle::FixedWing &amp; aparm</div><div class="ttdef"><b>Definition:</b> <a href="AP__YawController_8h_source.html#l00042">AP_YawController.h:42</a></div></div>
<div class="ttc" id="classAP__InertialSensor_html_a7a848d0332acb5b39d8e47fca5a1e77f"><div class="ttname"><a href="classAP__InertialSensor.html#a7a848d0332acb5b39d8e47fca5a1e77f">AP_InertialSensor::get_accel</a></div><div class="ttdeci">const Vector3f &amp; get_accel(uint8_t i) const</div><div class="ttdef"><b>Definition:</b> <a href="AP__InertialSensor_8h_source.html#l00123">AP_InertialSensor.h:123</a></div></div>
<div class="ttc" id="classAP__YawController_html"><div class="ttname"><a href="classAP__YawController.html">AP_YawController</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__YawController_8h_source.html#l00009">AP_YawController.h:9</a></div></div>
<div class="ttc" id="AP__YawController_8cpp_html_ae08c3ca4ba26b63cda0bb3e3c6c02785"><div class="ttname"><a href="AP__YawController_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a></div><div class="ttdeci">const AP_HAL::HAL &amp; hal</div><div class="ttdef"><b>Definition:</b> <a href="AC__PID__test_8cpp_source.html#l00021">AC_PID_test.cpp:21</a></div></div>
<div class="ttc" id="classAP__YawController_html_aeaf0a914e33b15bb6835281f0d4ea20a"><div class="ttname"><a href="classAP__YawController.html#aeaf0a914e33b15bb6835281f0d4ea20a">AP_YawController::_last_out</a></div><div class="ttdeci">float _last_out</div><div class="ttdef"><b>Definition:</b> <a href="AP__YawController_8h_source.html#l00049">AP_YawController.h:49</a></div></div>
<div class="ttc" id="classAP__HAL_1_1HAL_html"><div class="ttname"><a href="classAP__HAL_1_1HAL.html">AP_HAL::HAL</a></div><div class="ttdef"><b>Definition:</b> <a href="HAL_8h_source.html#l00021">HAL.h:21</a></div></div>
<div class="ttc" id="definitions_8h_html_aea8758bf61b23b46507902b46060ebfd"><div class="ttname"><a href="definitions_8h.html#aea8758bf61b23b46507902b46060ebfd">GRAVITY_MSS</a></div><div class="ttdeci">#define GRAVITY_MSS</div><div class="ttdef"><b>Definition:</b> <a href="definitions_8h_source.html#l00047">definitions.h:47</a></div></div>
<div class="ttc" id="classAP__YawController_html_aa3d9da5107ac95438cc1f72711f35245"><div class="ttname"><a href="classAP__YawController.html#aa3d9da5107ac95438cc1f72711f35245">AP_YawController::_K_I</a></div><div class="ttdeci">AP_Float _K_I</div><div class="ttdef"><b>Definition:</b> <a href="AP__YawController_8h_source.html#l00044">AP_YawController.h:44</a></div></div>
<div class="ttc" id="DerivativeFilter_8cpp_html_a357394e0f6f88c8a57bd893ab28dc8f8"><div class="ttname"><a href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a></div><div class="ttdeci">#define f(i)</div></div>
<div class="ttc" id="classVector3_html_a561df88b28e106e337a25bb86554a569"><div class="ttname"><a href="classVector3.html#a561df88b28e106e337a25bb86554a569">Vector3::y</a></div><div class="ttdeci">T y</div><div class="ttdef"><b>Definition:</b> <a href="vector3_8h_source.html#l00067">vector3.h:67</a></div></div>
<div class="ttc" id="namespaceAP__HAL_html_a77dffbb18891996280308e21316ec186"><div class="ttname"><a href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a></div><div class="ttdeci">uint32_t millis()</div><div class="ttdef"><b>Definition:</b> <a href="ChibiOS_2system_8cpp_source.html#l00157">system.cpp:157</a></div></div>
<div class="ttc" id="classVector3_html_ab3e7f5401dd6e951978bfa746809f74f"><div class="ttname"><a href="classVector3.html#ab3e7f5401dd6e951978bfa746809f74f">Vector3::z</a></div><div class="ttdeci">T z</div><div class="ttdef"><b>Definition:</b> <a href="vector3_8h_source.html#l00067">vector3.h:67</a></div></div>
<div class="ttc" id="structAP__Param_1_1GroupInfo_html"><div class="ttname"><a href="structAP__Param_1_1GroupInfo.html">AP_Param::GroupInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__Param_8h_source.html#l00142">AP_Param.h:142</a></div></div>
<div class="ttc" id="classAP__YawController_html_a7f8cfd727482b8013f2e7c39336f9e92"><div class="ttname"><a href="classAP__YawController.html#a7f8cfd727482b8013f2e7c39336f9e92">AP_YawController::_K_FF</a></div><div class="ttdeci">AP_Float _K_FF</div><div class="ttdef"><b>Definition:</b> <a href="AP__YawController_8h_source.html#l00046">AP_YawController.h:46</a></div></div>
<div class="ttc" id="classAP__YawController_html_ab755683ca6cb4b24fdc10a3a608432c2"><div class="ttname"><a href="classAP__YawController.html#ab755683ca6cb4b24fdc10a3a608432c2">AP_YawController::_imax</a></div><div class="ttdeci">AP_Int16 _imax</div><div class="ttdef"><b>Definition:</b> <a href="AP__YawController_8h_source.html#l00047">AP_YawController.h:47</a></div></div>
<div class="ttc" id="structAP__Vehicle_1_1FixedWing_html_a88300cf5dda0e0f3cb5669c564756039"><div class="ttname"><a href="structAP__Vehicle_1_1FixedWing.html#a88300cf5dda0e0f3cb5669c564756039">AP_Vehicle::FixedWing::airspeed_min</a></div><div class="ttdeci">AP_Int16 airspeed_min</div><div class="ttdef"><b>Definition:</b> <a href="AP__Vehicle_8h_source.html#l00036">AP_Vehicle.h:36</a></div></div>
<div class="ttc" id="classAP__YawController_html_ae7c466406f0b764ff7a286b12c7ed692"><div class="ttname"><a href="classAP__YawController.html#ae7c466406f0b764ff7a286b12c7ed692">AP_YawController::_K_A</a></div><div class="ttdeci">AP_Float _K_A</div><div class="ttdef"><b>Definition:</b> <a href="AP__YawController_8h_source.html#l00043">AP_YawController.h:43</a></div></div>
<div class="ttc" id="classAP__YawController_html_a15e613276e64fdfbfe12af182664ff0a"><div class="ttname"><a href="classAP__YawController.html#a15e613276e64fdfbfe12af182664ff0a">AP_YawController::_last_t</a></div><div class="ttdeci">uint32_t _last_t</div><div class="ttdef"><b>Definition:</b> <a href="AP__YawController_8h_source.html#l00048">AP_YawController.h:48</a></div></div>
<div class="ttc" id="AP__Math_8h_html_ad525609d9dba6ffa556a0fbf08a3f9b4"><div class="ttname"><a href="AP__Math_8h.html#ad525609d9dba6ffa556a0fbf08a3f9b4">constrain_float</a></div><div class="ttdeci">float constrain_float(const float amt, const float low, const float high)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Math_8h_source.html#l00142">AP_Math.h:142</a></div></div>
<div class="ttc" id="classAP__YawController_html_a4946b771049ef64727419a6267ff8126"><div class="ttname"><a href="classAP__YawController.html#a4946b771049ef64727419a6267ff8126">AP_YawController::_integrator</a></div><div class="ttdeci">float _integrator</div><div class="ttdef"><b>Definition:</b> <a href="AP__YawController_8h_source.html#l00054">AP_YawController.h:54</a></div></div>
<div class="ttc" id="namespaceAP_html_ac571aa5a2ef71b7f4b4b2bfa09143fb9"><div class="ttname"><a href="namespaceAP.html#ac571aa5a2ef71b7f4b4b2bfa09143fb9">AP::ins</a></div><div class="ttdeci">AP_InertialSensor &amp; ins()</div><div class="ttdef"><b>Definition:</b> <a href="AP__InertialSensor_8cpp_source.html#l02076">AP_InertialSensor.cpp:2076</a></div></div>
<div class="ttc" id="classAP__AHRS_html_aba88eab2ab7bb6f525934fb06d30e780"><div class="ttname"><a href="classAP__AHRS.html#aba88eab2ab7bb6f525934fb06d30e780">AP_AHRS::airspeed_estimate</a></div><div class="ttdeci">virtual bool airspeed_estimate(float *airspeed_ret) const WARN_IF_UNUSED</div><div class="ttdef"><b>Definition:</b> <a href="AP__AHRS_8cpp_source.html#l00183">AP_AHRS.cpp:183</a></div></div>
<div class="ttc" id="structAP__Logger_1_1PID__Info_html_ae09c23e48617d6306d6e9129bb875460"><div class="ttname"><a href="structAP__Logger_1_1PID__Info.html#ae09c23e48617d6306d6e9129bb875460">AP_Logger::PID_Info::D</a></div><div class="ttdeci">float D</div><div class="ttdef"><b>Definition:</b> <a href="AP__Logger_8h_source.html#l00290">AP_Logger.h:290</a></div></div>
<div class="ttc" id="classAP__YawController_html_a2c952c6b3ca322f50a05d67109e4a8cc"><div class="ttname"><a href="classAP__YawController.html#a2c952c6b3ca322f50a05d67109e4a8cc">AP_YawController::_K_D</a></div><div class="ttdeci">AP_Float _K_D</div><div class="ttdef"><b>Definition:</b> <a href="AP__YawController_8h_source.html#l00045">AP_YawController.h:45</a></div></div>
<div class="ttc" id="AP__Param_8h_html_a0f9acb038a5283b964b862aea8cc5051"><div class="ttname"><a href="AP__Param_8h.html#a0f9acb038a5283b964b862aea8cc5051">AP_GROUPEND</a></div><div class="ttdeci">#define AP_GROUPEND</div><div class="ttdef"><b>Definition:</b> <a href="AP__Param_8h_source.html#l00118">AP_Param.h:118</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Jul 11 2019 14:17:37 for APM:Libraries by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
